const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-in9isEBO.js","assets/basedecoder-B2c5_Eok.js","assets/lzw-_aCqfs4w.js","assets/jpeg-CKYXsxFN.js","assets/deflate-B9JhHpvg.js","assets/pako.esm-Cram60i4.js","assets/packbits-DDWKfGV_.js","assets/lerc-BwN65Kk_.js","assets/webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function bE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var nf={exports:{}},Ba={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zm;function Cv(){if(Zm)return Ba;Zm=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var f in a)f!=="key"&&(o[f]=a[f])}else o=a;return a=o.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:o}}return Ba.Fragment=t,Ba.jsx=n,Ba.jsxs=n,Ba}var km;function Mv(){return km||(km=1,nf.exports=Cv()),nf.exports}var Mn=Mv(),rf={exports:{}},Et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m;function Dv(){if($m)return Et;$m=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function p(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function x(A,Y,Q){this.props=A,this.context=Y,this.refs=S,this.updater=Q||v}x.prototype.isReactComponent={},x.prototype.setState=function(A,Y){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,Y,"setState")},x.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function M(){}M.prototype=x.prototype;function b(A,Y,Q){this.props=A,this.context=Y,this.refs=S,this.updater=Q||v}var L=b.prototype=new M;L.constructor=b,T(L,x.prototype),L.isPureReactComponent=!0;var O=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function K(A,Y,Q,$,et,ut){return Q=ut.ref,{$$typeof:s,type:A,key:Y,ref:Q!==void 0?Q:null,props:ut}}function X(A,Y){return K(A.type,Y,void 0,void 0,void 0,A.props)}function Z(A){return typeof A=="object"&&A!==null&&A.$$typeof===s}function H(A){var Y={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(Q){return Y[Q]})}var rt=/\/+/g;function J(A,Y){return typeof A=="object"&&A!==null&&A.key!=null?H(""+A.key):Y.toString(36)}function st(){}function dt(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(st,st):(A.status="pending",A.then(function(Y){A.status==="pending"&&(A.status="fulfilled",A.value=Y)},function(Y){A.status==="pending"&&(A.status="rejected",A.reason=Y)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function nt(A,Y,Q,$,et){var ut=typeof A;(ut==="undefined"||ut==="boolean")&&(A=null);var at=!1;if(A===null)at=!0;else switch(ut){case"bigint":case"string":case"number":at=!0;break;case"object":switch(A.$$typeof){case s:case t:at=!0;break;case m:return at=A._init,nt(at(A._payload),Y,Q,$,et)}}if(at)return et=et(A),at=$===""?"."+J(A,0):$,O(et)?(Q="",at!=null&&(Q=at.replace(rt,"$&/")+"/"),nt(et,Y,Q,"",function($t){return $t})):et!=null&&(Z(et)&&(et=X(et,Q+(et.key==null||A&&A.key===et.key?"":(""+et.key).replace(rt,"$&/")+"/")+at)),Y.push(et)),1;at=0;var vt=$===""?".":$+":";if(O(A))for(var At=0;At<A.length;At++)$=A[At],ut=vt+J($,At),at+=nt($,Y,Q,ut,et);else if(At=p(A),typeof At=="function")for(A=At.call(A),At=0;!($=A.next()).done;)$=$.value,ut=vt+J($,At++),at+=nt($,Y,Q,ut,et);else if(ut==="object"){if(typeof A.then=="function")return nt(dt(A),Y,Q,$,et);throw Y=String(A),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return at}function P(A,Y,Q){if(A==null)return A;var $=[],et=0;return nt(A,$,"","",function(ut){return Y.call(Q,ut,et++)}),$}function k(A){if(A._status===-1){var Y=A._result;Y=Y(),Y.then(function(Q){(A._status===0||A._status===-1)&&(A._status=1,A._result=Q)},function(Q){(A._status===0||A._status===-1)&&(A._status=2,A._result=Q)}),A._status===-1&&(A._status=0,A._result=Y)}if(A._status===1)return A._result.default;throw A._result}var W=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function it(){}return Et.Children={map:P,forEach:function(A,Y,Q){P(A,function(){Y.apply(this,arguments)},Q)},count:function(A){var Y=0;return P(A,function(){Y++}),Y},toArray:function(A){return P(A,function(Y){return Y})||[]},only:function(A){if(!Z(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Et.Component=x,Et.Fragment=n,Et.Profiler=a,Et.PureComponent=b,Et.StrictMode=r,Et.Suspense=d,Et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Et.__COMPILER_RUNTIME={__proto__:null,c:function(A){return C.H.useMemoCache(A)}},Et.cache=function(A){return function(){return A.apply(null,arguments)}},Et.cloneElement=function(A,Y,Q){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var $=T({},A.props),et=A.key,ut=void 0;if(Y!=null)for(at in Y.ref!==void 0&&(ut=void 0),Y.key!==void 0&&(et=""+Y.key),Y)!F.call(Y,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&Y.ref===void 0||($[at]=Y[at]);var at=arguments.length-2;if(at===1)$.children=Q;else if(1<at){for(var vt=Array(at),At=0;At<at;At++)vt[At]=arguments[At+2];$.children=vt}return K(A.type,et,void 0,void 0,ut,$)},Et.createContext=function(A){return A={$$typeof:c,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},Et.createElement=function(A,Y,Q){var $,et={},ut=null;if(Y!=null)for($ in Y.key!==void 0&&(ut=""+Y.key),Y)F.call(Y,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(et[$]=Y[$]);var at=arguments.length-2;if(at===1)et.children=Q;else if(1<at){for(var vt=Array(at),At=0;At<at;At++)vt[At]=arguments[At+2];et.children=vt}if(A&&A.defaultProps)for($ in at=A.defaultProps,at)et[$]===void 0&&(et[$]=at[$]);return K(A,ut,void 0,void 0,null,et)},Et.createRef=function(){return{current:null}},Et.forwardRef=function(A){return{$$typeof:f,render:A}},Et.isValidElement=Z,Et.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:k}},Et.memo=function(A,Y){return{$$typeof:_,type:A,compare:Y===void 0?null:Y}},Et.startTransition=function(A){var Y=C.T,Q={};C.T=Q;try{var $=A(),et=C.S;et!==null&&et(Q,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(it,W)}catch(ut){W(ut)}finally{C.T=Y}},Et.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Et.use=function(A){return C.H.use(A)},Et.useActionState=function(A,Y,Q){return C.H.useActionState(A,Y,Q)},Et.useCallback=function(A,Y){return C.H.useCallback(A,Y)},Et.useContext=function(A){return C.H.useContext(A)},Et.useDebugValue=function(){},Et.useDeferredValue=function(A,Y){return C.H.useDeferredValue(A,Y)},Et.useEffect=function(A,Y,Q){var $=C.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(A,Y)},Et.useId=function(){return C.H.useId()},Et.useImperativeHandle=function(A,Y,Q){return C.H.useImperativeHandle(A,Y,Q)},Et.useInsertionEffect=function(A,Y){return C.H.useInsertionEffect(A,Y)},Et.useLayoutEffect=function(A,Y){return C.H.useLayoutEffect(A,Y)},Et.useMemo=function(A,Y){return C.H.useMemo(A,Y)},Et.useOptimistic=function(A,Y){return C.H.useOptimistic(A,Y)},Et.useReducer=function(A,Y,Q){return C.H.useReducer(A,Y,Q)},Et.useRef=function(A){return C.H.useRef(A)},Et.useState=function(A){return C.H.useState(A)},Et.useSyncExternalStore=function(A,Y,Q){return C.H.useSyncExternalStore(A,Y,Q)},Et.useTransition=function(){return C.H.useTransition()},Et.version="19.1.0",Et}var Qm;function sd(){return Qm||(Qm=1,rf.exports=Dv()),rf.exports}var ms=sd(),sf={exports:{}},Fa={},af={exports:{}},lf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function Ov(){return Wm||(Wm=1,function(s){function t(P,k){var W=P.length;P.push(k);t:for(;0<W;){var it=W-1>>>1,A=P[it];if(0<a(A,k))P[it]=k,P[W]=A,W=it;else break t}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var k=P[0],W=P.pop();if(W!==k){P[0]=W;t:for(var it=0,A=P.length,Y=A>>>1;it<Y;){var Q=2*(it+1)-1,$=P[Q],et=Q+1,ut=P[et];if(0>a($,W))et<A&&0>a(ut,$)?(P[it]=ut,P[et]=W,it=et):(P[it]=$,P[Q]=W,it=Q);else if(et<A&&0>a(ut,W))P[it]=ut,P[et]=W,it=et;else break t}}return k}function a(P,k){var W=P.sortIndex-k.sortIndex;return W!==0?W:P.id-k.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,f=c.now();s.unstable_now=function(){return c.now()-f}}var d=[],_=[],m=1,y=null,p=3,v=!1,T=!1,S=!1,x=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function O(P){for(var k=n(_);k!==null;){if(k.callback===null)r(_);else if(k.startTime<=P)r(_),k.sortIndex=k.expirationTime,t(d,k);else break;k=n(_)}}function C(P){if(S=!1,O(P),!T)if(n(d)!==null)T=!0,F||(F=!0,J());else{var k=n(_);k!==null&&nt(C,k.startTime-P)}}var F=!1,K=-1,X=5,Z=-1;function H(){return x?!0:!(s.unstable_now()-Z<X)}function rt(){if(x=!1,F){var P=s.unstable_now();Z=P;var k=!0;try{t:{T=!1,S&&(S=!1,b(K),K=-1),v=!0;var W=p;try{e:{for(O(P),y=n(d);y!==null&&!(y.expirationTime>P&&H());){var it=y.callback;if(typeof it=="function"){y.callback=null,p=y.priorityLevel;var A=it(y.expirationTime<=P);if(P=s.unstable_now(),typeof A=="function"){y.callback=A,O(P),k=!0;break e}y===n(d)&&r(d),O(P)}else r(d);y=n(d)}if(y!==null)k=!0;else{var Y=n(_);Y!==null&&nt(C,Y.startTime-P),k=!1}}break t}finally{y=null,p=W,v=!1}k=void 0}}finally{k?J():F=!1}}}var J;if(typeof L=="function")J=function(){L(rt)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,dt=st.port2;st.port1.onmessage=rt,J=function(){dt.postMessage(null)}}else J=function(){M(rt,0)};function nt(P,k){K=M(function(){P(s.unstable_now())},k)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return p},s.unstable_next=function(P){switch(p){case 1:case 2:case 3:var k=3;break;default:k=p}var W=p;p=k;try{return P()}finally{p=W}},s.unstable_requestPaint=function(){x=!0},s.unstable_runWithPriority=function(P,k){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var W=p;p=P;try{return k()}finally{p=W}},s.unstable_scheduleCallback=function(P,k,W){var it=s.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?it+W:it):W=it,P){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=W+A,P={id:m++,callback:k,priorityLevel:P,startTime:W,expirationTime:A,sortIndex:-1},W>it?(P.sortIndex=W,t(_,P),n(d)===null&&P===n(_)&&(S?(b(K),K=-1):S=!0,nt(C,W-it))):(P.sortIndex=A,t(d,P),T||v||(T=!0,F||(F=!0,J()))),P},s.unstable_shouldYield=H,s.unstable_wrapCallback=function(P){var k=p;return function(){var W=p;p=k;try{return P.apply(this,arguments)}finally{p=W}}}}(lf)),lf}var Jm;function Lv(){return Jm||(Jm=1,af.exports=Ov()),af.exports}var of={exports:{}},Re={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function Iv(){if(ty)return Re;ty=1;var s=sd();function t(d){var _="https://react.dev/errors/"+d;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)_+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,_,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:_,implementation:m}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,_){if(d==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Re.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Re.createPortal=function(d,_){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return o(d,_,null,m)},Re.flushSync=function(d){var _=c.T,m=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=_,r.p=m,r.d.f()}},Re.preconnect=function(d,_){typeof d=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,r.d.C(d,_))},Re.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Re.preinit=function(d,_){if(typeof d=="string"&&_&&typeof _.as=="string"){var m=_.as,y=f(m,_.crossOrigin),p=typeof _.integrity=="string"?_.integrity:void 0,v=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;m==="style"?r.d.S(d,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:y,integrity:p,fetchPriority:v}):m==="script"&&r.d.X(d,{crossOrigin:y,integrity:p,fetchPriority:v,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Re.preinitModule=function(d,_){if(typeof d=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var m=f(_.as,_.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&r.d.M(d)},Re.preload=function(d,_){if(typeof d=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var m=_.as,y=f(m,_.crossOrigin);r.d.L(d,m,{crossOrigin:y,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Re.preloadModule=function(d,_){if(typeof d=="string")if(_){var m=f(_.as,_.crossOrigin);r.d.m(d,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:m,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else r.d.m(d)},Re.requestFormReset=function(d){r.d.r(d)},Re.unstable_batchedUpdates=function(d,_){return d(_)},Re.useFormState=function(d,_,m){return c.H.useFormState(d,_,m)},Re.useFormStatus=function(){return c.H.useHostTransitionStatus()},Re.version="19.1.0",Re}var ey;function Nv(){if(ey)return of.exports;ey=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),of.exports=Iv(),of.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ny;function Uv(){if(ny)return Fa;ny=1;var s=Lv(),t=sd(),n=Nv();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function f(e){if(o(e)!==e)throw Error(r(188))}function d(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(r(188));return i!==e?null:e}for(var l=e,u=i;;){var h=l.return;if(h===null)break;var g=h.alternate;if(g===null){if(u=h.return,u!==null){l=u;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===l)return f(h),e;if(g===u)return f(h),i;g=g.sibling}throw Error(r(188))}if(l.return!==u.return)l=h,u=g;else{for(var E=!1,R=h.child;R;){if(R===l){E=!0,l=h,u=g;break}if(R===u){E=!0,u=h,l=g;break}R=R.sibling}if(!E){for(R=g.child;R;){if(R===l){E=!0,l=g,u=h;break}if(R===u){E=!0,u=g,l=h;break}R=R.sibling}if(!E)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?e:i}function _(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=_(e),i!==null)return i;e=e.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),L=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function J(e){return e===null||typeof e!="object"?null:(e=rt&&e[rt]||e["@@iterator"],typeof e=="function"?e:null)}var st=Symbol.for("react.client.reference");function dt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===st?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case F:return"SuspenseList";case Z:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case v:return"Portal";case L:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case O:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return i=e.displayName||null,i!==null?i:dt(e.type)||"Memo";case X:i=e._payload,e=e._init;try{return dt(e(i))}catch{}}return null}var nt=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},it=[],A=-1;function Y(e){return{current:e}}function Q(e){0>A||(e.current=it[A],it[A]=null,A--)}function $(e,i){A++,it[A]=e.current,e.current=i}var et=Y(null),ut=Y(null),at=Y(null),vt=Y(null);function At(e,i){switch($(at,i),$(ut,e),$(et,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Rm(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Rm(i),e=xm(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(et),$(et,e)}function $t(){Q(et),Q(ut),Q(at)}function te(e){e.memoizedState!==null&&$(vt,e);var i=et.current,l=xm(i,e.type);i!==l&&($(ut,e),$(et,l))}function Dn(e){ut.current===e&&(Q(et),Q(ut)),vt.current===e&&(Q(vt),Na._currentValue=W)}var Pi=Object.prototype.hasOwnProperty,ti=s.unstable_scheduleCallback,Bi=s.unstable_cancelCallback,We=s.unstable_shouldYield,Je=s.unstable_requestPaint,we=s.unstable_now,dr=s.unstable_getCurrentPriorityLevel,Xs=s.unstable_ImmediatePriority,gr=s.unstable_UserBlockingPriority,On=s.unstable_NormalPriority,ju=s.unstable_LowPriority,Ce=s.unstable_IdlePriority,cT=s.log,hT=s.unstable_setDisableYieldValue,Ys=null,Ye=null;function ei(e){if(typeof cT=="function"&&hT(e),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Ys,e)}catch{}}var He=Math.clz32?Math.clz32:gT,fT=Math.log,dT=Math.LN2;function gT(e){return e>>>=0,e===0?32:31-(fT(e)/dT|0)|0}var wl=256,Cl=4194304;function Fi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ml(e,i,l){var u=e.pendingLanes;if(u===0)return 0;var h=0,g=e.suspendedLanes,E=e.pingedLanes;e=e.warmLanes;var R=u&134217727;return R!==0?(u=R&~g,u!==0?h=Fi(u):(E&=R,E!==0?h=Fi(E):l||(l=R&~e,l!==0&&(h=Fi(l))))):(R=u&~g,R!==0?h=Fi(R):E!==0?h=Fi(E):l||(l=u&~e,l!==0&&(h=Fi(l)))),h===0?0:i!==0&&i!==h&&(i&g)===0&&(g=h&-h,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:h}function Hs(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function _T(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sg(){var e=wl;return wl<<=1,(wl&4194048)===0&&(wl=256),e}function ag(){var e=Cl;return Cl<<=1,(Cl&62914560)===0&&(Cl=4194304),e}function Vu(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function js(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function mT(e,i,l,u,h,g){var E=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var R=e.entanglements,w=e.expirationTimes,z=e.hiddenUpdates;for(l=E&~l;0<l;){var j=31-He(l),q=1<<j;R[j]=0,w[j]=-1;var G=z[j];if(G!==null)for(z[j]=null,j=0;j<G.length;j++){var B=G[j];B!==null&&(B.lane&=-536870913)}l&=~q}u!==0&&lg(e,u,0),g!==0&&h===0&&e.tag!==0&&(e.suspendedLanes|=g&~(E&~i))}function lg(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var u=31-He(i);e.entangledLanes|=i,e.entanglements[u]=e.entanglements[u]|1073741824|l&4194090}function og(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var u=31-He(l),h=1<<u;h&i|e[u]&i&&(e[u]|=i),l&=~h}}function Ku(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qu(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ug(){var e=k.p;return e!==0?e:(e=window.event,e===void 0?32:Ym(e.type))}function yT(e,i){var l=k.p;try{return k.p=e,i()}finally{k.p=l}}var ni=Math.random().toString(36).slice(2),Te="__reactFiber$"+ni,Ue="__reactProps$"+ni,_r="__reactContainer$"+ni,Zu="__reactEvents$"+ni,ET="__reactListeners$"+ni,pT="__reactHandles$"+ni,cg="__reactResources$"+ni,Vs="__reactMarker$"+ni;function ku(e){delete e[Te],delete e[Ue],delete e[Zu],delete e[ET],delete e[pT]}function mr(e){var i=e[Te];if(i)return i;for(var l=e.parentNode;l;){if(i=l[_r]||l[Te]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(e=wm(e);e!==null;){if(l=e[Te])return l;e=wm(e)}return i}e=l,l=e.parentNode}return null}function yr(e){if(e=e[Te]||e[_r]){var i=e.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return e}return null}function Ks(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Er(e){var i=e[cg];return i||(i=e[cg]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ue(e){e[Vs]=!0}var hg=new Set,fg={};function Xi(e,i){pr(e,i),pr(e+"Capture",i)}function pr(e,i){for(fg[e]=i,e=0;e<i.length;e++)hg.add(i[e])}var TT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dg={},gg={};function vT(e){return Pi.call(gg,e)?!0:Pi.call(dg,e)?!1:TT.test(e)?gg[e]=!0:(dg[e]=!0,!1)}function Dl(e,i,l){if(vT(i))if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+l)}}function Ol(e,i,l){if(l===null)e.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+l)}}function Ln(e,i,l,u){if(u===null)e.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(i,l,""+u)}}var $u,_g;function Tr(e){if($u===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);$u=i&&i[1]||"",_g=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$u+e+_g}var Qu=!1;function Wu(e,i){if(!e||Qu)return"";Qu=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var q=function(){throw Error()};if(Object.defineProperty(q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(q,[])}catch(B){var G=B}Reflect.construct(e,[],q)}else{try{q.call()}catch(B){G=B}e.call(q.prototype)}}else{try{throw Error()}catch(B){G=B}(q=e())&&typeof q.catch=="function"&&q.catch(function(){})}}catch(B){if(B&&G&&typeof B.stack=="string")return[B.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],R=g[1];if(E&&R){var w=E.split(`
`),z=R.split(`
`);for(h=u=0;u<w.length&&!w[u].includes("DetermineComponentFrameRoot");)u++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(u===w.length||h===z.length)for(u=w.length-1,h=z.length-1;1<=u&&0<=h&&w[u]!==z[h];)h--;for(;1<=u&&0<=h;u--,h--)if(w[u]!==z[h]){if(u!==1||h!==1)do if(u--,h--,0>h||w[u]!==z[h]){var j=`
`+w[u].replace(" at new "," at ");return e.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",e.displayName)),j}while(1<=u&&0<=h);break}}}finally{Qu=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?Tr(l):""}function RT(e){switch(e.tag){case 26:case 27:case 5:return Tr(e.type);case 16:return Tr("Lazy");case 13:return Tr("Suspense");case 19:return Tr("SuspenseList");case 0:case 15:return Wu(e.type,!1);case 11:return Wu(e.type.render,!1);case 1:return Wu(e.type,!0);case 31:return Tr("Activity");default:return""}}function mg(e){try{var i="";do i+=RT(e),e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function tn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yg(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function xT(e){var i=yg(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),u=""+e[i];if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,g=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return h.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Ll(e){e._valueTracker||(e._valueTracker=xT(e))}function Eg(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return e&&(u=yg(e)?e.checked?"true":"false":e.value),e=u,e!==l?(i.setValue(e),!0):!1}function Il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ST=/[\n"\\]/g;function en(e){return e.replace(ST,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ju(e,i,l,u,h,g,E,R){e.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.type=E:e.removeAttribute("type"),i!=null?E==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+tn(i)):e.value!==""+tn(i)&&(e.value=""+tn(i)):E!=="submit"&&E!=="reset"||e.removeAttribute("value"),i!=null?tc(e,E,tn(i)):l!=null?tc(e,E,tn(l)):u!=null&&e.removeAttribute("value"),h==null&&g!=null&&(e.defaultChecked=!!g),h!=null&&(e.checked=h&&typeof h!="function"&&typeof h!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?e.name=""+tn(R):e.removeAttribute("name")}function pg(e,i,l,u,h,g,E,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null))return;l=l!=null?""+tn(l):"",i=i!=null?""+tn(i):l,R||i===e.value||(e.value=i),e.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=R?e.checked:!!u,e.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(e.name=E)}function tc(e,i,l){i==="number"&&Il(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function vr(e,i,l,u){if(e=e.options,i){i={};for(var h=0;h<l.length;h++)i["$"+l[h]]=!0;for(l=0;l<e.length;l++)h=i.hasOwnProperty("$"+e[l].value),e[l].selected!==h&&(e[l].selected=h),h&&u&&(e[l].defaultSelected=!0)}else{for(l=""+tn(l),i=null,h=0;h<e.length;h++){if(e[h].value===l){e[h].selected=!0,u&&(e[h].defaultSelected=!0);return}i!==null||e[h].disabled||(i=e[h])}i!==null&&(i.selected=!0)}}function Tg(e,i,l){if(i!=null&&(i=""+tn(i),i!==e.value&&(e.value=i),l==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=l!=null?""+tn(l):""}function vg(e,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(r(92));if(nt(u)){if(1<u.length)throw Error(r(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=tn(i),e.defaultValue=l,u=e.textContent,u===l&&u!==""&&u!==null&&(e.value=u)}function Rr(e,i){if(i){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=i;return}}e.textContent=i}var bT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rg(e,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":u?e.setProperty(i,l):typeof l!="number"||l===0||bT.has(i)?i==="float"?e.cssFloat=l:e[i]=(""+l).trim():e[i]=l+"px"}function xg(e,i,l){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&l[h]!==u&&Rg(e,h,u)}else for(var g in i)i.hasOwnProperty(g)&&Rg(e,g,i[g])}function ec(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var AT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nl(e){return wT.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var nc=null;function ic(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xr=null,Sr=null;function Sg(e){var i=yr(e);if(i&&(e=i.stateNode)){var l=e[Ue]||null;t:switch(e=i.stateNode,i.type){case"input":if(Ju(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+en(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==e&&u.form===e.form){var h=u[Ue]||null;if(!h)throw Error(r(90));Ju(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===e.form&&Eg(u)}break t;case"textarea":Tg(e,l.value,l.defaultValue);break t;case"select":i=l.value,i!=null&&vr(e,!!l.multiple,i,!1)}}}var rc=!1;function bg(e,i,l){if(rc)return e(i,l);rc=!0;try{var u=e(i);return u}finally{if(rc=!1,(xr!==null||Sr!==null)&&(To(),xr&&(i=xr,e=Sr,Sr=xr=null,Sg(i),e)))for(i=0;i<e.length;i++)Sg(e[i])}}function qs(e,i){var l=e.stateNode;if(l===null)return null;var u=l[Ue]||null;if(u===null)return null;l=u[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break t;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(r(231,i,typeof l));return l}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sc=!1;if(In)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){sc=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{sc=!1}var ii=null,ac=null,Ul=null;function Ag(){if(Ul)return Ul;var e,i=ac,l=i.length,u,h="value"in ii?ii.value:ii.textContent,g=h.length;for(e=0;e<l&&i[e]===h[e];e++);var E=l-e;for(u=1;u<=E&&i[l-u]===h[g-u];u++);return Ul=h.slice(e,1<u?1-u:void 0)}function zl(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Gl(){return!0}function wg(){return!1}function ze(e){function i(l,u,h,g,E){this._reactName=l,this._targetInst=h,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(l=e[R],this[R]=l?l(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Gl:wg,this.isPropagationStopped=wg,this}return m(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Gl)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Gl)},persist:function(){},isPersistent:Gl}),i}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pl=ze(Yi),ks=m({},Yi,{view:0,detail:0}),CT=ze(ks),lc,oc,$s,Bl=m({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$s&&($s&&e.type==="mousemove"?(lc=e.screenX-$s.screenX,oc=e.screenY-$s.screenY):oc=lc=0,$s=e),lc)},movementY:function(e){return"movementY"in e?e.movementY:oc}}),Cg=ze(Bl),MT=m({},Bl,{dataTransfer:0}),DT=ze(MT),OT=m({},ks,{relatedTarget:0}),uc=ze(OT),LT=m({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),IT=ze(LT),NT=m({},Yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),UT=ze(NT),zT=m({},Yi,{data:0}),Mg=ze(zT),GT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FT(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=BT[e])?!!i[e]:!1}function cc(){return FT}var XT=m({},ks,{key:function(e){if(e.key){var i=GT[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=zl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(e){return e.type==="keypress"?zl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),YT=ze(XT),HT=m({},Bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=ze(HT),jT=m({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),VT=ze(jT),KT=m({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),qT=ze(KT),ZT=m({},Bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kT=ze(ZT),$T=m({},Yi,{newState:0,oldState:0}),QT=ze($T),WT=[9,13,27,32],hc=In&&"CompositionEvent"in window,Qs=null;In&&"documentMode"in document&&(Qs=document.documentMode);var JT=In&&"TextEvent"in window&&!Qs,Og=In&&(!hc||Qs&&8<Qs&&11>=Qs),Lg=" ",Ig=!1;function Ng(e,i){switch(e){case"keyup":return WT.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ug(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var br=!1;function t1(e,i){switch(e){case"compositionend":return Ug(i);case"keypress":return i.which!==32?null:(Ig=!0,Lg);case"textInput":return e=i.data,e===Lg&&Ig?null:e;default:return null}}function e1(e,i){if(br)return e==="compositionend"||!hc&&Ng(e,i)?(e=Ag(),Ul=ac=ii=null,br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Og&&i.locale!=="ko"?null:i.data;default:return null}}var n1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!n1[e.type]:i==="textarea"}function Gg(e,i,l,u){xr?Sr?Sr.push(u):Sr=[u]:xr=u,i=Ao(i,"onChange"),0<i.length&&(l=new Pl("onChange","change",null,l,u),e.push({event:l,listeners:i}))}var Ws=null,Js=null;function i1(e){ym(e,0)}function Fl(e){var i=Ks(e);if(Eg(i))return e}function Pg(e,i){if(e==="change")return i}var Bg=!1;if(In){var fc;if(In){var dc="oninput"in document;if(!dc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),dc=typeof Fg.oninput=="function"}fc=dc}else fc=!1;Bg=fc&&(!document.documentMode||9<document.documentMode)}function Xg(){Ws&&(Ws.detachEvent("onpropertychange",Yg),Js=Ws=null)}function Yg(e){if(e.propertyName==="value"&&Fl(Js)){var i=[];Gg(i,Js,e,ic(e)),bg(i1,i)}}function r1(e,i,l){e==="focusin"?(Xg(),Ws=i,Js=l,Ws.attachEvent("onpropertychange",Yg)):e==="focusout"&&Xg()}function s1(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fl(Js)}function a1(e,i){if(e==="click")return Fl(i)}function l1(e,i){if(e==="input"||e==="change")return Fl(i)}function o1(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var je=typeof Object.is=="function"?Object.is:o1;function ta(e,i){if(je(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var h=l[u];if(!Pi.call(i,h)||!je(e[h],i[h]))return!1}return!0}function Hg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jg(e,i){var l=Hg(e);e=0;for(var u;l;){if(l.nodeType===3){if(u=e+l.textContent.length,e<=i&&u>=i)return{node:l,offset:i-e};e=u}t:{for(;l;){if(l.nextSibling){l=l.nextSibling;break t}l=l.parentNode}l=void 0}l=Hg(l)}}function Vg(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Vg(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Kg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Il(e.document);i instanceof e.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)e=i.contentWindow;else break;i=Il(e.document)}return i}function gc(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var u1=In&&"documentMode"in document&&11>=document.documentMode,Ar=null,_c=null,ea=null,mc=!1;function qg(e,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;mc||Ar==null||Ar!==Il(u)||(u=Ar,"selectionStart"in u&&gc(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ea&&ta(ea,u)||(ea=u,u=Ao(_c,"onSelect"),0<u.length&&(i=new Pl("onSelect","select",null,i,l),e.push({event:i,listeners:u}),i.target=Ar)))}function Hi(e,i){var l={};return l[e.toLowerCase()]=i.toLowerCase(),l["Webkit"+e]="webkit"+i,l["Moz"+e]="moz"+i,l}var wr={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},yc={},Zg={};In&&(Zg=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);function ji(e){if(yc[e])return yc[e];if(!wr[e])return e;var i=wr[e],l;for(l in i)if(i.hasOwnProperty(l)&&l in Zg)return yc[e]=i[l];return e}var kg=ji("animationend"),$g=ji("animationiteration"),Qg=ji("animationstart"),c1=ji("transitionrun"),h1=ji("transitionstart"),f1=ji("transitioncancel"),Wg=ji("transitionend"),Jg=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function gn(e,i){Jg.set(e,i),Xi(i,[e])}var t0=new WeakMap;function nn(e,i){if(typeof e=="object"&&e!==null){var l=t0.get(e);return l!==void 0?l:(i={value:e,source:i,stack:mg(i)},t0.set(e,i),i)}return{value:e,source:i,stack:mg(i)}}var rn=[],Cr=0,pc=0;function Xl(){for(var e=Cr,i=pc=Cr=0;i<e;){var l=rn[i];rn[i++]=null;var u=rn[i];rn[i++]=null;var h=rn[i];rn[i++]=null;var g=rn[i];if(rn[i++]=null,u!==null&&h!==null){var E=u.pending;E===null?h.next=h:(h.next=E.next,E.next=h),u.pending=h}g!==0&&e0(l,h,g)}}function Yl(e,i,l,u){rn[Cr++]=e,rn[Cr++]=i,rn[Cr++]=l,rn[Cr++]=u,pc|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function Tc(e,i,l,u){return Yl(e,i,l,u),Hl(e)}function Mr(e,i){return Yl(e,null,null,i),Hl(e)}function e0(e,i,l){e.lanes|=l;var u=e.alternate;u!==null&&(u.lanes|=l);for(var h=!1,g=e.return;g!==null;)g.childLanes|=l,u=g.alternate,u!==null&&(u.childLanes|=l),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(h=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,h&&i!==null&&(h=31-He(l),e=g.hiddenUpdates,u=e[h],u===null?e[h]=[i]:u.push(i),i.lane=l|536870912),g):null}function Hl(e){if(50<Aa)throw Aa=0,Ah=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Dr={};function d1(e,i,l,u){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,i,l,u){return new d1(e,i,l,u)}function vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nn(e,i){var l=e.alternate;return l===null?(l=Ve(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function n0(e,i){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function jl(e,i,l,u,h,g){var E=0;if(u=e,typeof e=="function")vc(e)&&(E=1);else if(typeof e=="string")E=_v(e,l,et.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Z:return e=Ve(31,l,i,h),e.elementType=Z,e.lanes=g,e;case T:return Vi(l.children,h,g,i);case S:E=8,h|=24;break;case x:return e=Ve(12,l,i,h|2),e.elementType=x,e.lanes=g,e;case C:return e=Ve(13,l,i,h),e.elementType=C,e.lanes=g,e;case F:return e=Ve(19,l,i,h),e.elementType=F,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M:case L:E=10;break t;case b:E=9;break t;case O:E=11;break t;case K:E=14;break t;case X:E=16,u=null;break t}E=29,l=Error(r(130,e===null?"null":typeof e,"")),u=null}return i=Ve(E,l,i,h),i.elementType=e,i.type=u,i.lanes=g,i}function Vi(e,i,l,u){return e=Ve(7,e,u,i),e.lanes=l,e}function Rc(e,i,l){return e=Ve(6,e,null,i),e.lanes=l,e}function xc(e,i,l){return i=Ve(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Or=[],Lr=0,Vl=null,Kl=0,sn=[],an=0,Ki=null,Un=1,zn="";function qi(e,i){Or[Lr++]=Kl,Or[Lr++]=Vl,Vl=e,Kl=i}function i0(e,i,l){sn[an++]=Un,sn[an++]=zn,sn[an++]=Ki,Ki=e;var u=Un;e=zn;var h=32-He(u)-1;u&=~(1<<h),l+=1;var g=32-He(i)+h;if(30<g){var E=h-h%5;g=(u&(1<<E)-1).toString(32),u>>=E,h-=E,Un=1<<32-He(i)+h|l<<h|u,zn=g+e}else Un=1<<g|l<<h|u,zn=e}function Sc(e){e.return!==null&&(qi(e,1),i0(e,1,0))}function bc(e){for(;e===Vl;)Vl=Or[--Lr],Or[Lr]=null,Kl=Or[--Lr],Or[Lr]=null;for(;e===Ki;)Ki=sn[--an],sn[an]=null,zn=sn[--an],sn[an]=null,Un=sn[--an],sn[an]=null}var Me=null,Qt=null,It=!1,Zi=null,Tn=!1,Ac=Error(r(519));function ki(e){var i=Error(r(418,""));throw ra(nn(i,e)),Ac}function r0(e){var i=e.stateNode,l=e.type,u=e.memoizedProps;switch(i[Te]=e,i[Ue]=u,l){case"dialog":bt("cancel",i),bt("close",i);break;case"iframe":case"object":case"embed":bt("load",i);break;case"video":case"audio":for(l=0;l<Ca.length;l++)bt(Ca[l],i);break;case"source":bt("error",i);break;case"img":case"image":case"link":bt("error",i),bt("load",i);break;case"details":bt("toggle",i);break;case"input":bt("invalid",i),pg(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ll(i);break;case"select":bt("invalid",i);break;case"textarea":bt("invalid",i),vg(i,u.value,u.defaultValue,u.children),Ll(i)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||vm(i.textContent,l)?(u.popover!=null&&(bt("beforetoggle",i),bt("toggle",i)),u.onScroll!=null&&bt("scroll",i),u.onScrollEnd!=null&&bt("scrollend",i),u.onClick!=null&&(i.onclick=wo),i=!0):i=!1,i||ki(e)}function s0(e){for(Me=e.return;Me;)switch(Me.tag){case 5:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:Me=Me.return}}function na(e){if(e!==Me)return!1;if(!It)return s0(e),It=!0,!1;var i=e.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Yh(e.type,e.memoizedProps)),l=!l),l&&Qt&&ki(e),s0(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));t:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8)if(l=e.data,l==="/$"){if(i===0){Qt=mn(e.nextSibling);break t}i--}else l!=="$"&&l!=="$!"&&l!=="$?"||i++;e=e.nextSibling}Qt=null}}else i===27?(i=Qt,pi(e.type)?(e=Kh,Kh=null,Qt=e):Qt=i):Qt=Me?mn(e.stateNode.nextSibling):null;return!0}function ia(){Qt=Me=null,It=!1}function a0(){var e=Zi;return e!==null&&(Be===null?Be=e:Be.push.apply(Be,e),Zi=null),e}function ra(e){Zi===null?Zi=[e]:Zi.push(e)}var wc=Y(null),$i=null,Gn=null;function ri(e,i,l){$(wc,i._currentValue),i._currentValue=l}function Pn(e){e._currentValue=wc.current,Q(wc)}function Cc(e,i,l){for(;e!==null;){var u=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),e===l)break;e=e.return}}function Mc(e,i,l,u){var h=e.child;for(h!==null&&(h.return=e);h!==null;){var g=h.dependencies;if(g!==null){var E=h.child;g=g.firstContext;t:for(;g!==null;){var R=g;g=h;for(var w=0;w<i.length;w++)if(R.context===i[w]){g.lanes|=l,R=g.alternate,R!==null&&(R.lanes|=l),Cc(g.return,l,e),u||(E=null);break t}g=R.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=l,g=E.alternate,g!==null&&(g.lanes|=l),Cc(E,l,e),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===e){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function sa(e,i,l,u){e=null;for(var h=i,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var R=h.type;je(h.pendingProps.value,E.value)||(e!==null?e.push(R):e=[R])}}else if(h===vt.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(e!==null?e.push(Na):e=[Na])}h=h.return}e!==null&&Mc(i,e,l,u),i.flags|=262144}function ql(e){for(e=e.firstContext;e!==null;){if(!je(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qi(e){$i=e,Gn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ve(e){return l0($i,e)}function Zl(e,i){return $i===null&&Qi(e),l0(e,i)}function l0(e,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Gn===null){if(e===null)throw Error(r(308));Gn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Gn=Gn.next=i;return l}var g1=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,u){e.push(u)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},_1=s.unstable_scheduleCallback,m1=s.unstable_NormalPriority,ae={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new g1,data:new Map,refCount:0}}function aa(e){e.refCount--,e.refCount===0&&_1(m1,function(){e.controller.abort()})}var la=null,Oc=0,Ir=0,Nr=null;function y1(e,i){if(la===null){var l=la=[];Oc=0,Ir=Ih(),Nr={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Oc++,i.then(o0,o0),i}function o0(){if(--Oc===0&&la!==null){Nr!==null&&(Nr.status="fulfilled");var e=la;la=null,Ir=0,Nr=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function E1(e,i){var l=[],u={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return e.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<l.length;h++)(0,l[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),u}var u0=P.S;P.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&y1(e,i),u0!==null&&u0(e,i)};var Wi=Y(null);function Lc(){var e=Wi.current;return e!==null?e:Vt.pooledCache}function kl(e,i){i===null?$(Wi,Wi.current):$(Wi,i.pool)}function c0(){var e=Lc();return e===null?null:{parent:ae._currentValue,pool:e}}var oa=Error(r(460)),h0=Error(r(474)),$l=Error(r(542)),Ic={then:function(){}};function f0(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ql(){}function d0(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(Ql,Ql),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,_0(e),e;default:if(typeof i.status=="string")i.then(Ql,Ql);else{if(e=Vt,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,_0(e),e}throw ua=i,oa}}var ua=null;function g0(){if(ua===null)throw Error(r(459));var e=ua;return ua=null,e}function _0(e){if(e===oa||e===$l)throw Error(r(483))}var si=!1;function Nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ai(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function li(e,i,l){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(Gt&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=Hl(e),e0(e,null,l),i}return Yl(e,u,i,l),Hl(e)}function ca(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=e.pendingLanes,l|=u,i.lanes=l,og(e,l)}}function zc(e,i){var l=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var h=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?h=g=E:g=g.next=E,l=l.next}while(l!==null);g===null?h=g=i:g=g.next=i}else h=g=i;l={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}var Gc=!1;function ha(){if(Gc){var e=Nr;if(e!==null)throw e}}function fa(e,i,l,u){Gc=!1;var h=e.updateQueue;si=!1;var g=h.firstBaseUpdate,E=h.lastBaseUpdate,R=h.shared.pending;if(R!==null){h.shared.pending=null;var w=R,z=w.next;w.next=null,E===null?g=z:E.next=z,E=w;var j=e.alternate;j!==null&&(j=j.updateQueue,R=j.lastBaseUpdate,R!==E&&(R===null?j.firstBaseUpdate=z:R.next=z,j.lastBaseUpdate=w))}if(g!==null){var q=h.baseState;E=0,j=z=w=null,R=g;do{var G=R.lane&-536870913,B=G!==R.lane;if(B?(Ct&G)===G:(u&G)===G){G!==0&&G===Ir&&(Gc=!0),j!==null&&(j=j.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var ft=e,ct=R;G=i;var Xt=l;switch(ct.tag){case 1:if(ft=ct.payload,typeof ft=="function"){q=ft.call(Xt,q,G);break t}q=ft;break t;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=ct.payload,G=typeof ft=="function"?ft.call(Xt,q,G):ft,G==null)break t;q=m({},q,G);break t;case 2:si=!0}}G=R.callback,G!==null&&(e.flags|=64,B&&(e.flags|=8192),B=h.callbacks,B===null?h.callbacks=[G]:B.push(G))}else B={lane:G,tag:R.tag,payload:R.payload,callback:R.callback,next:null},j===null?(z=j=B,w=q):j=j.next=B,E|=G;if(R=R.next,R===null){if(R=h.shared.pending,R===null)break;B=R,R=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);j===null&&(w=q),h.baseState=w,h.firstBaseUpdate=z,h.lastBaseUpdate=j,g===null&&(h.shared.lanes=0),_i|=E,e.lanes=E,e.memoizedState=q}}function m0(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function y0(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)m0(l[e],i)}var Ur=Y(null),Wl=Y(0);function E0(e,i){e=Vn,$(Wl,e),$(Ur,i),Vn=e|i.baseLanes}function Pc(){$(Wl,Vn),$(Ur,Ur.current)}function Bc(){Vn=Wl.current,Q(Ur),Q(Wl)}var oi=0,Rt=null,Bt=null,re=null,Jl=!1,zr=!1,Ji=!1,to=0,da=0,Gr=null,p1=0;function ee(){throw Error(r(321))}function Fc(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!je(e[l],i[l]))return!1;return!0}function Xc(e,i,l,u,h,g){return oi=g,Rt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=e===null||e.memoizedState===null?e_:n_,Ji=!1,g=l(u,h),Ji=!1,zr&&(g=T0(i,l,u,h)),p0(e),g}function p0(e){P.H=ao;var i=Bt!==null&&Bt.next!==null;if(oi=0,re=Bt=Rt=null,Jl=!1,da=0,Gr=null,i)throw Error(r(300));e===null||ce||(e=e.dependencies,e!==null&&ql(e)&&(ce=!0))}function T0(e,i,l,u){Rt=e;var h=0;do{if(zr&&(Gr=null),da=0,zr=!1,25<=h)throw Error(r(301));if(h+=1,re=Bt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=A1,g=i(l,u)}while(zr);return g}function T1(){var e=P.H,i=e.useState()[0];return i=typeof i.then=="function"?ga(i):i,e=e.useState()[0],(Bt!==null?Bt.memoizedState:null)!==e&&(Rt.flags|=1024),i}function Yc(){var e=to!==0;return to=0,e}function Hc(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function jc(e){if(Jl){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Jl=!1}oi=0,re=Bt=Rt=null,zr=!1,da=to=0,Gr=null}function Ge(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return re===null?Rt.memoizedState=re=e:re=re.next=e,re}function se(){if(Bt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var i=re===null?Rt.memoizedState:re.next;if(i!==null)re=i,Bt=e;else{if(e===null)throw Rt.alternate===null?Error(r(467)):Error(r(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},re===null?Rt.memoizedState=re=e:re=re.next=e}return re}function Vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ga(e){var i=da;return da+=1,Gr===null&&(Gr=[]),e=d0(Gr,e,i),i=Rt,(re===null?i.memoizedState:re.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?e_:n_),e}function eo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ga(e);if(e.$$typeof===L)return ve(e)}throw Error(r(438,String(e)))}function Kc(e){var i=null,l=Rt.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=Rt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Vc(),Rt.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),u=0;u<e;u++)l[u]=H;return i.index++,l}function Bn(e,i){return typeof i=="function"?i(e):i}function no(e){var i=se();return qc(i,Bt,e)}function qc(e,i,l){var u=e.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var h=e.baseQueue,g=u.pending;if(g!==null){if(h!==null){var E=h.next;h.next=g.next,g.next=E}i.baseQueue=h=g,u.pending=null}if(g=e.baseState,h===null)e.memoizedState=g;else{i=h.next;var R=E=null,w=null,z=i,j=!1;do{var q=z.lane&-536870913;if(q!==z.lane?(Ct&q)===q:(oi&q)===q){var G=z.revertLane;if(G===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),q===Ir&&(j=!0);else if((oi&G)===G){z=z.next,G===Ir&&(j=!0);continue}else q={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},w===null?(R=w=q,E=g):w=w.next=q,Rt.lanes|=G,_i|=G;q=z.action,Ji&&l(g,q),g=z.hasEagerState?z.eagerState:l(g,q)}else G={lane:q,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},w===null?(R=w=G,E=g):w=w.next=G,Rt.lanes|=q,_i|=q;z=z.next}while(z!==null&&z!==i);if(w===null?E=g:w.next=R,!je(g,e.memoizedState)&&(ce=!0,j&&(l=Nr,l!==null)))throw l;e.memoizedState=g,e.baseState=E,e.baseQueue=w,u.lastRenderedState=g}return h===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Zc(e){var i=se(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=e;var u=l.dispatch,h=l.pending,g=i.memoizedState;if(h!==null){l.pending=null;var E=h=h.next;do g=e(g,E.action),E=E.next;while(E!==h);je(g,i.memoizedState)||(ce=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,u]}function v0(e,i,l){var u=Rt,h=se(),g=It;if(g){if(l===void 0)throw Error(r(407));l=l()}else l=i();var E=!je((Bt||h).memoizedState,l);E&&(h.memoizedState=l,ce=!0),h=h.queue;var R=S0.bind(null,u,h,e);if(_a(2048,8,R,[e]),h.getSnapshot!==i||E||re!==null&&re.memoizedState.tag&1){if(u.flags|=2048,Pr(9,io(),x0.bind(null,u,h,l,i),null),Vt===null)throw Error(r(349));g||(oi&124)!==0||R0(u,i,l)}return l}function R0(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=Rt.updateQueue,i===null?(i=Vc(),Rt.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function x0(e,i,l,u){i.value=l,i.getSnapshot=u,b0(i)&&A0(e)}function S0(e,i,l){return l(function(){b0(i)&&A0(e)})}function b0(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!je(e,l)}catch{return!0}}function A0(e){var i=Mr(e,2);i!==null&&$e(i,e,2)}function kc(e){var i=Ge();if(typeof e=="function"){var l=e;if(e=l(),Ji){ei(!0);try{l()}finally{ei(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:e},i}function w0(e,i,l,u){return e.baseState=l,qc(e,Bt,typeof u=="function"?u:Bn)}function v1(e,i,l,u,h){if(so(e))throw Error(r(485));if(e=i.action,e!==null){var g={payload:h,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};P.T!==null?l(!0):g.isTransition=!1,u(g),l=i.pending,l===null?(g.next=i.pending=g,C0(i,g)):(g.next=l.next,i.pending=l.next=g)}}function C0(e,i){var l=i.action,u=i.payload,h=e.state;if(i.isTransition){var g=P.T,E={};P.T=E;try{var R=l(h,u),w=P.S;w!==null&&w(E,R),M0(e,i,R)}catch(z){$c(e,i,z)}finally{P.T=g}}else try{g=l(h,u),M0(e,i,g)}catch(z){$c(e,i,z)}}function M0(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){D0(e,i,u)},function(u){return $c(e,i,u)}):D0(e,i,l)}function D0(e,i,l){i.status="fulfilled",i.value=l,O0(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,C0(e,l)))}function $c(e,i,l){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,O0(i),i=i.next;while(i!==u)}e.action=null}function O0(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function L0(e,i){return i}function I0(e,i){if(It){var l=Vt.formState;if(l!==null){t:{var u=Rt;if(It){if(Qt){e:{for(var h=Qt,g=Tn;h.nodeType!==8;){if(!g){h=null;break e}if(h=mn(h.nextSibling),h===null){h=null;break e}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Qt=mn(h.nextSibling),u=h.data==="F!";break t}}ki(u)}u=!1}u&&(i=l[0])}}return l=Ge(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L0,lastRenderedState:i},l.queue=u,l=W0.bind(null,Rt,u),u.dispatch=l,u=kc(!1),g=eh.bind(null,Rt,!1,u.queue),u=Ge(),h={state:i,dispatch:null,action:e,pending:null},u.queue=h,l=v1.bind(null,Rt,h,g,l),h.dispatch=l,u.memoizedState=e,[i,l,!1]}function N0(e){var i=se();return U0(i,Bt,e)}function U0(e,i,l){if(i=qc(e,i,L0)[0],e=no(Bn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=ga(i)}catch(E){throw E===oa?$l:E}else u=i;i=se();var h=i.queue,g=h.dispatch;return l!==i.memoizedState&&(Rt.flags|=2048,Pr(9,io(),R1.bind(null,h,l),null)),[u,g,e]}function R1(e,i){e.action=i}function z0(e){var i=se(),l=Bt;if(l!==null)return U0(i,l,e);se(),i=i.memoizedState,l=se();var u=l.queue.dispatch;return l.memoizedState=e,[i,u,!1]}function Pr(e,i,l,u){return e={tag:e,create:l,deps:u,inst:i,next:null},i=Rt.updateQueue,i===null&&(i=Vc(),Rt.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(u=l.next,l.next=e,e.next=u,i.lastEffect=e),e}function io(){return{destroy:void 0,resource:void 0}}function G0(){return se().memoizedState}function ro(e,i,l,u){var h=Ge();u=u===void 0?null:u,Rt.flags|=e,h.memoizedState=Pr(1|i,io(),l,u)}function _a(e,i,l,u){var h=se();u=u===void 0?null:u;var g=h.memoizedState.inst;Bt!==null&&u!==null&&Fc(u,Bt.memoizedState.deps)?h.memoizedState=Pr(i,g,l,u):(Rt.flags|=e,h.memoizedState=Pr(1|i,g,l,u))}function P0(e,i){ro(8390656,8,e,i)}function B0(e,i){_a(2048,8,e,i)}function F0(e,i){return _a(4,2,e,i)}function X0(e,i){return _a(4,4,e,i)}function Y0(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function H0(e,i,l){l=l!=null?l.concat([e]):null,_a(4,4,Y0.bind(null,i,e),l)}function Qc(){}function j0(e,i){var l=se();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Fc(i,u[1])?u[0]:(l.memoizedState=[e,i],e)}function V0(e,i){var l=se();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Fc(i,u[1]))return u[0];if(u=e(),Ji){ei(!0);try{e()}finally{ei(!1)}}return l.memoizedState=[u,i],u}function Wc(e,i,l){return l===void 0||(oi&1073741824)!==0?e.memoizedState=i:(e.memoizedState=l,e=Z_(),Rt.lanes|=e,_i|=e,l)}function K0(e,i,l,u){return je(l,i)?l:Ur.current!==null?(e=Wc(e,l,u),je(e,i)||(ce=!0),e):(oi&42)===0?(ce=!0,e.memoizedState=l):(e=Z_(),Rt.lanes|=e,_i|=e,i)}function q0(e,i,l,u,h){var g=k.p;k.p=g!==0&&8>g?g:8;var E=P.T,R={};P.T=R,eh(e,!1,i,l);try{var w=h(),z=P.S;if(z!==null&&z(R,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var j=E1(w,u);ma(e,i,j,ke(e))}else ma(e,i,u,ke(e))}catch(q){ma(e,i,{then:function(){},status:"rejected",reason:q},ke())}finally{k.p=g,P.T=E}}function x1(){}function Jc(e,i,l,u){if(e.tag!==5)throw Error(r(476));var h=Z0(e).queue;q0(e,h,i,W,l===null?x1:function(){return k0(e),l(u)})}function Z0(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:W},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function k0(e){var i=Z0(e).next.queue;ma(e,i,{},ke())}function th(){return ve(Na)}function $0(){return se().memoizedState}function Q0(){return se().memoizedState}function S1(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=ke();e=ai(l);var u=li(i,e,l);u!==null&&($e(u,i,l),ca(u,i,l)),i={cache:Dc()},e.payload=i;return}i=i.return}}function b1(e,i,l){var u=ke();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},so(e)?J0(i,l):(l=Tc(e,i,l,u),l!==null&&($e(l,e,u),t_(l,i,u)))}function W0(e,i,l){var u=ke();ma(e,i,l,u)}function ma(e,i,l,u){var h={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(so(e))J0(i,h);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var E=i.lastRenderedState,R=g(E,l);if(h.hasEagerState=!0,h.eagerState=R,je(R,E))return Yl(e,i,h,0),Vt===null&&Xl(),!1}catch{}finally{}if(l=Tc(e,i,h,u),l!==null)return $e(l,e,u),t_(l,i,u),!0}return!1}function eh(e,i,l,u){if(u={lane:2,revertLane:Ih(),action:u,hasEagerState:!1,eagerState:null,next:null},so(e)){if(i)throw Error(r(479))}else i=Tc(e,l,u,2),i!==null&&$e(i,e,2)}function so(e){var i=e.alternate;return e===Rt||i!==null&&i===Rt}function J0(e,i){zr=Jl=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function t_(e,i,l){if((l&4194048)!==0){var u=i.lanes;u&=e.pendingLanes,l|=u,i.lanes=l,og(e,l)}}var ao={readContext:ve,use:eo,useCallback:ee,useContext:ee,useEffect:ee,useImperativeHandle:ee,useLayoutEffect:ee,useInsertionEffect:ee,useMemo:ee,useReducer:ee,useRef:ee,useState:ee,useDebugValue:ee,useDeferredValue:ee,useTransition:ee,useSyncExternalStore:ee,useId:ee,useHostTransitionStatus:ee,useFormState:ee,useActionState:ee,useOptimistic:ee,useMemoCache:ee,useCacheRefresh:ee},e_={readContext:ve,use:eo,useCallback:function(e,i){return Ge().memoizedState=[e,i===void 0?null:i],e},useContext:ve,useEffect:P0,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,ro(4194308,4,Y0.bind(null,i,e),l)},useLayoutEffect:function(e,i){return ro(4194308,4,e,i)},useInsertionEffect:function(e,i){ro(4,2,e,i)},useMemo:function(e,i){var l=Ge();i=i===void 0?null:i;var u=e();if(Ji){ei(!0);try{e()}finally{ei(!1)}}return l.memoizedState=[u,i],u},useReducer:function(e,i,l){var u=Ge();if(l!==void 0){var h=l(i);if(Ji){ei(!0);try{l(i)}finally{ei(!1)}}}else h=i;return u.memoizedState=u.baseState=h,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:h},u.queue=e,e=e.dispatch=b1.bind(null,Rt,e),[u.memoizedState,e]},useRef:function(e){var i=Ge();return e={current:e},i.memoizedState=e},useState:function(e){e=kc(e);var i=e.queue,l=W0.bind(null,Rt,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:Qc,useDeferredValue:function(e,i){var l=Ge();return Wc(l,e,i)},useTransition:function(){var e=kc(!1);return e=q0.bind(null,Rt,e.queue,!0,!1),Ge().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var u=Rt,h=Ge();if(It){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),Vt===null)throw Error(r(349));(Ct&124)!==0||R0(u,i,l)}h.memoizedState=l;var g={value:l,getSnapshot:i};return h.queue=g,P0(S0.bind(null,u,g,e),[e]),u.flags|=2048,Pr(9,io(),x0.bind(null,u,g,l,i),null),l},useId:function(){var e=Ge(),i=Vt.identifierPrefix;if(It){var l=zn,u=Un;l=(u&~(1<<32-He(u)-1)).toString(32)+l,i=""+i+"R"+l,l=to++,0<l&&(i+="H"+l.toString(32)),i+=""}else l=p1++,i=""+i+"r"+l.toString(32)+"";return e.memoizedState=i},useHostTransitionStatus:th,useFormState:I0,useActionState:I0,useOptimistic:function(e){var i=Ge();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=eh.bind(null,Rt,!0,l),l.dispatch=i,[e,i]},useMemoCache:Kc,useCacheRefresh:function(){return Ge().memoizedState=S1.bind(null,Rt)}},n_={readContext:ve,use:eo,useCallback:j0,useContext:ve,useEffect:B0,useImperativeHandle:H0,useInsertionEffect:F0,useLayoutEffect:X0,useMemo:V0,useReducer:no,useRef:G0,useState:function(){return no(Bn)},useDebugValue:Qc,useDeferredValue:function(e,i){var l=se();return K0(l,Bt.memoizedState,e,i)},useTransition:function(){var e=no(Bn)[0],i=se().memoizedState;return[typeof e=="boolean"?e:ga(e),i]},useSyncExternalStore:v0,useId:$0,useHostTransitionStatus:th,useFormState:N0,useActionState:N0,useOptimistic:function(e,i){var l=se();return w0(l,Bt,e,i)},useMemoCache:Kc,useCacheRefresh:Q0},A1={readContext:ve,use:eo,useCallback:j0,useContext:ve,useEffect:B0,useImperativeHandle:H0,useInsertionEffect:F0,useLayoutEffect:X0,useMemo:V0,useReducer:Zc,useRef:G0,useState:function(){return Zc(Bn)},useDebugValue:Qc,useDeferredValue:function(e,i){var l=se();return Bt===null?Wc(l,e,i):K0(l,Bt.memoizedState,e,i)},useTransition:function(){var e=Zc(Bn)[0],i=se().memoizedState;return[typeof e=="boolean"?e:ga(e),i]},useSyncExternalStore:v0,useId:$0,useHostTransitionStatus:th,useFormState:z0,useActionState:z0,useOptimistic:function(e,i){var l=se();return Bt!==null?w0(l,Bt,e,i):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:Kc,useCacheRefresh:Q0},Br=null,ya=0;function lo(e){var i=ya;return ya+=1,Br===null&&(Br=[]),d0(Br,e,i)}function Ea(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function oo(e,i){throw i.$$typeof===y?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function i_(e){var i=e._init;return i(e._payload)}function r_(e){function i(I,D){if(e){var N=I.deletions;N===null?(I.deletions=[D],I.flags|=16):N.push(D)}}function l(I,D){if(!e)return null;for(;D!==null;)i(I,D),D=D.sibling;return null}function u(I){for(var D=new Map;I!==null;)I.key!==null?D.set(I.key,I):D.set(I.index,I),I=I.sibling;return D}function h(I,D){return I=Nn(I,D),I.index=0,I.sibling=null,I}function g(I,D,N){return I.index=N,e?(N=I.alternate,N!==null?(N=N.index,N<D?(I.flags|=67108866,D):N):(I.flags|=67108866,D)):(I.flags|=1048576,D)}function E(I){return e&&I.alternate===null&&(I.flags|=67108866),I}function R(I,D,N,V){return D===null||D.tag!==6?(D=Rc(N,I.mode,V),D.return=I,D):(D=h(D,N),D.return=I,D)}function w(I,D,N,V){var lt=N.type;return lt===T?j(I,D,N.props.children,V,N.key):D!==null&&(D.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===X&&i_(lt)===D.type)?(D=h(D,N.props),Ea(D,N),D.return=I,D):(D=jl(N.type,N.key,N.props,null,I.mode,V),Ea(D,N),D.return=I,D)}function z(I,D,N,V){return D===null||D.tag!==4||D.stateNode.containerInfo!==N.containerInfo||D.stateNode.implementation!==N.implementation?(D=xc(N,I.mode,V),D.return=I,D):(D=h(D,N.children||[]),D.return=I,D)}function j(I,D,N,V,lt){return D===null||D.tag!==7?(D=Vi(N,I.mode,V,lt),D.return=I,D):(D=h(D,N),D.return=I,D)}function q(I,D,N){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Rc(""+D,I.mode,N),D.return=I,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case p:return N=jl(D.type,D.key,D.props,null,I.mode,N),Ea(N,D),N.return=I,N;case v:return D=xc(D,I.mode,N),D.return=I,D;case X:var V=D._init;return D=V(D._payload),q(I,D,N)}if(nt(D)||J(D))return D=Vi(D,I.mode,N,null),D.return=I,D;if(typeof D.then=="function")return q(I,lo(D),N);if(D.$$typeof===L)return q(I,Zl(I,D),N);oo(I,D)}return null}function G(I,D,N,V){var lt=D!==null?D.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return lt!==null?null:R(I,D,""+N,V);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case p:return N.key===lt?w(I,D,N,V):null;case v:return N.key===lt?z(I,D,N,V):null;case X:return lt=N._init,N=lt(N._payload),G(I,D,N,V)}if(nt(N)||J(N))return lt!==null?null:j(I,D,N,V,null);if(typeof N.then=="function")return G(I,D,lo(N),V);if(N.$$typeof===L)return G(I,D,Zl(I,N),V);oo(I,N)}return null}function B(I,D,N,V,lt){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return I=I.get(N)||null,R(D,I,""+V,lt);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case p:return I=I.get(V.key===null?N:V.key)||null,w(D,I,V,lt);case v:return I=I.get(V.key===null?N:V.key)||null,z(D,I,V,lt);case X:var xt=V._init;return V=xt(V._payload),B(I,D,N,V,lt)}if(nt(V)||J(V))return I=I.get(N)||null,j(D,I,V,lt,null);if(typeof V.then=="function")return B(I,D,N,lo(V),lt);if(V.$$typeof===L)return B(I,D,N,Zl(D,V),lt);oo(D,V)}return null}function ft(I,D,N,V){for(var lt=null,xt=null,ot=D,ht=D=0,fe=null;ot!==null&&ht<N.length;ht++){ot.index>ht?(fe=ot,ot=null):fe=ot.sibling;var Dt=G(I,ot,N[ht],V);if(Dt===null){ot===null&&(ot=fe);break}e&&ot&&Dt.alternate===null&&i(I,ot),D=g(Dt,D,ht),xt===null?lt=Dt:xt.sibling=Dt,xt=Dt,ot=fe}if(ht===N.length)return l(I,ot),It&&qi(I,ht),lt;if(ot===null){for(;ht<N.length;ht++)ot=q(I,N[ht],V),ot!==null&&(D=g(ot,D,ht),xt===null?lt=ot:xt.sibling=ot,xt=ot);return It&&qi(I,ht),lt}for(ot=u(ot);ht<N.length;ht++)fe=B(ot,I,ht,N[ht],V),fe!==null&&(e&&fe.alternate!==null&&ot.delete(fe.key===null?ht:fe.key),D=g(fe,D,ht),xt===null?lt=fe:xt.sibling=fe,xt=fe);return e&&ot.forEach(function(Si){return i(I,Si)}),It&&qi(I,ht),lt}function ct(I,D,N,V){if(N==null)throw Error(r(151));for(var lt=null,xt=null,ot=D,ht=D=0,fe=null,Dt=N.next();ot!==null&&!Dt.done;ht++,Dt=N.next()){ot.index>ht?(fe=ot,ot=null):fe=ot.sibling;var Si=G(I,ot,Dt.value,V);if(Si===null){ot===null&&(ot=fe);break}e&&ot&&Si.alternate===null&&i(I,ot),D=g(Si,D,ht),xt===null?lt=Si:xt.sibling=Si,xt=Si,ot=fe}if(Dt.done)return l(I,ot),It&&qi(I,ht),lt;if(ot===null){for(;!Dt.done;ht++,Dt=N.next())Dt=q(I,Dt.value,V),Dt!==null&&(D=g(Dt,D,ht),xt===null?lt=Dt:xt.sibling=Dt,xt=Dt);return It&&qi(I,ht),lt}for(ot=u(ot);!Dt.done;ht++,Dt=N.next())Dt=B(ot,I,ht,Dt.value,V),Dt!==null&&(e&&Dt.alternate!==null&&ot.delete(Dt.key===null?ht:Dt.key),D=g(Dt,D,ht),xt===null?lt=Dt:xt.sibling=Dt,xt=Dt);return e&&ot.forEach(function(wv){return i(I,wv)}),It&&qi(I,ht),lt}function Xt(I,D,N,V){if(typeof N=="object"&&N!==null&&N.type===T&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case p:t:{for(var lt=N.key;D!==null;){if(D.key===lt){if(lt=N.type,lt===T){if(D.tag===7){l(I,D.sibling),V=h(D,N.props.children),V.return=I,I=V;break t}}else if(D.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===X&&i_(lt)===D.type){l(I,D.sibling),V=h(D,N.props),Ea(V,N),V.return=I,I=V;break t}l(I,D);break}else i(I,D);D=D.sibling}N.type===T?(V=Vi(N.props.children,I.mode,V,N.key),V.return=I,I=V):(V=jl(N.type,N.key,N.props,null,I.mode,V),Ea(V,N),V.return=I,I=V)}return E(I);case v:t:{for(lt=N.key;D!==null;){if(D.key===lt)if(D.tag===4&&D.stateNode.containerInfo===N.containerInfo&&D.stateNode.implementation===N.implementation){l(I,D.sibling),V=h(D,N.children||[]),V.return=I,I=V;break t}else{l(I,D);break}else i(I,D);D=D.sibling}V=xc(N,I.mode,V),V.return=I,I=V}return E(I);case X:return lt=N._init,N=lt(N._payload),Xt(I,D,N,V)}if(nt(N))return ft(I,D,N,V);if(J(N)){if(lt=J(N),typeof lt!="function")throw Error(r(150));return N=lt.call(N),ct(I,D,N,V)}if(typeof N.then=="function")return Xt(I,D,lo(N),V);if(N.$$typeof===L)return Xt(I,D,Zl(I,N),V);oo(I,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,D!==null&&D.tag===6?(l(I,D.sibling),V=h(D,N),V.return=I,I=V):(l(I,D),V=Rc(N,I.mode,V),V.return=I,I=V),E(I)):l(I,D)}return function(I,D,N,V){try{ya=0;var lt=Xt(I,D,N,V);return Br=null,lt}catch(ot){if(ot===oa||ot===$l)throw ot;var xt=Ve(29,ot,null,I.mode);return xt.lanes=V,xt.return=I,xt}finally{}}}var Fr=r_(!0),s_=r_(!1),ln=Y(null),vn=null;function ui(e){var i=e.alternate;$(le,le.current&1),$(ln,e),vn===null&&(i===null||Ur.current!==null||i.memoizedState!==null)&&(vn=e)}function a_(e){if(e.tag===22){if($(le,le.current),$(ln,e),vn===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(vn=e)}}else ci()}function ci(){$(le,le.current),$(ln,ln.current)}function Fn(e){Q(ln),vn===e&&(vn=null),Q(le)}var le=Y(0);function uo(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Vh(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function nh(e,i,l,u){i=e.memoizedState,l=l(u,i),l=l==null?i:m({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var ih={enqueueSetState:function(e,i,l){e=e._reactInternals;var u=ke(),h=ai(u);h.payload=i,l!=null&&(h.callback=l),i=li(e,h,u),i!==null&&($e(i,e,u),ca(i,e,u))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var u=ke(),h=ai(u);h.tag=1,h.payload=i,l!=null&&(h.callback=l),i=li(e,h,u),i!==null&&($e(i,e,u),ca(i,e,u))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=ke(),u=ai(l);u.tag=2,i!=null&&(u.callback=i),i=li(e,u,l),i!==null&&($e(i,e,l),ca(i,e,l))}};function l_(e,i,l,u,h,g,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,g,E):i.prototype&&i.prototype.isPureReactComponent?!ta(l,u)||!ta(h,g):!0}function o_(e,i,l,u){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==e&&ih.enqueueReplaceState(i,i.state,null)}function tr(e,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(e=e.defaultProps){l===i&&(l=m({},l));for(var h in e)l[h]===void 0&&(l[h]=e[h])}return l}var co=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function u_(e){co(e)}function c_(e){console.error(e)}function h_(e){co(e)}function ho(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function f_(e,i,l){try{var u=e.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function rh(e,i,l){return l=ai(l),l.tag=3,l.payload={element:null},l.callback=function(){ho(e,i)},l}function d_(e){return e=ai(e),e.tag=3,e}function g_(e,i,l,u){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var g=u.value;e.payload=function(){return h(g)},e.callback=function(){f_(i,l,u)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(e.callback=function(){f_(i,l,u),typeof h!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function w1(e,i,l,u,h){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&sa(i,l,h,!0),l=ln.current,l!==null){switch(l.tag){case 13:return vn===null?Ch():l.alternate===null&&Wt===0&&(Wt=3),l.flags&=-257,l.flags|=65536,l.lanes=h,u===Ic?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Dh(e,u,h)),!1;case 22:return l.flags|=65536,u===Ic?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Dh(e,u,h)),!1}throw Error(r(435,l.tag))}return Dh(e,u,h),Ch(),!1}if(It)return i=ln.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==Ac&&(e=Error(r(422),{cause:u}),ra(nn(e,l)))):(u!==Ac&&(i=Error(r(423),{cause:u}),ra(nn(i,l))),e=e.current.alternate,e.flags|=65536,h&=-h,e.lanes|=h,u=nn(u,l),h=rh(e.stateNode,u,h),zc(e,h),Wt!==4&&(Wt=2)),!1;var g=Error(r(520),{cause:u});if(g=nn(g,l),ba===null?ba=[g]:ba.push(g),Wt!==4&&(Wt=2),i===null)return!0;u=nn(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=h&-h,l.lanes|=e,e=rh(l.stateNode,u,e),zc(l,e),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(mi===null||!mi.has(g))))return l.flags|=65536,h&=-h,l.lanes|=h,h=d_(h),g_(h,e,l,u),zc(l,h),!1}l=l.return}while(l!==null);return!1}var __=Error(r(461)),ce=!1;function ge(e,i,l,u){i.child=e===null?s_(i,null,l,u):Fr(i,e.child,l,u)}function m_(e,i,l,u,h){l=l.render;var g=i.ref;if("ref"in u){var E={};for(var R in u)R!=="ref"&&(E[R]=u[R])}else E=u;return Qi(i),u=Xc(e,i,l,E,g,h),R=Yc(),e!==null&&!ce?(Hc(e,i,h),Xn(e,i,h)):(It&&R&&Sc(i),i.flags|=1,ge(e,i,u,h),i.child)}function y_(e,i,l,u,h){if(e===null){var g=l.type;return typeof g=="function"&&!vc(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,E_(e,i,g,u,h)):(e=jl(l.type,null,u,i,i.mode,h),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!fh(e,h)){var E=g.memoizedProps;if(l=l.compare,l=l!==null?l:ta,l(E,u)&&e.ref===i.ref)return Xn(e,i,h)}return i.flags|=1,e=Nn(g,u),e.ref=i.ref,e.return=i,i.child=e}function E_(e,i,l,u,h){if(e!==null){var g=e.memoizedProps;if(ta(g,u)&&e.ref===i.ref)if(ce=!1,i.pendingProps=u=g,fh(e,h))(e.flags&131072)!==0&&(ce=!0);else return i.lanes=e.lanes,Xn(e,i,h)}return sh(e,i,l,u,h)}function p_(e,i,l){var u=i.pendingProps,h=u.children,g=e!==null?e.memoizedState:null;if(u.mode==="hidden"){if((i.flags&128)!==0){if(u=g!==null?g.baseLanes|l:l,e!==null){for(h=i.child=e.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;i.childLanes=g&~u}else i.childLanes=0,i.child=null;return T_(e,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&kl(i,g!==null?g.cachePool:null),g!==null?E0(i,g):Pc(),a_(i);else return i.lanes=i.childLanes=536870912,T_(e,i,g!==null?g.baseLanes|l:l,l)}else g!==null?(kl(i,g.cachePool),E0(i,g),ci(),i.memoizedState=null):(e!==null&&kl(i,null),Pc(),ci());return ge(e,i,h,l),i.child}function T_(e,i,l,u){var h=Lc();return h=h===null?null:{parent:ae._currentValue,pool:h},i.memoizedState={baseLanes:l,cachePool:h},e!==null&&kl(i,null),Pc(),a_(i),e!==null&&sa(e,i,u,!0),null}function fo(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(e===null||e.ref!==l)&&(i.flags|=4194816)}}function sh(e,i,l,u,h){return Qi(i),l=Xc(e,i,l,u,void 0,h),u=Yc(),e!==null&&!ce?(Hc(e,i,h),Xn(e,i,h)):(It&&u&&Sc(i),i.flags|=1,ge(e,i,l,h),i.child)}function v_(e,i,l,u,h,g){return Qi(i),i.updateQueue=null,l=T0(i,u,l,h),p0(e),u=Yc(),e!==null&&!ce?(Hc(e,i,g),Xn(e,i,g)):(It&&u&&Sc(i),i.flags|=1,ge(e,i,l,g),i.child)}function R_(e,i,l,u,h){if(Qi(i),i.stateNode===null){var g=Dr,E=l.contextType;typeof E=="object"&&E!==null&&(g=ve(E)),g=new l(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ih,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},Nc(i),E=l.contextType,g.context=typeof E=="object"&&E!==null?ve(E):Dr,g.state=i.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(nh(i,l,E,u),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&ih.enqueueReplaceState(g,g.state,null),fa(i,u,g,h),ha(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(e===null){g=i.stateNode;var R=i.memoizedProps,w=tr(l,R);g.props=w;var z=g.context,j=l.contextType;E=Dr,typeof j=="object"&&j!==null&&(E=ve(j));var q=l.getDerivedStateFromProps;j=typeof q=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,j||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||z!==E)&&o_(i,g,u,E),si=!1;var G=i.memoizedState;g.state=G,fa(i,u,g,h),ha(),z=i.memoizedState,R||G!==z||si?(typeof q=="function"&&(nh(i,l,q,u),z=i.memoizedState),(w=si||l_(i,l,w,u,G,z,E))?(j||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=z),g.props=u,g.state=z,g.context=E,u=w):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,Uc(e,i),E=i.memoizedProps,j=tr(l,E),g.props=j,q=i.pendingProps,G=g.context,z=l.contextType,w=Dr,typeof z=="object"&&z!==null&&(w=ve(z)),R=l.getDerivedStateFromProps,(z=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==q||G!==w)&&o_(i,g,u,w),si=!1,G=i.memoizedState,g.state=G,fa(i,u,g,h),ha();var B=i.memoizedState;E!==q||G!==B||si||e!==null&&e.dependencies!==null&&ql(e.dependencies)?(typeof R=="function"&&(nh(i,l,R,u),B=i.memoizedState),(j=si||l_(i,l,j,u,G,B,w)||e!==null&&e.dependencies!==null&&ql(e.dependencies))?(z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,B,w),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,B,w)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=B),g.props=u,g.state=B,g.context=w,u=j):(typeof g.componentDidUpdate!="function"||E===e.memoizedProps&&G===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&G===e.memoizedState||(i.flags|=1024),u=!1)}return g=u,fo(e,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&u?(i.child=Fr(i,e.child,null,h),i.child=Fr(i,null,l,h)):ge(e,i,l,h),i.memoizedState=g.state,e=i.child):e=Xn(e,i,h),e}function x_(e,i,l,u){return ia(),i.flags|=256,ge(e,i,l,u),i.child}var ah={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lh(e){return{baseLanes:e,cachePool:c0()}}function oh(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=on),e}function S_(e,i,l){var u=i.pendingProps,h=!1,g=(i.flags&128)!==0,E;if((E=g)||(E=e!==null&&e.memoizedState===null?!1:(le.current&2)!==0),E&&(h=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,e===null){if(It){if(h?ui(i):ci(),It){var R=Qt,w;if(w=R){t:{for(w=R,R=Tn;w.nodeType!==8;){if(!R){R=null;break t}if(w=mn(w.nextSibling),w===null){R=null;break t}}R=w}R!==null?(i.memoizedState={dehydrated:R,treeContext:Ki!==null?{id:Un,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},w=Ve(18,null,null,0),w.stateNode=R,w.return=i,i.child=w,Me=i,Qt=null,w=!0):w=!1}w||ki(i)}if(R=i.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return Vh(R)?i.lanes=32:i.lanes=536870912,null;Fn(i)}return R=u.children,u=u.fallback,h?(ci(),h=i.mode,R=go({mode:"hidden",children:R},h),u=Vi(u,h,l,null),R.return=i,u.return=i,R.sibling=u,i.child=R,h=i.child,h.memoizedState=lh(l),h.childLanes=oh(e,E,l),i.memoizedState=ah,u):(ui(i),uh(i,R))}if(w=e.memoizedState,w!==null&&(R=w.dehydrated,R!==null)){if(g)i.flags&256?(ui(i),i.flags&=-257,i=ch(e,i,l)):i.memoizedState!==null?(ci(),i.child=e.child,i.flags|=128,i=null):(ci(),h=u.fallback,R=i.mode,u=go({mode:"visible",children:u.children},R),h=Vi(h,R,l,null),h.flags|=2,u.return=i,h.return=i,u.sibling=h,i.child=u,Fr(i,e.child,null,l),u=i.child,u.memoizedState=lh(l),u.childLanes=oh(e,E,l),i.memoizedState=ah,i=h);else if(ui(i),Vh(R)){if(E=R.nextSibling&&R.nextSibling.dataset,E)var z=E.dgst;E=z,u=Error(r(419)),u.stack="",u.digest=E,ra({value:u,source:null,stack:null}),i=ch(e,i,l)}else if(ce||sa(e,i,l,!1),E=(l&e.childLanes)!==0,ce||E){if(E=Vt,E!==null&&(u=l&-l,u=(u&42)!==0?1:Ku(u),u=(u&(E.suspendedLanes|l))!==0?0:u,u!==0&&u!==w.retryLane))throw w.retryLane=u,Mr(e,u),$e(E,e,u),__;R.data==="$?"||Ch(),i=ch(e,i,l)}else R.data==="$?"?(i.flags|=192,i.child=e.child,i=null):(e=w.treeContext,Qt=mn(R.nextSibling),Me=i,It=!0,Zi=null,Tn=!1,e!==null&&(sn[an++]=Un,sn[an++]=zn,sn[an++]=Ki,Un=e.id,zn=e.overflow,Ki=i),i=uh(i,u.children),i.flags|=4096);return i}return h?(ci(),h=u.fallback,R=i.mode,w=e.child,z=w.sibling,u=Nn(w,{mode:"hidden",children:u.children}),u.subtreeFlags=w.subtreeFlags&65011712,z!==null?h=Nn(z,h):(h=Vi(h,R,l,null),h.flags|=2),h.return=i,u.return=i,u.sibling=h,i.child=u,u=h,h=i.child,R=e.child.memoizedState,R===null?R=lh(l):(w=R.cachePool,w!==null?(z=ae._currentValue,w=w.parent!==z?{parent:z,pool:z}:w):w=c0(),R={baseLanes:R.baseLanes|l,cachePool:w}),h.memoizedState=R,h.childLanes=oh(e,E,l),i.memoizedState=ah,u):(ui(i),l=e.child,e=l.sibling,l=Nn(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,e!==null&&(E=i.deletions,E===null?(i.deletions=[e],i.flags|=16):E.push(e)),i.child=l,i.memoizedState=null,l)}function uh(e,i){return i=go({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function go(e,i){return e=Ve(22,e,null,i),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function ch(e,i,l){return Fr(i,e.child,null,l),e=uh(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function b_(e,i,l){e.lanes|=i;var u=e.alternate;u!==null&&(u.lanes|=i),Cc(e.return,i,l)}function hh(e,i,l,u,h){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:h}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=l,g.tailMode=h)}function A_(e,i,l){var u=i.pendingProps,h=u.revealOrder,g=u.tail;if(ge(e,i,u.children,l),u=le.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&b_(e,l,i);else if(e.tag===19)b_(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}switch($(le,u),h){case"forwards":for(l=i.child,h=null;l!==null;)e=l.alternate,e!==null&&uo(e)===null&&(h=l),l=l.sibling;l=h,l===null?(h=i.child,i.child=null):(h=l.sibling,l.sibling=null),hh(i,!1,h,l,g);break;case"backwards":for(l=null,h=i.child,i.child=null;h!==null;){if(e=h.alternate,e!==null&&uo(e)===null){i.child=h;break}e=h.sibling,h.sibling=l,l=h,h=e}hh(i,!0,l,null,g);break;case"together":hh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Xn(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),_i|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(sa(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,l=Nn(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Nn(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function fh(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&ql(e)))}function C1(e,i,l){switch(i.tag){case 3:At(i,i.stateNode.containerInfo),ri(i,ae,e.memoizedState.cache),ia();break;case 27:case 5:te(i);break;case 4:At(i,i.stateNode.containerInfo);break;case 10:ri(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ui(i),i.flags|=128,null):(l&i.child.childLanes)!==0?S_(e,i,l):(ui(i),e=Xn(e,i,l),e!==null?e.sibling:null);ui(i);break;case 19:var h=(e.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(sa(e,i,l,!1),u=(l&i.childLanes)!==0),h){if(u)return A_(e,i,l);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$(le,le.current),u)break;return null;case 22:case 23:return i.lanes=0,p_(e,i,l);case 24:ri(i,ae,e.memoizedState.cache)}return Xn(e,i,l)}function w_(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)ce=!0;else{if(!fh(e,l)&&(i.flags&128)===0)return ce=!1,C1(e,i,l);ce=(e.flags&131072)!==0}else ce=!1,It&&(i.flags&1048576)!==0&&i0(i,Kl,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var u=i.elementType,h=u._init;if(u=h(u._payload),i.type=u,typeof u=="function")vc(u)?(e=tr(u,e),i.tag=1,i=R_(null,i,u,e,l)):(i.tag=0,i=sh(null,i,u,e,l));else{if(u!=null){if(h=u.$$typeof,h===O){i.tag=11,i=m_(null,i,u,e,l);break t}else if(h===K){i.tag=14,i=y_(null,i,u,e,l);break t}}throw i=dt(u)||u,Error(r(306,i,""))}}return i;case 0:return sh(e,i,i.type,i.pendingProps,l);case 1:return u=i.type,h=tr(u,i.pendingProps),R_(e,i,u,h,l);case 3:t:{if(At(i,i.stateNode.containerInfo),e===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;h=g.element,Uc(e,i),fa(i,u,null,l);var E=i.memoizedState;if(u=E.cache,ri(i,ae,u),u!==g.cache&&Mc(i,[ae],l,!0),ha(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=x_(e,i,u,l);break t}else if(u!==h){h=nn(Error(r(424)),i),ra(h),i=x_(e,i,u,l);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Qt=mn(e.firstChild),Me=i,It=!0,Zi=null,Tn=!0,l=s_(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ia(),u===h){i=Xn(e,i,l);break t}ge(e,i,u,l)}i=i.child}return i;case 26:return fo(e,i),e===null?(l=Om(i.type,null,i.pendingProps,null))?i.memoizedState=l:It||(l=i.type,e=i.pendingProps,u=Co(at.current).createElement(l),u[Te]=i,u[Ue]=e,me(u,l,e),ue(u),i.stateNode=u):i.memoizedState=Om(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return te(i),e===null&&It&&(u=i.stateNode=Cm(i.type,i.pendingProps,at.current),Me=i,Tn=!0,h=Qt,pi(i.type)?(Kh=h,Qt=mn(u.firstChild)):Qt=h),ge(e,i,i.pendingProps.children,l),fo(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&It&&((h=u=Qt)&&(u=nv(u,i.type,i.pendingProps,Tn),u!==null?(i.stateNode=u,Me=i,Qt=mn(u.firstChild),Tn=!1,h=!0):h=!1),h||ki(i)),te(i),h=i.type,g=i.pendingProps,E=e!==null?e.memoizedProps:null,u=g.children,Yh(h,g)?u=null:E!==null&&Yh(h,E)&&(i.flags|=32),i.memoizedState!==null&&(h=Xc(e,i,T1,null,null,l),Na._currentValue=h),fo(e,i),ge(e,i,u,l),i.child;case 6:return e===null&&It&&((e=l=Qt)&&(l=iv(l,i.pendingProps,Tn),l!==null?(i.stateNode=l,Me=i,Qt=null,e=!0):e=!1),e||ki(i)),null;case 13:return S_(e,i,l);case 4:return At(i,i.stateNode.containerInfo),u=i.pendingProps,e===null?i.child=Fr(i,null,u,l):ge(e,i,u,l),i.child;case 11:return m_(e,i,i.type,i.pendingProps,l);case 7:return ge(e,i,i.pendingProps,l),i.child;case 8:return ge(e,i,i.pendingProps.children,l),i.child;case 12:return ge(e,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,ri(i,i.type,u.value),ge(e,i,u.children,l),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,Qi(i),h=ve(h),u=u(h),i.flags|=1,ge(e,i,u,l),i.child;case 14:return y_(e,i,i.type,i.pendingProps,l);case 15:return E_(e,i,i.type,i.pendingProps,l);case 19:return A_(e,i,l);case 31:return u=i.pendingProps,l=i.mode,u={mode:u.mode,children:u.children},e===null?(l=go(u,l),l.ref=i.ref,i.child=l,l.return=i,i=l):(l=Nn(e.child,u),l.ref=i.ref,i.child=l,l.return=i,i=l),i;case 22:return p_(e,i,l);case 24:return Qi(i),u=ve(ae),e===null?(h=Lc(),h===null&&(h=Vt,g=Dc(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=l),h=g),i.memoizedState={parent:u,cache:h},Nc(i),ri(i,ae,h)):((e.lanes&l)!==0&&(Uc(e,i),fa(i,null,null,l),ha()),h=e.memoizedState,g=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),ri(i,ae,u)):(u=g.cache,ri(i,ae,u),u!==h.cache&&Mc(i,[ae],l,!0))),ge(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Yn(e){e.flags|=4}function C_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!zm(i)){if(i=ln.current,i!==null&&((Ct&4194048)===Ct?vn!==null:(Ct&62914560)!==Ct&&(Ct&536870912)===0||i!==vn))throw ua=Ic,h0;e.flags|=8192}}function _o(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?ag():536870912,e.lanes|=i,jr|=i)}function pa(e,i){if(!It)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Zt(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,u=0;if(i)for(var h=e.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=u,e.childLanes=l,i}function M1(e,i,l){var u=i.pendingProps;switch(bc(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(i),null;case 1:return Zt(i),null;case 3:return l=i.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Pn(ae),$t(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(na(i)?Yn(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,a0())),Zt(i),null;case 26:return l=i.memoizedState,e===null?(Yn(i),l!==null?(Zt(i),C_(i,l)):(Zt(i),i.flags&=-16777217)):l?l!==e.memoizedState?(Yn(i),Zt(i),C_(i,l)):(Zt(i),i.flags&=-16777217):(e.memoizedProps!==u&&Yn(i),Zt(i),i.flags&=-16777217),null;case 27:Dn(i),l=at.current;var h=i.type;if(e!==null&&i.stateNode!=null)e.memoizedProps!==u&&Yn(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Zt(i),null}e=et.current,na(i)?r0(i):(e=Cm(h,u,l),i.stateNode=e,Yn(i))}return Zt(i),null;case 5:if(Dn(i),l=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==u&&Yn(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Zt(i),null}if(e=et.current,na(i))r0(i);else{switch(h=Co(at.current),e){case 1:e=h.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:e=h.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":e=h.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":e=h.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof u.is=="string"?h.createElement("select",{is:u.is}):h.createElement("select"),u.multiple?e.multiple=!0:u.size&&(e.size=u.size);break;default:e=typeof u.is=="string"?h.createElement(l,{is:u.is}):h.createElement(l)}}e[Te]=i,e[Ue]=u;t:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)e.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break t;for(;h.sibling===null;){if(h.return===null||h.return===i)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=e;t:switch(me(e,l,u),l){case"button":case"input":case"select":case"textarea":e=!!u.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Yn(i)}}return Zt(i),i.flags&=-16777217,null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==u&&Yn(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(e=at.current,na(i)){if(e=i.stateNode,l=i.memoizedProps,u=null,h=Me,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}e[Te]=i,e=!!(e.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||vm(e.nodeValue,l)),e||ki(i)}else e=Co(e).createTextNode(u),e[Te]=i,i.stateNode=e}return Zt(i),null;case 13:if(u=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(h=na(i),u!==null&&u.dehydrated!==null){if(e===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Te]=i}else ia(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Zt(i),h=!1}else h=a0(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Fn(i),i):(Fn(i),null)}if(Fn(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,e=e!==null&&e.memoizedState!==null,l){u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==h&&(u.flags|=2048)}return l!==e&&l&&(i.child.flags|=8192),_o(i,i.updateQueue),Zt(i),null;case 4:return $t(),e===null&&Gh(i.stateNode.containerInfo),Zt(i),null;case 10:return Pn(i.type),Zt(i),null;case 19:if(Q(le),h=i.memoizedState,h===null)return Zt(i),null;if(u=(i.flags&128)!==0,g=h.rendering,g===null)if(u)pa(h,!1);else{if(Wt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=uo(e),g!==null){for(i.flags|=128,pa(h,!1),e=g.updateQueue,i.updateQueue=e,_o(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)n0(l,e),l=l.sibling;return $(le,le.current&1|2),i.child}e=e.sibling}h.tail!==null&&we()>Eo&&(i.flags|=128,u=!0,pa(h,!1),i.lanes=4194304)}else{if(!u)if(e=uo(g),e!==null){if(i.flags|=128,u=!0,e=e.updateQueue,i.updateQueue=e,_o(i,e),pa(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!It)return Zt(i),null}else 2*we()-h.renderingStartTime>Eo&&l!==536870912&&(i.flags|=128,u=!0,pa(h,!1),i.lanes=4194304);h.isBackwards?(g.sibling=i.child,i.child=g):(e=h.last,e!==null?e.sibling=g:i.child=g,h.last=g)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=we(),i.sibling=null,e=le.current,$(le,u?e&1|2:e&1),i):(Zt(i),null);case 22:case 23:return Fn(i),Bc(),u=i.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Zt(i),i.subtreeFlags&6&&(i.flags|=8192)):Zt(i),l=i.updateQueue,l!==null&&_o(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),e!==null&&Q(Wi),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Pn(ae),Zt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function D1(e,i){switch(bc(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Pn(ae),$t(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Dn(i),null;case 13:if(Fn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ia()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return Q(le),null;case 4:return $t(),null;case 10:return Pn(i.type),null;case 22:case 23:return Fn(i),Bc(),e!==null&&Q(Wi),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Pn(ae),null;case 25:return null;default:return null}}function M_(e,i){switch(bc(i),i.tag){case 3:Pn(ae),$t();break;case 26:case 27:case 5:Dn(i);break;case 4:$t();break;case 13:Fn(i);break;case 19:Q(le);break;case 10:Pn(i.type);break;case 22:case 23:Fn(i),Bc(),e!==null&&Q(Wi);break;case 24:Pn(ae)}}function Ta(e,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&e)===e){u=void 0;var g=l.create,E=l.inst;u=g(),E.destroy=u}l=l.next}while(l!==h)}}catch(R){Ht(i,i.return,R)}}function hi(e,i,l){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&e)===e){var E=u.inst,R=E.destroy;if(R!==void 0){E.destroy=void 0,h=i;var w=l,z=R;try{z()}catch(j){Ht(h,w,j)}}}u=u.next}while(u!==g)}}catch(j){Ht(i,i.return,j)}}function D_(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{y0(i,l)}catch(u){Ht(e,e.return,u)}}}function O_(e,i,l){l.props=tr(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(u){Ht(e,i,u)}}function va(e,i){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof l=="function"?e.refCleanup=l(u):l.current=u}}catch(h){Ht(e,i,h)}}function Rn(e,i){var l=e.ref,u=e.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(h){Ht(e,i,h)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){Ht(e,i,h)}else l.current=null}function L_(e){var i=e.type,l=e.memoizedProps,u=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break t;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(h){Ht(e,e.return,h)}}function dh(e,i,l){try{var u=e.stateNode;Q1(u,e.type,l,i),u[Ue]=i}catch(h){Ht(e,e.return,h)}}function I_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&pi(e.type)||e.tag===4}function gh(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||I_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&pi(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _h(e,i,l){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(e),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=wo));else if(u!==4&&(u===27&&pi(e.type)&&(l=e.stateNode,i=null),e=e.child,e!==null))for(_h(e,i,l),e=e.sibling;e!==null;)_h(e,i,l),e=e.sibling}function mo(e,i,l){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?l.insertBefore(e,i):l.appendChild(e);else if(u!==4&&(u===27&&pi(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(mo(e,i,l),e=e.sibling;e!==null;)mo(e,i,l),e=e.sibling}function N_(e){var i=e.stateNode,l=e.memoizedProps;try{for(var u=e.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);me(i,u,l),i[Te]=e,i[Ue]=l}catch(g){Ht(e,e.return,g)}}var Hn=!1,ne=!1,mh=!1,U_=typeof WeakSet=="function"?WeakSet:Set,he=null;function O1(e,i){if(e=e.containerInfo,Fh=No,e=Kg(e),gc(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else t:{l=(l=e.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var h=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break t}var E=0,R=-1,w=-1,z=0,j=0,q=e,G=null;e:for(;;){for(var B;q!==l||h!==0&&q.nodeType!==3||(R=E+h),q!==g||u!==0&&q.nodeType!==3||(w=E+u),q.nodeType===3&&(E+=q.nodeValue.length),(B=q.firstChild)!==null;)G=q,q=B;for(;;){if(q===e)break e;if(G===l&&++z===h&&(R=E),G===g&&++j===u&&(w=E),(B=q.nextSibling)!==null)break;q=G,G=q.parentNode}q=B}l=R===-1||w===-1?null:{start:R,end:w}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xh={focusedElem:e,selectionRange:l},No=!1,he=i;he!==null;)if(i=he,e=i.child,(i.subtreeFlags&1024)!==0&&e!==null)e.return=i,he=e;else for(;he!==null;){switch(i=he,g=i.alternate,e=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,l=i,h=g.memoizedProps,g=g.memoizedState,u=l.stateNode;try{var ft=tr(l.type,h,l.elementType===l.type);e=u.getSnapshotBeforeUpdate(ft,g),u.__reactInternalSnapshotBeforeUpdate=e}catch(ct){Ht(l,l.return,ct)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,l=e.nodeType,l===9)jh(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":jh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,he=e;break}he=i.return}}function z_(e,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:fi(e,l),u&4&&Ta(5,l);break;case 1:if(fi(e,l),u&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(E){Ht(l,l.return,E)}else{var h=tr(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(h,i,e.__reactInternalSnapshotBeforeUpdate)}catch(E){Ht(l,l.return,E)}}u&64&&D_(l),u&512&&va(l,l.return);break;case 3:if(fi(e,l),u&64&&(e=l.updateQueue,e!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{y0(e,i)}catch(E){Ht(l,l.return,E)}}break;case 27:i===null&&u&4&&N_(l);case 26:case 5:fi(e,l),i===null&&u&4&&L_(l),u&512&&va(l,l.return);break;case 12:fi(e,l);break;case 13:fi(e,l),u&4&&B_(e,l),u&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=F1.bind(null,l),rv(e,l))));break;case 22:if(u=l.memoizedState!==null||Hn,!u){i=i!==null&&i.memoizedState!==null||ne,h=Hn;var g=ne;Hn=u,(ne=i)&&!g?di(e,l,(l.subtreeFlags&8772)!==0):fi(e,l),Hn=h,ne=g}break;case 30:break;default:fi(e,l)}}function G_(e){var i=e.alternate;i!==null&&(e.alternate=null,G_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&ku(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Kt=null,Pe=!1;function jn(e,i,l){for(l=l.child;l!==null;)P_(e,i,l),l=l.sibling}function P_(e,i,l){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Ys,l)}catch{}switch(l.tag){case 26:ne||Rn(l,i),jn(e,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ne||Rn(l,i);var u=Kt,h=Pe;pi(l.type)&&(Kt=l.stateNode,Pe=!1),jn(e,i,l),Da(l.stateNode),Kt=u,Pe=h;break;case 5:ne||Rn(l,i);case 6:if(u=Kt,h=Pe,Kt=null,jn(e,i,l),Kt=u,Pe=h,Kt!==null)if(Pe)try{(Kt.nodeType===9?Kt.body:Kt.nodeName==="HTML"?Kt.ownerDocument.body:Kt).removeChild(l.stateNode)}catch(g){Ht(l,i,g)}else try{Kt.removeChild(l.stateNode)}catch(g){Ht(l,i,g)}break;case 18:Kt!==null&&(Pe?(e=Kt,Am(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Pa(e)):Am(Kt,l.stateNode));break;case 4:u=Kt,h=Pe,Kt=l.stateNode.containerInfo,Pe=!0,jn(e,i,l),Kt=u,Pe=h;break;case 0:case 11:case 14:case 15:ne||hi(2,l,i),ne||hi(4,l,i),jn(e,i,l);break;case 1:ne||(Rn(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&O_(l,i,u)),jn(e,i,l);break;case 21:jn(e,i,l);break;case 22:ne=(u=ne)||l.memoizedState!==null,jn(e,i,l),ne=u;break;default:jn(e,i,l)}}function B_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Pa(e)}catch(l){Ht(i,i.return,l)}}function L1(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new U_),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new U_),i;default:throw Error(r(435,e.tag))}}function yh(e,i){var l=L1(e);i.forEach(function(u){var h=X1.bind(null,e,u);l.has(u)||(l.add(u),u.then(h,h))})}function Ke(e,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var h=l[u],g=e,E=i,R=E;t:for(;R!==null;){switch(R.tag){case 27:if(pi(R.type)){Kt=R.stateNode,Pe=!1;break t}break;case 5:Kt=R.stateNode,Pe=!1;break t;case 3:case 4:Kt=R.stateNode.containerInfo,Pe=!0;break t}R=R.return}if(Kt===null)throw Error(r(160));P_(g,E,h),Kt=null,Pe=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)F_(i,e),i=i.sibling}var _n=null;function F_(e,i){var l=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ke(i,e),qe(e),u&4&&(hi(3,e,e.return),Ta(3,e),hi(5,e,e.return));break;case 1:Ke(i,e),qe(e),u&512&&(ne||l===null||Rn(l,l.return)),u&64&&Hn&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var h=_n;if(Ke(i,e),qe(e),u&512&&(ne||l===null||Rn(l,l.return)),u&4){var g=l!==null?l.memoizedState:null;if(u=e.memoizedState,l===null)if(u===null)if(e.stateNode===null){t:{u=e.type,l=e.memoizedProps,h=h.ownerDocument||h;e:switch(u){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Vs]||g[Te]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(u),h.head.insertBefore(g,h.querySelector("head > title"))),me(g,u,l),g[Te]=e,ue(g),u=g;break t;case"link":var E=Nm("link","href",h).get(u+(l.href||""));if(E){for(var R=0;R<E.length;R++)if(g=E[R],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(R,1);break e}}g=h.createElement(u),me(g,u,l),h.head.appendChild(g);break;case"meta":if(E=Nm("meta","content",h).get(u+(l.content||""))){for(R=0;R<E.length;R++)if(g=E[R],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(R,1);break e}}g=h.createElement(u),me(g,u,l),h.head.appendChild(g);break;default:throw Error(r(468,u))}g[Te]=e,ue(g),u=g}e.stateNode=u}else Um(h,e.type,e.stateNode);else e.stateNode=Im(h,u,e.memoizedProps);else g!==u?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,u===null?Um(h,e.type,e.stateNode):Im(h,u,e.memoizedProps)):u===null&&e.stateNode!==null&&dh(e,e.memoizedProps,l.memoizedProps)}break;case 27:Ke(i,e),qe(e),u&512&&(ne||l===null||Rn(l,l.return)),l!==null&&u&4&&dh(e,e.memoizedProps,l.memoizedProps);break;case 5:if(Ke(i,e),qe(e),u&512&&(ne||l===null||Rn(l,l.return)),e.flags&32){h=e.stateNode;try{Rr(h,"")}catch(B){Ht(e,e.return,B)}}u&4&&e.stateNode!=null&&(h=e.memoizedProps,dh(e,h,l!==null?l.memoizedProps:h)),u&1024&&(mh=!0);break;case 6:if(Ke(i,e),qe(e),u&4){if(e.stateNode===null)throw Error(r(162));u=e.memoizedProps,l=e.stateNode;try{l.nodeValue=u}catch(B){Ht(e,e.return,B)}}break;case 3:if(Oo=null,h=_n,_n=Mo(i.containerInfo),Ke(i,e),_n=h,qe(e),u&4&&l!==null&&l.memoizedState.isDehydrated)try{Pa(i.containerInfo)}catch(B){Ht(e,e.return,B)}mh&&(mh=!1,X_(e));break;case 4:u=_n,_n=Mo(e.stateNode.containerInfo),Ke(i,e),qe(e),_n=u;break;case 12:Ke(i,e),qe(e);break;case 13:Ke(i,e),qe(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xh=we()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,yh(e,u)));break;case 22:h=e.memoizedState!==null;var w=l!==null&&l.memoizedState!==null,z=Hn,j=ne;if(Hn=z||h,ne=j||w,Ke(i,e),ne=j,Hn=z,qe(e),u&8192)t:for(i=e.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(l===null||w||Hn||ne||er(e)),l=null,i=e;;){if(i.tag===5||i.tag===26){if(l===null){w=l=i;try{if(g=w.stateNode,h)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{R=w.stateNode;var q=w.memoizedProps.style,G=q!=null&&q.hasOwnProperty("display")?q.display:null;R.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(B){Ht(w,w.return,B)}}}else if(i.tag===6){if(l===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(B){Ht(w,w.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=e.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,yh(e,l))));break;case 19:Ke(i,e),qe(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,yh(e,u)));break;case 30:break;case 21:break;default:Ke(i,e),qe(e)}}function qe(e){var i=e.flags;if(i&2){try{for(var l,u=e.return;u!==null;){if(I_(u)){l=u;break}u=u.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var h=l.stateNode,g=gh(e);mo(e,g,h);break;case 5:var E=l.stateNode;l.flags&32&&(Rr(E,""),l.flags&=-33);var R=gh(e);mo(e,R,E);break;case 3:case 4:var w=l.stateNode.containerInfo,z=gh(e);_h(e,z,w);break;default:throw Error(r(161))}}catch(j){Ht(e,e.return,j)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function X_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;X_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function fi(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)z_(e,i.alternate,i),i=i.sibling}function er(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:hi(4,i,i.return),er(i);break;case 1:Rn(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&O_(i,i.return,l),er(i);break;case 27:Da(i.stateNode);case 26:case 5:Rn(i,i.return),er(i);break;case 22:i.memoizedState===null&&er(i);break;case 30:er(i);break;default:er(i)}e=e.sibling}}function di(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=e,g=i,E=g.flags;switch(g.tag){case 0:case 11:case 15:di(h,g,l),Ta(4,g);break;case 1:if(di(h,g,l),u=g,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Ht(u,u.return,z)}if(u=g,h=u.updateQueue,h!==null){var R=u.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)m0(w[h],R)}catch(z){Ht(u,u.return,z)}}l&&E&64&&D_(g),va(g,g.return);break;case 27:N_(g);case 26:case 5:di(h,g,l),l&&u===null&&E&4&&L_(g),va(g,g.return);break;case 12:di(h,g,l);break;case 13:di(h,g,l),l&&E&4&&B_(h,g);break;case 22:g.memoizedState===null&&di(h,g,l),va(g,g.return);break;case 30:break;default:di(h,g,l)}i=i.sibling}}function Eh(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&aa(l))}function ph(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&aa(e))}function xn(e,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Y_(e,i,l,u),i=i.sibling}function Y_(e,i,l,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:xn(e,i,l,u),h&2048&&Ta(9,i);break;case 1:xn(e,i,l,u);break;case 3:xn(e,i,l,u),h&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&aa(e)));break;case 12:if(h&2048){xn(e,i,l,u),e=i.stateNode;try{var g=i.memoizedProps,E=g.id,R=g.onPostCommit;typeof R=="function"&&R(E,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(w){Ht(i,i.return,w)}}else xn(e,i,l,u);break;case 13:xn(e,i,l,u);break;case 23:break;case 22:g=i.stateNode,E=i.alternate,i.memoizedState!==null?g._visibility&2?xn(e,i,l,u):Ra(e,i):g._visibility&2?xn(e,i,l,u):(g._visibility|=2,Xr(e,i,l,u,(i.subtreeFlags&10256)!==0)),h&2048&&Eh(E,i);break;case 24:xn(e,i,l,u),h&2048&&ph(i.alternate,i);break;default:xn(e,i,l,u)}}function Xr(e,i,l,u,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var g=e,E=i,R=l,w=u,z=E.flags;switch(E.tag){case 0:case 11:case 15:Xr(g,E,R,w,h),Ta(8,E);break;case 23:break;case 22:var j=E.stateNode;E.memoizedState!==null?j._visibility&2?Xr(g,E,R,w,h):Ra(g,E):(j._visibility|=2,Xr(g,E,R,w,h)),h&&z&2048&&Eh(E.alternate,E);break;case 24:Xr(g,E,R,w,h),h&&z&2048&&ph(E.alternate,E);break;default:Xr(g,E,R,w,h)}i=i.sibling}}function Ra(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,u=i,h=u.flags;switch(u.tag){case 22:Ra(l,u),h&2048&&Eh(u.alternate,u);break;case 24:Ra(l,u),h&2048&&ph(u.alternate,u);break;default:Ra(l,u)}i=i.sibling}}var xa=8192;function Yr(e){if(e.subtreeFlags&xa)for(e=e.child;e!==null;)H_(e),e=e.sibling}function H_(e){switch(e.tag){case 26:Yr(e),e.flags&xa&&e.memoizedState!==null&&yv(_n,e.memoizedState,e.memoizedProps);break;case 5:Yr(e);break;case 3:case 4:var i=_n;_n=Mo(e.stateNode.containerInfo),Yr(e),_n=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=xa,xa=16777216,Yr(e),xa=i):Yr(e));break;default:Yr(e)}}function j_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Sa(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];he=u,K_(u,e)}j_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)V_(e),e=e.sibling}function V_(e){switch(e.tag){case 0:case 11:case 15:Sa(e),e.flags&2048&&hi(9,e,e.return);break;case 3:Sa(e);break;case 12:Sa(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,yo(e)):Sa(e);break;default:Sa(e)}}function yo(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];he=u,K_(u,e)}j_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:hi(8,i,i.return),yo(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,yo(i));break;default:yo(i)}e=e.sibling}}function K_(e,i){for(;he!==null;){var l=he;switch(l.tag){case 0:case 11:case 15:hi(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:aa(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,he=u;else t:for(l=e;he!==null;){u=he;var h=u.sibling,g=u.return;if(G_(u),u===l){he=null;break t}if(h!==null){h.return=g,he=h;break t}he=g}}}var I1={getCacheForType:function(e){var i=ve(ae),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l}},N1=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Vt=null,St=null,Ct=0,Pt=0,Ze=null,gi=!1,Hr=!1,Th=!1,Vn=0,Wt=0,_i=0,nr=0,vh=0,on=0,jr=0,ba=null,Be=null,Rh=!1,xh=0,Eo=1/0,po=null,mi=null,_e=0,yi=null,Vr=null,Kr=0,Sh=0,bh=null,q_=null,Aa=0,Ah=null;function ke(){if((Gt&2)!==0&&Ct!==0)return Ct&-Ct;if(P.T!==null){var e=Ir;return e!==0?e:Ih()}return ug()}function Z_(){on===0&&(on=(Ct&536870912)===0||It?sg():536870912);var e=ln.current;return e!==null&&(e.flags|=32),on}function $e(e,i,l){(e===Vt&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)&&(qr(e,0),Ei(e,Ct,on,!1)),js(e,l),((Gt&2)===0||e!==Vt)&&(e===Vt&&((Gt&2)===0&&(nr|=l),Wt===4&&Ei(e,Ct,on,!1)),Sn(e))}function k_(e,i,l){if((Gt&6)!==0)throw Error(r(327));var u=!l&&(i&124)===0&&(i&e.expiredLanes)===0||Hs(e,i),h=u?G1(e,i):Mh(e,i,!0),g=u;do{if(h===0){Hr&&!u&&Ei(e,i,0,!1);break}else{if(l=e.current.alternate,g&&!U1(l)){h=Mh(e,i,!1),g=!1;continue}if(h===2){if(g=i,e.errorRecoveryDisabledLanes&g)var E=0;else E=e.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;t:{var R=e;h=ba;var w=R.current.memoizedState.isDehydrated;if(w&&(qr(R,E).flags|=256),E=Mh(R,E,!1),E!==2){if(Th&&!w){R.errorRecoveryDisabledLanes|=g,nr|=g,h=4;break t}g=Be,Be=h,g!==null&&(Be===null?Be=g:Be.push.apply(Be,g))}h=E}if(g=!1,h!==2)continue}}if(h===1){qr(e,0),Ei(e,i,0,!0);break}t:{switch(u=e,g=h,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ei(u,i,on,!gi);break t;case 2:Be=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=xh+300-we(),10<h)){if(Ei(u,i,on,!gi),Ml(u,0,!0)!==0)break t;u.timeoutHandle=Sm($_.bind(null,u,l,Be,po,Rh,i,on,nr,jr,gi,g,2,-0,0),h);break t}$_(u,l,Be,po,Rh,i,on,nr,jr,gi,g,0,-0,0)}}break}while(!0);Sn(e)}function $_(e,i,l,u,h,g,E,R,w,z,j,q,G,B){if(e.timeoutHandle=-1,q=i.subtreeFlags,(q&8192||(q&16785408)===16785408)&&(Ia={stylesheets:null,count:0,unsuspend:mv},H_(i),q=Ev(),q!==null)){e.cancelPendingCommit=q(im.bind(null,e,i,g,l,u,h,E,R,w,j,1,G,B)),Ei(e,g,E,!z);return}im(e,i,g,l,u,h,E,R,w)}function U1(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var h=l[u],g=h.getSnapshot;h=h.value;try{if(!je(g(),h))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ei(e,i,l,u){i&=~vh,i&=~nr,e.suspendedLanes|=i,e.pingedLanes&=~i,u&&(e.warmLanes|=i),u=e.expirationTimes;for(var h=i;0<h;){var g=31-He(h),E=1<<g;u[g]=-1,h&=~E}l!==0&&lg(e,l,i)}function To(){return(Gt&6)===0?(wa(0),!1):!0}function wh(){if(St!==null){if(Pt===0)var e=St.return;else e=St,Gn=$i=null,jc(e),Br=null,ya=0,e=St;for(;e!==null;)M_(e.alternate,e),e=e.return;St=null}}function qr(e,i){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,J1(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),wh(),Vt=e,St=l=Nn(e.current,null),Ct=i,Pt=0,Ze=null,gi=!1,Hr=Hs(e,i),Th=!1,jr=on=vh=nr=_i=Wt=0,Be=ba=null,Rh=!1,(i&8)!==0&&(i|=i&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=i;0<u;){var h=31-He(u),g=1<<h;i|=e[h],u&=~g}return Vn=i,Xl(),l}function Q_(e,i){Rt=null,P.H=ao,i===oa||i===$l?(i=g0(),Pt=3):i===h0?(i=g0(),Pt=4):Pt=i===__?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ze=i,St===null&&(Wt=1,ho(e,nn(i,e.current)))}function W_(){var e=P.H;return P.H=ao,e===null?ao:e}function J_(){var e=P.A;return P.A=I1,e}function Ch(){Wt=4,gi||(Ct&4194048)!==Ct&&ln.current!==null||(Hr=!0),(_i&134217727)===0&&(nr&134217727)===0||Vt===null||Ei(Vt,Ct,on,!1)}function Mh(e,i,l){var u=Gt;Gt|=2;var h=W_(),g=J_();(Vt!==e||Ct!==i)&&(po=null,qr(e,i)),i=!1;var E=Wt;t:do try{if(Pt!==0&&St!==null){var R=St,w=Ze;switch(Pt){case 8:wh(),E=6;break t;case 3:case 2:case 9:case 6:ln.current===null&&(i=!0);var z=Pt;if(Pt=0,Ze=null,Zr(e,R,w,z),l&&Hr){E=0;break t}break;default:z=Pt,Pt=0,Ze=null,Zr(e,R,w,z)}}z1(),E=Wt;break}catch(j){Q_(e,j)}while(!0);return i&&e.shellSuspendCounter++,Gn=$i=null,Gt=u,P.H=h,P.A=g,St===null&&(Vt=null,Ct=0,Xl()),E}function z1(){for(;St!==null;)tm(St)}function G1(e,i){var l=Gt;Gt|=2;var u=W_(),h=J_();Vt!==e||Ct!==i?(po=null,Eo=we()+500,qr(e,i)):Hr=Hs(e,i);t:do try{if(Pt!==0&&St!==null){i=St;var g=Ze;e:switch(Pt){case 1:Pt=0,Ze=null,Zr(e,i,g,1);break;case 2:case 9:if(f0(g)){Pt=0,Ze=null,em(i);break}i=function(){Pt!==2&&Pt!==9||Vt!==e||(Pt=7),Sn(e)},g.then(i,i);break t;case 3:Pt=7;break t;case 4:Pt=5;break t;case 7:f0(g)?(Pt=0,Ze=null,em(i)):(Pt=0,Ze=null,Zr(e,i,g,7));break;case 5:var E=null;switch(St.tag){case 26:E=St.memoizedState;case 5:case 27:var R=St;if(!E||zm(E)){Pt=0,Ze=null;var w=R.sibling;if(w!==null)St=w;else{var z=R.return;z!==null?(St=z,vo(z)):St=null}break e}}Pt=0,Ze=null,Zr(e,i,g,5);break;case 6:Pt=0,Ze=null,Zr(e,i,g,6);break;case 8:wh(),Wt=6;break t;default:throw Error(r(462))}}P1();break}catch(j){Q_(e,j)}while(!0);return Gn=$i=null,P.H=u,P.A=h,Gt=l,St!==null?0:(Vt=null,Ct=0,Xl(),Wt)}function P1(){for(;St!==null&&!We();)tm(St)}function tm(e){var i=w_(e.alternate,e,Vn);e.memoizedProps=e.pendingProps,i===null?vo(e):St=i}function em(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=v_(l,i,i.pendingProps,i.type,void 0,Ct);break;case 11:i=v_(l,i,i.pendingProps,i.type.render,i.ref,Ct);break;case 5:jc(i);default:M_(l,i),i=St=n0(i,Vn),i=w_(l,i,Vn)}e.memoizedProps=e.pendingProps,i===null?vo(e):St=i}function Zr(e,i,l,u){Gn=$i=null,jc(i),Br=null,ya=0;var h=i.return;try{if(w1(e,h,i,l,Ct)){Wt=1,ho(e,nn(l,e.current)),St=null;return}}catch(g){if(h!==null)throw St=h,g;Wt=1,ho(e,nn(l,e.current)),St=null;return}i.flags&32768?(It||u===1?e=!0:Hr||(Ct&536870912)!==0?e=!1:(gi=e=!0,(u===2||u===9||u===3||u===6)&&(u=ln.current,u!==null&&u.tag===13&&(u.flags|=16384))),nm(i,e)):vo(i)}function vo(e){var i=e;do{if((i.flags&32768)!==0){nm(i,gi);return}e=i.return;var l=M1(i.alternate,i,Vn);if(l!==null){St=l;return}if(i=i.sibling,i!==null){St=i;return}St=i=e}while(i!==null);Wt===0&&(Wt=5)}function nm(e,i){do{var l=D1(e.alternate,e);if(l!==null){l.flags&=32767,St=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){St=e;return}St=e=l}while(e!==null);Wt=6,St=null}function im(e,i,l,u,h,g,E,R,w){e.cancelPendingCommit=null;do Ro();while(_e!==0);if((Gt&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=pc,mT(e,l,g,E,R,w),e===Vt&&(St=Vt=null,Ct=0),Vr=i,yi=e,Kr=l,Sh=g,bh=h,q_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Y1(On,function(){return om(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,h=k.p,k.p=2,E=Gt,Gt|=4;try{O1(e,i,l)}finally{Gt=E,k.p=h,P.T=u}}_e=1,rm(),sm(),am()}}function rm(){if(_e===1){_e=0;var e=yi,i=Vr,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var u=k.p;k.p=2;var h=Gt;Gt|=4;try{F_(i,e);var g=Xh,E=Kg(e.containerInfo),R=g.focusedElem,w=g.selectionRange;if(E!==R&&R&&R.ownerDocument&&Vg(R.ownerDocument.documentElement,R)){if(w!==null&&gc(R)){var z=w.start,j=w.end;if(j===void 0&&(j=z),"selectionStart"in R)R.selectionStart=z,R.selectionEnd=Math.min(j,R.value.length);else{var q=R.ownerDocument||document,G=q&&q.defaultView||window;if(G.getSelection){var B=G.getSelection(),ft=R.textContent.length,ct=Math.min(w.start,ft),Xt=w.end===void 0?ct:Math.min(w.end,ft);!B.extend&&ct>Xt&&(E=Xt,Xt=ct,ct=E);var I=jg(R,ct),D=jg(R,Xt);if(I&&D&&(B.rangeCount!==1||B.anchorNode!==I.node||B.anchorOffset!==I.offset||B.focusNode!==D.node||B.focusOffset!==D.offset)){var N=q.createRange();N.setStart(I.node,I.offset),B.removeAllRanges(),ct>Xt?(B.addRange(N),B.extend(D.node,D.offset)):(N.setEnd(D.node,D.offset),B.addRange(N))}}}}for(q=[],B=R;B=B.parentNode;)B.nodeType===1&&q.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<q.length;R++){var V=q[R];V.element.scrollLeft=V.left,V.element.scrollTop=V.top}}No=!!Fh,Xh=Fh=null}finally{Gt=h,k.p=u,P.T=l}}e.current=i,_e=2}}function sm(){if(_e===2){_e=0;var e=yi,i=Vr,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var u=k.p;k.p=2;var h=Gt;Gt|=4;try{z_(e,i.alternate,i)}finally{Gt=h,k.p=u,P.T=l}}_e=3}}function am(){if(_e===4||_e===3){_e=0,Je();var e=yi,i=Vr,l=Kr,u=q_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?_e=5:(_e=0,Vr=yi=null,lm(e,e.pendingLanes));var h=e.pendingLanes;if(h===0&&(mi=null),qu(l),i=i.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Ys,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=P.T,h=k.p,k.p=2,P.T=null;try{for(var g=e.onRecoverableError,E=0;E<u.length;E++){var R=u[E];g(R.value,{componentStack:R.stack})}}finally{P.T=i,k.p=h}}(Kr&3)!==0&&Ro(),Sn(e),h=e.pendingLanes,(l&4194090)!==0&&(h&42)!==0?e===Ah?Aa++:(Aa=0,Ah=e):Aa=0,wa(0)}}function lm(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,aa(i)))}function Ro(e){return rm(),sm(),am(),om()}function om(){if(_e!==5)return!1;var e=yi,i=Sh;Sh=0;var l=qu(Kr),u=P.T,h=k.p;try{k.p=32>l?32:l,P.T=null,l=bh,bh=null;var g=yi,E=Kr;if(_e=0,Vr=yi=null,Kr=0,(Gt&6)!==0)throw Error(r(331));var R=Gt;if(Gt|=4,V_(g.current),Y_(g,g.current,E,l),Gt=R,wa(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Ys,g)}catch{}return!0}finally{k.p=h,P.T=u,lm(e,i)}}function um(e,i,l){i=nn(l,i),i=rh(e.stateNode,i,2),e=li(e,i,2),e!==null&&(js(e,2),Sn(e))}function Ht(e,i,l){if(e.tag===3)um(e,e,l);else for(;i!==null;){if(i.tag===3){um(i,e,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(mi===null||!mi.has(u))){e=nn(l,e),l=d_(2),u=li(i,l,2),u!==null&&(g_(l,u,i,e),js(u,2),Sn(u));break}}i=i.return}}function Dh(e,i,l){var u=e.pingCache;if(u===null){u=e.pingCache=new N1;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(l)||(Th=!0,h.add(l),e=B1.bind(null,e,i,l),i.then(e,e))}function B1(e,i,l){var u=e.pingCache;u!==null&&u.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Vt===e&&(Ct&l)===l&&(Wt===4||Wt===3&&(Ct&62914560)===Ct&&300>we()-xh?(Gt&2)===0&&qr(e,0):vh|=l,jr===Ct&&(jr=0)),Sn(e)}function cm(e,i){i===0&&(i=ag()),e=Mr(e,i),e!==null&&(js(e,i),Sn(e))}function F1(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),cm(e,l)}function X1(e,i){var l=0;switch(e.tag){case 13:var u=e.stateNode,h=e.memoizedState;h!==null&&(l=h.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),cm(e,l)}function Y1(e,i){return ti(e,i)}var xo=null,kr=null,Oh=!1,So=!1,Lh=!1,ir=0;function Sn(e){e!==kr&&e.next===null&&(kr===null?xo=kr=e:kr=kr.next=e),So=!0,Oh||(Oh=!0,j1())}function wa(e,i){if(!Lh&&So){Lh=!0;do for(var l=!1,u=xo;u!==null;){if(e!==0){var h=u.pendingLanes;if(h===0)var g=0;else{var E=u.suspendedLanes,R=u.pingedLanes;g=(1<<31-He(42|e)+1)-1,g&=h&~(E&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,gm(u,g))}else g=Ct,g=Ml(u,u===Vt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Hs(u,g)||(l=!0,gm(u,g));u=u.next}while(l);Lh=!1}}function H1(){hm()}function hm(){So=Oh=!1;var e=0;ir!==0&&(W1()&&(e=ir),ir=0);for(var i=we(),l=null,u=xo;u!==null;){var h=u.next,g=fm(u,i);g===0?(u.next=null,l===null?xo=h:l.next=h,h===null&&(kr=l)):(l=u,(e!==0||(g&3)!==0)&&(So=!0)),u=h}wa(e)}function fm(e,i){for(var l=e.suspendedLanes,u=e.pingedLanes,h=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var E=31-He(g),R=1<<E,w=h[E];w===-1?((R&l)===0||(R&u)!==0)&&(h[E]=_T(R,i)):w<=i&&(e.expiredLanes|=R),g&=~R}if(i=Vt,l=Ct,l=Ml(e,e===i?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,l===0||e===i&&(Pt===2||Pt===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Bi(u),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||Hs(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(u!==null&&Bi(u),qu(l)){case 2:case 8:l=gr;break;case 32:l=On;break;case 268435456:l=Ce;break;default:l=On}return u=dm.bind(null,e),l=ti(l,u),e.callbackPriority=i,e.callbackNode=l,i}return u!==null&&u!==null&&Bi(u),e.callbackPriority=2,e.callbackNode=null,2}function dm(e,i){if(_e!==0&&_e!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Ro()&&e.callbackNode!==l)return null;var u=Ct;return u=Ml(e,e===Vt?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(k_(e,u,i),fm(e,we()),e.callbackNode!=null&&e.callbackNode===l?dm.bind(null,e):null)}function gm(e,i){if(Ro())return null;k_(e,i,!0)}function j1(){tv(function(){(Gt&6)!==0?ti(Xs,H1):hm()})}function Ih(){return ir===0&&(ir=sg()),ir}function _m(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Nl(""+e)}function mm(e,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,e.id&&l.setAttribute("form",e.id),i.parentNode.insertBefore(l,i),e=new FormData(e),l.parentNode.removeChild(l),e}function V1(e,i,l,u,h){if(i==="submit"&&l&&l.stateNode===h){var g=_m((h[Ue]||null).action),E=u.submitter;E&&(i=(i=E[Ue]||null)?_m(i.formAction):E.getAttribute("formAction"),i!==null&&(g=i,E=null));var R=new Pl("action","action",null,u,h);e.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ir!==0){var w=E?mm(h,E):new FormData(h);Jc(l,{pending:!0,data:w,method:h.method,action:g},null,w)}}else typeof g=="function"&&(R.preventDefault(),w=E?mm(h,E):new FormData(h),Jc(l,{pending:!0,data:w,method:h.method,action:g},g,w))},currentTarget:h}]})}}for(var Nh=0;Nh<Ec.length;Nh++){var Uh=Ec[Nh],K1=Uh.toLowerCase(),q1=Uh[0].toUpperCase()+Uh.slice(1);gn(K1,"on"+q1)}gn(kg,"onAnimationEnd"),gn($g,"onAnimationIteration"),gn(Qg,"onAnimationStart"),gn("dblclick","onDoubleClick"),gn("focusin","onFocus"),gn("focusout","onBlur"),gn(c1,"onTransitionRun"),gn(h1,"onTransitionStart"),gn(f1,"onTransitionCancel"),gn(Wg,"onTransitionEnd"),pr("onMouseEnter",["mouseout","mouseover"]),pr("onMouseLeave",["mouseout","mouseover"]),pr("onPointerEnter",["pointerout","pointerover"]),pr("onPointerLeave",["pointerout","pointerover"]),Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Z1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ca));function ym(e,i){i=(i&4)!==0;for(var l=0;l<e.length;l++){var u=e[l],h=u.event;u=u.listeners;t:{var g=void 0;if(i)for(var E=u.length-1;0<=E;E--){var R=u[E],w=R.instance,z=R.currentTarget;if(R=R.listener,w!==g&&h.isPropagationStopped())break t;g=R,h.currentTarget=z;try{g(h)}catch(j){co(j)}h.currentTarget=null,g=w}else for(E=0;E<u.length;E++){if(R=u[E],w=R.instance,z=R.currentTarget,R=R.listener,w!==g&&h.isPropagationStopped())break t;g=R,h.currentTarget=z;try{g(h)}catch(j){co(j)}h.currentTarget=null,g=w}}}}function bt(e,i){var l=i[Zu];l===void 0&&(l=i[Zu]=new Set);var u=e+"__bubble";l.has(u)||(Em(i,e,2,!1),l.add(u))}function zh(e,i,l){var u=0;i&&(u|=4),Em(l,e,u,i)}var bo="_reactListening"+Math.random().toString(36).slice(2);function Gh(e){if(!e[bo]){e[bo]=!0,hg.forEach(function(l){l!=="selectionchange"&&(Z1.has(l)||zh(l,!1,e),zh(l,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[bo]||(i[bo]=!0,zh("selectionchange",!1,i))}}function Em(e,i,l,u){switch(Ym(i)){case 2:var h=vv;break;case 8:h=Rv;break;default:h=Qh}l=h.bind(null,i,l,e),h=void 0,!sc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?e.addEventListener(i,l,{capture:!0,passive:h}):e.addEventListener(i,l,!0):h!==void 0?e.addEventListener(i,l,{passive:h}):e.addEventListener(i,l,!1)}function Ph(e,i,l,u,h){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)t:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var R=u.stateNode.containerInfo;if(R===h)break;if(E===4)for(E=u.return;E!==null;){var w=E.tag;if((w===3||w===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;R!==null;){if(E=mr(R),E===null)return;if(w=E.tag,w===5||w===6||w===26||w===27){u=g=E;continue t}R=R.parentNode}}u=u.return}bg(function(){var z=g,j=ic(l),q=[];t:{var G=Jg.get(e);if(G!==void 0){var B=Pl,ft=e;switch(e){case"keypress":if(zl(l)===0)break t;case"keydown":case"keyup":B=YT;break;case"focusin":ft="focus",B=uc;break;case"focusout":ft="blur",B=uc;break;case"beforeblur":case"afterblur":B=uc;break;case"click":if(l.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=DT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=VT;break;case kg:case $g:case Qg:B=IT;break;case Wg:B=qT;break;case"scroll":case"scrollend":B=CT;break;case"wheel":B=kT;break;case"copy":case"cut":case"paste":B=UT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Dg;break;case"toggle":case"beforetoggle":B=QT}var ct=(i&4)!==0,Xt=!ct&&(e==="scroll"||e==="scrollend"),I=ct?G!==null?G+"Capture":null:G;ct=[];for(var D=z,N;D!==null;){var V=D;if(N=V.stateNode,V=V.tag,V!==5&&V!==26&&V!==27||N===null||I===null||(V=qs(D,I),V!=null&&ct.push(Ma(D,V,N))),Xt)break;D=D.return}0<ct.length&&(G=new B(G,ft,null,l,j),q.push({event:G,listeners:ct}))}}if((i&7)===0){t:{if(G=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",G&&l!==nc&&(ft=l.relatedTarget||l.fromElement)&&(mr(ft)||ft[_r]))break t;if((B||G)&&(G=j.window===j?j:(G=j.ownerDocument)?G.defaultView||G.parentWindow:window,B?(ft=l.relatedTarget||l.toElement,B=z,ft=ft?mr(ft):null,ft!==null&&(Xt=o(ft),ct=ft.tag,ft!==Xt||ct!==5&&ct!==27&&ct!==6)&&(ft=null)):(B=null,ft=z),B!==ft)){if(ct=Cg,V="onMouseLeave",I="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(ct=Dg,V="onPointerLeave",I="onPointerEnter",D="pointer"),Xt=B==null?G:Ks(B),N=ft==null?G:Ks(ft),G=new ct(V,D+"leave",B,l,j),G.target=Xt,G.relatedTarget=N,V=null,mr(j)===z&&(ct=new ct(I,D+"enter",ft,l,j),ct.target=N,ct.relatedTarget=Xt,V=ct),Xt=V,B&&ft)e:{for(ct=B,I=ft,D=0,N=ct;N;N=$r(N))D++;for(N=0,V=I;V;V=$r(V))N++;for(;0<D-N;)ct=$r(ct),D--;for(;0<N-D;)I=$r(I),N--;for(;D--;){if(ct===I||I!==null&&ct===I.alternate)break e;ct=$r(ct),I=$r(I)}ct=null}else ct=null;B!==null&&pm(q,G,B,ct,!1),ft!==null&&Xt!==null&&pm(q,Xt,ft,ct,!0)}}t:{if(G=z?Ks(z):window,B=G.nodeName&&G.nodeName.toLowerCase(),B==="select"||B==="input"&&G.type==="file")var lt=Pg;else if(zg(G))if(Bg)lt=l1;else{lt=s1;var xt=r1}else B=G.nodeName,!B||B.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?z&&ec(z.elementType)&&(lt=Pg):lt=a1;if(lt&&(lt=lt(e,z))){Gg(q,lt,l,j);break t}xt&&xt(e,G,z),e==="focusout"&&z&&G.type==="number"&&z.memoizedProps.value!=null&&tc(G,"number",G.value)}switch(xt=z?Ks(z):window,e){case"focusin":(zg(xt)||xt.contentEditable==="true")&&(Ar=xt,_c=z,ea=null);break;case"focusout":ea=_c=Ar=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,qg(q,l,j);break;case"selectionchange":if(u1)break;case"keydown":case"keyup":qg(q,l,j)}var ot;if(hc)t:{switch(e){case"compositionstart":var ht="onCompositionStart";break t;case"compositionend":ht="onCompositionEnd";break t;case"compositionupdate":ht="onCompositionUpdate";break t}ht=void 0}else br?Ng(e,l)&&(ht="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(ht="onCompositionStart");ht&&(Og&&l.locale!=="ko"&&(br||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&br&&(ot=Ag()):(ii=j,ac="value"in ii?ii.value:ii.textContent,br=!0)),xt=Ao(z,ht),0<xt.length&&(ht=new Mg(ht,e,null,l,j),q.push({event:ht,listeners:xt}),ot?ht.data=ot:(ot=Ug(l),ot!==null&&(ht.data=ot)))),(ot=JT?t1(e,l):e1(e,l))&&(ht=Ao(z,"onBeforeInput"),0<ht.length&&(xt=new Mg("onBeforeInput","beforeinput",null,l,j),q.push({event:xt,listeners:ht}),xt.data=ot)),V1(q,e,z,l,j)}ym(q,i)})}function Ma(e,i,l){return{instance:e,listener:i,currentTarget:l}}function Ao(e,i){for(var l=i+"Capture",u=[];e!==null;){var h=e,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=qs(e,l),h!=null&&u.unshift(Ma(e,h,g)),h=qs(e,i),h!=null&&u.push(Ma(e,h,g))),e.tag===3)return u;e=e.return}return[]}function $r(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function pm(e,i,l,u,h){for(var g=i._reactName,E=[];l!==null&&l!==u;){var R=l,w=R.alternate,z=R.stateNode;if(R=R.tag,w!==null&&w===u)break;R!==5&&R!==26&&R!==27||z===null||(w=z,h?(z=qs(l,g),z!=null&&E.unshift(Ma(l,z,w))):h||(z=qs(l,g),z!=null&&E.push(Ma(l,z,w)))),l=l.return}E.length!==0&&e.push({event:i,listeners:E})}var k1=/\r\n?/g,$1=/\u0000|\uFFFD/g;function Tm(e){return(typeof e=="string"?e:""+e).replace(k1,`
`).replace($1,"")}function vm(e,i){return i=Tm(i),Tm(e)===i}function wo(){}function Ft(e,i,l,u,h,g){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Rr(e,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Rr(e,""+u);break;case"className":Ol(e,"class",u);break;case"tabIndex":Ol(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ol(e,l,u);break;case"style":xg(e,u,g);break;case"data":if(i!=="object"){Ol(e,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){e.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(l);break}u=Nl(""+u),e.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&Ft(e,i,"name",h.name,h,null),Ft(e,i,"formEncType",h.formEncType,h,null),Ft(e,i,"formMethod",h.formMethod,h,null),Ft(e,i,"formTarget",h.formTarget,h,null)):(Ft(e,i,"encType",h.encType,h,null),Ft(e,i,"method",h.method,h,null),Ft(e,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(l);break}u=Nl(""+u),e.setAttribute(l,u);break;case"onClick":u!=null&&(e.onclick=wo);break;case"onScroll":u!=null&&bt("scroll",e);break;case"onScrollEnd":u!=null&&bt("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=l}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}l=Nl(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(l,""+u):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":u===!0?e.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(l,u):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(l,u):e.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(l):e.setAttribute(l,u);break;case"popover":bt("beforetoggle",e),bt("toggle",e),Dl(e,"popover",u);break;case"xlinkActuate":Ln(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ln(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ln(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ln(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ln(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ln(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ln(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ln(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ln(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Dl(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=AT.get(l)||l,Dl(e,l,u))}}function Bh(e,i,l,u,h,g){switch(l){case"style":xg(e,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(r(60));e.innerHTML=l}}break;case"children":typeof u=="string"?Rr(e,u):(typeof u=="number"||typeof u=="bigint")&&Rr(e,""+u);break;case"onScroll":u!=null&&bt("scroll",e);break;case"onScrollEnd":u!=null&&bt("scrollend",e);break;case"onClick":u!=null&&(e.onclick=wo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fg.hasOwnProperty(l))t:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),i=l.slice(2,h?l.length-7:void 0),g=e[Ue]||null,g=g!=null?g[l]:null,typeof g=="function"&&e.removeEventListener(i,g,h),typeof u=="function")){typeof g!="function"&&g!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(i,u,h);break t}l in e?e[l]=u:u===!0?e.setAttribute(l,""):Dl(e,l,u)}}}function me(e,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",e),bt("load",e);var u=!1,h=!1,g;for(g in l)if(l.hasOwnProperty(g)){var E=l[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ft(e,i,g,E,l,null)}}h&&Ft(e,i,"srcSet",l.srcSet,l,null),u&&Ft(e,i,"src",l.src,l,null);return;case"input":bt("invalid",e);var R=g=E=h=null,w=null,z=null;for(u in l)if(l.hasOwnProperty(u)){var j=l[u];if(j!=null)switch(u){case"name":h=j;break;case"type":E=j;break;case"checked":w=j;break;case"defaultChecked":z=j;break;case"value":g=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,i));break;default:Ft(e,i,u,j,l,null)}}pg(e,g,R,w,z,E,h,!1),Ll(e);return;case"select":bt("invalid",e),u=E=g=null;for(h in l)if(l.hasOwnProperty(h)&&(R=l[h],R!=null))switch(h){case"value":g=R;break;case"defaultValue":E=R;break;case"multiple":u=R;default:Ft(e,i,h,R,l,null)}i=g,l=E,e.multiple=!!u,i!=null?vr(e,!!u,i,!1):l!=null&&vr(e,!!u,l,!0);return;case"textarea":bt("invalid",e),g=h=u=null;for(E in l)if(l.hasOwnProperty(E)&&(R=l[E],R!=null))switch(E){case"value":u=R;break;case"defaultValue":h=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:Ft(e,i,E,R,l,null)}vg(e,u,h,g),Ll(e);return;case"option":for(w in l)if(l.hasOwnProperty(w)&&(u=l[w],u!=null))switch(w){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ft(e,i,w,u,l,null)}return;case"dialog":bt("beforetoggle",e),bt("toggle",e),bt("cancel",e),bt("close",e);break;case"iframe":case"object":bt("load",e);break;case"video":case"audio":for(u=0;u<Ca.length;u++)bt(Ca[u],e);break;case"image":bt("error",e),bt("load",e);break;case"details":bt("toggle",e);break;case"embed":case"source":case"link":bt("error",e),bt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in l)if(l.hasOwnProperty(z)&&(u=l[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ft(e,i,z,u,l,null)}return;default:if(ec(i)){for(j in l)l.hasOwnProperty(j)&&(u=l[j],u!==void 0&&Bh(e,i,j,u,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(u=l[R],u!=null&&Ft(e,i,R,u,l,null))}function Q1(e,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,E=null,R=null,w=null,z=null,j=null;for(B in l){var q=l[B];if(l.hasOwnProperty(B)&&q!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":w=q;default:u.hasOwnProperty(B)||Ft(e,i,B,null,u,q)}}for(var G in u){var B=u[G];if(q=l[G],u.hasOwnProperty(G)&&(B!=null||q!=null))switch(G){case"type":g=B;break;case"name":h=B;break;case"checked":z=B;break;case"defaultChecked":j=B;break;case"value":E=B;break;case"defaultValue":R=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,i));break;default:B!==q&&Ft(e,i,G,B,u,q)}}Ju(e,E,R,w,z,j,g,h);return;case"select":B=E=R=G=null;for(g in l)if(w=l[g],l.hasOwnProperty(g)&&w!=null)switch(g){case"value":break;case"multiple":B=w;default:u.hasOwnProperty(g)||Ft(e,i,g,null,u,w)}for(h in u)if(g=u[h],w=l[h],u.hasOwnProperty(h)&&(g!=null||w!=null))switch(h){case"value":G=g;break;case"defaultValue":R=g;break;case"multiple":E=g;default:g!==w&&Ft(e,i,h,g,u,w)}i=R,l=E,u=B,G!=null?vr(e,!!l,G,!1):!!u!=!!l&&(i!=null?vr(e,!!l,i,!0):vr(e,!!l,l?[]:"",!1));return;case"textarea":B=G=null;for(R in l)if(h=l[R],l.hasOwnProperty(R)&&h!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Ft(e,i,R,null,u,h)}for(E in u)if(h=u[E],g=l[E],u.hasOwnProperty(E)&&(h!=null||g!=null))switch(E){case"value":G=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==g&&Ft(e,i,E,h,u,g)}Tg(e,G,B);return;case"option":for(var ft in l)if(G=l[ft],l.hasOwnProperty(ft)&&G!=null&&!u.hasOwnProperty(ft))switch(ft){case"selected":e.selected=!1;break;default:Ft(e,i,ft,null,u,G)}for(w in u)if(G=u[w],B=l[w],u.hasOwnProperty(w)&&G!==B&&(G!=null||B!=null))switch(w){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Ft(e,i,w,G,u,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ct in l)G=l[ct],l.hasOwnProperty(ct)&&G!=null&&!u.hasOwnProperty(ct)&&Ft(e,i,ct,null,u,G);for(z in u)if(G=u[z],B=l[z],u.hasOwnProperty(z)&&G!==B&&(G!=null||B!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Ft(e,i,z,G,u,B)}return;default:if(ec(i)){for(var Xt in l)G=l[Xt],l.hasOwnProperty(Xt)&&G!==void 0&&!u.hasOwnProperty(Xt)&&Bh(e,i,Xt,void 0,u,G);for(j in u)G=u[j],B=l[j],!u.hasOwnProperty(j)||G===B||G===void 0&&B===void 0||Bh(e,i,j,G,u,B);return}}for(var I in l)G=l[I],l.hasOwnProperty(I)&&G!=null&&!u.hasOwnProperty(I)&&Ft(e,i,I,null,u,G);for(q in u)G=u[q],B=l[q],!u.hasOwnProperty(q)||G===B||G==null&&B==null||Ft(e,i,q,G,u,B)}var Fh=null,Xh=null;function Co(e){return e.nodeType===9?e:e.ownerDocument}function Rm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xm(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Yh(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Hh=null;function W1(){var e=window.event;return e&&e.type==="popstate"?e===Hh?!1:(Hh=e,!0):(Hh=null,!1)}var Sm=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,bm=typeof Promise=="function"?Promise:void 0,tv=typeof queueMicrotask=="function"?queueMicrotask:typeof bm<"u"?function(e){return bm.resolve(null).then(e).catch(ev)}:Sm;function ev(e){setTimeout(function(){throw e})}function pi(e){return e==="head"}function Am(e,i){var l=i,u=0,h=0;do{var g=l.nextSibling;if(e.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<u&&8>u){l=u;var E=e.ownerDocument;if(l&1&&Da(E.documentElement),l&2&&Da(E.body),l&4)for(l=E.head,Da(l),E=l.firstChild;E;){var R=E.nextSibling,w=E.nodeName;E[Vs]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=R}}if(h===0){e.removeChild(g),Pa(i);return}h--}else l==="$"||l==="$?"||l==="$!"?h++:u=l.charCodeAt(0)-48;else u=0;l=g}while(l);Pa(i)}function jh(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":jh(l),ku(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function nv(e,i,l,u){for(;e.nodeType===1;){var h=l;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Vs])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==h.rel||e.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||e.getAttribute("title")!==(h.title==null?null:h.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(h.src==null?null:h.src)||e.getAttribute("type")!==(h.type==null?null:h.type)||e.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=mn(e.nextSibling),e===null)break}return null}function iv(e,i,l){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=mn(e.nextSibling),e===null))return null;return e}function Vh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function rv(e,i){var l=e.ownerDocument;if(e.data!=="$?"||l.readyState==="complete")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function mn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return e}var Kh=null;function wm(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(i===0)return e;i--}else l==="/$"&&i++}e=e.previousSibling}return null}function Cm(e,i,l){switch(i=Co(l),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Da(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);ku(e)}var un=new Map,Mm=new Set;function Mo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Kn=k.d;k.d={f:sv,r:av,D:lv,C:ov,L:uv,m:cv,X:fv,S:hv,M:dv};function sv(){var e=Kn.f(),i=To();return e||i}function av(e){var i=yr(e);i!==null&&i.tag===5&&i.type==="form"?k0(i):Kn.r(e)}var Qr=typeof document>"u"?null:document;function Dm(e,i,l){var u=Qr;if(u&&typeof i=="string"&&i){var h=en(i);h='link[rel="'+e+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),Mm.has(h)||(Mm.add(h),e={rel:e,crossOrigin:l,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),me(i,"link",e),ue(i),u.head.appendChild(i)))}}function lv(e){Kn.D(e),Dm("dns-prefetch",e,null)}function ov(e,i){Kn.C(e,i),Dm("preconnect",e,i)}function uv(e,i,l){Kn.L(e,i,l);var u=Qr;if(u&&e&&i){var h='link[rel="preload"][as="'+en(i)+'"]';i==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+en(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+en(l.imageSizes)+'"]')):h+='[href="'+en(e)+'"]';var g=h;switch(i){case"style":g=Wr(e);break;case"script":g=Jr(e)}un.has(g)||(e=m({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:e,as:i},l),un.set(g,e),u.querySelector(h)!==null||i==="style"&&u.querySelector(Oa(g))||i==="script"&&u.querySelector(La(g))||(i=u.createElement("link"),me(i,"link",e),ue(i),u.head.appendChild(i)))}}function cv(e,i){Kn.m(e,i);var l=Qr;if(l&&e){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+en(u)+'"][href="'+en(e)+'"]',g=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Jr(e)}if(!un.has(g)&&(e=m({rel:"modulepreload",href:e},i),un.set(g,e),l.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(La(g)))return}u=l.createElement("link"),me(u,"link",e),ue(u),l.head.appendChild(u)}}}function hv(e,i,l){Kn.S(e,i,l);var u=Qr;if(u&&e){var h=Er(u).hoistableStyles,g=Wr(e);i=i||"default";var E=h.get(g);if(!E){var R={loading:0,preload:null};if(E=u.querySelector(Oa(g)))R.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":i},l),(l=un.get(g))&&qh(e,l);var w=E=u.createElement("link");ue(w),me(w,"link",e),w._p=new Promise(function(z,j){w.onload=z,w.onerror=j}),w.addEventListener("load",function(){R.loading|=1}),w.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Do(E,i,u)}E={type:"stylesheet",instance:E,count:1,state:R},h.set(g,E)}}}function fv(e,i){Kn.X(e,i);var l=Qr;if(l&&e){var u=Er(l).hoistableScripts,h=Jr(e),g=u.get(h);g||(g=l.querySelector(La(h)),g||(e=m({src:e,async:!0},i),(i=un.get(h))&&Zh(e,i),g=l.createElement("script"),ue(g),me(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(h,g))}}function dv(e,i){Kn.M(e,i);var l=Qr;if(l&&e){var u=Er(l).hoistableScripts,h=Jr(e),g=u.get(h);g||(g=l.querySelector(La(h)),g||(e=m({src:e,async:!0,type:"module"},i),(i=un.get(h))&&Zh(e,i),g=l.createElement("script"),ue(g),me(g,"link",e),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(h,g))}}function Om(e,i,l,u){var h=(h=at.current)?Mo(h):null;if(!h)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Wr(l.href),l=Er(h).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Wr(l.href);var g=Er(h).hoistableStyles,E=g.get(e);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,E),(g=h.querySelector(Oa(e)))&&!g._p&&(E.instance=g,E.state.loading=5),un.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},un.set(e,l),g||gv(h,e,l,E.state))),i&&u===null)throw Error(r(528,""));return E}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Jr(l),l=Er(h).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Wr(e){return'href="'+en(e)+'"'}function Oa(e){return'link[rel="stylesheet"]['+e+"]"}function Lm(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function gv(e,i,l,u){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=e.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),me(i,"link",l),ue(i),e.head.appendChild(i))}function Jr(e){return'[src="'+en(e)+'"]'}function La(e){return"script[async]"+e}function Im(e,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=e.querySelector('style[data-href~="'+en(l.href)+'"]');if(u)return i.instance=u,ue(u),u;var h=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),ue(u),me(u,"style",h),Do(u,l.precedence,e),i.instance=u;case"stylesheet":h=Wr(l.href);var g=e.querySelector(Oa(h));if(g)return i.state.loading|=4,i.instance=g,ue(g),g;u=Lm(l),(h=un.get(h))&&qh(u,h),g=(e.ownerDocument||e).createElement("link"),ue(g);var E=g;return E._p=new Promise(function(R,w){E.onload=R,E.onerror=w}),me(g,"link",u),i.state.loading|=4,Do(g,l.precedence,e),i.instance=g;case"script":return g=Jr(l.src),(h=e.querySelector(La(g)))?(i.instance=h,ue(h),h):(u=l,(h=un.get(g))&&(u=m({},l),Zh(u,h)),e=e.ownerDocument||e,h=e.createElement("script"),ue(h),me(h,"link",u),e.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Do(u,l.precedence,e));return i.instance}function Do(e,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,g=h,E=0;E<u.length;E++){var R=u[E];if(R.dataset.precedence===i)g=R;else if(g!==h)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(e,i.firstChild))}function qh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Zh(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var Oo=null;function Nm(e,i,l){if(Oo===null){var u=new Map,h=Oo=new Map;h.set(l,u)}else h=Oo,u=h.get(l),u||(u=new Map,h.set(l,u));if(u.has(e))return u;for(u.set(e,null),l=l.getElementsByTagName(e),h=0;h<l.length;h++){var g=l[h];if(!(g[Vs]||g[Te]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(i)||"";E=e+E;var R=u.get(E);R?R.push(g):u.set(E,[g])}}return u}function Um(e,i,l){e=e.ownerDocument||e,e.head.insertBefore(l,i==="title"?e.querySelector("head > title"):null)}function _v(e,i,l){if(l===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function zm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Ia=null;function mv(){}function yv(e,i,l){if(Ia===null)throw Error(r(475));var u=Ia;if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Wr(l.href),g=e.querySelector(Oa(h));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(u.count++,u=Lo.bind(u),e.then(u,u)),i.state.loading|=4,i.instance=g,ue(g);return}g=e.ownerDocument||e,l=Lm(l),(h=un.get(h))&&qh(l,h),g=g.createElement("link"),ue(g);var E=g;E._p=new Promise(function(R,w){E.onload=R,E.onerror=w}),me(g,"link",l),i.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(i,e),(e=i.state.preload)&&(i.state.loading&3)===0&&(u.count++,i=Lo.bind(u),e.addEventListener("load",i),e.addEventListener("error",i))}}function Ev(){if(Ia===null)throw Error(r(475));var e=Ia;return e.stylesheets&&e.count===0&&kh(e,e.stylesheets),0<e.count?function(i){var l=setTimeout(function(){if(e.stylesheets&&kh(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(l)}}:null}function Lo(){if(this.count--,this.count===0){if(this.stylesheets)kh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Io=null;function kh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Io=new Map,i.forEach(pv,e),Io=null,Lo.call(e))}function pv(e,i){if(!(i.state.loading&4)){var l=Io.get(e);if(l)var u=l.get(null);else{l=new Map,Io.set(e,l);for(var h=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var E=h[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),u=E)}u&&l.set(null,u)}h=i.instance,E=h.getAttribute("data-precedence"),g=l.get(E)||u,g===u&&l.set(null,h),l.set(E,h),this.count++,u=Lo.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),g?g.parentNode.insertBefore(h,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(h,e.firstChild)),i.state.loading|=4}}var Na={$$typeof:L,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function Tv(e,i,l,u,h,g,E,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vu(0),this.hiddenUpdates=Vu(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function Gm(e,i,l,u,h,g,E,R,w,z,j,q){return e=new Tv(e,i,l,E,R,w,z,q),i=1,g===!0&&(i|=24),g=Ve(3,null,null,i),e.current=g,g.stateNode=e,i=Dc(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:l,cache:i},Nc(g),e}function Pm(e){return e?(e=Dr,e):Dr}function Bm(e,i,l,u,h,g){h=Pm(h),u.context===null?u.context=h:u.pendingContext=h,u=ai(i),u.payload={element:l},g=g===void 0?null:g,g!==null&&(u.callback=g),l=li(e,u,i),l!==null&&($e(l,e,i),ca(l,e,i))}function Fm(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function $h(e,i){Fm(e,i),(e=e.alternate)&&Fm(e,i)}function Xm(e){if(e.tag===13){var i=Mr(e,67108864);i!==null&&$e(i,e,67108864),$h(e,67108864)}}var No=!0;function vv(e,i,l,u){var h=P.T;P.T=null;var g=k.p;try{k.p=2,Qh(e,i,l,u)}finally{k.p=g,P.T=h}}function Rv(e,i,l,u){var h=P.T;P.T=null;var g=k.p;try{k.p=8,Qh(e,i,l,u)}finally{k.p=g,P.T=h}}function Qh(e,i,l,u){if(No){var h=Wh(u);if(h===null)Ph(e,i,u,Uo,l),Hm(e,u);else if(Sv(h,e,i,l,u))u.stopPropagation();else if(Hm(e,u),i&4&&-1<xv.indexOf(e)){for(;h!==null;){var g=yr(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Fi(g.pendingLanes);if(E!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;E;){var w=1<<31-He(E);R.entanglements[1]|=w,E&=~w}Sn(g),(Gt&6)===0&&(Eo=we()+500,wa(0))}}break;case 13:R=Mr(g,2),R!==null&&$e(R,g,2),To(),$h(g,2)}if(g=Wh(u),g===null&&Ph(e,i,u,Uo,l),g===h)break;h=g}h!==null&&u.stopPropagation()}else Ph(e,i,u,null,l)}}function Wh(e){return e=ic(e),Jh(e)}var Uo=null;function Jh(e){if(Uo=null,e=mr(e),e!==null){var i=o(e);if(i===null)e=null;else{var l=i.tag;if(l===13){if(e=c(i),e!==null)return e;e=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Uo=e,null}function Ym(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dr()){case Xs:return 2;case gr:return 8;case On:case ju:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var tf=!1,Ti=null,vi=null,Ri=null,Ua=new Map,za=new Map,xi=[],xv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hm(e,i){switch(e){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":vi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Ua.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":za.delete(i.pointerId)}}function Ga(e,i,l,u,h,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:g,targetContainers:[h]},i!==null&&(i=yr(i),i!==null&&Xm(i)),e):(e.eventSystemFlags|=u,i=e.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),e)}function Sv(e,i,l,u,h){switch(i){case"focusin":return Ti=Ga(Ti,e,i,l,u,h),!0;case"dragenter":return vi=Ga(vi,e,i,l,u,h),!0;case"mouseover":return Ri=Ga(Ri,e,i,l,u,h),!0;case"pointerover":var g=h.pointerId;return Ua.set(g,Ga(Ua.get(g)||null,e,i,l,u,h)),!0;case"gotpointercapture":return g=h.pointerId,za.set(g,Ga(za.get(g)||null,e,i,l,u,h)),!0}return!1}function jm(e){var i=mr(e.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=c(l),i!==null){e.blockedOn=i,yT(e.priority,function(){if(l.tag===13){var u=ke();u=Ku(u);var h=Mr(l,u);h!==null&&$e(h,l,u),$h(l,u)}});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zo(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var l=Wh(e.nativeEvent);if(l===null){l=e.nativeEvent;var u=new l.constructor(l.type,l);nc=u,l.target.dispatchEvent(u),nc=null}else return i=yr(l),i!==null&&Xm(i),e.blockedOn=l,!1;i.shift()}return!0}function Vm(e,i,l){zo(e)&&l.delete(i)}function bv(){tf=!1,Ti!==null&&zo(Ti)&&(Ti=null),vi!==null&&zo(vi)&&(vi=null),Ri!==null&&zo(Ri)&&(Ri=null),Ua.forEach(Vm),za.forEach(Vm)}function Go(e,i){e.blockedOn===i&&(e.blockedOn=null,tf||(tf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,bv)))}var Po=null;function Km(e){Po!==e&&(Po=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Po===e&&(Po=null);for(var i=0;i<e.length;i+=3){var l=e[i],u=e[i+1],h=e[i+2];if(typeof u!="function"){if(Jh(u||l)===null)continue;break}var g=yr(l);g!==null&&(e.splice(i,3),i-=3,Jc(g,{pending:!0,data:h,method:l.method,action:u},u,h))}}))}function Pa(e){function i(w){return Go(w,e)}Ti!==null&&Go(Ti,e),vi!==null&&Go(vi,e),Ri!==null&&Go(Ri,e),Ua.forEach(i),za.forEach(i);for(var l=0;l<xi.length;l++){var u=xi[l];u.blockedOn===e&&(u.blockedOn=null)}for(;0<xi.length&&(l=xi[0],l.blockedOn===null);)jm(l),l.blockedOn===null&&xi.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var h=l[u],g=l[u+1],E=h[Ue]||null;if(typeof g=="function")E||Km(l);else if(E){var R=null;if(g&&g.hasAttribute("formAction")){if(h=g,E=g[Ue]||null)R=E.formAction;else if(Jh(h)!==null)continue}else R=E.action;typeof R=="function"?l[u+1]=R:(l.splice(u,3),u-=3),Km(l)}}}function ef(e){this._internalRoot=e}Bo.prototype.render=ef.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var l=i.current,u=ke();Bm(l,u,e,i,null,null)},Bo.prototype.unmount=ef.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Bm(e.current,2,null,e,null,null),To(),i[_r]=null}};function Bo(e){this._internalRoot=e}Bo.prototype.unstable_scheduleHydration=function(e){if(e){var i=ug();e={blockedOn:null,target:e,priority:i};for(var l=0;l<xi.length&&i!==0&&i<xi[l].priority;l++);xi.splice(l,0,e),l===0&&jm(e)}};var qm=t.version;if(qm!=="19.1.0")throw Error(r(527,qm,"19.1.0"));k.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=d(i),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var Av={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fo.isDisabled&&Fo.supportsFiber)try{Ys=Fo.inject(Av),Ye=Fo}catch{}}return Fa.createRoot=function(e,i){if(!a(e))throw Error(r(299));var l=!1,u="",h=u_,g=c_,E=h_,R=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(R=i.unstable_transitionCallbacks)),i=Gm(e,1,!1,null,null,l,u,h,g,E,R,null),e[_r]=i.current,Gh(e),new ef(i)},Fa.hydrateRoot=function(e,i,l){if(!a(e))throw Error(r(299));var u=!1,h="",g=u_,E=c_,R=h_,w=null,z=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(w=l.unstable_transitionCallbacks),l.formState!==void 0&&(z=l.formState)),i=Gm(e,1,!0,i,l??null,u,h,g,E,R,w,z),i.context=Pm(null),l=i.current,u=ke(),u=Ku(u),h=ai(u),h.callback=null,li(l,h,u),l=u,i.current.lanes=l,js(i,l),Sn(i),e[_r]=i.current,Gh(e),new Bo(i)},Fa.version="19.1.0",Fa}var iy;function zv(){if(iy)return sf.exports;iy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),sf.exports=Uv(),sf.exports}var Gv=zv();const hn={ADD:"add",REMOVE:"remove"},el={PROPERTYCHANGE:"propertychange"},_t={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class gl{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function xu(s,t){return s>t?1:s<t?-1:0}function Pv(s,t){return s<t?1:s>t?-1:0}function ad(s,t,n){if(s[0]<=t)return 0;const r=s.length;if(t<=s[r-1])return r-1;if(typeof n=="function"){for(let a=1;a<r;++a){const o=s[a];if(o===t)return a;if(o<t)return n(t,s[a-1],o)>0?a-1:a}return r-1}if(n>0){for(let a=1;a<r;++a)if(s[a]<t)return a-1;return r-1}if(n<0){for(let a=1;a<r;++a)if(s[a]<=t)return a;return r-1}for(let a=1;a<r;++a){if(s[a]==t)return a;if(s[a]<t)return s[a-1]-t<t-s[a]?a-1:a}return r-1}function Bv(s,t){const n=Array.isArray(t)?t:[t],r=n.length;for(let a=0;a<r;a++)s[s.length]=n[a]}function Su(s,t){const n=s.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(s[r]!==t[r])return!1;return!0}function Fv(s,t,n){const r=t||xu;return s.every(function(a,o){if(o===0)return!0;const c=r(s[o-1],a);return!(c>0||c===0)})}function uu(){return!0}function bu(){return!1}function cu(){}function Xv(s){let t,n,r;return function(){const a=Array.prototype.slice.call(arguments);return(!n||this!==r||!Su(a,n))&&(r=this,n=a,t=s.apply(this,arguments)),t}}function AE(s){function t(){let n;try{n=s()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return t()}function _l(s){for(const t in s)delete s[t]}function wE(s){let t;for(t in s)return!1;return!t}class Ni{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class ml extends gl{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,n){if(!t||!n)return;const r=this.listeners_||(this.listeners_={}),a=r[t]||(r[t]=[]);a.includes(n)||a.push(n)}dispatchEvent(t){const n=typeof t=="string",r=n?t:t.type,a=this.listeners_&&this.listeners_[r];if(!a)return;const o=n?new Ni(t):t;o.target||(o.target=this.eventTarget_||this);const c=this.dispatching_||(this.dispatching_={}),f=this.pendingRemovals_||(this.pendingRemovals_={});r in c||(c[r]=0,f[r]=0),++c[r];let d;for(let _=0,m=a.length;_<m;++_)if("handleEvent"in a[_]?d=a[_].handleEvent(o):d=a[_].call(this,o),d===!1||o.propagationStopped){d=!1;break}if(--c[r]===0){let _=f[r];for(delete f[r];_--;)this.removeEventListener(r,cu);delete c[r]}return d}disposeInternal(){this.listeners_&&_l(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,n){if(!this.listeners_)return;const r=this.listeners_[t];if(!r)return;const a=r.indexOf(n);a!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(r[a]=cu,++this.pendingRemovals_[t]):(r.splice(a,1),r.length===0&&delete this.listeners_[t]))}}function Ut(s,t,n,r,a){if(a){const c=n;n=function(f){return s.removeEventListener(t,n),c.call(r??this,f)}}else r&&r!==s&&(n=n.bind(r));const o={target:s,type:t,listener:n};return s.addEventListener(t,n),o}function hu(s,t,n,r){return Ut(s,t,n,r,!0)}function kt(s){s&&s.target&&(s.target.removeEventListener(s.type,s.listener),_l(s))}class yl extends ml{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(_t.CHANGE)}getRevision(){return this.revision_}onInternal(t,n){if(Array.isArray(t)){const r=t.length,a=new Array(r);for(let o=0;o<r;++o)a[o]=Ut(this,t[o],n);return a}return Ut(this,t,n)}onceInternal(t,n){let r;if(Array.isArray(t)){const a=t.length;r=new Array(a);for(let o=0;o<a;++o)r[o]=hu(this,t[o],n)}else r=hu(this,t,n);return n.ol_key=r,r}unInternal(t,n){const r=n.ol_key;if(r)Yv(r);else if(Array.isArray(t))for(let a=0,o=t.length;a<o;++a)this.removeEventListener(t[a],n);else this.removeEventListener(t,n)}}yl.prototype.on;yl.prototype.once;yl.prototype.un;function Yv(s){if(Array.isArray(s))for(let t=0,n=s.length;t<n;++t)kt(s[t]);else kt(s)}function Mt(){throw new Error("Unimplemented abstract method.")}let Hv=0;function zt(s){return s.ol_uid||(s.ol_uid=String(++Hv))}class ry extends Ni{constructor(t,n,r){super(t),this.key=n,this.oldValue=r}}class Wn extends yl{constructor(t){super(),this.on,this.once,this.un,zt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,n){let r;r=`change:${t}`,this.hasListener(r)&&this.dispatchEvent(new ry(r,t,n)),r=el.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new ry(r,t,n))}addChangeListener(t,n){this.addEventListener(`change:${t}`,n)}removeChangeListener(t,n){this.removeEventListener(`change:${t}`,n)}set(t,n,r){const a=this.values_||(this.values_={});if(r)a[t]=n;else{const o=a[t];a[t]=n,o!==n&&this.notify(t,o)}}setProperties(t,n){for(const r in t)this.set(r,t[r],n)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,n){if(this.values_&&t in this.values_){const r=this.values_[t];delete this.values_[t],wE(this.values_)&&(this.values_=null),n||this.notify(t,r)}}}const sy={LENGTH:"length"};class Xo extends Ni{constructor(t,n,r){super(t),this.element=n,this.index=r}}class kn extends Wn{constructor(t,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=t||[],this.unique_)for(let r=0,a=this.array_.length;r<a;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let n=0,r=t.length;n<r;++n)this.push(t[n]);return this}forEach(t){const n=this.array_;for(let r=0,a=n.length;r<a;++r)t(n[r],r,n)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(sy.LENGTH)}insertAt(t,n){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new Xo(hn.ADD,n,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const n=this.getLength();return this.insertAt(n,t),this.getLength()}remove(t){const n=this.array_;for(let r=0,a=n.length;r<a;++r)if(n[r]===t)return this.removeAt(r)}removeAt(t){if(t<0||t>=this.getLength())return;const n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Xo(hn.REMOVE,n,t)),n}setAt(t,n){const r=this.getLength();if(t>=r){this.insertAt(t,n);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(n,t);const a=this.array_[t];this.array_[t]=n,this.dispatchEvent(new Xo(hn.REMOVE,a,t)),this.dispatchEvent(new Xo(hn.ADD,n,t))}updateLength_(){this.set(sy.LENGTH,this.array_.length)}assertUnique_(t,n){for(let r=0,a=this.array_.length;r<a;++r)if(this.array_[r]===t&&r!==n)throw new Error("Duplicate item added to a unique collection")}}class cs extends Ni{constructor(t,n,r){super(t),this.map=n,this.frameState=r!==void 0?r:null}}class Ci extends cs{constructor(t,n,r,a,o,c){super(t,n,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=a!==void 0?a:!1,this.activePointers=c}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Jt={SINGLECLICK:"singleclick",CLICK:_t.CLICK,DBLCLICK:_t.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},ur=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",jv=ur.includes("safari")&&!ur.includes("chrom"),Vv=jv&&(ur.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ur)),Kv=ur.includes("webkit")&&!ur.includes("edge"),CE=ur.includes("macintosh"),qv=typeof devicePixelRatio<"u"?devicePixelRatio:1,ME=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,DE=typeof Image<"u"&&Image.prototype.decode,OE=function(){let s=!1;try{const t=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return s}(),Ff={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Zv extends ml{constructor(t,n){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Ut(r,Ff.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Ut(r,Ff.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(_t.TOUCHMOVE,this.boundHandleTouchMove_,OE?{passive:!1}:!1)}emulateClick_(t){let n=new Ci(Jt.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Ci(Jt.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Ci(Jt.SINGLECLICK,this.map_,t);this.dispatchEvent(r)},250)}updateActivePointers_(t){const n=t,r=n.pointerId;if(n.type==Jt.POINTERUP||n.type==Jt.POINTERCANCEL){delete this.trackedTouches_[r];for(const a in this.trackedTouches_)if(this.trackedTouches_[a].target!==n.target){delete this.trackedTouches_[a];break}}else(n.type==Jt.POINTERDOWN||n.type==Jt.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const n=new Ci(Jt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(kt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const n=new Ci(Jt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Ut(r,Jt.POINTERMOVE,this.handlePointerMove_,this),Ut(r,Jt.POINTERUP,this.handlePointerUp_,this),Ut(this.element_,Jt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Ut(this.element_.getRootNode(),Jt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const n=new Ci(Jt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Ci(Jt.POINTERMOVE,this.map_,t,n))}handleTouchMove_(t){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(kt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(_t.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(kt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(kt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Mi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},xe={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},tt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function jt(s,t){if(!s)throw new Error(t)}const fu=1/0;class kv{constructor(t,n){this.priorityFunction_=t,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,_l(this.queuedElements_)}dequeue(){const t=this.elements_,n=this.priorities_,r=t[0];t.length==1?(t.length=0,n.length=0):(t[0]=t.pop(),n[0]=n.pop(),this.siftUp_(0));const a=this.keyFunction_(r);return delete this.queuedElements_[a],r}enqueue(t){jt(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(t);return n!=fu?(this.elements_.push(t),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const n=this.elements_,r=this.priorities_,a=n.length,o=n[t],c=r[t],f=t;for(;t<a>>1;){const d=this.getLeftChildIndex_(t),_=this.getRightChildIndex_(t),m=_<a&&r[_]<r[d]?_:d;n[t]=n[m],r[t]=r[m],t=m}n[t]=o,r[t]=c,this.siftDown_(f,t)}siftDown_(t,n){const r=this.elements_,a=this.priorities_,o=r[n],c=a[n];for(;n>t;){const f=this.getParentIndex_(n);if(a[f]>c)r[n]=r[f],a[n]=a[f],n=f;else break}r[n]=o,a[n]=c}reprioritize(){const t=this.priorityFunction_,n=this.elements_,r=this.priorities_;let a=0;const o=n.length;let c,f,d;for(f=0;f<o;++f)c=n[f],d=t(c),d==fu?delete this.queuedElements_[this.keyFunction_(c)]:(r[a]=d,n[a++]=c);n.length=a,r.length=a,this.heapify_()}}class $v extends kv{constructor(t,n){super(r=>t.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const n=super.enqueue(t);return n&&t[0].addEventListener(_t.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const n=t.target,r=n.getState();if(r===tt.LOADED||r===tt.ERROR||r===tt.EMPTY){r!==tt.ERROR&&n.removeEventListener(_t.CHANGE,this.boundHandleTileChange_);const a=n.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,n){let r=0;for(;this.tilesLoading_<t&&r<n&&this.getCount()>0;){const a=this.dequeue()[0],o=a.getKey();a.getState()===tt.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,a.load())}}}function Qv(s,t,n,r,a){if(!s||!(n in s.wantedTiles)||!s.wantedTiles[n][t.getKey()])return fu;const o=s.viewState.center,c=r[0]-o[0],f=r[1]-o[1];return 65536*Math.log(a)+Math.sqrt(c*c+f*f)/a}const cn={ANIMATING:0,INTERACTING:1},yn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function qt(s,t,n){return Math.min(Math.max(s,t),n)}function Wv(s,t,n,r,a,o){const c=a-n,f=o-r;if(c!==0||f!==0){const d=((s-n)*c+(t-r)*f)/(c*c+f*f);d>1?(n=a,r=o):d>0&&(n+=c*d,r+=f*d)}return Ts(s,t,n,r)}function Ts(s,t,n,r){const a=n-s,o=r-t;return a*a+o*o}function Jv(s){const t=s.length;for(let r=0;r<t;r++){let a=r,o=Math.abs(s[r][r]);for(let f=r+1;f<t;f++){const d=Math.abs(s[f][r]);d>o&&(o=d,a=f)}if(o===0)return null;const c=s[a];s[a]=s[r],s[r]=c;for(let f=r+1;f<t;f++){const d=-s[f][r]/s[r][r];for(let _=r;_<t+1;_++)r==_?s[f][_]=0:s[f][_]+=d*s[r][_]}}const n=new Array(t);for(let r=t-1;r>=0;r--){n[r]=s[r][t]/s[r][r];for(let a=r-1;a>=0;a--)s[a][t]-=s[a][r]*n[r]}return n}function ay(s){return s*180/Math.PI}function Oi(s){return s*Math.PI/180}function vs(s,t){const n=s%t;return n*t<0?n+t:n}function tR(s,t,n){return s+n*(t-s)}function ld(s,t){const n=Math.pow(10,t);return Math.round(s*n)/n}function Yo(s,t){return Math.floor(ld(s,t))}function Ho(s,t){return Math.ceil(ld(s,t))}function Xf(s,t,n){if(s>=t&&s<n)return s;const r=n-t;return((s-t)%r+r)%r+t}function ly(s,t,n){return function(r,a,o,c,f){if(!r)return;if(!a&&!t)return r;const d=t?0:o[0]*a,_=t?0:o[1]*a,m=f?f[0]:0,y=f?f[1]:0;let p=s[0]+d/2+m,v=s[2]-d/2+m,T=s[1]+_/2+y,S=s[3]-_/2+y;p>v&&(p=(v+p)/2,v=p),T>S&&(T=(S+T)/2,S=T);let x=qt(r[0],p,v),M=qt(r[1],T,S);if(c&&n&&a){const b=30*a;x+=-b*Math.log(1+Math.max(0,p-r[0])/b)+b*Math.log(1+Math.max(0,r[0]-v)/b),M+=-b*Math.log(1+Math.max(0,T-r[1])/b)+b*Math.log(1+Math.max(0,r[1]-S)/b)}return[x,M]}}function eR(s){return s}const ye={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Yf(s){const t=Ui();for(let n=0,r=s.length;n<r;++n)lu(t,s[n]);return t}function nR(s,t,n){const r=Math.min.apply(null,s),a=Math.min.apply(null,t),o=Math.max.apply(null,s),c=Math.max.apply(null,t);return Ns(r,a,o,c,n)}function iR(s,t){return t?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t):s.slice()}function LE(s,t,n){let r,a;return t<s[0]?r=s[0]-t:s[2]<t?r=t-s[2]:r=0,n<s[1]?a=s[1]-n:s[3]<n?a=n-s[3]:a=0,r*r+a*a}function nl(s,t){return IE(s,t[0],t[1])}function IE(s,t,n){return s[0]<=t&&t<=s[2]&&s[1]<=n&&n<=s[3]}function oy(s,t){const n=s[0],r=s[1],a=s[2],o=s[3],c=t[0],f=t[1];let d=ye.UNKNOWN;return c<n?d=d|ye.LEFT:c>a&&(d=d|ye.RIGHT),f<r?d=d|ye.BELOW:f>o&&(d=d|ye.ABOVE),d===ye.UNKNOWN&&(d=ye.INTERSECTING),d}function Ui(){return[1/0,1/0,-1/0,-1/0]}function Ns(s,t,n,r,a){return a?(a[0]=s,a[1]=t,a[2]=n,a[3]=r,a):[s,t,n,r]}function El(s){return Ns(1/0,1/0,-1/0,-1/0,s)}function rR(s,t){const n=s[0],r=s[1];return Ns(n,r,n,r,t)}function sR(s,t,n,r,a){const o=El(a);return UE(o,s,t,n,r)}function Hf(s,t){return s[0]==t[0]&&s[2]==t[2]&&s[1]==t[1]&&s[3]==t[3]}function NE(s,t){return t[0]<s[0]&&(s[0]=t[0]),t[2]>s[2]&&(s[2]=t[2]),t[1]<s[1]&&(s[1]=t[1]),t[3]>s[3]&&(s[3]=t[3]),s}function lu(s,t){t[0]<s[0]&&(s[0]=t[0]),t[0]>s[2]&&(s[2]=t[0]),t[1]<s[1]&&(s[1]=t[1]),t[1]>s[3]&&(s[3]=t[1])}function UE(s,t,n,r,a){for(;n<r;n+=a)aR(s,t[n],t[n+1]);return s}function aR(s,t,n){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],n),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],n)}function zE(s,t){let n;return n=t(Au(s)),n||(n=t(wu(s)),n)||(n=t(Cu(s)),n)||(n=t(Qn(s)),n)?n:!1}function il(s){let t=0;return Us(s)||(t=Yt(s)*Le(s)),t}function Au(s){return[s[0],s[1]]}function wu(s){return[s[2],s[1]]}function cr(s){return[(s[0]+s[2])/2,(s[1]+s[3])/2]}function lR(s,t){let n;if(t==="bottom-left")n=Au(s);else if(t==="bottom-right")n=wu(s);else if(t==="top-left")n=Qn(s);else if(t==="top-right")n=Cu(s);else throw new Error("Invalid corner");return n}function jf(s,t,n,r,a){const[o,c,f,d,_,m,y,p]=od(s,t,n,r);return Ns(Math.min(o,f,_,y),Math.min(c,d,m,p),Math.max(o,f,_,y),Math.max(c,d,m,p),a)}function od(s,t,n,r){const a=t*r[0]/2,o=t*r[1]/2,c=Math.cos(n),f=Math.sin(n),d=a*c,_=a*f,m=o*c,y=o*f,p=s[0],v=s[1];return[p-d+y,v-_-m,p-d-y,v-_+m,p+d-y,v+_+m,p+d+y,v+_-m,p-d+y,v-_-m]}function Le(s){return s[3]-s[1]}function Ie(s,t,n){const r=n||Ui();return pl(s,t)?(s[0]>t[0]?r[0]=s[0]:r[0]=t[0],s[1]>t[1]?r[1]=s[1]:r[1]=t[1],s[2]<t[2]?r[2]=s[2]:r[2]=t[2],s[3]<t[3]?r[3]=s[3]:r[3]=t[3]):El(r),r}function Qn(s){return[s[0],s[3]]}function Cu(s){return[s[2],s[3]]}function Yt(s){return s[2]-s[0]}function pl(s,t){return s[0]<=t[2]&&s[2]>=t[0]&&s[1]<=t[3]&&s[3]>=t[1]}function Us(s){return s[2]<s[0]||s[3]<s[1]}function oR(s,t){return t?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t):s}function uR(s,t,n){let r=!1;const a=oy(s,t),o=oy(s,n);if(a===ye.INTERSECTING||o===ye.INTERSECTING)r=!0;else{const c=s[0],f=s[1],d=s[2],_=s[3],m=t[0],y=t[1],p=n[0],v=n[1],T=(v-y)/(p-m);let S,x;o&ye.ABOVE&&!(a&ye.ABOVE)&&(S=p-(v-_)/T,r=S>=c&&S<=d),!r&&o&ye.RIGHT&&!(a&ye.RIGHT)&&(x=v-(p-d)*T,r=x>=f&&x<=_),!r&&o&ye.BELOW&&!(a&ye.BELOW)&&(S=p-(v-f)/T,r=S>=c&&S<=d),!r&&o&ye.LEFT&&!(a&ye.LEFT)&&(x=v-(p-c)*T,r=x>=f&&x<=_)}return r}function cR(s,t,n,r){if(Us(s))return El(n);let a=[];a=[s[0],s[1],s[2],s[1],s[2],s[3],s[0],s[3]],t(a,a,2);const o=[],c=[];for(let f=0,d=a.length;f<d;f+=2)o.push(a[f]),c.push(a[f+1]);return nR(o,c,n)}function hR(s,t){const n=t.getExtent(),r=cr(s);if(t.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const a=Yt(n),c=Math.floor((r[0]-n[0])/a)*a;s[0]-=c,s[2]-=c}return s}function GE(s,t,n){if(t.canWrapX()){const r=t.getExtent();if(!isFinite(s[0])||!isFinite(s[2]))return[[r[0],s[1],r[2],s[3]]];hR(s,t);const a=Yt(r);if(Yt(s)>a,s[0]<r[0])return[[s[0]+a,s[1],r[2],s[3]],[r[0],s[1],s[2],s[3]]];if(s[2]>r[2])return[[s[0],s[1],r[2],s[3]],[r[0],s[1],s[2]-a,s[3]]]}return[s]}function fR(s,t){return s[0]+=+t[0],s[1]+=+t[1],s}function du(s,t){let n=!0;for(let r=s.length-1;r>=0;--r)if(s[r]!=t[r]){n=!1;break}return n}function ud(s,t){const n=Math.cos(t),r=Math.sin(t),a=s[0]*n-s[1]*r,o=s[1]*n+s[0]*r;return s[0]=a,s[1]=o,s}function dR(s,t){return s[0]*=t,s[1]*=t,s}function gR(s,t){if(t.canWrapX()){const n=Yt(t.getExtent()),r=_R(s,t,n);r&&(s[0]-=r*n)}return s}function _R(s,t,n){const r=t.getExtent();let a=0;return t.canWrapX()&&(s[0]<r[0]||s[0]>r[2])&&(n=n||Yt(r),a=Math.floor((s[0]-r[0])/n)),a}function PE(s){return Math.pow(s,3)}function zs(s){return 1-PE(1-s)}function mR(s){return 3*s*s-2*s*s*s}function yR(s){return s}const ER=63710088e-1;function uy(s,t,n){n=n||ER;const r=Oi(s[1]),a=Oi(t[1]),o=(a-r)/2,c=Oi(t[0]-s[0])/2,f=Math.sin(o)*Math.sin(o)+Math.sin(c)*Math.sin(c)*Math.cos(r)*Math.cos(a);return 2*n*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function BE(...s){console.warn(...s)}function cy(...s){console.error(...s)}const pR={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function hy(s){return pR[s]}const Cs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class rl{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Cs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Tl=6378137,ys=Math.PI*Tl,TR=[-ys,-ys,ys,ys],vR=[-180,-85,180,85],jo=Tl*Math.log(Math.tan(Math.PI/2));class ts extends rl{constructor(t){super({code:t,units:"m",extent:TR,global:!0,worldExtent:vR,getPointResolution:function(n,r){return n/Math.cosh(r[1]/Tl)}})}}const fy=[new ts("EPSG:3857"),new ts("EPSG:102100"),new ts("EPSG:102113"),new ts("EPSG:900913"),new ts("http://www.opengis.net/def/crs/EPSG/0/3857"),new ts("http://www.opengis.net/gml/srs/epsg.xml#3857")];function RR(s,t,n,r){const a=s.length;n=n>1?n:2,r=r??n,t===void 0&&(n>2?t=s.slice():t=new Array(a));for(let o=0;o<a;o+=r){t[o]=ys*s[o]/180;let c=Tl*Math.log(Math.tan(Math.PI*(+s[o+1]+90)/360));c>jo?c=jo:c<-jo&&(c=-jo),t[o+1]=c}return t}function xR(s,t,n,r){const a=s.length;n=n>1?n:2,r=r??n,t===void 0&&(n>2?t=s.slice():t=new Array(a));for(let o=0;o<a;o+=r)t[o]=180*s[o]/ys,t[o+1]=360*Math.atan(Math.exp(s[o+1]/Tl))/Math.PI-90;return t}const SR=6378137,dy=[-180,-90,180,90],bR=Math.PI*SR/180;class rr extends rl{constructor(t,n){super({code:t,units:"degrees",extent:dy,axisOrientation:n,global:!0,metersPerUnit:bR,worldExtent:dy})}}const gy=[new rr("CRS:84"),new rr("EPSG:4326","neu"),new rr("urn:ogc:def:crs:OGC:1.3:CRS84"),new rr("urn:ogc:def:crs:OGC:2:84"),new rr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new rr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new rr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Vf={};function AR(s){return Vf[s]||Vf[s.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function wR(s,t){Vf[s]=t}let Rs={};function sl(s,t,n){const r=s.getCode(),a=t.getCode();r in Rs||(Rs[r]={}),Rs[r][a]=n}function uf(s,t){return s in Rs&&t in Rs[s]?Rs[s][t]:null}const gu=.9996,dn=.00669438,Mu=dn*dn,Du=Mu*dn,ar=dn/(1-dn),_y=Math.sqrt(1-dn),Ms=(1-_y)/(1+_y),FE=Ms*Ms,cd=FE*Ms,hd=cd*Ms,XE=hd*Ms,YE=1-dn/4-3*Mu/64-5*Du/256,CR=3*dn/8+3*Mu/32+45*Du/1024,MR=15*Mu/256+45*Du/1024,DR=35*Du/3072,OR=3/2*Ms-27/32*cd+269/512*XE,LR=21/16*FE-55/32*hd,IR=151/96*cd-417/128*XE,NR=1097/512*hd,_u=6378137;function UR(s,t,n){const r=s-5e5,c=(n.north?t:t-1e7)/gu/(_u*YE),f=c+OR*Math.sin(2*c)+LR*Math.sin(4*c)+IR*Math.sin(6*c)+NR*Math.sin(8*c),d=Math.sin(f),_=d*d,m=Math.cos(f),y=d/m,p=y*y,v=p*p,T=1-dn*_,S=Math.sqrt(1-dn*_),x=_u/S,M=(1-dn)/T,b=ar*m**2,L=b*b,O=r/(x*gu),C=O*O,F=C*O,K=F*O,X=K*O,Z=X*O,H=f-y/M*(C/2-K/24*(5+3*p+10*b-4*L-9*ar))+Z/720*(61+90*p+298*b+45*v-252*ar-3*L);let rt=(O-F/6*(1+2*p+b)+X/120*(5-2*b+28*p-3*L+8*ar+24*v))/m;return rt=Xf(rt+Oi(HE(n.number)),-Math.PI,Math.PI),[ay(rt),ay(H)]}const my=-80,yy=84,zR=-180,GR=180;function PR(s,t,n){s=Xf(s,zR,GR),t<my?t=my:t>yy&&(t=yy);const r=Oi(t),a=Math.sin(r),o=Math.cos(r),c=a/o,f=c*c,d=f*f,_=Oi(s),m=HE(n.number),y=Oi(m),p=_u/Math.sqrt(1-dn*a**2),v=ar*o**2,T=o*Xf(_-y,-Math.PI,Math.PI),S=T*T,x=S*T,M=x*T,b=M*T,L=b*T,O=_u*(YE*r-CR*Math.sin(2*r)+MR*Math.sin(4*r)-DR*Math.sin(6*r)),C=gu*p*(T+x/6*(1-f+v)+b/120*(5-18*f+d+72*v-58*ar))+5e5;let F=gu*(O+p*c*(S/2+M/24*(5-f+9*v+4*v**2)+L/720*(61-58*f+d+600*v-330*ar)));return n.north||(F+=1e7),[C,F]}function HE(s){return(s-1)*6-180+3}const BR=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function jE(s){let t=0;for(const a of BR){const o=s.match(a);if(o){t=parseInt(o[1]);break}}if(!t)return null;let n=0,r=!1;return t>32700&&t<32761?n=t-32700:t>32600&&t<32661&&(r=!0,n=t-32600),n?{number:n,north:r}:null}function Ey(s,t){return function(n,r,a,o){const c=n.length;a=a>1?a:2,o=o??a,r||(a>2?r=n.slice():r=new Array(c));for(let f=0;f<c;f+=o){const d=n[f],_=n[f+1],m=s(d,_,t);r[f]=m[0],r[f+1]=m[1]}return r}}function FR(s){return jE(s)?new rl({code:s,units:"m"}):null}function XR(s){const t=jE(s.getCode());return t?{forward:Ey(PR,t),inverse:Ey(UR,t)}:null}const YR=[XR],HR=[FR];let Kf=!0;function VE(s){Kf=!1}function fd(s,t){if(t!==void 0){for(let n=0,r=s.length;n<r;++n)t[n]=s[n];t=t}else t=s.slice();return t}function qf(s){wR(s.getCode(),s),sl(s,s,fd)}function jR(s){s.forEach(qf)}function Ae(s){if(typeof s!="string")return s;const t=AR(s);if(t)return t;for(const n of HR){const r=n(s);if(r)return r}return null}function mu(s,t,n,r){s=Ae(s);let a;const o=s.getPointResolutionFunc();if(o){if(a=o(t,n),r&&r!==s.getUnits()){const c=s.getMetersPerUnit();c&&(a=a*c/Cs[r])}}else{const c=s.getUnits();if(c=="degrees"&&!r||r=="degrees")a=t;else{const f=gd(s,Ae("EPSG:4326"));if(!f&&c!=="degrees")a=t*s.getMetersPerUnit();else{let _=[n[0]-t/2,n[1],n[0]+t/2,n[1],n[0],n[1]-t/2,n[0],n[1]+t/2];_=f(_,_,2);const m=uy(_.slice(0,2),_.slice(2,4)),y=uy(_.slice(4,6),_.slice(6,8));a=(m+y)/2}const d=r?Cs[r]:s.getMetersPerUnit();d!==void 0&&(a/=d)}}return a}function py(s){jR(s),s.forEach(function(t){s.forEach(function(n){t!==n&&sl(t,n,fd)})})}function VR(s,t,n,r){s.forEach(function(a){t.forEach(function(o){sl(a,o,n),sl(o,a,r)})})}function dd(s,t){return s?typeof s=="string"?Ae(s):s:Ae(t)}function KE(s){return function(t,n,r,a){const o=t.length;r=r!==void 0?r:2,a=a??r,n=n!==void 0?n:new Array(o);for(let c=0;c<o;c+=a){const f=s(t.slice(c,c+r)),d=f.length;for(let _=0,m=a;_<m;++_)n[c+_]=_>=d?t[c+_]:f[_]}return n}}function KR(s,t){return VE(),_d(s,"EPSG:4326","EPSG:3857")}function xs(s,t){if(s===t)return!0;const n=s.getUnits()===t.getUnits();return(s.getCode()===t.getCode()||gd(s,t)===fd)&&n}function gd(s,t){const n=s.getCode(),r=t.getCode();let a=uf(n,r);if(a)return a;let o=null,c=null;for(const d of YR)o||(o=d(s)),c||(c=d(t));if(!o&&!c)return null;const f="EPSG:4326";if(c)if(o)a=cf(o.inverse,c.forward);else{const d=uf(n,f);d&&(a=cf(d,c.forward))}else{const d=uf(f,r);d&&(a=cf(o.inverse,d))}return a&&(qf(s),qf(t),sl(s,t,a)),a}function cf(s,t){return function(n,r,a,o){return r=s(n,r,a,o),t(r,r,a,o)}}function yu(s,t){const n=Ae(s),r=Ae(t);return gd(n,r)}function _d(s,t,n){const r=yu(t,n);if(!r){const a=Ae(t).getCode(),o=Ae(n).getCode();throw new Error(`No transform available between ${a} and ${o}`)}return r(s,void 0,s.length)}function Eu(s,t){return s}function qn(s,t){return Kf&&!du(s,[0,0])&&s[0]>=-180&&s[0]<=180&&s[1]>=-90&&s[1]<=90&&(Kf=!1,BE("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),s}function qE(s,t){return s}function $n(s,t){return s}function qR(){py(fy),py(gy),VR(gy,fy,RR,xR)}qR();const md=new Array(6);function En(){return[1,0,0,1,0,0]}function ZR(s){return Ou(s,1,0,0,1,0,0)}function al(s,t){const n=s[0],r=s[1],a=s[2],o=s[3],c=s[4],f=s[5],d=t[0],_=t[1],m=t[2],y=t[3],p=t[4],v=t[5];return s[0]=n*d+a*_,s[1]=r*d+o*_,s[2]=n*m+a*y,s[3]=r*m+o*y,s[4]=n*p+a*v+c,s[5]=r*p+o*v+f,s}function Ou(s,t,n,r,a,o,c){return s[0]=t,s[1]=n,s[2]=r,s[3]=a,s[4]=o,s[5]=c,s}function De(s,t){const n=t[0],r=t[1];return t[0]=s[0]*n+s[2]*r+s[4],t[1]=s[1]*n+s[3]*r+s[5],t}function kR(s,t){const n=Math.cos(t),r=Math.sin(t);return al(s,Ou(md,n,r,-r,n,0,0))}function Ty(s,t,n){return al(s,Ou(md,t,0,0,n,0,0))}function $R(s,t,n){return al(s,Ou(md,1,0,0,1,t,n))}function hr(s,t,n,r,a,o,c,f){const d=Math.sin(o),_=Math.cos(o);return s[0]=r*_,s[1]=a*d,s[2]=-r*d,s[3]=a*_,s[4]=c*r*_-f*r*d+t,s[5]=c*a*d+f*a*_+n,s}function yd(s,t){const n=QR(t);jt(n!==0,"Transformation matrix cannot be inverted");const r=t[0],a=t[1],o=t[2],c=t[3],f=t[4],d=t[5];return s[0]=c/n,s[1]=-a/n,s[2]=-o/n,s[3]=r/n,s[4]=(o*d-c*f)/n,s[5]=-(r*d-a*f)/n,s}function QR(s){return s[0]*s[3]-s[1]*s[2]}const WR=[1e5,1e5,1e5,1e5,2,2];function JR(s){return"matrix("+s.join(", ")+")"}function vy(s){return s.substring(7,s.length-1).split(",").map(parseFloat)}function tx(s,t){const n=vy(s),r=vy(t);for(let a=0;a<6;++a)if(Math.round((n[a]-r[a])*WR[a])!==0)return!1;return!0}function ex(s,t,n,r,a,o,c){o=o||[],c=c||2;let f=0;for(let d=t;d<n;d+=r){const _=s[d],m=s[d+1];o[f++]=a[0]*_+a[2]*m+a[4],o[f++]=a[1]*_+a[3]*m+a[5];for(let y=2;y<c;y++)o[f++]=s[d+y]}return o&&o.length!=f&&(o.length=f),o}function nx(s,t,n,r,a,o,c){c=c||[];const f=Math.cos(a),d=Math.sin(a),_=o[0],m=o[1];let y=0;for(let p=t;p<n;p+=r){const v=s[p]-_,T=s[p+1]-m;c[y++]=_+v*f-T*d,c[y++]=m+v*d+T*f;for(let S=p+2;S<p+r;++S)c[y++]=s[S]}return c&&c.length!=y&&(c.length=y),c}function ix(s,t,n,r,a,o,c,f){f=f||[];const d=c[0],_=c[1];let m=0;for(let y=t;y<n;y+=r){const p=s[y]-d,v=s[y+1]-_;f[m++]=d+a*p,f[m++]=_+o*v;for(let T=y+2;T<y+r;++T)f[m++]=s[T]}return f&&f.length!=m&&(f.length=m),f}function rx(s,t,n,r,a,o,c){c=c||[];let f=0;for(let d=t;d<n;d+=r){c[f++]=s[d]+a,c[f++]=s[d+1]+o;for(let _=d+2;_<d+r;++_)c[f++]=s[_]}return c&&c.length!=f&&(c.length=f),c}const Ry=En(),sx=[NaN,NaN];class ax extends Wn{constructor(){super(),this.extent_=Ui(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Xv((t,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const a=this.clone();return a.applyTransform(r),a.getSimplifiedGeometry(n)})}simplifyTransformed(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)}clone(){return Mt()}closestPointXY(t,n,r,a){return Mt()}containsXY(t,n){return this.closestPointXY(t,n,sx,Number.MIN_VALUE)===0}getClosestPoint(t,n){return n=n||[NaN,NaN],this.closestPointXY(t[0],t[1],n,1/0),n}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Mt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&El(n),this.extentRevision_=this.getRevision()}return oR(this.extent_,t)}rotate(t,n){Mt()}scale(t,n,r){Mt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Mt()}getType(){return Mt()}applyTransform(t){Mt()}intersectsExtent(t){return Mt()}translate(t,n){Mt()}transform(t,n){const r=Ae(t),a=r.getUnits()=="tile-pixels"?function(o,c,f){const d=r.getExtent(),_=r.getWorldExtent(),m=Le(_)/Le(d);hr(Ry,_[0],_[3],m,-m,0,0,0);const y=ex(o,0,o.length,f,Ry,c),p=yu(r,n);return p?p(y,y,f):y}:yu(r,n);return this.applyTransform(a),this}}class Ed extends ax{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return sR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Mt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(t);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,n){this.stride=xy(t),this.layout=t,this.flatCoordinates=n}setCoordinates(t,n){Mt()}setLayout(t,n,r){let a;if(t)a=xy(t);else{for(let o=0;o<r;++o){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}a=n.length,t=lx(a)}this.layout=t,this.stride=a}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,n){const r=this.getFlatCoordinates();if(r){const a=this.getStride();nx(r,0,r.length,a,t,n,r),this.changed()}}scale(t,n,r){n===void 0&&(n=t),r||(r=cr(this.getExtent()));const a=this.getFlatCoordinates();if(a){const o=this.getStride();ix(a,0,a.length,o,t,n,r,a),this.changed()}}translate(t,n){const r=this.getFlatCoordinates();if(r){const a=this.getStride();rx(r,0,r.length,a,t,n,r),this.changed()}}}function lx(s){let t;return s==2?t="XY":s==3?t="XYZ":s==4&&(t="XYZM"),t}function xy(s){let t;return s=="XY"?t=2:s=="XYZ"||s=="XYM"?t=3:s=="XYZM"&&(t=4),t}function ZE(s,t,n,r){let a=0;const o=s[n-r],c=s[n-r+1];let f=0,d=0;for(;t<n;t+=r){const _=s[t]-o,m=s[t+1]-c;a+=d*_-f*m,f=_,d=m}return a/2}function ox(s,t,n,r){let a=0;for(let o=0,c=n.length;o<c;++o){const f=n[o];a+=ZE(s,t,f,r),t=f}return a}function Sy(s,t,n,r,a,o,c){const f=s[t],d=s[t+1],_=s[n]-f,m=s[n+1]-d;let y;if(_===0&&m===0)y=t;else{const p=((a-f)*_+(o-d)*m)/(_*_+m*m);if(p>1)y=n;else if(p>0){for(let v=0;v<r;++v)c[v]=tR(s[t+v],s[n+v],p);c.length=r;return}else y=t}for(let p=0;p<r;++p)c[p]=s[y+p];c.length=r}function kE(s,t,n,r,a){let o=s[t],c=s[t+1];for(t+=r;t<n;t+=r){const f=s[t],d=s[t+1],_=Ts(o,c,f,d);_>a&&(a=_),o=f,c=d}return a}function ux(s,t,n,r,a){for(let o=0,c=n.length;o<c;++o){const f=n[o];a=kE(s,t,f,r,a),t=f}return a}function $E(s,t,n,r,a,o,c,f,d,_,m){if(t==n)return _;let y,p;if(a===0){if(p=Ts(c,f,s[t],s[t+1]),p<_){for(y=0;y<r;++y)d[y]=s[t+y];return d.length=r,p}return _}m=m||[NaN,NaN];let v=t+r;for(;v<n;)if(Sy(s,v-r,v,r,c,f,m),p=Ts(c,f,m[0],m[1]),p<_){for(_=p,y=0;y<r;++y)d[y]=m[y];d.length=r,v+=r}else v+=r*Math.max((Math.sqrt(p)-Math.sqrt(_))/a|0,1);if(Sy(s,n-r,t,r,c,f,m),p=Ts(c,f,m[0],m[1]),p<_){for(_=p,y=0;y<r;++y)d[y]=m[y];d.length=r}return _}function cx(s,t,n,r,a,o,c,f,d,_,m){m=m||[NaN,NaN];for(let y=0,p=n.length;y<p;++y){const v=n[y];_=$E(s,t,v,r,a,o,c,f,d,_,m),t=v}return _}function hx(s,t,n,r){for(let a=0,o=n.length;a<o;++a)s[t++]=n[a];return t}function QE(s,t,n,r){for(let a=0,o=n.length;a<o;++a){const c=n[a];for(let f=0;f<r;++f)s[t++]=c[f]}return t}function fx(s,t,n,r,a){a=a||[];let o=0;for(let c=0,f=n.length;c<f;++c){const d=QE(s,t,n[c],r);a[o++]=d,t=d}return a.length=o,a}function WE(s,t,n,r,a){a=a!==void 0?a:[];let o=0;for(let c=t;c<n;c+=r)a[o++]=s.slice(c,c+r);return a.length=o,a}function dx(s,t,n,r,a){a=a!==void 0?a:[];let o=0;for(let c=0,f=n.length;c<f;++c){const d=n[c];a[o++]=WE(s,t,d,r,a[o]),t=d}return a.length=o,a}function gx(s,t,n,r,a,o,c){const f=(n-t)/r;if(f<3){for(;t<n;t+=r)o[c++]=s[t],o[c++]=s[t+1];return c}const d=new Array(f);d[0]=1,d[f-1]=1;const _=[t,n-r];let m=0;for(;_.length>0;){const y=_.pop(),p=_.pop();let v=0;const T=s[p],S=s[p+1],x=s[y],M=s[y+1];for(let b=p+r;b<y;b+=r){const L=s[b],O=s[b+1],C=Wv(L,O,T,S,x,M);C>v&&(m=b,v=C)}v>a&&(d[(m-t)/r]=1,p+r<m&&_.push(p,m),m+r<y&&_.push(m,y))}for(let y=0;y<f;++y)d[y]&&(o[c++]=s[t+y*r],o[c++]=s[t+y*r+1]);return c}function es(s,t){return t*Math.round(s/t)}function _x(s,t,n,r,a,o,c){if(t==n)return c;let f=es(s[t],a),d=es(s[t+1],a);t+=r,o[c++]=f,o[c++]=d;let _,m;do if(_=es(s[t],a),m=es(s[t+1],a),t+=r,t==n)return o[c++]=_,o[c++]=m,c;while(_==f&&m==d);for(;t<n;){const y=es(s[t],a),p=es(s[t+1],a);if(t+=r,y==_&&p==m)continue;const v=_-f,T=m-d,S=y-f,x=p-d;if(v*x==T*S&&(v<0&&S<v||v==S||v>0&&S>v)&&(T<0&&x<T||T==x||T>0&&x>T)){_=y,m=p;continue}o[c++]=_,o[c++]=m,f=_,d=m,_=y,m=p}return o[c++]=_,o[c++]=m,c}function mx(s,t,n,r,a,o,c,f){for(let d=0,_=n.length;d<_;++d){const m=n[d];c=_x(s,t,m,r,a,o,c),f.push(c),t=m}return c}class ll extends Ed{constructor(t,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(n,t):this.setCoordinates(t,n)}clone(){return new ll(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,n,r,a){return a<LE(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(kE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),$E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,r,a))}getArea(){return ZE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return WE(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const n=[];return n.length=gx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new ll(n,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=QE(this.flatCoordinates,0,t,this.stride),this.changed()}}class pd extends Ed{constructor(t,n){super(),this.setCoordinates(t,n)}clone(){const t=new pd(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,n,r,a){const o=this.flatCoordinates,c=Ts(t,n,o[0],o[1]);if(c<a){const f=this.stride;for(let d=0;d<f;++d)r[d]=o[d];return r.length=f,c}return a}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return rR(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return IE(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hx(this.flatCoordinates,0,t,this.stride),this.changed()}}function yx(s,t,n,r,a){return!zE(a,function(c){return!lr(s,t,n,r,c[0],c[1])})}function lr(s,t,n,r,a,o){let c=0,f=s[n-r],d=s[n-r+1];for(;t<n;t+=r){const _=s[t],m=s[t+1];d<=o?m>o&&(_-f)*(o-d)-(a-f)*(m-d)>0&&c++:m<=o&&(_-f)*(o-d)-(a-f)*(m-d)<0&&c--,f=_,d=m}return c!==0}function JE(s,t,n,r,a,o){if(n.length===0||!lr(s,t,n[0],r,a,o))return!1;for(let c=1,f=n.length;c<f;++c)if(lr(s,n[c-1],n[c],r,a,o))return!1;return!0}function Ex(s,t,n,r,a,o,c){let f,d,_,m,y,p,v;const T=a[o+1],S=[];for(let b=0,L=n.length;b<L;++b){const O=n[b];for(m=s[O-r],p=s[O-r+1],f=t;f<O;f+=r)y=s[f],v=s[f+1],(T<=p&&v<=T||p<=T&&T<=v)&&(_=(T-p)/(v-p)*(y-m)+m,S.push(_)),m=y,p=v}let x=NaN,M=-1/0;for(S.sort(xu),m=S[0],f=1,d=S.length;f<d;++f){y=S[f];const b=Math.abs(y-m);b>M&&(_=(m+y)/2,JE(s,t,n,r,_,T)&&(x=_,M=b)),m=y}return isNaN(x)&&(x=a[o]),[x,T,M]}function px(s,t,n,r,a){let o;for(t+=r;t<n;t+=r)if(o=a(s.slice(t-r,t),s.slice(t,t+r)),o)return o;return!1}function tp(s,t,n,r,a,o){return o=o??UE(Ui(),s,t,n,r),pl(a,o)?o[0]>=a[0]&&o[2]<=a[2]||o[1]>=a[1]&&o[3]<=a[3]?!0:px(s,t,n,r,function(c,f){return uR(a,c,f)}):!1}function ep(s,t,n,r,a){return!!(tp(s,t,n,r,a)||lr(s,t,n,r,a[0],a[1])||lr(s,t,n,r,a[0],a[3])||lr(s,t,n,r,a[2],a[1])||lr(s,t,n,r,a[2],a[3]))}function Tx(s,t,n,r,a){if(!ep(s,t,n[0],r,a))return!1;if(n.length===1)return!0;for(let o=1,c=n.length;o<c;++o)if(yx(s,n[o-1],n[o],r,a)&&!tp(s,n[o-1],n[o],r,a))return!1;return!0}function vx(s,t,n,r){for(;t<n-r;){for(let a=0;a<r;++a){const o=s[t+a];s[t+a]=s[n-r+a],s[n-r+a]=o}t+=r,n-=r}}function np(s,t,n,r){let a=0,o=s[n-r],c=s[n-r+1];for(;t<n;t+=r){const f=s[t],d=s[t+1];a+=(f-o)*(d+c),o=f,c=d}return a===0?void 0:a>0}function Rx(s,t,n,r,a){a=a!==void 0?a:!1;for(let o=0,c=n.length;o<c;++o){const f=n[o],d=np(s,t,f,r);if(o===0){if(a&&d||!a&&!d)return!1}else if(a&&!d||!a&&d)return!1;t=f}return!0}function by(s,t,n,r,a){a=a!==void 0?a:!1;for(let o=0,c=n.length;o<c;++o){const f=n[o],d=np(s,t,f,r);(o===0?a&&d||!a&&!d:a&&!d||!a&&d)&&vx(s,t,f,r),t=f}return t}class ol extends Ed{constructor(t,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,t),this.ends_=r):this.setCoordinates(t,n)}appendLinearRing(t){this.flatCoordinates?Bv(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ol(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,n,r,a){return a<LE(this.getExtent(),t,n)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ux(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cx(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,r,a))}containsXY(t,n){return JE(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)}getArea(){return ox(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),by(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,dx(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=cr(this.getExtent());this.flatInteriorPoint_=Ex(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new pd(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new ll(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,n=this.flatCoordinates,r=this.ends_,a=[];let o=0;for(let c=0,f=r.length;c<f;++c){const d=r[c],_=new ll(n.slice(o,d),t);a.push(_),o=d}return a}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Rx(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=by(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const n=[],r=[];return n.length=mx(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,r),new ol(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(t){return Tx(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=fx(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function Ay(s){if(Us(s))throw new Error("Cannot create polygon from empty extent");const t=s[0],n=s[1],r=s[2],a=s[3],o=[t,n,t,a,r,a,r,n,t,n];return new ol(o,"XY",[o.length])}function Td(s,t,n,r){const a=Yt(t)/n[0],o=Le(t)/n[1];return r?Math.min(s,Math.max(a,o)):Math.min(s,Math.min(a,o))}function vd(s,t,n){let r=Math.min(s,t);const a=50;return r*=Math.log(1+a*Math.max(0,s/t-1))/a+1,n&&(r=Math.max(r,n),r/=Math.log(1+a*Math.max(0,n/s-1))/a+1),qt(r,n/2,t*2)}function xx(s,t,n,r){return t=t!==void 0?t:!0,function(a,o,c,f){if(a!==void 0){const d=s[0],_=s[s.length-1],m=n?Td(d,n,c,r):d;if(f)return t?vd(a,m,_):qt(a,_,m);const y=Math.min(m,a),p=Math.floor(ad(s,y,o));return s[p]>m&&p<s.length-1?s[p+1]:s[p]}}}function Sx(s,t,n,r,a,o){return r=r!==void 0?r:!0,n=n!==void 0?n:0,function(c,f,d,_){if(c!==void 0){const m=a?Td(t,a,d,o):t;if(_)return r?vd(c,m,n):qt(c,n,m);const y=1e-9,p=Math.ceil(Math.log(t/m)/Math.log(s)-y),v=-f*(.5-y)+.5,T=Math.min(m,c),S=Math.floor(Math.log(t/T)/Math.log(s)+v),x=Math.max(p,S),M=t/Math.pow(s,x);return qt(M,n,m)}}}function wy(s,t,n,r,a){return n=n!==void 0?n:!0,function(o,c,f,d){if(o!==void 0){const _=r?Td(s,r,f,a):s;return!n||!d?qt(o,t,_):vd(o,_,t)}}}function Rd(s){if(s!==void 0)return 0}function Cy(s){if(s!==void 0)return s}function bx(s){const t=2*Math.PI/s;return function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/t+.5)*t,n}}function Ax(s){const t=Oi(5);return function(n,r){return r||n===void 0?n:Math.abs(n)<=t?0:n}}const wx=42,xd=256,hf=0;class Cn extends Wn{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=dd(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&VE(),t.center&&(t.center=qn(t.center,this.projection_)),t.extent&&(t.extent=$n(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const n=Object.assign({},t);for(const f in yn)delete n[f];this.setProperties(n,!0);const r=Mx(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;const a=Cx(t),o=r.constraint,c=Dx(t);this.constraints_={center:a,resolution:o,rotation:c},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let n=this.padding_;this.padding_=t;const r=this.getCenterInternal();if(r){const a=t||[0,0,0,0];n=n||[0,0,0,0];const o=this.getResolution(),c=o/2*(a[3]-n[3]+n[1]-a[1]),f=o/2*(a[0]-n[0]+n[2]-a[2]);this.setCenterInternal([r[0]+c,r[1]-f])}}getUpdatedOptions_(t){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let a=arguments[r];a.center&&(a=Object.assign({},a),a.center=qn(a.center,this.getProjection())),a.anchor&&(a=Object.assign({},a),a.anchor=qn(a.anchor,this.getProjection())),n[r]=a}this.animateInternal.apply(this,n)}animateInternal(t){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let a=0;for(;a<n&&!this.isDef();++a){const m=arguments[a];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(a===n){r&&Vo(r,!0);return}let o=Date.now(),c=this.targetCenter_.slice(),f=this.targetResolution_,d=this.targetRotation_;const _=[];for(;a<n;++a){const m=arguments[a],y={start:o,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||mR,callback:r};if(m.center&&(y.sourceCenter=c,y.targetCenter=m.center.slice(),c=y.targetCenter),m.zoom!==void 0?(y.sourceResolution=f,y.targetResolution=this.getResolutionForZoom(m.zoom),f=y.targetResolution):m.resolution&&(y.sourceResolution=f,y.targetResolution=m.resolution,f=y.targetResolution),m.rotation!==void 0){y.sourceRotation=d;const p=vs(m.rotation-d+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=d+p,d=y.targetRotation}Ox(y)?y.complete=!0:o+=y.duration,_.push(y)}this.animations_.push(_),this.setHint(cn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[cn.ANIMATING]>0}getInteracting(){return this.hints_[cn.INTERACTING]>0}cancelAnimations(){this.setHint(cn.ANIMATING,-this.hints_[cn.ANIMATING]);let t;for(let n=0,r=this.animations_.length;n<r;++n){const a=this.animations_[n];if(a[0].callback&&Vo(a[0].callback,!1),!t)for(let o=0,c=a.length;o<c;++o){const f=a[o];if(!f.complete){t=f.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const a=this.animations_[r];let o=!0;for(let c=0,f=a.length;c<f;++c){const d=a[c];if(d.complete)continue;const _=t-d.start;let m=d.duration>0?_/d.duration:1;m>=1?(d.complete=!0,m=1):o=!1;const y=d.easing(m);if(d.sourceCenter){const p=d.sourceCenter[0],v=d.sourceCenter[1],T=d.targetCenter[0],S=d.targetCenter[1];this.nextCenter_=d.targetCenter;const x=p+y*(T-p),M=v+y*(S-v);this.targetCenter_=[x,M]}if(d.sourceResolution&&d.targetResolution){const p=y===1?d.targetResolution:d.sourceResolution+y*(d.targetResolution-d.sourceResolution);if(d.anchor){const v=this.getViewportSize_(this.getRotation()),T=this.constraints_.resolution(p,0,v,!0);this.targetCenter_=this.calculateCenterZoom(T,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=p,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const p=y===1?vs(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+y*(d.targetRotation-d.sourceRotation);if(d.anchor){const v=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(v,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),n=!0,!d.complete)break}if(o){this.animations_[r]=null,this.setHint(cn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const c=a[0].callback;c&&Vo(c,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,n){let r;const a=this.getCenterInternal();return a!==void 0&&(r=[a[0]-n[0],a[1]-n[1]],ud(r,t-this.getRotation()),fR(r,n)),r}calculateCenterZoom(t,n){let r;const a=this.getCenterInternal(),o=this.getResolution();if(a!==void 0&&o!==void 0){const c=n[0]-t*(n[0]-a[0])/o,f=n[1]-t*(n[1]-a[1])/o;r=[c,f]}return r}getViewportSize_(t){const n=this.viewportSize_;if(t){const r=n[0],a=n[1];return[Math.abs(r*Math.cos(t))+Math.abs(a*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(a*Math.cos(t))]}return n}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Eu(t,this.getProjection())}getCenterInternal(){return this.get(yn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const n=this.calculateExtentInternal(t);return qE(n,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();jt(n,"The view center is not defined");const r=this.getResolution();jt(r!==void 0,"The view resolution is not defined");const a=this.getRotation();return jt(a!==void 0,"The view rotation is not defined"),jf(n,r,a,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(yn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,n){return this.getResolutionForExtentInternal($n(t,this.getProjection()),n)}getResolutionForExtentInternal(t,n){n=n||this.getViewportSizeMinusPadding_();const r=Yt(t)/n[0],a=Le(t)/n[1];return Math.max(r,a)}getResolutionForValueFunction(t){t=t||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,a=Math.log(n/r)/Math.log(t);return function(o){return n/Math.pow(t,o*a)}}getRotation(){return this.get(yn.ROTATION)}getValueForResolutionFunction(t){const n=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),a=this.minResolution_,o=Math.log(r/a)/n;return function(c){return Math.log(r/c)/n/o}}getViewportSizeMinusPadding_(t){let n=this.getViewportSize_(t);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const t=this.getProjection(),n=this.getResolution(),r=this.getRotation();let a=this.getCenterInternal();const o=this.padding_;if(o){const c=this.getViewportSizeMinusPadding_();a=ff(a,this.getViewportSize_(),[c[0]/2+o[3],c[1]/2+o[0]],n,r)}return{center:a.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t}getZoomForResolution(t){let n=this.minZoom_||0,r,a;if(this.resolutions_){const o=ad(this.resolutions_,t,1);n=o,r=this.resolutions_[o],o==this.resolutions_.length-1?a=2:a=r/this.resolutions_[o+1]}else r=this.maxResolution_,a=this.zoomFactor_;return n+Math.log(r/t)/Math.log(a)}getResolutionForZoom(t){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=qt(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,qt(t-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,n){let r;if(jt(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){jt(!Us(t),"Cannot fit empty extent provided as `geometry`");const a=$n(t,this.getProjection());r=Ay(a)}else if(t.getType()==="Circle"){const a=$n(t.getExtent(),this.getProjection());r=Ay(a),r.rotate(this.getRotation(),cr(a))}else r=t;this.fitInternal(r,n)}rotatedExtentForGeometry(t){const n=this.getRotation(),r=Math.cos(n),a=Math.sin(-n),o=t.getFlatCoordinates(),c=t.getStride();let f=1/0,d=1/0,_=-1/0,m=-1/0;for(let y=0,p=o.length;y<p;y+=c){const v=o[y]*r-o[y+1]*a,T=o[y]*a+o[y+1]*r;f=Math.min(f,v),d=Math.min(d,T),_=Math.max(_,v),m=Math.max(m,T)}return[f,d,_,m]}fitInternal(t,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const a=n.padding!==void 0?n.padding:[0,0,0,0],o=n.nearest!==void 0?n.nearest:!1;let c;n.minResolution!==void 0?c=n.minResolution:n.maxZoom!==void 0?c=this.getResolutionForZoom(n.maxZoom):c=0;const f=this.rotatedExtentForGeometry(t);let d=this.getResolutionForExtentInternal(f,[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);d=isNaN(d)?c:Math.max(d,c),d=this.getConstrainedResolution(d,o?0:1);const _=this.getRotation(),m=Math.sin(_),y=Math.cos(_),p=cr(f);p[0]+=(a[1]-a[3])/2*d,p[1]+=(a[0]-a[2])/2*d;const v=p[0]*y-p[1]*m,T=p[1]*y+p[0]*m,S=this.getConstrainedCenter([v,T],d),x=n.callback?n.callback:cu;n.duration!==void 0?this.animateInternal({resolution:d,center:S,duration:n.duration,easing:n.easing},x):(this.targetResolution_=d,this.targetCenter_=S,this.applyTargetState_(!1,!0),Vo(x,!0))}centerOn(t,n,r){this.centerOnInternal(qn(t,this.getProjection()),n,r)}centerOnInternal(t,n,r){this.setCenterInternal(ff(t,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(t,n,r,a){let o;const c=this.padding_;if(c&&t){const f=this.getViewportSizeMinusPadding_(-r),d=ff(t,a,[f[0]/2+c[3],f[1]/2+c[0]],n,r);o=[t[0]-d[0],t[1]-d[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const n=Eu(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])}adjustCenterInternal(t){const n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])}adjustResolution(t,n){n=n&&qn(n,this.getProjection()),this.adjustResolutionInternal(t,n)}adjustResolutionInternal(t,n){const r=this.getAnimating()||this.getInteracting(),a=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*t,0,a,r);n&&(this.targetCenter_=this.calculateCenterZoom(o,n)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)}adjustRotation(t,n){n&&(n=qn(n,this.getProjection())),this.adjustRotationInternal(t,n)}adjustRotationInternal(t,n){const r=this.getAnimating()||this.getInteracting(),a=this.constraints_.rotation(this.targetRotation_+t,r);n&&(this.targetCenter_=this.calculateCenterRotate(a,n)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&qn(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,n){const r=this.getAnimating()||this.getInteracting()||n,a=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(a),c=this.constraints_.resolution(this.targetResolution_,0,o,r),f=this.constraints_.center(this.targetCenter_,c,o,r,this.calculateCenterShift(this.targetCenter_,c,a,o));this.get(yn.ROTATION)!==a&&this.set(yn.ROTATION,a),this.get(yn.RESOLUTION)!==c&&(this.set(yn.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!f||!this.get(yn.CENTER)||!du(this.get(yn.CENTER),f))&&this.set(yn.CENTER,f),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,n,r){t=t!==void 0?t:200;const a=n||0,o=this.constraints_.rotation(this.targetRotation_),c=this.getViewportSize_(o),f=this.constraints_.resolution(this.targetResolution_,a,c),d=this.constraints_.center(this.targetCenter_,f,c,!1,this.calculateCenterShift(this.targetCenter_,f,o,c));if(t===0&&!this.cancelAnchor_){this.targetResolution_=f,this.targetRotation_=o,this.targetCenter_=d,this.applyTargetState_();return}r=r||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==f||this.getRotation()!==o||!this.getCenterInternal()||!du(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:d,resolution:f,duration:t,easing:zs,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(cn.INTERACTING,1)}endInteraction(t,n,r){r=r&&qn(r,this.getProjection()),this.endInteractionInternal(t,n,r)}endInteractionInternal(t,n,r){this.getInteracting()&&(this.setHint(cn.INTERACTING,-1),this.resolveConstraints(t,n,r))}getConstrainedCenter(t,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),r)}getConstrainedZoom(t,n){const r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(t,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,r)}}function Vo(s,t){setTimeout(function(){s(t)},0)}function Cx(s){if(s.extent!==void 0){const n=s.smoothExtentConstraint!==void 0?s.smoothExtentConstraint:!0;return ly(s.extent,s.constrainOnlyCenter,n)}const t=dd(s.projection,"EPSG:3857");if(s.multiWorld!==!0&&t.isGlobal()){const n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,ly(n,!1,!1)}return eR}function Mx(s){let t,n,r,c=s.minZoom!==void 0?s.minZoom:hf,f=s.maxZoom!==void 0?s.maxZoom:28;const d=s.zoomFactor!==void 0?s.zoomFactor:2,_=s.multiWorld!==void 0?s.multiWorld:!1,m=s.smoothResolutionConstraint!==void 0?s.smoothResolutionConstraint:!0,y=s.showFullExtent!==void 0?s.showFullExtent:!1,p=dd(s.projection,"EPSG:3857"),v=p.getExtent();let T=s.constrainOnlyCenter,S=s.extent;if(!_&&!S&&p.isGlobal()&&(T=!1,S=v),s.resolutions!==void 0){const x=s.resolutions;n=x[c],r=x[f]!==void 0?x[f]:x[x.length-1],s.constrainResolution?t=xx(x,m,!T&&S,y):t=wy(n,r,m,!T&&S,y)}else{const M=(v?Math.max(Yt(v),Le(v)):360*Cs.degrees/p.getMetersPerUnit())/xd/Math.pow(2,hf),b=M/Math.pow(2,28-hf);n=s.maxResolution,n!==void 0?c=0:n=M/Math.pow(d,c),r=s.minResolution,r===void 0&&(s.maxZoom!==void 0?s.maxResolution!==void 0?r=n/Math.pow(d,f):r=M/Math.pow(d,f):r=b),f=c+Math.floor(Math.log(n/r)/Math.log(d)),r=n/Math.pow(d,f-c),s.constrainResolution?t=Sx(d,n,r,m,!T&&S,y):t=wy(n,r,m,!T&&S,y)}return{constraint:t,maxResolution:n,minResolution:r,minZoom:c,zoomFactor:d}}function Dx(s){if(s.enableRotation!==void 0?s.enableRotation:!0){const n=s.constrainRotation;return n===void 0||n===!0?Ax():n===!1?Cy:typeof n=="number"?bx(n):Cy}return Rd}function Ox(s){return!(s.sourceCenter&&s.targetCenter&&!du(s.sourceCenter,s.targetCenter)||s.sourceResolution!==s.targetResolution||s.sourceRotation!==s.targetRotation)}function ff(s,t,n,r,a){const o=Math.cos(-a);let c=Math.sin(-a),f=s[0]*o-s[1]*c,d=s[1]*o+s[0]*c;f+=(t[0]/2-n[0])*r,d+=(n[1]-t[1]/2)*r,c=-c;const _=f*o-d*c,m=d*o+f*c;return[_,m]}const Ko="ol-hidden",vl="ol-unselectable",Sd="ol-control",My="ol-collapsed";function Ee(s,t,n,r){let a;return n&&n.length?a=n.shift():ME?a=new OffscreenCanvas(s||300,t||300):a=document.createElement("canvas"),s&&(a.width=s),t&&(a.height=t),a.getContext("2d",r)}let df;function pu(){return df||(df=Ee(1,1)),df}function bd(s){const t=s.canvas;t.width=1,t.height=1,s.clearRect(0,0,1,1)}function Dy(s,t){const n=t.parentNode;n&&n.replaceChild(s,t)}function Lx(s){for(;s.lastChild;)s.lastChild.remove()}function Ix(s,t){const n=s.childNodes;for(let r=0;;++r){const a=n[r],o=t[r];if(!a&&!o)break;if(a!==o){if(!a){s.appendChild(o);continue}if(!o){s.removeChild(a),--r;continue}s.insertBefore(o,a)}}}class Lu extends Wn{constructor(t){super();const n=t.element;n&&!t.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let n=0,r=this.listenerKeys.length;n<r;++n)kt(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){const n=this.target_??t.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==cu&&this.listenerKeys.push(Ut(t,Mi.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Nx extends Lu{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const n=t.className!==void 0?t.className:"ol-attribution",r=t.tipLabel!==void 0?t.tipLabel:"Attributions",a=t.expandClassName!==void 0?t.expandClassName:n+"-expand",o=t.collapseLabel!==void 0?t.collapseLabel:"",c=t.collapseClassName!==void 0?t.collapseClassName:n+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=c):this.collapseLabel_=o;const f=t.label!==void 0?t.label:"i";typeof f=="string"?(this.label_=document.createElement("span"),this.label_.textContent=f,this.label_.className=a):this.label_=f;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(_t.CLICK,this.handleClick_.bind(this),!1);const _=n+" "+vl+" "+Sd+(this.collapsed_&&this.collapsible_?" "+My:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=_,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(a=>a.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(a=>r.add(a)):r.add(this.attributions_)),!this.overrideCollapsible_){const a=!n.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(a)}return Array.from(r)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(t).map(a=>AE(()=>a))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Su(n,this.renderedAttributions_)){Lx(this.ulElement_);for(let a=0,o=n.length;a<o;++a){const c=document.createElement("li");c.innerHTML=n[a],this.ulElement_.appendChild(c)}this.renderedAttributions_=n}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(My),this.collapsed_?Dy(this.collapseLabel_,this.label_):Dy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Ux extends Lu{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const n=t.className!==void 0?t.className:"ol-rotate",r=t.label!==void 0?t.label:"",a=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=a,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(a));const o=t.tipLabel?t.tipLabel:"Reset rotation",c=document.createElement("button");c.className=n+"-reset",c.setAttribute("type","button"),c.title=o,c.appendChild(this.label_),c.addEventListener(_t.CLICK,this.handleClick_.bind(this),!1);const f=n+" "+vl+" "+Sd,d=this.element;d.className=f,d.appendChild(c),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ko)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:zs}):n.setRotation(0))}render(t){const n=t.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const a="rotate("+r+"rad)";if(this.autoHide_){const o=this.element.classList.contains(Ko);!o&&r===0?this.element.classList.add(Ko):o&&r!==0&&this.element.classList.remove(Ko)}this.label_.style.transform=a}this.rotation_=r}}class zx extends Lu{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const n=t.className!==void 0?t.className:"ol-zoom",r=t.delta!==void 0?t.delta:1,a=t.zoomInClassName!==void 0?t.zoomInClassName:n+"-in",o=t.zoomOutClassName!==void 0?t.zoomOutClassName:n+"-out",c=t.zoomInLabel!==void 0?t.zoomInLabel:"+",f=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",d=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",_=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=a,m.setAttribute("type","button"),m.title=d,m.appendChild(typeof c=="string"?document.createTextNode(c):c),m.addEventListener(_t.CLICK,this.handleClick_.bind(this,r),!1);const y=document.createElement("button");y.className=o,y.setAttribute("type","button"),y.title=_,y.appendChild(typeof f=="string"?document.createTextNode(f):f),y.addEventListener(_t.CLICK,this.handleClick_.bind(this,-r),!1);const p=n+" "+vl+" "+Sd,v=this.element;v.className=p,v.appendChild(m),v.appendChild(y),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,n){n.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const r=this.getMap().getView();if(!r)return;const a=r.getZoom();if(a!==void 0){const o=r.getConstrainedZoom(a+t);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:zs})):r.setZoom(o)}}}function ip(s){s=s||{};const t=new kn;return(s.zoom!==void 0?s.zoom:!0)&&t.push(new zx(s.zoomOptions)),(s.rotate!==void 0?s.rotate:!0)&&t.push(new Ux(s.rotateOptions)),(s.attribution!==void 0?s.attribution:!0)&&t.push(new Nx(s.attributionOptions)),t}class Gx{constructor(t,n,r){this.decay_=t,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,n){this.points_.push(t,n,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<t)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>t;)r-=3;const a=this.points_[n+2]-this.points_[r+2];if(a<1e3/60)return!1;const o=this.points_[n]-this.points_[r],c=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(c,o),this.initialVelocity_=Math.sqrt(o*o+c*c)/a,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const Oy={ACTIVE:"active"};class Rl extends Wn{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Oy.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Oy.ACTIVE,t)}setMap(t){this.map_=t}}function Px(s,t,n){const r=s.getCenterInternal();if(r){const a=[r[0]+t[0],r[1]+t[1]];s.animateInternal({duration:n!==void 0?n:250,easing:yR,center:s.getConstrainedCenter(a)})}}function Ad(s,t,n,r){const a=s.getZoom();if(a===void 0)return;const o=s.getConstrainedZoom(a+t),c=s.getResolutionForZoom(o);s.getAnimating()&&s.cancelAnimations(),s.animate({resolution:c,anchor:n,duration:r!==void 0?r:250,easing:zs})}class Bx extends Rl{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let n=!1;if(t.type==Jt.DBLCLICK){const r=t.originalEvent,a=t.map,o=t.coordinate,c=r.shiftKey?-this.delta_:this.delta_,f=a.getView();Ad(f,c,o,this.duration_),r.preventDefault(),n=!0}return!n}}function Zf(s){const t=arguments;return function(n){let r=!0;for(let a=0,o=t.length;a<o&&(r=r&&t[a](n),!!r);++a);return r}}const Fx=function(s){const t=s.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Xx=function(s){const t=s.map.getTargetElement(),n=t.getRootNode(),r=s.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):t.contains(r)},rp=function(s){const t=s.map.getTargetElement(),n=t.getRootNode();return(n instanceof ShadowRoot?n.host:t).hasAttribute("tabindex")?Xx(s):!0},Yx=uu,sp=function(s){const t=s.originalEvent;return"pointerId"in t&&t.button==0&&!(Kv&&CE&&t.ctrlKey)},ap=function(s){const t=s.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Hx=function(s){const t=s.originalEvent;return CE?t.metaKey:t.ctrlKey},jx=function(s){const t=s.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},lp=function(s){const t=s.originalEvent,n=t.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!t.target.isContentEditable},gf=function(s){const t=s.originalEvent;return"pointerId"in t&&t.pointerType=="mouse"},Vx=function(s){const t=s.originalEvent;return"pointerId"in t&&t.isPrimary&&t.button===0};class xl extends Rl{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Jt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Jt.POINTERUP){const r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Jt.POINTERDOWN){const r=this.handleDownEvent(t);this.handlingDownUpSequence=r,n=this.stopDown(r)}else t.type==Jt.POINTERMOVE&&this.handleMoveEvent(t);return!n}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function wd(s){const t=s.length;let n=0,r=0;for(let a=0;a<t;a++)n+=s[a].clientX,r+=s[a].clientY;return{clientX:n/t,clientY:r/t}}class Kx extends xl{constructor(t){super({stopDown:bu}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=t.condition?t.condition:Zf(ap,Vx);this.condition_=t.onFocusOnly?Zf(rp,n):n,this.noKinetic_=!1}handleDragEvent(t){const n=t.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,a=n.getEventPixel(wd(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(a[0],a[1]),this.lastCentroid){const o=[this.lastCentroid[0]-a[0],a[1]-this.lastCentroid[1]],f=t.map.getView();dR(o,f.getResolution()),ud(o,f.getRotation()),f.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=a,this.lastPointersCount_=r.length,t.originalEvent.preventDefault()}handleUpEvent(t){const n=t.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const a=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),c=r.getCenterInternal(),f=n.getPixelFromCoordinateInternal(c),d=n.getCoordinateFromPixelInternal([f[0]-a*Math.cos(o),f[1]-a*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(d),duration:500,easing:zs})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const r=t.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class qx extends xl{constructor(t){t=t||{},super({stopDown:bu}),this.condition_=t.condition?t.condition:Fx,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!gf(t))return;const n=t.map,r=n.getView();if(r.getConstraints().rotation===Rd)return;const a=n.getSize(),o=t.pixel,c=Math.atan2(a[1]/2-o[1],o[0]-a[0]/2);if(this.lastAngle_!==void 0){const f=c-this.lastAngle_;r.adjustRotationInternal(-f)}this.lastAngle_=c}handleUpEvent(t){return gf(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return gf(t)&&sp(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class Zx extends gl{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,n=this.endPixel_,r="px",a=this.element_.style;a.left=Math.min(t[0],n[0])+r,a.top=Math.min(t[1],n[1])+r,a.width=Math.abs(n[0]-t[0])+r,a.height=Math.abs(n[1]-t[1])+r}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,n=this.endPixel_,a=[t,[t[0],n[1]],n,[n[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);a[4]=a[0].slice(),this.geometry_?this.geometry_.setCoordinates([a]):this.geometry_=new ol([a])}getGeometry(){return this.geometry_}}const ns={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Xa extends Ni{constructor(t,n,r){super(t),this.coordinate=n,this.mapBrowserEvent=r}}class kx extends xl{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new Zx(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??sp,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,n,r){const a=r[0]-n[0],o=r[1]-n[1];return a*a+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Xa(ns.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new Xa(n?ns.BOXEND:ns.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Xa(ns.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Xa(ns.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Xa(ns.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class $x extends kx{constructor(t){t=t||{};const n=t.condition?t.condition:jx;super({condition:n,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const r=this.getMap().getView();let a=this.getGeometry();if(this.out_){const o=r.rotatedExtentForGeometry(a),c=r.getResolutionForExtentInternal(o),f=r.getResolution()/c;a=a.clone(),a.scale(f*f)}r.fitInternal(a,{duration:this.duration_,easing:zs})}}const sr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Qx extends Rl{constructor(t){super(),t=t||{},this.defaultCondition_=function(n){return ap(n)&&lp(n)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let n=!1;if(t.type==_t.KEYDOWN){const r=t.originalEvent,a=r.key;if(this.condition_(t)&&(a==sr.DOWN||a==sr.LEFT||a==sr.RIGHT||a==sr.UP)){const c=t.map.getView(),f=c.getResolution()*this.pixelDelta_;let d=0,_=0;a==sr.DOWN?_=-f:a==sr.LEFT?d=-f:a==sr.RIGHT?d=f:_=f;const m=[d,_];ud(m,c.getRotation()),Px(c,m,this.duration_),r.preventDefault(),n=!0}}return!n}}class Wx extends Rl{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(n){return!Hx(n)&&lp(n)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let n=!1;if(t.type==_t.KEYDOWN||t.type==_t.KEYPRESS){const r=t.originalEvent,a=r.key;if(this.condition_(t)&&(a==="+"||a==="-")){const o=t.map,c=a==="+"?this.delta_:-this.delta_,f=o.getView();Ad(f,c,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const Jx=40,tS=300;class eS extends Rl{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const n=t.condition?t.condition:Yx;this.condition_=t.onFocusOnly?Zf(rp,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==_t.WHEEL)return!0;const r=t.map,a=t.originalEvent;a.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let o=a.deltaY;switch(a.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=Jx;break;case WheelEvent.DOM_DELTA_PAGE:o*=tS;break}if(o===0)return!1;this.lastDelta_=o;const c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");const f=r.getView();if(this.mode_==="trackpad"&&!(f.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(f.getAnimating()&&f.cancelAnimations(),f.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),f.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=c,!1;this.totalDelta_+=o;const d=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),d),!1}handleWheelZoom_(t){const n=t.getView();n.getAnimating()&&n.cancelAnimations();let r=-qt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Ad(n,r,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class nS extends xl{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=bu),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let n=0;const r=this.targetPointers[0],a=this.targetPointers[1],o=Math.atan2(a.clientY-r.clientY,a.clientX-r.clientX);if(this.lastAngle_!==void 0){const d=o-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=d}this.lastAngle_=o;const c=t.map,f=c.getView();f.getConstraints().rotation!==Rd&&(this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(wd(this.targetPointers))),this.rotating_&&(c.render(),f.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class iS extends xl{constructor(t){t=t||{};const n=t;n.stopDown||(n.stopDown=bu),super(n),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let n=1;const r=this.targetPointers[0],a=this.targetPointers[1],o=r.clientX-a.clientX,c=r.clientY-a.clientY,f=Math.sqrt(o*o+c*c);this.lastDistance_!==void 0&&(n=this.lastDistance_/f),this.lastDistance_=f;const d=t.map,_=d.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(wd(this.targetPointers))),d.render(),_.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const r=t.map.getView(),a=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,a),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function rS(s){s=s||{};const t=new kn,n=new Gx(-.005,.05,100);return(s.altShiftDragRotate!==void 0?s.altShiftDragRotate:!0)&&t.push(new qx),(s.doubleClickZoom!==void 0?s.doubleClickZoom:!0)&&t.push(new Bx({delta:s.zoomDelta,duration:s.zoomDuration})),(s.dragPan!==void 0?s.dragPan:!0)&&t.push(new Kx({onFocusOnly:s.onFocusOnly,kinetic:n})),(s.pinchRotate!==void 0?s.pinchRotate:!0)&&t.push(new nS),(s.pinchZoom!==void 0?s.pinchZoom:!0)&&t.push(new iS({duration:s.zoomDuration})),(s.keyboard!==void 0?s.keyboard:!0)&&(t.push(new Qx),t.push(new Wx({delta:s.zoomDelta,duration:s.zoomDuration}))),(s.mouseWheelZoom!==void 0?s.mouseWheelZoom:!0)&&t.push(new eS({onFocusOnly:s.onFocusOnly,duration:s.zoomDuration})),(s.shiftDragZoom!==void 0?s.shiftDragZoom:!0)&&t.push(new $x({duration:s.zoomDuration})),t}const Lt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class op extends Wn{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const n=Object.assign({},t);typeof t.properties=="object"&&(delete n.properties,Object.assign(n,t.properties)),n[Lt.OPACITY]=t.opacity!==void 0?t.opacity:1,jt(typeof n[Lt.OPACITY]=="number","Layer opacity must be a number"),n[Lt.VISIBLE]=t.visible!==void 0?t.visible:!0,n[Lt.Z_INDEX]=t.zIndex,n[Lt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,n[Lt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,n[Lt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,n[Lt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const n=this.state_||{layer:this,managed:t===void 0?!0:t},r=this.getZIndex();return n.opacity=qt(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(t){return Mt()}getLayerStatesArray(t){return Mt()}getExtent(){return this.get(Lt.EXTENT)}getMaxResolution(){return this.get(Lt.MAX_RESOLUTION)}getMinResolution(){return this.get(Lt.MIN_RESOLUTION)}getMinZoom(){return this.get(Lt.MIN_ZOOM)}getMaxZoom(){return this.get(Lt.MAX_ZOOM)}getOpacity(){return this.get(Lt.OPACITY)}getSourceState(){return Mt()}getVisible(){return this.get(Lt.VISIBLE)}getZIndex(){return this.get(Lt.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Lt.EXTENT,t)}setMaxResolution(t){this.set(Lt.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Lt.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Lt.MAX_ZOOM,t)}setMinZoom(t){this.set(Lt.MIN_ZOOM,t)}setOpacity(t){jt(typeof t=="number","Layer opacity must be a number"),this.set(Lt.OPACITY,t)}setVisible(t){this.set(Lt.VISIBLE,t)}setZIndex(t){this.set(Lt.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Di extends Ni{constructor(t,n){super(t),this.layer=n}}const _f={LAYERS:"layers"};class Gs extends op{constructor(t){t=t||{};const n=Object.assign({},t);delete n.layers;let r=t.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(_f.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new kn(r.slice(),{unique:!0}):jt(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new kn(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(kt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Ut(t,hn.ADD,this.handleLayersAdd_,this),Ut(t,hn.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(kt);_l(this.listenerKeys_);const n=t.getArray();for(let r=0,a=n.length;r<a;r++){const o=n[r];this.registerLayerListeners_(o),this.dispatchEvent(new Di("addlayer",o))}this.changed()}registerLayerListeners_(t){const n=[Ut(t,el.PROPERTYCHANGE,this.handleLayerChange_,this),Ut(t,_t.CHANGE,this.handleLayerChange_,this)];t instanceof Gs&&n.push(Ut(t,"addlayer",this.handleLayerGroupAdd_,this),Ut(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[zt(t)]=n}handleLayerGroupAdd_(t){this.dispatchEvent(new Di("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Di("removelayer",t.layer))}handleLayersAdd_(t){const n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new Di("addlayer",n)),this.changed()}handleLayersRemove_(t){const n=t.element,r=zt(n);this.listenerKeys_[r].forEach(kt),delete this.listenerKeys_[r],this.dispatchEvent(new Di("removelayer",n)),this.changed()}getLayers(){return this.get(_f.LAYERS)}setLayers(t){const n=this.getLayers();if(n){const r=n.getArray();for(let a=0,o=r.length;a<o;++a)this.dispatchEvent(new Di("removelayer",r[a]))}this.set(_f.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(n){n.getLayersArray(t)}),t}getLayerStatesArray(t){const n=t!==void 0?t:[],r=n.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(n)});const a=this.getLayerState();let o=a.zIndex;!t&&a.zIndex===void 0&&(o=0);for(let c=r,f=n.length;c<f;c++){const d=n[c];d.opacity*=a.opacity,d.visible=d.visible&&a.visible,d.maxResolution=Math.min(d.maxResolution,a.maxResolution),d.minResolution=Math.max(d.minResolution,a.minResolution),d.minZoom=Math.max(d.minZoom,a.minZoom),d.maxZoom=Math.min(d.maxZoom,a.maxZoom),a.extent!==void 0&&(d.extent!==void 0?d.extent=Ie(d.extent,a.extent):d.extent=a.extent),d.zIndex===void 0&&(d.zIndex=o)}return n}getSourceState(){return"ready"}}const Se={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Iu extends op{constructor(t){const n=Object.assign({},t);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Lt.SOURCE,this.handleSourcePropertyChange_);const r=t.source?t.source:null;this.setSource(r)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Lt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(kt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Ut(t,_t.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let n;const r=this.getMapInternal();!t&&r&&(t=r.getView()),t instanceof Cn?n={viewState:t.getState(),extent:t.calculateExtent()}:n=t,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let a;if(n.layerStatesArray){if(a=n.layerStatesArray.find(c=>c.layer===this),!a)return!1}else a=this.getLayerState();const o=this.getExtent();return Cd(a,n.viewState)&&(!o||pl(o,n.extent))}getAttributions(t){if(!this.isVisible(t))return[];const n=this.getSource()?.getAttributions();if(!n)return[];const r=t instanceof Cn?t.getViewStateAndExtent():t;let a=n(r);return Array.isArray(a)||(a=[a]),a}render(t,n){const r=this.getRenderer();return r.prepareFrame(t)?(this.rendered=!0,r.renderFrame(t,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,n){}renderDeferred(t){const n=this.getRenderer();n&&n.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Lt.MAP,t)}getMapInternal(){return this.get(Lt.MAP)}setMap(t){this.mapPrecomposeKey_&&(kt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(kt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Ut(t,Se.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Ut(this,_t.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const n=t.frameState.layerStatesArray,r=this.getLayerState(!1);jt(!n.some(a=>a.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(t){this.set(Lt.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Cd(s,t){if(!s.visible)return!1;const n=t.resolution;if(n<s.minResolution||n>=s.maxResolution)return!1;const r=t.zoom;return r>s.minZoom&&r<=s.maxZoom}function up(s,t,n=0,r=s.length-1,a=sS){for(;r>n;){if(r-n>600){const d=r-n+1,_=t-n+1,m=Math.log(d),y=.5*Math.exp(2*m/3),p=.5*Math.sqrt(m*y*(d-y)/d)*(_-d/2<0?-1:1),v=Math.max(n,Math.floor(t-_*y/d+p)),T=Math.min(r,Math.floor(t+(d-_)*y/d+p));up(s,t,v,T,a)}const o=s[t];let c=n,f=r;for(Ya(s,n,t),a(s[r],o)>0&&Ya(s,n,r);c<f;){for(Ya(s,c,f),c++,f--;a(s[c],o)<0;)c++;for(;a(s[f],o)>0;)f--}a(s[n],o)===0?Ya(s,n,f):(f++,Ya(s,f,r)),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function Ya(s,t,n){const r=s[t];s[t]=s[n],s[n]=r}function sS(s,t){return s<t?-1:s>t?1:0}class aS{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const r=[];if(!Zo(t,n))return r;const a=this.toBBox,o=[];for(;n;){for(let c=0;c<n.children.length;c++){const f=n.children[c],d=n.leaf?a(f):f;Zo(t,d)&&(n.leaf?r.push(f):yf(t,d)?this._all(f,r):o.push(f))}n=o.pop()}return r}collides(t){let n=this.data;if(!Zo(t,n))return!1;const r=[];for(;n;){for(let a=0;a<n.children.length;a++){const o=n.children[a],c=n.leaf?this.toBBox(o):o;if(Zo(t,c)){if(n.leaf||yf(t,c))return!0;r.push(o)}}n=r.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let r=0;r<t.length;r++)this.insert(t[r]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=hs([]),this}remove(t,n){if(!t)return this;let r=this.data;const a=this.toBBox(t),o=[],c=[];let f,d,_;for(;r||o.length;){if(r||(r=o.pop(),d=o[o.length-1],f=c.pop(),_=!0),r.leaf){const m=lS(t,r.children,n);if(m!==-1)return r.children.splice(m,1),o.push(r),this._condense(o),this}!_&&!r.leaf&&yf(r,a)?(o.push(r),c.push(f),f=0,d=r,r=r.children[0]):d?(f++,r=d.children[f],_=!1):r=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const r=[];for(;t;)t.leaf?n.push(...t.children):r.push(...t.children),t=r.pop();return n}_build(t,n,r,a){const o=r-n+1;let c=this._maxEntries,f;if(o<=c)return f=hs(t.slice(n,r+1)),is(f,this.toBBox),f;a||(a=Math.ceil(Math.log(o)/Math.log(c)),c=Math.ceil(o/Math.pow(c,a-1))),f=hs([]),f.leaf=!1,f.height=a;const d=Math.ceil(o/c),_=d*Math.ceil(Math.sqrt(c));Ly(t,n,r,_,this.compareMinX);for(let m=n;m<=r;m+=_){const y=Math.min(m+_-1,r);Ly(t,m,y,d,this.compareMinY);for(let p=m;p<=y;p+=d){const v=Math.min(p+d-1,y);f.children.push(this._build(t,p,v,a-1))}}return is(f,this.toBBox),f}_chooseSubtree(t,n,r,a){for(;a.push(n),!(n.leaf||a.length-1===r);){let o=1/0,c=1/0,f;for(let d=0;d<n.children.length;d++){const _=n.children[d],m=mf(_),y=cS(t,_)-m;y<c?(c=y,o=m<o?m:o,f=_):y===c&&m<o&&(o=m,f=_)}n=f||n.children[0]}return n}_insert(t,n,r){const a=r?t:this.toBBox(t),o=[],c=this._chooseSubtree(a,this.data,n,o);for(c.children.push(t),qa(c,a);n>=0&&o[n].children.length>this._maxEntries;)this._split(o,n),n--;this._adjustParentBBoxes(a,o,n)}_split(t,n){const r=t[n],a=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,a);const c=this._chooseSplitIndex(r,o,a),f=hs(r.children.splice(c,r.children.length-c));f.height=r.height,f.leaf=r.leaf,is(r,this.toBBox),is(f,this.toBBox),n?t[n-1].children.push(f):this._splitRoot(r,f)}_splitRoot(t,n){this.data=hs([t,n]),this.data.height=t.height+1,this.data.leaf=!1,is(this.data,this.toBBox)}_chooseSplitIndex(t,n,r){let a,o=1/0,c=1/0;for(let f=n;f<=r-n;f++){const d=Ka(t,0,f,this.toBBox),_=Ka(t,f,r,this.toBBox),m=hS(d,_),y=mf(d)+mf(_);m<o?(o=m,a=f,c=y<c?y:c):m===o&&y<c&&(c=y,a=f)}return a||r-n}_chooseSplitAxis(t,n,r){const a=t.leaf?this.compareMinX:oS,o=t.leaf?this.compareMinY:uS,c=this._allDistMargin(t,n,r,a),f=this._allDistMargin(t,n,r,o);c<f&&t.children.sort(a)}_allDistMargin(t,n,r,a){t.children.sort(a);const o=this.toBBox,c=Ka(t,0,n,o),f=Ka(t,r-n,r,o);let d=qo(c)+qo(f);for(let _=n;_<r-n;_++){const m=t.children[_];qa(c,t.leaf?o(m):m),d+=qo(c)}for(let _=r-n-1;_>=n;_--){const m=t.children[_];qa(f,t.leaf?o(m):m),d+=qo(f)}return d}_adjustParentBBoxes(t,n,r){for(let a=r;a>=0;a--)qa(n[a],t)}_condense(t){for(let n=t.length-1,r;n>=0;n--)t[n].children.length===0?n>0?(r=t[n-1].children,r.splice(r.indexOf(t[n]),1)):this.clear():is(t[n],this.toBBox)}}function lS(s,t,n){if(!n)return t.indexOf(s);for(let r=0;r<t.length;r++)if(n(s,t[r]))return r;return-1}function is(s,t){Ka(s,0,s.children.length,t,s)}function Ka(s,t,n,r,a){a||(a=hs(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(let o=t;o<n;o++){const c=s.children[o];qa(a,s.leaf?r(c):c)}return a}function qa(s,t){return s.minX=Math.min(s.minX,t.minX),s.minY=Math.min(s.minY,t.minY),s.maxX=Math.max(s.maxX,t.maxX),s.maxY=Math.max(s.maxY,t.maxY),s}function oS(s,t){return s.minX-t.minX}function uS(s,t){return s.minY-t.minY}function mf(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function qo(s){return s.maxX-s.minX+(s.maxY-s.minY)}function cS(s,t){return(Math.max(t.maxX,s.maxX)-Math.min(t.minX,s.minX))*(Math.max(t.maxY,s.maxY)-Math.min(t.minY,s.minY))}function hS(s,t){const n=Math.max(s.minX,t.minX),r=Math.max(s.minY,t.minY),a=Math.min(s.maxX,t.maxX),o=Math.min(s.maxY,t.maxY);return Math.max(0,a-n)*Math.max(0,o-r)}function yf(s,t){return s.minX<=t.minX&&s.minY<=t.minY&&t.maxX<=s.maxX&&t.maxY<=s.maxY}function Zo(s,t){return t.minX<=s.maxX&&t.minY<=s.maxY&&t.maxX>=s.minX&&t.maxY>=s.minY}function hs(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ly(s,t,n,r,a){const o=[t,n];for(;o.length;){if(n=o.pop(),t=o.pop(),n-t<=r)continue;const c=t+Math.ceil((n-t)/r/2)*r;up(s,c,t,n,a),o.push(t,c,c,n)}}const Md=[NaN,NaN,NaN,0];let Ef;function fS(){return Ef||(Ef=Ee(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Ef}const dS=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,gS=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,_S=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,mS=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function ko(s,t){return s.endsWith("%")?Number(s.substring(0,s.length-1))/t:Number(s)}function Wa(s){throw new Error('failed to parse "'+s+'" as color')}function cp(s){if(s.toLowerCase().startsWith("rgb")){const o=s.match(gS)||s.match(dS)||s.match(_S);if(o){const c=o[4],f=100/255;return[qt(ko(o[1],f)+.5|0,0,255),qt(ko(o[2],f)+.5|0,0,255),qt(ko(o[3],f)+.5|0,0,255),c!==void 0?qt(ko(c,100),0,1):1]}Wa(s)}if(s.startsWith("#")){if(mS.test(s)){const o=s.substring(1),c=o.length<=4?1:2,f=[0,0,0,255];for(let d=0,_=o.length;d<_;d+=c){let m=parseInt(o.substring(d,d+c),16);c===1&&(m+=m<<4),f[d/c]=m}return f[3]=f[3]/255,f}Wa(s)}const t=fS();t.fillStyle="#abcdef";let n=t.fillStyle;t.fillStyle=s,t.fillStyle===n&&(t.fillStyle="#fedcba",n=t.fillStyle,t.fillStyle=s,t.fillStyle===n&&Wa(s));const r=t.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return cp(r);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const a=Array.from(t.getImageData(0,0,1,1).data);return a[3]=ld(a[3]/255,3),a}function yS(s){return typeof s=="string"?s:Od(s)}const ES=1024,Ha={};let pf=0;function pS(s){if(s.length===4)return s;const t=s.slice();return t[3]=1,t}function Tf(s){return s>.0031308?Math.pow(s,1/2.4)*269.025-14.025:s*3294.6}function vf(s){return s>.2068965?Math.pow(s,3):(s-4/29)*(108/841)}function Rf(s){return s>10.314724?Math.pow((s+14.025)/269.025,2.4):s/3294.6}function xf(s){return s>.0088564?Math.pow(s,1/3):s/(108/841)+4/29}function Iy(s){const t=Rf(s[0]),n=Rf(s[1]),r=Rf(s[2]),a=xf(t*.222488403+n*.716873169+r*.06060791),o=500*(xf(t*.452247074+n*.399439023+r*.148375274)-a),c=200*(a-xf(t*.016863605+n*.117638439+r*.865350722)),f=Math.atan2(c,o)*(180/Math.PI);return[116*a-16,Math.sqrt(o*o+c*c),f<0?f+360:f,s[3]]}function TS(s){const t=(s[0]+16)/116,n=s[1],r=s[2]*Math.PI/180,a=vf(t),o=vf(t+n/500*Math.cos(r)),c=vf(t-n/200*Math.sin(r)),f=Tf(o*3.021973625-a*1.617392459-c*.404875592),d=Tf(o*-.943766287+a*1.916279586+c*.027607165),_=Tf(o*.069407491-a*.22898585+c*1.159737864);return[qt(f+.5|0,0,255),qt(d+.5|0,0,255),qt(_+.5|0,0,255),s[3]]}function Dd(s){if(s==="none")return Md;if(Ha.hasOwnProperty(s))return Ha[s];if(pf>=ES){let n=0;for(const r in Ha)(n++&3)===0&&(delete Ha[r],--pf)}const t=cp(s);t.length!==4&&Wa(s);for(const n of t)isNaN(n)&&Wa(s);return Ha[s]=t,++pf,t}function Li(s){return Array.isArray(s)?s:Dd(s)}function Od(s){let t=s[0];t!=(t|0)&&(t=t+.5|0);let n=s[1];n!=(n|0)&&(n=n+.5|0);let r=s[2];r!=(r|0)&&(r=r+.5|0);const a=s[3]===void 0?1:Math.round(s[3]*1e3)/1e3;return"rgba("+t+","+n+","+r+","+a+")"}function Ny(s){return s[0]>0&&s[1]>0}function vS(s,t,n){return n===void 0&&(n=[0,0]),n[0]=s[0]*t+.5|0,n[1]=s[1]*t+.5|0,n}function ie(s,t){return Array.isArray(s)?s:(t===void 0?t=[s,s]:(t[0]=s,t[1]=s),t)}let fr=0;const be=1<<fr++,yt=1<<fr++,Oe=1<<fr++,Qe=1<<fr++,Ii=1<<fr++,Es=1<<fr++,$o=Math.pow(2,fr)-1,Ld={[be]:"boolean",[yt]:"number",[Oe]:"string",[Qe]:"color",[Ii]:"number[]",[Es]:"size"},RS=Object.keys(Ld).map(Number).sort(xu);function xS(s){return s in Ld}function ps(s){const t=[];for(const n of RS)Za(s,n)&&t.push(Ld[n]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Za(s,t){return(s&t)===t}function bi(s,t){return s===t}class oe{constructor(t,n){if(!xS(t))throw new Error(`literal expressions must have a specific type, got ${ps(t)}`);this.type=t,this.value=n}}class hp{constructor(t,n,...r){this.type=t,this.operator=n,this.args=r}}function Id(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function de(s,t,n){switch(typeof s){case"boolean":{if(bi(t,Oe))return new oe(Oe,s?"true":"false");if(!Za(t,be))throw new Error(`got a boolean, but expected ${ps(t)}`);return new oe(be,s)}case"number":{if(bi(t,Es))return new oe(Es,ie(s));if(bi(t,be))return new oe(be,!!s);if(bi(t,Oe))return new oe(Oe,s.toString());if(!Za(t,yt))throw new Error(`got a number, but expected ${ps(t)}`);return new oe(yt,s)}case"string":{if(bi(t,Qe))return new oe(Qe,Dd(s));if(bi(t,be))return new oe(be,!!s);if(!Za(t,Oe))throw new Error(`got a string, but expected ${ps(t)}`);return new oe(Oe,s)}}if(!Array.isArray(s))throw new Error("expression must be an array or a primitive value");if(s.length===0)throw new Error("empty expression");if(typeof s[0]=="string")return NS(s,t,n);for(const r of s)if(typeof r!="number")throw new Error("expected an array of numbers");if(bi(t,Es)){if(s.length!==2)throw new Error(`expected an array of two values for a size, got ${s.length}`);return new oe(Es,s)}if(bi(t,Qe)){if(s.length===3)return new oe(Qe,[...s,1]);if(s.length===4)return new oe(Qe,s);throw new Error(`expected an array of 3 or 4 values for a color, got ${s.length}`)}if(!Za(t,Ii))throw new Error(`got an array of numbers, but expected ${ps(t)}`);return new oe(Ii,s)}const U={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},SS={[U.Get]:gt(pt(1,1/0),Uy),[U.Var]:gt(pt(1,1),bS),[U.Has]:gt(pt(1,1/0),Uy),[U.Id]:gt(AS,rs),[U.Concat]:gt(pt(2,1/0),Nt(Oe)),[U.GeometryType]:gt(wS,rs),[U.LineMetric]:gt(rs),[U.Resolution]:gt(Sf,rs),[U.Zoom]:gt(Sf,rs),[U.Time]:gt(Sf,rs),[U.Any]:gt(pt(2,1/0),Nt(be)),[U.All]:gt(pt(2,1/0),Nt(be)),[U.Not]:gt(pt(1,1),Nt(be)),[U.Equal]:gt(pt(2,2),Nt($o)),[U.NotEqual]:gt(pt(2,2),Nt($o)),[U.GreaterThan]:gt(pt(2,2),Nt(yt)),[U.GreaterThanOrEqualTo]:gt(pt(2,2),Nt(yt)),[U.LessThan]:gt(pt(2,2),Nt(yt)),[U.LessThanOrEqualTo]:gt(pt(2,2),Nt(yt)),[U.Multiply]:gt(pt(2,1/0),zy),[U.Coalesce]:gt(pt(2,1/0),zy),[U.Divide]:gt(pt(2,2),Nt(yt)),[U.Add]:gt(pt(2,1/0),Nt(yt)),[U.Subtract]:gt(pt(2,2),Nt(yt)),[U.Clamp]:gt(pt(3,3),Nt(yt)),[U.Mod]:gt(pt(2,2),Nt(yt)),[U.Pow]:gt(pt(2,2),Nt(yt)),[U.Abs]:gt(pt(1,1),Nt(yt)),[U.Floor]:gt(pt(1,1),Nt(yt)),[U.Ceil]:gt(pt(1,1),Nt(yt)),[U.Round]:gt(pt(1,1),Nt(yt)),[U.Sin]:gt(pt(1,1),Nt(yt)),[U.Cos]:gt(pt(1,1),Nt(yt)),[U.Atan]:gt(pt(1,2),Nt(yt)),[U.Sqrt]:gt(pt(1,1),Nt(yt)),[U.Match]:gt(pt(4,1/0),Gy,MS),[U.Between]:gt(pt(3,3),Nt(yt)),[U.Interpolate]:gt(pt(6,1/0),Gy,DS),[U.Case]:gt(pt(3,1/0),CS,OS),[U.In]:gt(pt(2,2),LS),[U.Number]:gt(pt(1,1/0),Nt($o)),[U.String]:gt(pt(1,1/0),Nt($o)),[U.Array]:gt(pt(1,1/0),Nt(yt)),[U.Color]:gt(pt(1,4),Nt(yt)),[U.Band]:gt(pt(1,3),Nt(yt)),[U.Palette]:gt(pt(2,2),IS),[U.ToString]:gt(pt(1,1),Nt(be|yt|Oe|Qe))};function Uy(s,t,n){const r=s.length-1,a=new Array(r);for(let o=0;o<r;++o){const c=s[o+1];switch(typeof c){case"number":{a[o]=new oe(yt,c);break}case"string":{a[o]=new oe(Oe,c);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${c}`)}o===0&&n.properties.add(String(c))}return a}function bS(s,t,n){const r=s[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new oe(Oe,r)]}function AS(s,t,n){n.featureId=!0}function wS(s,t,n){n.geometryType=!0}function Sf(s,t,n){n.mapState=!0}function rs(s,t,n){const r=s[0];if(s.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function pt(s,t){return function(n,r,a){const o=n[0],c=n.length-1;if(s===t){if(c!==s){const f=s===1?"":"s";throw new Error(`expected ${s} argument${f} for ${o}, got ${c}`)}}else if(c<s||c>t){const f=t===1/0?`${s} or more`:`${s} to ${t}`;throw new Error(`expected ${f} arguments for ${o}, got ${c}`)}}}function zy(s,t,n){const r=s.length-1,a=new Array(r);for(let o=0;o<r;++o){const c=de(s[o+1],t,n);a[o]=c}return a}function Nt(s){return function(t,n,r){const a=t.length-1,o=new Array(a);for(let c=0;c<a;++c){const f=de(t[c+1],s,r);o[c]=f}return o}}function CS(s,t,n){const r=s[0],a=s.length-1;if(a%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${a} instead`)}function Gy(s,t,n){const r=s[0],a=s.length-1;if(a%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${a} instead`)}function MS(s,t,n){const r=s.length-1,a=Oe|yt|be,o=de(s[1],a,n),c=de(s[s.length-1],t,n),f=new Array(r-2);for(let d=0;d<r-2;d+=2){try{const _=de(s[d+2],o.type,n);f[d]=_}catch(_){throw new Error(`failed to parse argument ${d+1} of match expression: ${_.message}`)}try{const _=de(s[d+3],c.type,n);f[d+1]=_}catch(_){throw new Error(`failed to parse argument ${d+2} of match expression: ${_.message}`)}}return[o,...f,c]}function DS(s,t,n){const r=s[1];let a;switch(r[0]){case"linear":a=1;break;case"exponential":const d=r[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);a=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const o=new oe(yt,a);let c;try{c=de(s[2],yt,n)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const f=new Array(s.length-3);for(let d=0;d<f.length;d+=2){try{const _=de(s[d+3],yt,n);f[d]=_}catch(_){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${_.message}`)}try{const _=de(s[d+4],t,n);f[d+1]=_}catch(_){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${_.message}`)}}return[o,c,...f]}function OS(s,t,n){const r=de(s[s.length-1],t,n),a=new Array(s.length-1);for(let o=0;o<a.length-1;o+=2){try{const c=de(s[o+1],be,n);a[o]=c}catch(c){throw new Error(`failed to parse argument ${o} of case expression: ${c.message}`)}try{const c=de(s[o+2],r.type,n);a[o+1]=c}catch(c){throw new Error(`failed to parse argument ${o+1} of case expression: ${c.message}`)}}return a[a.length-1]=r,a}function LS(s,t,n){let r=s[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let a;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],a=Oe}else a=yt;const o=new Array(r.length);for(let f=0;f<o.length;f++)try{const d=de(r[f],a,n);o[f]=d}catch(d){throw new Error(`failed to parse haystack item ${f} for "in" expression: ${d.message}`)}return[de(s[1],a,n),...o]}function IS(s,t,n){let r;try{r=de(s[1],yt,n)}catch(c){throw new Error(`failed to parse first argument in palette expression: ${c.message}`)}const a=s[2];if(!Array.isArray(a))throw new Error("the second argument of palette must be an array");const o=new Array(a.length);for(let c=0;c<o.length;c++){let f;try{f=de(a[c],Qe,n)}catch(d){throw new Error(`failed to parse color at index ${c} in palette expression: ${d.message}`)}if(!(f instanceof oe))throw new Error(`the palette color at index ${c} must be a literal value`);o[c]=f}return[r,...o]}function gt(...s){return function(t,n,r){const a=t[0];let o;for(let c=0;c<s.length;c++){const f=s[c](t,n,r);if(c==s.length-1){if(!f)throw new Error("expected last argument validator to return the parsed args");o=f}}return new hp(n,a,...o)}}function NS(s,t,n){const r=s[0],a=SS[r];if(!a)throw new Error(`unknown operator: ${r}`);return a(s,t,n)}function fp(s){if(!s)return"";const t=s.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return fp(s.getGeometries()[0]);default:return""}}function dp(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Jn(s,t,n){const r=de(s,t,n);return pn(r)}function pn(s,t){if(s instanceof oe){if(s.type===Qe&&typeof s.value=="string"){const r=Dd(s.value);return function(){return r}}return function(){return s.value}}const n=s.operator;switch(n){case U.Number:case U.String:case U.Coalesce:return US(s);case U.Get:case U.Var:case U.Has:return zS(s);case U.Id:return r=>r.featureId;case U.GeometryType:return r=>r.geometryType;case U.Concat:{const r=s.args.map(a=>pn(a));return a=>"".concat(...r.map(o=>o(a).toString()))}case U.Resolution:return r=>r.resolution;case U.Any:case U.All:case U.Between:case U.In:case U.Not:return PS(s);case U.Equal:case U.NotEqual:case U.LessThan:case U.LessThanOrEqualTo:case U.GreaterThan:case U.GreaterThanOrEqualTo:return GS(s);case U.Multiply:case U.Divide:case U.Add:case U.Subtract:case U.Clamp:case U.Mod:case U.Pow:case U.Abs:case U.Floor:case U.Ceil:case U.Round:case U.Sin:case U.Cos:case U.Atan:case U.Sqrt:return BS(s);case U.Case:return FS(s);case U.Match:return XS(s);case U.Interpolate:return YS(s);case U.ToString:return HS(s);default:throw new Error(`Unsupported operator ${n}`)}}function US(s,t){const n=s.operator,r=s.args.length,a=new Array(r);for(let o=0;o<r;++o)a[o]=pn(s.args[o]);switch(n){case U.Coalesce:return o=>{for(let c=0;c<r;++c){const f=a[c](o);if(typeof f<"u"&&f!==null)return f}throw new Error("Expected one of the values to be non-null")};case U.Number:case U.String:return o=>{for(let c=0;c<r;++c){const f=a[c](o);if(typeof f===n)return f}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function zS(s,t){const r=s.args[0].value;switch(s.operator){case U.Get:return a=>{const o=s.args;let c=a.properties[r];for(let f=1,d=o.length;f<d;++f){const m=o[f].value;c=c[m]}return c};case U.Var:return a=>a.variables[r];case U.Has:return a=>{const o=s.args;if(!(r in a.properties))return!1;let c=a.properties[r];for(let f=1,d=o.length;f<d;++f){const m=o[f].value;if(!c||!Object.hasOwn(c,m))return!1;c=c[m]}return!0};default:throw new Error(`Unsupported accessor operator ${s.operator}`)}}function GS(s,t){const n=s.operator,r=pn(s.args[0]),a=pn(s.args[1]);switch(n){case U.Equal:return o=>r(o)===a(o);case U.NotEqual:return o=>r(o)!==a(o);case U.LessThan:return o=>r(o)<a(o);case U.LessThanOrEqualTo:return o=>r(o)<=a(o);case U.GreaterThan:return o=>r(o)>a(o);case U.GreaterThanOrEqualTo:return o=>r(o)>=a(o);default:throw new Error(`Unsupported comparison operator ${n}`)}}function PS(s,t){const n=s.operator,r=s.args.length,a=new Array(r);for(let o=0;o<r;++o)a[o]=pn(s.args[o]);switch(n){case U.Any:return o=>{for(let c=0;c<r;++c)if(a[c](o))return!0;return!1};case U.All:return o=>{for(let c=0;c<r;++c)if(!a[c](o))return!1;return!0};case U.Between:return o=>{const c=a[0](o),f=a[1](o),d=a[2](o);return c>=f&&c<=d};case U.In:return o=>{const c=a[0](o);for(let f=1;f<r;++f)if(c===a[f](o))return!0;return!1};case U.Not:return o=>!a[0](o);default:throw new Error(`Unsupported logical operator ${n}`)}}function BS(s,t){const n=s.operator,r=s.args.length,a=new Array(r);for(let o=0;o<r;++o)a[o]=pn(s.args[o]);switch(n){case U.Multiply:return o=>{let c=1;for(let f=0;f<r;++f)c*=a[f](o);return c};case U.Divide:return o=>a[0](o)/a[1](o);case U.Add:return o=>{let c=0;for(let f=0;f<r;++f)c+=a[f](o);return c};case U.Subtract:return o=>a[0](o)-a[1](o);case U.Clamp:return o=>{const c=a[0](o),f=a[1](o);if(c<f)return f;const d=a[2](o);return c>d?d:c};case U.Mod:return o=>a[0](o)%a[1](o);case U.Pow:return o=>Math.pow(a[0](o),a[1](o));case U.Abs:return o=>Math.abs(a[0](o));case U.Floor:return o=>Math.floor(a[0](o));case U.Ceil:return o=>Math.ceil(a[0](o));case U.Round:return o=>Math.round(a[0](o));case U.Sin:return o=>Math.sin(a[0](o));case U.Cos:return o=>Math.cos(a[0](o));case U.Atan:return r===2?o=>Math.atan2(a[0](o),a[1](o)):o=>Math.atan(a[0](o));case U.Sqrt:return o=>Math.sqrt(a[0](o));default:throw new Error(`Unsupported numeric operator ${n}`)}}function FS(s,t){const n=s.args.length,r=new Array(n);for(let a=0;a<n;++a)r[a]=pn(s.args[a]);return a=>{for(let o=0;o<n-1;o+=2)if(r[o](a))return r[o+1](a);return r[n-1](a)}}function XS(s,t){const n=s.args.length,r=new Array(n);for(let a=0;a<n;++a)r[a]=pn(s.args[a]);return a=>{const o=r[0](a);for(let c=1;c<n-1;c+=2)if(o===r[c](a))return r[c+1](a);return r[n-1](a)}}function YS(s,t){const n=s.args.length,r=new Array(n);for(let a=0;a<n;++a)r[a]=pn(s.args[a]);return a=>{const o=r[0](a),c=r[1](a);let f,d;for(let _=2;_<n;_+=2){const m=r[_](a);let y=r[_+1](a);const p=Array.isArray(y);if(p&&(y=pS(y)),m>=c)return _===2?y:p?jS(o,c,f,d,m,y):ka(o,c,f,d,m,y);f=m,d=y}return d}}function HS(s,t){const n=s.operator,r=s.args.length,a=new Array(r);for(let o=0;o<r;++o)a[o]=pn(s.args[o]);switch(n){case U.ToString:return o=>{const c=a[0](o);return s.args[0].type===Qe?Od(c):c.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function ka(s,t,n,r,a,o){const c=a-n;if(c===0)return r;const f=t-n,d=s===1?f/c:(Math.pow(s,f)-1)/(Math.pow(s,c)-1);return r+d*(o-r)}function jS(s,t,n,r,a,o){if(a-n===0)return r;const f=Iy(r),d=Iy(o);let _=d[2]-f[2];_>180?_-=360:_<-180&&(_+=360);const m=[ka(s,t,n,f[0],a,d[0]),ka(s,t,n,f[1],a,d[1]),f[2]+ka(s,t,n,0,a,_),ka(s,t,n,r[3],a,o[3])];return TS(m)}const wt={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function VS(s,t,n){const r=s;let a=!0,o=!1,c=!1;const f=[hu(r,_t.LOAD,function(){c=!0,o||t()})];return r.src&&DE?(o=!0,r.decode().then(function(){a&&t()}).catch(function(d){a&&(c?t():n())})):f.push(hu(r,_t.ERROR,n)),function(){a=!1,f.forEach(kt)}}function KS(s,t){return new Promise((n,r)=>{function a(){c(),n(s)}function o(){c(),r(new Error("Image load error"))}function c(){s.removeEventListener("load",a),s.removeEventListener("error",o)}s.addEventListener("load",a),s.addEventListener("error",o)})}function qS(s,t){return t&&(s.src=t),s.src&&DE?new Promise((n,r)=>s.decode().then(()=>n(s)).catch(a=>s.complete&&s.width?n(s):r(a))):KS(s)}class ZS{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const n in this.cache_){const r=this.cache_[n];(t++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(t,n,r){const a=bf(t,n,r);return a in this.cache_?this.cache_[a]:null}getPattern(t,n,r){const a=bf(t,n,r);return a in this.patternCache_?this.patternCache_[a]:null}set(t,n,r,a,o){const c=bf(t,n,r),f=c in this.cache_;this.cache_[c]=a,o&&(a.getImageState()===wt.IDLE&&a.load(),a.getImageState()===wt.LOADING?a.ready().then(()=>{this.patternCache_[c]=pu().createPattern(a.getImage(1),"repeat")}):this.patternCache_[c]=pu().createPattern(a.getImage(1),"repeat")),f||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function bf(s,t,n){const r=n?Li(n):"null";return t+":"+s+":"+r}const fn=new ZS;let ja=null;class gp extends ml{constructor(t,n,r,a,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=a===void 0?wt.IDLE:a,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===wt.LOADED){ja||(ja=Ee(1,1,void 0,{willReadFrequently:!0})),ja.drawImage(this.image_,0,0);try{ja.getImageData(0,0,1,1),this.tainted_=!1}catch{ja=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(_t.CHANGE)}handleImageError_(){this.imageState_=wt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=wt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],n=this.size_[1],r=Ee(t,n);r.fillRect(0,0,t,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===wt.IDLE){this.image_||this.initializeImage_(),this.imageState_=wt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&qS(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==wt.LOADED)return;const n=this.image_,r=Ee(Math.ceil(n.width*t),Math.ceil(n.height*t)),a=r.canvas;r.scale(t,t),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=yS(this.color_),r.fillRect(0,0,a.width/t,a.height/t),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[t]=a}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===wt.LOADED||this.imageState_===wt.ERROR)t();else{const n=()=>{(this.imageState_===wt.LOADED||this.imageState_===wt.ERROR)&&(this.removeEventListener(_t.CHANGE,n),t())};this.addEventListener(_t.CHANGE,n)}})),this.ready_}}function Nd(s,t,n,r,a,o){let c=t===void 0?void 0:fn.get(t,n,a);return c||(c=new gp(s,s&&"src"in s?s.src||void 0:t,n,r,a),fn.set(t,n,a,c,o)),o&&c&&!fn.getPattern(t,n,a)&&fn.set(t,n,a,c,o),c}function Py(s){return s?Array.isArray(s)?Od(s):typeof s=="object"&&"src"in s?kS(s):s:null}function kS(s){if(!s.offset||!s.size)return fn.getPattern(s.src,"anonymous",s.color);const t=s.src+":"+s.offset,n=fn.getPattern(t,void 0,s.color);if(n)return n;const r=fn.get(s.src,"anonymous",null);if(r.getImageState()!==wt.LOADED)return null;const a=Ee(s.size[0],s.size[1]);return a.drawImage(r.getImage(1),s.offset[0],s.offset[1],s.size[0],s.size[1],0,0,s.size[0],s.size[1]),Nd(a.canvas,t,void 0,wt.LOADED,s.color,!0),fn.getPattern(t,void 0,s.color)}const By="#000",Fy="round",Xy="round",$S=10,QS="#000",WS=1,JS=new Wn;class Nu{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ie(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Nu({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Mt()}getImage(t){return Mt()}getHitDetectionImage(){return Mt()}getPixelRatio(t){return 1}getImageState(){return Mt()}getImageSize(){return Mt()}getOrigin(){return Mt()}getSize(){return Mt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ie(t)}listenImageChange(t){Mt()}load(){Mt()}unlistenImageChange(t){Mt()}ready(){return Promise.resolve()}}class Uu extends Nu{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?wt.LOADING:wt.LOADED,this.imageState_===wt.LOADING&&this.ready().then(()=>this.imageState_=wt.LOADED),this.render()}clone(){const t=this.getScale(),n=new Uu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const t=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[t[0]/2-n[0]/r[0],t[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const n=this.fill_?.getKey(),r=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let a=fn.get(r,null,null)?.getImage(1);if(!a){const o=this.renderOptions_,c=Math.ceil(o.size*t),f=Ee(c,c);this.draw_(o,f,t),a=f.canvas,fn.set(r,null,null,new gp(a,void 0,null,wt.LOADED,null))}return a}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,n,r){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;let a=this.radius,o=this.radius2_===void 0?a:this.radius2_;if(a<o){const F=a;a=o,o=F}const c=this.radius2_===void 0?this.points_:this.points_*2,f=2*Math.PI/c,d=o*Math.sin(f),_=Math.sqrt(o*o-d*d),m=a-_,y=Math.sqrt(d*d+m*m),p=y/d;if(t==="miter"&&p<=r)return p*n;const v=n/2/p,T=n/2*(m/y),x=Math.sqrt((a+v)*(a+v)+T*T)-a;if(this.radius2_===void 0||t==="bevel")return x*2;const M=a*Math.sin(f),b=Math.sqrt(a*a-M*M),L=o-b,C=Math.sqrt(M*M+L*L)/M;if(C<=r){const F=C*n/2-o-a;return 2*Math.max(x,F)}return x*2}createRenderOptions(){let t=Fy,n=Xy,r=0,a=null,o=0,c,f=0;this.stroke_&&(c=Py(this.stroke_.getColor()??QS),f=this.stroke_.getWidth()??WS,a=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??Xy,t=this.stroke_.getLineCap()??Fy,r=this.stroke_.getMiterLimit()??$S);const d=this.calculateLineJoinSize_(n,f,r),_=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*_+d);return{strokeStyle:c,strokeWidth:f,size:m,lineCap:t,lineDash:a,lineDashOffset:o,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,n,r){if(n.scale(r,r),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){let a=this.fill_.getColor();a===null&&(a=By),n.fillStyle=Py(a),n.fill()}t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineCap=t.lineCap,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}createHitDetectionCanvas_(t){let n;if(this.fill_){let r=this.fill_.getColor(),a=0;typeof r=="string"&&(r=Li(r)),r===null?a=1:Array.isArray(r)&&(a=r.length===4?r[3]:1),a===0&&(n=Ee(t.size,t.size),this.drawHitDetectionCanvas_(t,n))}return n?n.canvas:this.getImage(1)}createPath_(t){let n=this.points_;const r=this.radius;if(n===1/0)t.arc(0,0,r,0,2*Math.PI);else{const a=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const o=this.angle_-Math.PI/2,c=2*Math.PI/n;for(let f=0;f<n;f++){const d=o+f*c,_=f%2===0?r:a;t.lineTo(_*Math.cos(d),_*Math.sin(d))}t.closePath()}}drawHitDetectionCanvas_(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=By,n.fill(),t.strokeStyle&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class zu extends Uu{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),n=new zu({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(t){this.radius=t,this.render()}}class Sl{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new Sl({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const n=Nd(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===wt.IDLE&&n.load(),n.getImageState()===wt.LOADING&&(this.patternImage_=n)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?zt(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:Li(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Yy(s,t,n,r){return n!==void 0&&r!==void 0?[n/s,r/t]:n!==void 0?n/s:r!==void 0?r/t:1}class Ud extends Nu{constructor(t){t=t||{};const n=t.opacity!==void 0?t.opacity:1,r=t.rotation!==void 0?t.rotation:0,a=t.scale!==void 0?t.scale:1,o=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:n,rotation:r,scale:a,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:o,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const c=t.img!==void 0?t.img:null;let f=t.src;jt(!(f!==void 0&&c),"`image` and `src` cannot be provided at the same time"),(f===void 0||f.length===0)&&c&&(f=c.src||zt(c)),jt(f!==void 0&&f.length>0,"A defined and non-empty `src` or `image` must be provided"),jt(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(t.src!==void 0?d=wt.IDLE:c!==void 0&&("complete"in c?c.complete?d=c.src?wt.LOADED:wt.IDLE:d=wt.LOADING:d=wt.LOADED),this.color_=t.color!==void 0?Li(t.color):null,this.iconImage_=Nd(c,f,this.crossOrigin_,d,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let _,m;if(t.size)[_,m]=t.size;else{const y=this.getImage(1);if(y.width&&y.height)_=y.width,m=y.height;else if(y instanceof HTMLImageElement){this.initialOptions_=t;const p=()=>{if(this.unlistenImageChange(p),!this.initialOptions_)return;const v=this.iconImage_.getSize();this.setScale(Yy(v[0],v[1],t.width,t.height))};this.listenImageChange(p);return}}_!==void 0&&this.setScale(Yy(_,m,t.width,t.height))}}clone(){let t,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Ud({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const a=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!a)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=a[0]),this.anchorYUnits_=="fraction"&&(t[1]*=a[1])}if(this.anchorOrigin_!="top-left"){if(!a)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+a[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+a[1])}this.normalizedAnchor_=t}const n=this.getDisplacement(),r=this.getScaleArray();return[t[0]-n[0]/r[0],t[1]+n[1]/r[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=r[0]-n[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=r[1]-n[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==wt.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==wt.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(_t.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(_t.CHANGE,t)}ready(){return this.iconImage_.ready()}}class Gu{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Gu({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class or{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Hy,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new or({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(n){return n.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Hy,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function tb(s){let t;if(typeof s=="function")t=s;else{let n;Array.isArray(s)?n=s:(jt(typeof s.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[s]),t=function(){return n}}return t}let Af=null;function _p(s,t){if(!Af){const n=new Sl({color:"rgba(255,255,255,0.4)"}),r=new Gu({color:"#3399CC",width:1.25});Af=[new or({image:new zu({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return Af}function Hy(s){return s.getGeometry()}const eb="#333";class zd{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=ie(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new Sl({color:eb}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new zd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ie(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}function nb(s){return!0}function ib(s){const t=Id(),n=rb(s,t),r=dp();return function(a,o){if(r.properties=a.getPropertiesInternal(),r.resolution=o,t.featureId){const c=a.getId();c!==void 0?r.featureId=c:r.featureId=null}return t.geometryType&&(r.geometryType=fp(a.getGeometry())),n(r)}}function jy(s){const t=Id(),n=s.length,r=new Array(n);for(let c=0;c<n;++c)r[c]=kf(s[c],t);const a=dp(),o=new Array(n);return function(c,f){if(a.properties=c.getPropertiesInternal(),a.resolution=f,t.featureId){const _=c.getId();_!==void 0?a.featureId=_:a.featureId=null}let d=0;for(let _=0;_<n;++_){const m=r[_](a);m&&(o[d]=m,d+=1)}return o.length=d,o}}function rb(s,t){const n=s.length,r=new Array(n);for(let a=0;a<n;++a){const o=s[a],c="filter"in o?Jn(o.filter,be,t):nb;let f;if(Array.isArray(o.style)){const d=o.style.length;f=new Array(d);for(let _=0;_<d;++_)f[_]=kf(o.style[_],t)}else f=[kf(o.style,t)];r[a]={filter:c,styles:f}}return function(a){const o=[];let c=!1;for(let f=0;f<n;++f){const d=r[f].filter;if(d(a)&&!(s[f].else&&c)){c=!0;for(const _ of r[f].styles){const m=_(a);m&&o.push(m)}}}return o}}function kf(s,t){const n=ul(s,"",t),r=cl(s,"",t),a=sb(s,t),o=ab(s,t),c=Xe(s,"z-index",t);if(!n&&!r&&!a&&!o&&!wE(s))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(s));const f=new or;return function(d){let _=!0;if(n){const m=n(d);m&&(_=!1),f.setFill(m)}if(r){const m=r(d);m&&(_=!1),f.setStroke(m)}if(a){const m=a(d);m&&(_=!1),f.setText(m)}if(o){const m=o(d);m&&(_=!1),f.setImage(m)}return c&&f.setZIndex(c(d)),_?null:f}}function ul(s,t,n){let r;if(t+"fill-pattern-src"in s)r=cb(s,t+"fill-",n);else{if(s[t+"fill-color"]==="none")return o=>null;r=Gd(s,t+"fill-color",n)}if(!r)return null;const a=new Sl;return function(o){const c=r(o);return c===Md?null:(a.setColor(c),a)}}function cl(s,t,n){const r=Xe(s,t+"stroke-width",n),a=Gd(s,t+"stroke-color",n);if(!r&&!a)return null;const o=Zn(s,t+"stroke-line-cap",n),c=Zn(s,t+"stroke-line-join",n),f=mp(s,t+"stroke-line-dash",n),d=Xe(s,t+"stroke-line-dash-offset",n),_=Xe(s,t+"stroke-miter-limit",n),m=new Gu;return function(y){if(a){const p=a(y);if(p===Md)return null;m.setColor(p)}if(r&&m.setWidth(r(y)),o){const p=o(y);if(p!=="butt"&&p!=="round"&&p!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(p)}if(c){const p=c(y);if(p!=="bevel"&&p!=="round"&&p!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(p)}return f&&m.setLineDash(f(y)),d&&m.setLineDashOffset(d(y)),_&&m.setMiterLimit(_(y)),m}}function sb(s,t){const n="text-",r=Zn(s,n+"value",t);if(!r)return null;const a=ul(s,n,t),o=ul(s,n+"background-",t),c=cl(s,n,t),f=cl(s,n+"background-",t),d=Zn(s,n+"font",t),_=Xe(s,n+"max-angle",t),m=Xe(s,n+"offset-x",t),y=Xe(s,n+"offset-y",t),p=Ss(s,n+"overflow",t),v=Zn(s,n+"placement",t),T=Xe(s,n+"repeat",t),S=Pu(s,n+"scale",t),x=Ss(s,n+"rotate-with-view",t),M=Xe(s,n+"rotation",t),b=Zn(s,n+"align",t),L=Zn(s,n+"justify",t),O=Zn(s,n+"baseline",t),C=Ss(s,n+"keep-upright",t),F=mp(s,n+"padding",t),K=Bu(s,n+"declutter-mode"),X=new zd({declutterMode:K});return function(Z){if(X.setText(r(Z)),a&&X.setFill(a(Z)),o&&X.setBackgroundFill(o(Z)),c&&X.setStroke(c(Z)),f&&X.setBackgroundStroke(f(Z)),d&&X.setFont(d(Z)),_&&X.setMaxAngle(_(Z)),m&&X.setOffsetX(m(Z)),y&&X.setOffsetY(y(Z)),p&&X.setOverflow(p(Z)),v){const H=v(Z);if(H!=="point"&&H!=="line")throw new Error("Expected point or line for text-placement");X.setPlacement(H)}if(T&&X.setRepeat(T(Z)),S&&X.setScale(S(Z)),x&&X.setRotateWithView(x(Z)),M&&X.setRotation(M(Z)),b){const H=b(Z);if(H!=="left"&&H!=="center"&&H!=="right"&&H!=="end"&&H!=="start")throw new Error("Expected left, right, center, start, or end for text-align");X.setTextAlign(H)}if(L){const H=L(Z);if(H!=="left"&&H!=="right"&&H!=="center")throw new Error("Expected left, right, or center for text-justify");X.setJustify(H)}if(O){const H=O(Z);if(H!=="bottom"&&H!=="top"&&H!=="middle"&&H!=="alphabetic"&&H!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");X.setTextBaseline(H)}return F&&X.setPadding(F(Z)),C&&X.setKeepUpright(C(Z)),X}}function ab(s,t){return"icon-src"in s?lb(s,t):"shape-points"in s?ob(s,t):"circle-radius"in s?ub(s,t):null}function lb(s,t){const n="icon-",r=n+"src",a=yp(s[r],r),o=Tu(s,n+"anchor",t),c=Pu(s,n+"scale",t),f=Xe(s,n+"opacity",t),d=Tu(s,n+"displacement",t),_=Xe(s,n+"rotation",t),m=Ss(s,n+"rotate-with-view",t),y=Ky(s,n+"anchor-origin"),p=qy(s,n+"anchor-x-units"),v=qy(s,n+"anchor-y-units"),T=gb(s,n+"color"),S=fb(s,n+"cross-origin"),x=db(s,n+"offset"),M=Ky(s,n+"offset-origin"),b=vu(s,n+"width"),L=vu(s,n+"height"),O=hb(s,n+"size"),C=Bu(s,n+"declutter-mode"),F=new Ud({src:a,anchorOrigin:y,anchorXUnits:p,anchorYUnits:v,color:T,crossOrigin:S,offset:x,offsetOrigin:M,height:L,width:b,size:O,declutterMode:C});return function(K){return f&&F.setOpacity(f(K)),d&&F.setDisplacement(d(K)),_&&F.setRotation(_(K)),m&&F.setRotateWithView(m(K)),c&&F.setScale(c(K)),o&&F.setAnchor(o(K)),F}}function ob(s,t){const n="shape-",r=n+"points",a=n+"radius",o=$f(s[r],r),c=$f(s[a],a),f=ul(s,n,t),d=cl(s,n,t),_=Pu(s,n+"scale",t),m=Tu(s,n+"displacement",t),y=Xe(s,n+"rotation",t),p=Ss(s,n+"rotate-with-view",t),v=vu(s,n+"radius2"),T=vu(s,n+"angle"),S=Bu(s,n+"declutter-mode"),x=new Uu({points:o,radius:c,radius2:v,angle:T,declutterMode:S});return function(M){return f&&x.setFill(f(M)),d&&x.setStroke(d(M)),m&&x.setDisplacement(m(M)),y&&x.setRotation(y(M)),p&&x.setRotateWithView(p(M)),_&&x.setScale(_(M)),x}}function ub(s,t){const n="circle-",r=ul(s,n,t),a=cl(s,n,t),o=Xe(s,n+"radius",t),c=Pu(s,n+"scale",t),f=Tu(s,n+"displacement",t),d=Xe(s,n+"rotation",t),_=Ss(s,n+"rotate-with-view",t),m=Bu(s,n+"declutter-mode"),y=new zu({radius:5,declutterMode:m});return function(p){return o&&y.setRadius(o(p)),r&&y.setFill(r(p)),a&&y.setStroke(a(p)),f&&y.setDisplacement(f(p)),d&&y.setRotation(d(p)),_&&y.setRotateWithView(_(p)),c&&y.setScale(c(p)),y}}function Xe(s,t,n){if(!(t in s))return;const r=Jn(s[t],yt,n);return function(a){return $f(r(a),t)}}function Zn(s,t,n){if(!(t in s))return null;const r=Jn(s[t],Oe,n);return function(a){return yp(r(a),t)}}function cb(s,t,n){const r=Zn(s,t+"pattern-src",n),a=Vy(s,t+"pattern-offset",n),o=Vy(s,t+"pattern-size",n),c=Gd(s,t+"color",n);return function(f){return{src:r(f),offset:a&&a(f),size:o&&o(f),color:c&&c(f)}}}function Ss(s,t,n){if(!(t in s))return null;const r=Jn(s[t],be,n);return function(a){const o=r(a);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${t}`);return o}}function Gd(s,t,n){if(!(t in s))return null;const r=Jn(s[t],Qe,n);return function(a){return Ep(r(a),t)}}function mp(s,t,n){if(!(t in s))return null;const r=Jn(s[t],Ii,n);return function(a){return bl(r(a),t)}}function Tu(s,t,n){if(!(t in s))return null;const r=Jn(s[t],Ii,n);return function(a){const o=bl(r(a),t);if(o.length!==2)throw new Error(`Expected two numbers for ${t}`);return o}}function Vy(s,t,n){if(!(t in s))return null;const r=Jn(s[t],Ii,n);return function(a){return pp(r(a),t)}}function Pu(s,t,n){if(!(t in s))return null;const r=Jn(s[t],Ii|yt,n);return function(a){return _b(r(a),t)}}function vu(s,t){const n=s[t];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${t}`);return n}}function hb(s,t){const n=s[t];if(n!==void 0){if(typeof n=="number")return ie(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${t}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return n}}function fb(s,t){const n=s[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);return n}}function Ky(s,t){const n=s[t];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return n}}function qy(s,t){const n=s[t];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return n}}function db(s,t){const n=s[t];if(n!==void 0)return bl(n,t)}function Bu(s,t){const n=s[t];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${t}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return n}}function gb(s,t){const n=s[t];if(n!==void 0)return Ep(n,t)}function bl(s,t){if(!Array.isArray(s))throw new Error(`Expected an array for ${t}`);const n=s.length;for(let r=0;r<n;++r)if(typeof s[r]!="number")throw new Error(`Expected an array of numbers for ${t}`);return s}function yp(s,t){if(typeof s!="string")throw new Error(`Expected a string for ${t}`);return s}function $f(s,t){if(typeof s!="number")throw new Error(`Expected a number for ${t}`);return s}function Ep(s,t){if(typeof s=="string")return s;const n=bl(s,t),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return n}function pp(s,t){const n=bl(s,t);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return n}function _b(s,t){return typeof s=="number"?s:pp(s,t)}const Zy={RENDER_ORDER:"renderOrder"};class mb extends Iu{constructor(t){t=t||{};const n=Object.assign({},t);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Zy.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,n){const r=this.getDeclutter();r in t.declutter||(t.declutter[r]=new aS(9)),this.getRenderer().renderDeclutter(t,n)}setRenderOrder(t){this.set(Zy.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?_p:t;const n=yb(t);this.styleFunction_=t===null?void 0:tb(n),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function yb(s){if(s===void 0)return _p;if(!s)return null;if(typeof s=="function"||s instanceof or)return s;if(!Array.isArray(s))return jy([s]);if(s.length===0)return[];const t=s.length,n=s[0];if(n instanceof or){const a=new Array(t);for(let o=0;o<t;++o){const c=s[o];if(!(c instanceof or))throw new Error("Expected a list of style instances");a[o]=c}return a}if("style"in n){const a=new Array(t);for(let o=0;o<t;++o){const c=s[o];if(!("style"in c))throw new Error("Expected a list of rules with a style property");a[o]=c}return ib(a)}return jy(s)}class Ja extends Ni{constructor(t,n,r,a){super(t),this.inversePixelTransform=n,this.frameState=r,this.context=a}}class Eb extends gl{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,n){Mt()}calculateMatrices2D(t){const n=t.viewState,r=t.coordinateToPixelTransform,a=t.pixelToCoordinateTransform;hr(r,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),yd(a,r)}forEachFeatureAtCoordinate(t,n,r,a,o,c,f,d){let _;const m=n.viewState;function y(O,C,F,K){return o.call(c,C,O?F:null,K)}const p=m.projection,v=gR(t.slice(),p),T=[[0,0]];if(p.canWrapX()&&a){const O=p.getExtent(),C=Yt(O);T.push([-C,0],[C,0])}const S=n.layerStatesArray,x=S.length,M=[],b=[];for(let O=0;O<T.length;O++)for(let C=x-1;C>=0;--C){const F=S[C],K=F.layer;if(K.hasRenderer()&&Cd(F,m)&&f.call(d,K)){const X=K.getRenderer(),Z=K.getSource();if(X&&Z){const H=Z.getWrapX()?v:t,rt=y.bind(null,F.managed);b[0]=H[0]+T[O][0],b[1]=H[1]+T[O][1],_=X.forEachFeatureAtCoordinate(b,n,r,rt,M)}if(_)return _}}if(M.length===0)return;const L=1/M.length;return M.forEach((O,C)=>O.distanceSq+=C*L),M.sort((O,C)=>O.distanceSq-C.distanceSq),M.some(O=>_=O.callback(O.feature,O.layer,O.geometry)),_}hasFeatureAtCoordinate(t,n,r,a,o,c){return this.forEachFeatureAtCoordinate(t,n,r,a,uu,this,o,c)!==void 0}getMap(){return this.map_}renderFrame(t){Mt()}scheduleExpireIconCache(t){fn.canExpireCache()&&t.postRenderFunctions.push(pb)}}function pb(s,t){fn.expire()}class Tb extends Eb{constructor(t){super(t),this.fontChangeListenerKey_=Ut(JS,el.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=vl+" ol-layers";const r=t.getViewport();r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,n){const r=this.getMap();if(r.hasListener(t)){const a=new Ja(t,void 0,n);r.dispatchEvent(a)}}disposeInternal(){kt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Se.PRECOMPOSE,t);const n=t.layerStatesArray.sort((f,d)=>f.zIndex-d.zIndex);n.some(f=>f.layer instanceof mb&&f.layer.getDeclutter())&&(t.declutter={});const a=t.viewState;this.children_.length=0;const o=[];let c=null;for(let f=0,d=n.length;f<d;++f){const _=n[f];t.layerIndex=f;const m=_.layer,y=m.getSourceState();if(!Cd(_,a)||y!="ready"&&y!="undefined"){m.unrender();continue}const p=m.render(t,c);p&&(p!==c&&(this.children_.push(p),c=p),o.push(_))}this.declutter(t,o),Ix(this.element_,this.children_),this.dispatchRenderEvent(Se.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,n){if(t.declutter){for(let r=n.length-1;r>=0;--r){const a=n[r],o=a.layer;o.getDeclutter()&&o.renderDeclutter(t,a)}n.forEach(r=>r.layer.renderDeferred(t))}}}function Tp(s){if(s instanceof Iu){s.setMapInternal(null);return}s instanceof Gs&&s.getLayers().forEach(Tp)}function vp(s,t){if(s instanceof Iu){s.setMapInternal(t);return}if(s instanceof Gs){const n=s.getLayers().getArray();for(let r=0,a=n.length;r<a;++r)vp(n[r],t)}}let vb=class extends Wn{constructor(t){super(),t=t||{},this.on,this.once,this.un;const n=Rb(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:qv,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=En(),this.pixelToCoordinateTransform_=En(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||ip(),this.interactions=n.interactions||rS({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new $v(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(xe.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(xe.VIEW,this.handleViewChanged_),this.addChangeListener(xe.SIZE,this.handleSizeChanged_),this.addChangeListener(xe.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;t.view&&!(t.view instanceof Cn)&&t.view.then(function(a){r.setView(new Cn(a))}),this.controls.addEventListener(hn.ADD,a=>{a.element.setMap(this)}),this.controls.addEventListener(hn.REMOVE,a=>{a.element.setMap(null)}),this.interactions.addEventListener(hn.ADD,a=>{a.element.setMap(this)}),this.interactions.addEventListener(hn.REMOVE,a=>{a.element.setMap(null)}),this.overlays_.addEventListener(hn.ADD,a=>{this.addOverlayInternal_(a.element)}),this.overlays_.addEventListener(hn.REMOVE,a=>{const o=a.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],a.element.setMap(null)}),this.controls.forEach(a=>{a.setMap(this)}),this.interactions.forEach(a=>{a.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){vp(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,n,r){if(!this.frameState_||!this.renderer_)return;const a=this.getCoordinateFromPixelInternal(t);r=r!==void 0?r:{};const o=r.hitTolerance!==void 0?r.hitTolerance:0,c=r.layerFilter!==void 0?r.layerFilter:uu,f=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(a,this.frameState_,o,f,n,null,c,null)}getFeaturesAtPixel(t,n){const r=[];return this.forEachFeatureAtPixel(t,function(a){r.push(a)},n),r}getAllLayers(){const t=[];function n(r){r.forEach(function(a){a instanceof Gs?n(a.getLayers()):t.push(a)})}return n(this.getLayers()),t}hasFeatureAtPixel(t,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};const a=n.layerFilter!==void 0?n.layerFilter:uu,o=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,c,a,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const r=this.viewport_.getBoundingClientRect(),a=this.getSize(),o=r.width/a[0],c=r.height/a[1],f="changedTouches"in t?t.changedTouches[0]:t;return[(f.clientX-r.left)/o,(f.clientY-r.top)/c]}getTarget(){return this.get(xe.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Eu(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const n=this.frameState_;return n?De(n.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(xe.LAYERGROUP)}setLayers(t){const n=this.getLayerGroup();if(t instanceof kn){n.setLayers(t);return}const r=n.getLayers();r.clear(),r.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=t.length;n<r;++n){const a=t[n];if(!a.visible)continue;const o=a.layer.getRenderer();if(o&&!o.ready)return!0;const c=a.layer.getSource();if(c&&c.loading)return!0}return!1}getPixelFromCoordinate(t){const n=qn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(t){const n=this.frameState_;return n?De(n.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(xe.SIZE)}getView(){return this.get(xe.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,n,r,a){return Qv(this.frameState_,t,n,r,a)}handleBrowserEvent(t,n){n=n||t.type;const r=new Ci(n,this,t);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(t){if(!this.frameState_)return;const n=t.originalEvent,r=n.type;if(r===Ff.POINTERDOWN||r===_t.WHEEL||r===_t.KEYDOWN){const a=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():a,c=n.target,f=o instanceof ShadowRoot?o.host===c?o.host.ownerDocument:o:o===a?a.documentElement:o;if(this.overlayContainerStopEvent_.contains(c)||!f.contains(c))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const a=this.getInteractions().getArray().slice();for(let o=a.length-1;o>=0;o--){const c=a[o];if(c.getMap()!==this||!c.getActive()||!this.getTargetElement())continue;if(!c.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let a=this.maxTilesLoading_,o=a;if(t){const c=t.viewHints;if(c[cn.ANIMATING]||c[cn.INTERACTING]){const f=Date.now()-t.time>8;a=f?0:8,o=f?0:2}}n.getTilesLoading()<a&&(n.reprioritize(),n.loadMoreTiles(a,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Se.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Se.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new cs(Mi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new cs(Mi.LOADSTART,this,t))));const r=this.postRenderFunctions_;if(t)for(let a=0,o=r.length;a<o;++a)r[a](this,t);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,a=this.targetChangeHandlerKeys_.length;r<a;++r)kt(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(_t.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(_t.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const t=this.getTarget(),n=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Tb(this)),this.mapBrowserEventHandler_=new Zv(this,this.moveTolerance_);for(const o in Jt)this.mapBrowserEventHandler_.addEventListener(Jt[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(_t.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(_t.WHEEL,this.boundHandleBrowserEvent_,OE?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const o=n.getRootNode();r=o instanceof ShadowRoot?o.host:n}this.targetChangeHandlerKeys_=[Ut(r,_t.KEYDOWN,this.handleBrowserEvent,this),Ut(r,_t.KEYPRESS,this.handleBrowserEvent,this)];const a=n.getRootNode();a instanceof ShadowRoot&&this.resizeObserver_.observe(a.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(kt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(kt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Ut(t,el.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Ut(t,_t.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(kt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Di("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Ut(t,el.PROPERTYCHANGE,this.render,this),Ut(t,_t.CHANGE,this.render,this),Ut(t,"addlayer",this.handleLayerAdd_,this),Ut(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const t=this.frameState_.layerStatesArray;for(let n=0,r=t.length;n<r;++n){const a=t[n].layer;a.hasRenderer()&&a.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Tp(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const n=this.getSize(),r=this.getView(),a=this.frameState_;let o=null;if(n!==void 0&&Ny(n)&&r&&r.isDef()){const c=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),f=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:jf(f.center,f.resolution,f.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:f,viewHints:c,wantedTiles:{},mapId:zt(this),renderTargets:{}},f.nextCenter&&f.nextResolution){const d=isNaN(f.nextRotation)?f.rotation:f.nextRotation;o.nextExtent=jf(f.nextCenter,f.nextResolution,d,n)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),a&&(!this.previousExtent_||!Us(this.previousExtent_)&&!Hf(o.extent,this.previousExtent_))&&(this.dispatchEvent(new cs(Mi.MOVESTART,this,a)),this.previousExtent_=El(this.previousExtent_)),this.previousExtent_&&!o.viewHints[cn.ANIMATING]&&!o.viewHints[cn.INTERACTING]&&!Hf(o.extent,this.previousExtent_)&&(this.dispatchEvent(new cs(Mi.MOVEEND,this,o)),iR(o.extent,this.previousExtent_))),this.dispatchEvent(new cs(Mi.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Mi.LOADSTART)||this.hasListener(Mi.LOADEND)||this.hasListener(Se.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new Di("removelayer",n)),this.set(xe.LAYERGROUP,t)}setSize(t){this.set(xe.SIZE,t)}setTarget(t){this.set(xe.TARGET,t)}setView(t){if(!t||t instanceof Cn){this.set(xe.VIEW,t);return}this.set(xe.VIEW,new Cn);const n=this;t.then(function(r){n.setView(new Cn(r))})}updateSize(){const t=this.getTargetElement();let n;if(t){const a=getComputedStyle(t),o=t.offsetWidth-parseFloat(a.borderLeftWidth)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderRightWidth),c=t.offsetHeight-parseFloat(a.borderTopWidth)-parseFloat(a.paddingTop)-parseFloat(a.paddingBottom)-parseFloat(a.borderBottomWidth);!isNaN(o)&&!isNaN(c)&&(n=[Math.max(0,o),Math.max(0,c)],!Ny(n)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&BE("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!Su(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(t){const n=this.getView();n&&n.setViewportSize(t)}};function Rb(s){let t=null;s.keyboardEventTarget!==void 0&&(t=typeof s.keyboardEventTarget=="string"?document.getElementById(s.keyboardEventTarget):s.keyboardEventTarget);const n={},r=s.layers&&typeof s.layers.getLayers=="function"?s.layers:new Gs({layers:s.layers});n[xe.LAYERGROUP]=r,n[xe.TARGET]=s.target,n[xe.VIEW]=s.view instanceof Cn?s.view:new Cn;let a;s.controls!==void 0&&(Array.isArray(s.controls)?a=new kn(s.controls.slice()):(jt(typeof s.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),a=s.controls));let o;s.interactions!==void 0&&(Array.isArray(s.interactions)?o=new kn(s.interactions.slice()):(jt(typeof s.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=s.interactions));let c;return s.overlays!==void 0?Array.isArray(s.overlays)?c=new kn(s.overlays.slice()):(jt(typeof s.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),c=s.overlays):c=new kn,{controls:a,interactions:o,keyboardEventTarget:t,overlays:c,values:n}}function Ps(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Rp(s,t){return s[0]=t[0],s[1]=t[1],s[4]=t[2],s[5]=t[3],s[12]=t[4],s[13]=t[5],s}function Qf(s,t,n,r,a,o,c){c=c??Ps();const f=1/(s-t),d=1/(n-r),_=1/(a-o);return c[0]=-2*f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*d,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*_,c[11]=0,c[12]=(s+t)*f,c[13]=(r+n)*d,c[14]=(o+a)*_,c[15]=1,c}function ky(s,t,n,r,a){return a=a??Ps(),a[0]=s[0]*t,a[1]=s[1]*t,a[2]=s[2]*t,a[3]=s[3]*t,a[4]=s[4]*n,a[5]=s[5]*n,a[6]=s[6]*n,a[7]=s[7]*n,a[8]=s[8]*r,a[9]=s[9]*r,a[10]=s[10]*r,a[11]=s[11]*r,a[12]=s[12],a[13]=s[13],a[14]=s[14],a[15]=s[15],a}function xb(s,t,n,r,a){a=a??Ps();let o,c,f,d,_,m,y,p,v,T,S,x;return s===a?(a[12]=s[0]*t+s[4]*n+s[8]*r+s[12],a[13]=s[1]*t+s[5]*n+s[9]*r+s[13],a[14]=s[2]*t+s[6]*n+s[10]*r+s[14],a[15]=s[3]*t+s[7]*n+s[11]*r+s[15]):(o=s[0],c=s[1],f=s[2],d=s[3],_=s[4],m=s[5],y=s[6],p=s[7],v=s[8],T=s[9],S=s[10],x=s[11],a[0]=o,a[1]=c,a[2]=f,a[3]=d,a[4]=_,a[5]=m,a[6]=y,a[7]=p,a[8]=v,a[9]=T,a[10]=S,a[11]=x,a[12]=o*t+_*n+v*r+s[12],a[13]=c*t+m*n+T*r+s[13],a[14]=f*t+y*n+S*r+s[14],a[15]=d*t+p*n+x*r+s[15]),a}function Sb(s,t,n,r){return r=r??Ps(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=s,r[13]=t,r[14]=n,r[15]=1,r}const Pd=34962,Bd=34963,Fd=35044,bb=5121,Ab=5123,wb=5125,xp=5126,$y=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Cb(s,t){t=Object.assign({preserveDrawingBuffer:!0,antialias:!Vv},t);const n=$y.length;for(let r=0;r<n;++r)try{const a=s.getContext($y[r],t);if(a)return a}catch{}return null}const Mb={STATIC_DRAW:Fd};class Sp{constructor(t,n){this.array_=null,this.type_=t,jt(t===Pd||t===Bd,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:Mb.STATIC_DRAW}ofSize(t){return this.array_=new(Qo(this.type_))(t),this}fromArray(t){return this.array_=Qo(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(Qo(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const n=Qo(this.type_);if(!(t instanceof n))throw new Error(`Expected ${n}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function Qo(s){switch(s){case Pd:return Float32Array;case Bd:return Uint32Array;default:return Float32Array}}const Wo={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},Db=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Ob=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class Qy{constructor(t){this.gl_=t.webGlContext;const n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,t.vertexShader||Db),n.compileShader(r);const a=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,t.fragmentShader||Ob),n.compileShader(a),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,a),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(o),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(c=>{this.uniforms_.push({value:t.uniforms[c],location:n.getUniformLocation(this.renderTargetProgram_,c)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const a=0,o=n.RGBA,c=0,f=n.RGBA,d=n.UNSIGNED_BYTE,_=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,a,o,r[0],r[1],c,f,d,_),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(t,n,r,a){const o=this.getGL(),c=t.size;if(o.bindFramebuffer(o.FRAMEBUFFER,n?n.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!n){const d=zt(o.canvas);if(!t.renderTargets[d]){const _=o.getContextAttributes();_&&_.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),t.renderTargets[d]=!0}}o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,c[0],c[1]),o.uniform1i(this.renderTargetTextureLocation_,0);const f=t.layerStatesArray[t.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,f),this.applyUniforms(t),r&&r(o,t),o.drawArrays(o.TRIANGLES,0,6),a&&a(o,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const n=this.getGL();let r,a=1;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${a}`]),n.bindTexture(n.TEXTURE_2D,o.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(o.location,a++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(o.location,r[0],r[1]);return;case 3:n.uniform3f(o.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(o.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(o.location,r)})}}const Ai={TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},$a={UNSIGNED_BYTE:bb,UNSIGNED_SHORT:Ab,UNSIGNED_INT:wb,FLOAT:xp},Ru={};function Wy(s){return"shared/"+s}let Jy=0;function Lb(){const s="unique/"+Jy;return Jy+=1,s}function Ib(s){let t=Ru[s];if(!t){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",t={users:0,context:Cb(n)},Ru[s]=t}return t.users+=1,t.context}function Nb(s){const t=Ru[s];if(!t||(t.users-=1,t.users>0))return;const n=t.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const a=n.canvas;a.width=1,a.height=1,delete Ru[s]}class Ub extends gl{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?Wy(t.canvasCacheKey):Lb(),this.gl_=Ib(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(Wo.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(Wo.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=En(),this.offsetScaleMatrix_=En(),this.tmpMat4_=Ps(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(r=>new Qy({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new Qy({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const n in t)this.uniforms_.push({name:n,value:t[n]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===Wy(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const n=this.gl_.getExtension(t);return this.extensionCache_[t]=n,n}bindBuffer(t){const n=this.gl_,r=zt(t);let a=this.bufferCache_[r];if(!a){const o=n.createBuffer();a={buffer:t,webGlBuffer:o},this.bufferCache_[r]=a}n.bindBuffer(t.getType(),a.webGlBuffer)}flushBufferData(t){const n=this.gl_;this.bindBuffer(t),n.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const n=zt(t);delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(Wo.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(Wo.RESTORED,this.boundHandleWebGLContextRestored_),Nb(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,n,r){const a=this.gl_,o=this.getCanvas(),c=t.size,f=t.pixelRatio;(o.width!==c[0]*f||o.height!==c[1]*f)&&(o.width=c[0]*f,o.height=c[1]*f,o.style.width=c[0]+"px",o.style.height=c[1]+"px");for(let d=this.postProcessPasses_.length-1;d>=0;d--)this.postProcessPasses_[d].init(t);a.bindTexture(a.TEXTURE_2D,null),a.clearColor(0,0,0,0),a.depthRange(0,1),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.enable(a.BLEND),a.blendFunc(a.ONE,n?a.ZERO:a.ONE_MINUS_SRC_ALPHA),r?(a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL)):a.disable(a.DEPTH_TEST)}bindFrameBuffer(t,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,t),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const t=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0)}bindTexture(t,n,r){const a=this.gl_;a.activeTexture(a.TEXTURE0+n),a.bindTexture(a.TEXTURE_2D,t),a.uniform1i(this.getUniformLocation(r),n)}bindAttribute(t,n,r){const a=this.getGL();this.bindBuffer(t);const o=this.getAttributeLocation(n);a.enableVertexAttribArray(o),a.vertexAttribPointer(o,r,a.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,n,r,a){const o=this.gl_,c=n.getSize();o.bindFramebuffer(o.FRAMEBUFFER,n.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,n.getDepthbuffer()),o.viewport(0,0,c[0],c[1]),o.bindTexture(o.TEXTURE_2D,n.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),a?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(t,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const a=r.UNSIGNED_INT,o=4,c=n-t,f=t*o;r.drawElements(r.TRIANGLES,c,a,f)}finalizeDraw(t,n,r){for(let a=0,o=this.postProcessPasses_.length;a<o;a++)a===o-1?this.postProcessPasses_[a].apply(t,null,n,r):this.postProcessPasses_[a].apply(t,this.postProcessPasses_[a+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const n=t.size,r=t.viewState.rotation,a=t.pixelRatio;this.setUniformFloatValue(Ai.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ai.ZOOM,t.viewState.zoom),this.setUniformFloatValue(Ai.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(Ai.PIXEL_RATIO,a),this.setUniformFloatVec2(Ai.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(Ai.ROTATION,r)}applyHitDetectionUniform(t){const n=this.getUniformLocation(Ai.HIT_DETECTION);this.getGL().uniform1i(n,t?1:0),t&&this.setUniformFloatValue(Ai.PIXEL_RATIO,.5)}applyUniforms(t){const n=this.gl_;let r,a=0;this.uniforms_.forEach(o=>{if(r=typeof o.value=="function"?o.value(t):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!o.texture?(o.prevValue=void 0,o.texture=r):o.texture||(o.prevValue=void 0,o.texture=n.createTexture()),this.bindTexture(o.texture,a,o.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const c=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&c&&o.prevValue!==r&&(o.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),a++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,Rp(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(o.name),r)})}useProgram(t,n){this.disableAllAttributes_(),this.gl_.useProgram(t),this.currentProgram_=t,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(t,n){const r=this.gl_,a=r.createShader(n);return r.shaderSource(a,t),r.compileShader(a),a}getProgram(t,n){const r=this.gl_,a=this.compileShader(t,r.FRAGMENT_SHADER),o=this.compileShader(n,r.VERTEX_SHADER),c=r.createProgram();if(r.attachShader(c,a),r.attachShader(c,o),r.linkProgram(c),!r.getShaderParameter(a,r.COMPILE_STATUS)){const f=`Fragment shader compilation failed: ${r.getShaderInfoLog(a)}`;throw new Error(f)}if(r.deleteShader(a),!r.getShaderParameter(o,r.COMPILE_STATUS)){const f=`Vertex shader compilation failed: ${r.getShaderInfoLog(o)}`;throw new Error(f)}if(r.deleteShader(o),!r.getProgramParameter(c,r.LINK_STATUS)){const f=`GL program linking failed: ${r.getProgramInfoLog(c)}`;throw new Error(f)}return c}getUniformLocation(t){const n=zt(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][t]===void 0&&(this.uniformLocationsByProgram_[n][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[n][t]}getAttributeLocation(t){const n=zt(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][t]===void 0&&(this.attribLocationsByProgram_[n][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[n][t]}makeProjectionTransform(t,n){const r=t.size,a=t.viewState.rotation,o=t.viewState.resolution,c=t.viewState.center;return hr(n,0,0,2/(o*r[0]),2/(o*r[1]),-a,-c[0],-c[1]),n}setUniformFloatValue(t,n){this.gl_.uniform1f(this.getUniformLocation(t),n)}setUniformFloatVec2(t,n){this.gl_.uniform2fv(this.getUniformLocation(t),n)}setUniformFloatVec4(t,n){this.gl_.uniform4fv(this.getUniformLocation(t),n)}setUniformMatrixValue(t,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,n)}disableAllAttributes_(){for(let t=0;t<this.maxAttributeCount_;t++)this.gl_.disableVertexAttribArray(t)}enableAttributeArray_(t,n,r,a,o){const c=this.getAttributeLocation(t);c<0||(this.gl_.enableVertexAttribArray(c),this.gl_.vertexAttribPointer(c,n,r,!1,a,o))}enableAttributes(t){const n=zb(t);let r=0;for(let a=0;a<t.length;a++){const o=t[a];this.enableAttributeArray_(o.name,o.size,o.type||xp,n,r),r+=o.size*bp(o.type)}}handleWebGLContextLost(t){_l(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,n,r,a){const o=this.gl_;r=r||o.createTexture();const c=a?o.NEAREST:o.LINEAR;o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,c),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,c),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);const f=0,d=o.RGBA,_=0,m=o.RGBA,y=o.UNSIGNED_BYTE;return n instanceof Uint8Array?o.texImage2D(o.TEXTURE_2D,f,d,t[0],t[1],_,m,y,n):n?o.texImage2D(o.TEXTURE_2D,f,d,m,y,n):o.texImage2D(o.TEXTURE_2D,f,d,t[0],t[1],_,m,y,null),r}}function zb(s){let t=0;for(let n=0;n<s.length;n++){const r=s[n];t+=r.size*bp(r.type)}return t}function bp(s){switch(s){case $a.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case $a.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case $a.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case $a.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class Xd extends ml{constructor(t,n,r){super(),r=r||{},this.tileCoord=t,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(_t.CHANGE)}release(){this.setState(tt.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==tt.EMPTY){if(this.state!==tt.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){Mt()}getAlpha(t,n){if(!this.transition_)return 1;let r=this.transitionStarts_[t];if(!r)r=n,this.transitionStarts_[t]=r;else if(r===-1)return 1;const a=n-r+1e3/60;return a>=this.transition_?1:PE(a/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Ds(s){return s instanceof Image||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageBitmap?s:null}function Wf(s){return s instanceof Uint8Array||s instanceof Uint8ClampedArray||s instanceof Float32Array||s instanceof DataView?s:null}const Gb=new Error("disposed");let ss=null;function Pb(s){ss||(ss=Ee(s.width,s.height,void 0,{willReadFrequently:!0}));const t=ss.canvas,n=s.width;t.width!==n&&(t.width=n);const r=s.height;return t.height!==r&&(t.height=r),ss.clearRect(0,0,n,r),ss.drawImage(s,0,0),ss.getImageData(0,0,n,r).data}const Bb=[256,256];class hl extends Xd{constructor(t){const n=tt.IDLE;super(t.tileCoord,n,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=Ds(this.data_);return t?[t.width,t.height]:Bb}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==tt.IDLE&&this.state!==tt.ERROR)return;this.state=tt.LOADING,this.changed();const t=this;this.loader_().then(function(n){t.data_=n,t.state=tt.LOADED,t.changed()}).catch(function(n){t.error_=n,t.state=tt.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Gb),this.controller_=null),super.disposeInternal()}}class Fu extends Xd{constructor(t,n,r,a,o,c){super(t,n,c),this.crossOrigin_=a,this.src_=r,this.key=r,this.image_=new Image,a!==null&&(this.image_.crossOrigin=a),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=tt.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=tt.ERROR,this.unlistenImage_(),this.image_=Fb(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=tt.LOADED:this.state=tt.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==tt.ERROR&&(this.state=tt.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==tt.IDLE&&(this.state=tt.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=VS(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function Fb(){const s=Ee(1,1);return s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1),s.canvas}let wf;const bs=[];function tE(s,t,n,r,a){s.beginPath(),s.moveTo(0,0),s.lineTo(t,n),s.lineTo(r,a),s.closePath(),s.save(),s.clip(),s.fillRect(0,0,Math.max(t,r)+1,Math.max(n,a)),s.restore()}function Cf(s,t){return Math.abs(s[t*4]-210)>2||Math.abs(s[t*4+3]-.75*255)>2}function Xb(){if(wf===void 0){const s=Ee(6,6,bs);s.globalCompositeOperation="lighter",s.fillStyle="rgba(210, 0, 0, 0.75)",tE(s,4,5,4,0),tE(s,4,5,0,5);const t=s.getImageData(0,0,3,3).data;wf=Cf(t,0)||Cf(t,4)||Cf(t,8),bd(s),bs.push(s.canvas)}return wf}function eE(s,t,n,r){const a=_d(n,t,s);let o=mu(t,r,n);const c=t.getMetersPerUnit();c!==void 0&&(o*=c);const f=s.getMetersPerUnit();f!==void 0&&(o/=f);const d=s.getExtent();if(!d||nl(d,a)){const _=mu(s,o,a)/o;isFinite(_)&&_>0&&(o/=_)}return o}function Ap(s,t,n,r){const a=cr(n);let o=eE(s,t,a,r);return(!isFinite(o)||o<=0)&&zE(n,function(c){return o=eE(s,t,c,r),isFinite(o)&&o>0}),o}function Yb(s,t,n,r,a,o,c,f,d,_,m,y,p,v){const T=Ee(Math.round(n*s),Math.round(n*t),bs);if(y||(T.imageSmoothingEnabled=!1),d.length===0)return T.canvas;T.scale(n,n);function S(C){return Math.round(C*n)/n}T.globalCompositeOperation="lighter";const x=Ui();d.forEach(function(C,F,K){NE(x,C.extent)});let M;const b=n/r,L=(y?1:1+Math.pow(2,-24))/b;M=Ee(Math.round(Yt(x)*b),Math.round(Le(x)*b),bs),y||(M.imageSmoothingEnabled=!1),d.forEach(function(C,F,K){if(C.image.width>0&&C.image.height>0){if(C.clipExtent){M.save();const J=(C.clipExtent[0]-x[0])*b,st=-(C.clipExtent[3]-x[3])*b,dt=Yt(C.clipExtent)*b,nt=Le(C.clipExtent)*b;M.rect(y?J:Math.round(J),y?st:Math.round(st),y?dt:Math.round(J+dt)-Math.round(J),y?nt:Math.round(st+nt)-Math.round(st)),M.clip()}const X=(C.extent[0]-x[0])*b,Z=-(C.extent[3]-x[3])*b,H=Yt(C.extent)*b,rt=Le(C.extent)*b;M.drawImage(C.image,_,_,C.image.width-2*_,C.image.height-2*_,y?X:Math.round(X),y?Z:Math.round(Z),y?H:Math.round(X+H)-Math.round(X),y?rt:Math.round(Z+rt)-Math.round(Z)),C.clipExtent&&M.restore()}});const O=Qn(c);return f.getTriangles().forEach(function(C,F,K){const X=C.source,Z=C.target;let H=X[0][0],rt=X[0][1],J=X[1][0],st=X[1][1],dt=X[2][0],nt=X[2][1];const P=S((Z[0][0]-O[0])/o),k=S(-(Z[0][1]-O[1])/o),W=S((Z[1][0]-O[0])/o),it=S(-(Z[1][1]-O[1])/o),A=S((Z[2][0]-O[0])/o),Y=S(-(Z[2][1]-O[1])/o),Q=H,$=rt;H=0,rt=0,J-=Q,st-=$,dt-=Q,nt-=$;const et=[[J,st,0,0,W-P],[dt,nt,0,0,A-P],[0,0,J,st,it-k],[0,0,dt,nt,Y-k]],ut=Jv(et);if(!ut)return;if(T.save(),T.beginPath(),Xb()||!y){T.moveTo(W,it);const vt=4,At=P-W,$t=k-it;for(let te=0;te<vt;te++)T.lineTo(W+S((te+1)*At/vt),it+S(te*$t/(vt-1))),te!=vt-1&&T.lineTo(W+S((te+1)*At/vt),it+S((te+1)*$t/(vt-1)));T.lineTo(A,Y)}else T.moveTo(W,it),T.lineTo(P,k),T.lineTo(A,Y);T.clip(),T.transform(ut[0],ut[2],ut[1],ut[3],P,k),T.translate(x[0]-Q,x[3]-$);let at;if(M)at=M.canvas,T.scale(L,-L);else{const vt=d[0],At=vt.extent;at=vt.image,T.scale(Yt(At)/at.width,-Le(At)/at.height)}T.drawImage(at,0,0),T.restore()}),M&&(bd(M),bs.push(M.canvas)),m&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,f.getTriangles().forEach(function(C,F,K){const X=C.target,Z=(X[0][0]-O[0])/o,H=-(X[0][1]-O[1])/o,rt=(X[1][0]-O[0])/o,J=-(X[1][1]-O[1])/o,st=(X[2][0]-O[0])/o,dt=-(X[2][1]-O[1])/o;T.beginPath(),T.moveTo(rt,J),T.lineTo(Z,H),T.lineTo(st,dt),T.closePath(),T.stroke()}),T.restore()),T.canvas}const Hb=10,nE=.25;class wp{constructor(t,n,r,a,o,c,f){this.sourceProj_=t,this.targetProj_=n;let d={};const _=f?KE(L=>De(f,_d(L,this.targetProj_,this.sourceProj_))):yu(this.targetProj_,this.sourceProj_);this.transformInv_=function(L){const O=L[0]+"/"+L[1];return d[O]||(d[O]=_(L)),d[O]},this.maxSourceExtent_=a,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!a&&!!this.sourceProj_.getExtent()&&Yt(a)>=Yt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Yt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Yt(this.targetProj_.getExtent()):null;const m=Qn(r),y=Cu(r),p=wu(r),v=Au(r),T=this.transformInv_(m),S=this.transformInv_(y),x=this.transformInv_(p),M=this.transformInv_(v),b=Hb+(c?Math.max(0,Math.ceil(Math.log2(il(r)/(c*c*256*256)))):0);if(this.addQuad_(m,y,p,v,T,S,x,M,b),this.wrapsXInSource_){let L=1/0;this.triangles_.forEach(function(O,C,F){L=Math.min(L,O.source[0][0],O.source[1][0],O.source[2][0])}),this.triangles_.forEach(O=>{if(Math.max(O.source[0][0],O.source[1][0],O.source[2][0])-L>this.sourceWorldWidth_/2){const C=[[O.source[0][0],O.source[0][1]],[O.source[1][0],O.source[1][1]],[O.source[2][0],O.source[2][1]]];C[0][0]-L>this.sourceWorldWidth_/2&&(C[0][0]-=this.sourceWorldWidth_),C[1][0]-L>this.sourceWorldWidth_/2&&(C[1][0]-=this.sourceWorldWidth_),C[2][0]-L>this.sourceWorldWidth_/2&&(C[2][0]-=this.sourceWorldWidth_);const F=Math.min(C[0][0],C[1][0],C[2][0]);Math.max(C[0][0],C[1][0],C[2][0])-F<this.sourceWorldWidth_/2&&(O.source=C)}})}d={}}addTriangle_(t,n,r,a,o,c){this.triangles_.push({source:[a,o,c],target:[t,n,r]})}addQuad_(t,n,r,a,o,c,f,d,_){const m=Yf([o,c,f,d]),y=this.sourceWorldWidth_?Yt(m)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&y>.5&&y<1;let T=!1;if(_>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=Yf([t,n,r,a]);T=Yt(x)/this.targetWorldWidth_>nE||T}!v&&this.sourceProj_.isGlobal()&&y&&(T=y>nE||T)}if(!T&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!pl(m,this.maxSourceExtent_))return;let S=0;if(!T&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(f[0])||!isFinite(f[1])||!isFinite(d[0])||!isFinite(d[1]))){if(_>0)T=!0;else if(S=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(c[0])||!isFinite(c[1])?4:0)+(!isFinite(f[0])||!isFinite(f[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),S!=1&&S!=2&&S!=4&&S!=8)return}if(_>0){if(!T){const x=[(t[0]+r[0])/2,(t[1]+r[1])/2],M=this.transformInv_(x);let b;v?b=(vs(o[0],p)+vs(f[0],p))/2-vs(M[0],p):b=(o[0]+f[0])/2-M[0];const L=(o[1]+f[1])/2-M[1];T=b*b+L*L>this.errorThresholdSquared_}if(T){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){const x=[(n[0]+r[0])/2,(n[1]+r[1])/2],M=this.transformInv_(x),b=[(a[0]+t[0])/2,(a[1]+t[1])/2],L=this.transformInv_(b);this.addQuad_(t,n,x,b,o,c,M,L,_-1),this.addQuad_(b,x,r,a,L,M,f,d,_-1)}else{const x=[(t[0]+n[0])/2,(t[1]+n[1])/2],M=this.transformInv_(x),b=[(r[0]+a[0])/2,(r[1]+a[1])/2],L=this.transformInv_(b);this.addQuad_(t,x,b,a,o,M,L,d,_-1),this.addQuad_(x,n,r,b,M,c,f,L,_-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(S&11)==0&&this.addTriangle_(t,r,a,o,f,d),(S&14)==0&&this.addTriangle_(t,r,n,o,f,c),S&&((S&13)==0&&this.addTriangle_(n,a,t,c,d,o),(S&7)==0&&this.addTriangle_(n,a,r,c,d,f))}calculateSourceExtent(){const t=Ui();return this.triangles_.forEach(function(n,r,a){const o=n.source;lu(t,o[0]),lu(t,o[1]),lu(t,o[2])}),t}getTriangles(){return this.triangles_}}const Cp=.5;class Yd extends Xd{constructor(t,n,r,a,o,c,f,d,_,m,y,p){super(o,tt.IDLE,p),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=f,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=a,this.wrappedTileCoord_=c||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const v=a.getTileCoordExtent(this.wrappedTileCoord_),T=this.targetTileGrid_.getExtent();let S=this.sourceTileGrid_.getExtent();const x=T?Ie(v,T):v;if(il(x)===0){this.state=tt.EMPTY;return}const M=t.getExtent();M&&(S?S=Ie(S,M):S=M);const b=a.getResolution(this.wrappedTileCoord_[0]),L=Ap(t,r,x,b);if(!isFinite(L)||L<=0){this.state=tt.EMPTY;return}const O=m!==void 0?m:Cp;if(this.triangulation_=new wp(t,r,x,S,L*O,b),this.triangulation_.getTriangles().length===0){this.state=tt.EMPTY;return}this.sourceZ_=n.getZForResolution(L);let C=this.triangulation_.calculateSourceExtent();if(S&&(t.canWrapX()?(C[1]=qt(C[1],S[1],S[3]),C[3]=qt(C[3],S[1],S[3])):C=Ie(C,S)),!il(C))this.state=tt.EMPTY;else{let F=0,K=0;t.canWrapX()&&(F=Yt(M),K=Math.floor((C[0]-M[0])/F)),GE(C.slice(),t).forEach(Z=>{const H=n.getTileRangeForExtentAndZ(Z,this.sourceZ_);for(let rt=H.minX;rt<=H.maxX;rt++)for(let J=H.minY;J<=H.maxY;J++){const st=_(this.sourceZ_,rt,J,f);if(st){const dt=K*F;this.sourceTiles_.push({tile:st,offset:dt})}}++K}),this.sourceTiles_.length===0&&(this.state=tt.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(n=>{const r=n.tile;if(r&&r.getState()==tt.LOADED){const a=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);a[0]+=n.offset,a[2]+=n.offset;const o=this.clipExtent_?.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),t.push({extent:a,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=tt.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),a=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],c=this.targetTileGrid_.getResolution(n),f=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Yb(a,o,this.pixelRatio_,f,this.sourceTileGrid_.getExtent(),c,d,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=tt.LOADED}this.changed()}load(){if(this.state==tt.IDLE){this.state=tt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==tt.IDLE||r==tt.LOADING){t++;const a=Ut(n,_t.CHANGE,o=>{const c=n.getState();(c==tt.LOADED||c==tt.ERROR||c==tt.EMPTY)&&(kt(a),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(a)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,a){n.getState()==tt.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(kt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(bd(this.canvas_.getContext("2d")),bs.push(this.canvas_),this.canvas_=null),super.release()}}class jb extends ml{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(_t.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===tt.LOADED,this.loaded)this.uploadTile();else{if(t instanceof Fu){const n=t.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}t.addEventListener(_t.CHANGE,this.handleTileChange_)}}uploadTile(){Mt()}setReady(){this.ready=!0,this.dispatchEvent(_t.CHANGE)}handleTileChange_(){this.tile.getState()===tt.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(_t.CHANGE,this.handleTileChange_)}}function Mp(s,t,n){const r=n?s.LINEAR:s.NEAREST;s.bindTexture(s.TEXTURE_2D,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,r)}function Vb(s,t,n,r){Mp(s,t,r),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,n)}function iE(s,t,n,r,a,o){const c=s.getGL();let f,d;n instanceof Float32Array?(f=c.FLOAT,s.getExtension("OES_texture_float"),d=s.getExtension("OES_texture_float_linear")!==null):(f=c.UNSIGNED_BYTE,d=!0),Mp(c,t,o&&d);const _=n.byteLength/r[1];let m=1;_%8===0?m=8:_%4===0?m=4:_%2===0&&(m=2);let y;switch(a){case 1:{y=c.LUMINANCE;break}case 2:{y=c.LUMINANCE_ALPHA;break}case 3:{y=c.RGB;break}case 4:{y=c.RGBA;break}default:throw new Error(`Unsupported number of bands: ${a}`)}const p=c.getParameter(c.UNPACK_ALIGNMENT);c.pixelStorei(c.UNPACK_ALIGNMENT,m),c.texImage2D(c.TEXTURE_2D,0,y,r[0],r[1],0,y,f,n),c.pixelStorei(c.UNPACK_ALIGNMENT,p)}let fs=null;function Kb(){fs=Ee(1,1,void 0,{willReadFrequently:!0})}class qb extends jb{constructor(t){super(t),this.textures=[],this.renderSize_=ie(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const n=new Sp(Pd,Fd);n.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(n),this.coords=n,this.setTile(t.tile)}setHelper(t){const n=this.helper?.getGL();if(n){this.helper.deleteBuffer(this.coords);for(let r=0;r<this.textures.length;++r)n.deleteTexture(this.textures[r])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,n=t.getGL(),r=this.tile;this.textures.length=0;let a;r instanceof Fu||r instanceof Yd?a=r.getImage():a=r.getData();const o=Ds(a);if(o){const b=n.createTexture();this.textures.push(b),this.bandCount=4,Vb(n,b,o,r.interpolate),this.setReady();return}a=Wf(a);const c=r.getSize(),f=[c[0]+2*this.gutter,c[1]+2*this.gutter],d=a instanceof Float32Array,_=f[0]*f[1],m=d?Float32Array:Uint8Array,y=m.BYTES_PER_ELEMENT,p=a.byteLength/f[1];this.bandCount=Math.floor(p/y/f[0]);const v=Math.ceil(this.bandCount/4);if(v===1){const b=n.createTexture();this.textures.push(b),iE(t,b,a,f,this.bandCount,r.interpolate),this.setReady();return}const T=new Array(v);for(let b=0;b<v;++b){const L=n.createTexture();this.textures.push(L);const O=b<v-1?4:(this.bandCount-1)%4+1;T[b]=new m(_*O)}let S=0,x=0;const M=f[0]*this.bandCount;for(let b=0;b<f[1];++b){for(let L=0;L<M;++L){const O=a[x+L],C=Math.floor(S/this.bandCount),F=L%this.bandCount,K=Math.floor(F/4),X=T[K],Z=X.length/_,H=F%4;X[C*Z+H]=O,++S}x+=p/y}for(let b=0;b<v;++b){const L=this.textures[b],O=T[b],C=O.length/_;iE(t,L,O,f,C,r.interpolate)}this.setReady()}getImagePixelData_(t,n,r){const a=this.gutter,o=this.renderSize_[0],c=this.renderSize_[1];fs||Kb(),fs.clearRect(0,0,1,1);const f=t.width,d=t.height,_=f-2*a,m=d-2*a,y=a+Math.floor(_*(n/o)),p=a+Math.floor(m*(r/c));let v;try{fs.drawImage(t,y,p,1,1,0,0,1,1),v=fs.getImageData(0,0,1,1).data}catch{return fs=null,null}return v}getArrayPixelData_(t,n,r,a){const o=this.gutter,c=this.renderSize_[0],f=this.renderSize_[1],d=n[0],_=n[1],m=d+2*o,y=_+2*o,p=o+Math.floor(d*(r/c)),v=o+Math.floor(_*(a/f));if(t instanceof DataView){const S=t.byteLength/(m*y),x=S*(v*m+p),M=t.buffer.slice(x,x+S);return new DataView(M)}const T=this.bandCount*(v*m+p);return t.slice(T,T+this.bandCount)}getPixelData(t,n){if(!this.loaded)return null;if(this.tile instanceof hl){const r=this.tile.getData(),a=Wf(r);if(a){const o=this.tile.getSize();return this.getArrayPixelData_(a,o,t,n)}return this.getImagePixelData_(Ds(r),t,n)}return this.getImagePixelData_(this.tile.getImage(),t,n)}}class Xu{constructor(t,n,r,a){this.minX=t,this.maxX=n,this.minY=r,this.maxY=a}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,n){return this.minX<=t&&t<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function as(s,t,n,r,a){return a!==void 0?(a.minX=s,a.maxX=t,a.minY=n,a.maxY=r,a):new Xu(s,t,n,r)}class Dp{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof gl&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let n=this.oldest_;for(;n;)t(n.value_,n.key_,this),n=n.newer}get(t,n){const r=this.entries_[t];return jt(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(t){const n=this.entries_[t];return jt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)t[n++]=r.key_;return t}getValues(){const t=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)t[n++]=r.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,n){this.get(t),this.entries_[t].value_=n}set(t,n){jt(!(t in this.entries_),"Tried to set a value for a key that is used already");const r={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}setSize(t){this.highWaterMark=t}}function Os(s,t,n,r){return r!==void 0?(r[0]=s,r[1]=t,r[2]=n,r):[s,t,n]}function Op(s,t,n){return s+"/"+t+"/"+n}function ds(s){return Op(s[0],s[1],s[2])}function Zb(s){return kb(s[0],s[1],s[2])}function kb(s,t,n){return(t<<s)+n}function $b(s,t){const n=s[0],r=s[1],a=s[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;const o=t.getFullTileRange(n);return o?o.containsXY(r,a):!0}const Qb=5;class Lp extends yl{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=Qb}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return Mt()}getData(t){return null}prepareFrame(t){return Mt()}renderFrame(t,n){return Mt()}forEachFeatureAtCoordinate(t,n,r,a,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const n=t.target;(n.getState()===wt.LOADED||n.getState()===wt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let n=t.getState();return n!=wt.LOADED&&n!=wt.ERROR&&t.addEventListener(_t.CHANGE,this.boundHandleImageChange_),n==wt.IDLE&&(t.load(),n=t.getState()),n==wt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class Hd extends Lp{constructor(t,n){super(t),n=n||{},this.inversePixelTransform_=En(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(Lt.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(Se.PRECOMPOSE)){const a=new Ja(Se.PRECOMPOSE,void 0,n,t);r.dispatchEvent(a)}}dispatchPostComposeEvent(t,n){const r=this.getLayer();if(r.hasListener(Se.POSTCOMPOSE)){const a=new Ja(Se.POSTCOMPOSE,void 0,n,t);r.dispatchEvent(a)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let n=!0,r=-1,a;for(let c=0,f=t.layerStatesArray.length;c<f;c++){const d=t.layerStatesArray[c].layer,_=d.getRenderer();if(!(_ instanceof Hd)){n=!0;continue}const m=d.getClassName();if((n||m!==a)&&(r+=1,n=!1),a=m,_===this)break}const o="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Ub({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),a&&(this.helper.getCanvas().className=a),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(Lt.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,n,r){const a=this.getLayer();if(a.hasListener(t)){hr(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const o=new Ja(t,this.inversePixelTransform_,r,n);a.dispatchEvent(o)}}preRender(t,n){this.dispatchRenderEvent_(Se.PRERENDER,t,n)}postRender(t,n){this.dispatchRenderEvent_(Se.POSTRENDER,t,n)}}const Wb={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function rE(s){return 1/(s+2)}function Jb(){return{tileIds:new Set,representationsByZ:{}}}function sE(s,t){return s.tileIds.has(zt(t))}function aE(s,t,n){const r=s.representationsByZ;n in r||(r[n]=new Set),r[n].add(t),s.tileIds.add(zt(t.tile))}function Mf(s,t){const n=s.layerStatesArray[s.layerIndex];n.extent&&(t=Ie(t,$n(n.extent,s.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const a=r.getTileGridForProjection(s.viewState.projection).getExtent();a&&(t=Ie(t,a))}return t}function Jf(s,t){return`${zt(s)},${s.getKey()},${s.getRevision()},${ds(t)}`}class tA extends Hd{constructor(t,n){super(t,{uniforms:n.uniforms,postProcesses:n.postProcesses}),this.renderComplete=!1,this.tileTransform_=En(),this.tempMat4=Ps(),this.tempTileRange_=new Xu(0,0,0,0),this.tempTileCoord_=Os(0,0,0),this.tempSize_=[0,0];const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileRepresentationCache=new Dp(r),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const r=this.getLayer().getRenderSource();return!r||Us(Mf(t,t.extent))?!1:r.getState()==="ready"}createTileRepresentation(t){return Mt()}enqueueTiles(t,n,r,a,o){const c=t.viewState,f=this.getLayer(),d=f.getRenderSource(),_=d.getTileGridForProjection(c.projection),m=d.getGutterForProjection(c.projection),y=zt(d);y in t.wantedTiles||(t.wantedTiles[y]={});const p=t.wantedTiles[y],v=this.tileRepresentationCache,T=f.getMapInternal(),S=Math.max(r-o,_.getMinZoom(),_.getZForResolution(Math.min(f.getMaxResolution(),T?T.getView().getResolutionForZoom(Math.max(f.getMinZoom(),0)):_.getResolution(0)),d.zDirection)),x=c.rotation,M=x?od(c.center,c.resolution,x,t.size):void 0;for(let b=r;b>=S;--b){const L=_.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),O=_.getResolution(b);for(let C=L.minX;C<=L.maxX;++C)for(let F=L.minY;F<=L.maxY;++F){if(x&&!_.tileCoordIntersectsViewport([b,C,F],M))continue;const K=Os(b,C,F,this.tempTileCoord_),X=Jf(d,K);let Z,H;if(v.containsKey(X)&&(Z=v.get(X),H=Z.tile),(!Z||Z.tile.key!==d.getKey())&&(H=d.getTile(b,C,F,t.pixelRatio,c.projection),!H)||sE(a,H))continue;Z?Z.setTile(H):(Z=this.createTileRepresentation({tile:H,grid:_,helper:this.helper,gutter:m}),v.set(X,Z)),aE(a,Z,b);const rt=H.getKey();p[rt]=!0,H.getState()===tt.IDLE&&(t.tileQueue.isKeyQueued(rt)||t.tileQueue.enqueue([H,y,_.getTileCoordCenter(K),O]))}}}beforeTilesRender(t,n){this.helper.prepareDraw(this.frameState,!n,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,n,r,a,o,c,f,d,_,m,y){}renderTileMask(t,n,r,a){}drawTile_(t,n,r,a,o,c,f){if(!n.ready)return;const _=n.tile.tileCoord,m=ds(_),y=m in c?c[m]:1,p=f.getResolution(r),v=ie(f.getTileSize(r),this.tempSize_),T=f.getOrigin(r),S=f.getTileCoordExtent(_),x=y<1?-1:rE(r);y<1&&(t.animate=!0);const M=t.viewState,b=M.center[0],L=M.center[1],O=v[0]+2*a,C=v[1]+2*a,F=O/C,K=(b-T[0])/(v[0]*p),X=(T[1]-L)/(v[1]*p),Z=M.resolution/p,H=_[1],rt=_[2];ZR(this.tileTransform_),Ty(this.tileTransform_,2/(t.size[0]*Z/O),-2/(t.size[1]*Z/O)),kR(this.tileTransform_,M.rotation),Ty(this.tileTransform_,1,1/F),$R(this.tileTransform_,(v[0]*(H-K)-a)/O,(v[1]*(rt-X)-a)/C),this.renderTile(n,this.tileTransform_,t,o,p,v,T,S,x,a,y)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const n=this.helper.getGL();this.preRender(n,t);const r=t.viewState,a=this.getLayer(),o=a.getRenderSource(),c=o.getTileGridForProjection(r.projection),f=o.getGutterForProjection(r.projection),d=Mf(t,t.extent),_=c.getZForResolution(r.resolution,o.zDirection),m=Jb(),y=a.getPreload();if(t.nextExtent){const L=c.getZForResolution(r.nextResolution,o.zDirection),O=Mf(t,t.nextExtent);this.enqueueTiles(t,O,L,m,y)}this.enqueueTiles(t,d,_,m,0),y>0&&setTimeout(()=>{this.enqueueTiles(t,d,_-1,m,y-1)},0);const p={};let v=!1;const T=m.representationsByZ;if(_ in T){const L=zt(this),O=t.time;for(const C of T[_]){const F=C.tile;if(F.getState()===tt.EMPTY)continue;const K=F.tileCoord;if(C.ready){const H=F.getAlpha(L,O);if(H===1){F.endTransition(L);continue}v=!0;const rt=ds(K);p[rt]=H}if(this.renderComplete=!1,this.findAltTiles_(c,K,_+1,m))continue;const Z=c.getMinZoom();for(let H=_-1;H>=Z&&!this.findAltTiles_(c,K,H,m);--H);}}const S=Object.keys(T).map(Number).sort(Pv);if(this.beforeTilesMaskRender(t))for(let L=0,O=S.length;L<O;++L){const C=S[L];for(const F of T[C]){const K=F.tile.tileCoord;if(ds(K)in p)continue;const Z=c.getTileCoordExtent(K);this.renderTileMask(F,C,Z,rE(C))}}this.beforeTilesRender(t,v);for(let L=0,O=S.length;L<O;++L){const C=S[L];for(const F of T[C]){const K=F.tile.tileCoord;ds(K)in p||this.drawTile_(t,F,C,f,d,p,c)}}if(_ in T)for(const L of T[_]){const O=L.tile.tileCoord;ds(O)in p&&this.drawTile_(t,L,_,f,d,p,c)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const M=this.helper.getCanvas(),b=this.tileRepresentationCache;for(;b.canExpireCache();)b.pop().dispose();return this.postRender(n,t),M}beforeFinalize(t){}findAltTiles_(t,n,r,a){const o=t.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!o)return!1;let c=!0;const f=this.tileRepresentationCache,d=this.getLayer().getRenderSource();for(let _=o.minX;_<=o.maxX;++_)for(let m=o.minY;m<=o.maxY;++m){const y=Jf(d,[r,_,m]);let p=!1;if(f.containsKey(y)){const v=f.get(y);v.ready&&!sE(a,v.tile)&&(aE(a,v,r),p=!0)}p||(c=!1)}return c}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach(n=>n.dispose()),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(t=>t.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const mt={...Wb,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},ou={TEXTURE_COORD:"a_textureCoord"},eA=[{name:ou.TEXTURE_COORD,size:2,type:$a.FLOAT}];class nA extends tA{constructor(t,n){super(t,n),this.program_,this.vertexShader_=n.vertexShader,this.fragmentShader_=n.fragmentShader,this.indices_=new Sp(Bd,Fd),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=n.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const n=this.helper.getGL();for(const r of this.paletteTextures_)r.delete(n)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const n=this.helper.getGL();for(const r of this.paletteTextures_)r.getTexture(n)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const n of this.paletteTextures_)n.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const n of this.paletteTextures_)n.delete(t)}super.removeHelper()}createTileRepresentation(t){return new qb(t)}beforeTilesRender(t,n){super.beforeTilesRender(t,n),this.helper.useProgram(this.program_,t)}renderTile(t,n,r,a,o,c,f,d,_,m,y){const p=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(eA);let v=0;for(;v<t.textures.length;){const F=`${mt.TILE_TEXTURE_ARRAY}[${v}]`;this.helper.bindTexture(t.textures[v],v,F),++v}for(let F=0;F<this.paletteTextures_.length;++F){const K=this.paletteTextures_[F],X=K.getTexture(p);this.helper.bindTexture(X,v,K.name),++v}const T=r.viewState,S=c[0]+2*m,x=c[1]+2*m,b=t.tile.tileCoord,L=b[1],O=b[2];this.helper.setUniformMatrixValue(mt.TILE_TRANSFORM,Rp(this.tempMat4,n)),this.helper.setUniformFloatValue(mt.TRANSITION_ALPHA,y),this.helper.setUniformFloatValue(mt.DEPTH,_);let C=a;m>0&&(C=d,Ie(C,a,C)),this.helper.setUniformFloatVec4(mt.RENDER_EXTENT,C),this.helper.setUniformFloatValue(mt.RESOLUTION,T.resolution),this.helper.setUniformFloatValue(mt.ZOOM,T.zoom),this.helper.setUniformFloatValue(mt.TEXTURE_PIXEL_WIDTH,S),this.helper.setUniformFloatValue(mt.TEXTURE_PIXEL_HEIGHT,x),this.helper.setUniformFloatValue(mt.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(mt.TEXTURE_ORIGIN_X,f[0]+L*c[0]*o-m*o),this.helper.setUniformFloatValue(mt.TEXTURE_ORIGIN_Y,f[1]-O*c[1]*o+m*o),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const r=this.frameState;if(!r)return null;const a=this.getLayer(),o=De(r.pixelToCoordinateTransform,t.slice()),c=r.viewState,f=a.getExtent();if(f&&!nl($n(f,c.projection),o))return null;const d=a.getSources(Yf([o]),c.resolution);let _,m,y;for(_=d.length-1;_>=0;--_)if(m=d[_],m.getState()==="ready"){if(y=m.getTileGridForProjection(c.projection),m.getWrapX())break;const v=y.getExtent();if(!v||nl(v,o))break}if(_<0)return null;const p=this.tileRepresentationCache;for(let v=y.getZForResolution(c.resolution);v>=y.getMinZoom();--v){const T=y.getTileCoordForCoordAndZ(o,v),S=Jf(m,T);if(!p.containsKey(S))continue;const x=p.get(S);if(x.tile.getState()===tt.EMPTY)return null;if(!x.loaded)continue;const b=y.getOrigin(v),L=ie(y.getTileSize(v)),O=y.getResolution(v),C=(o[0]-b[0])/O-T[1]*L[0],F=(b[1]-o[1])/O-T[2]*L[1];return x.getPixelData(C,F)}return null}disposeInternal(){const t=this.helper;if(t){const n=t.getGL();for(const r of this.paletteTextures_)r.delete(n);this.paletteTextures_.length=0,n.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class iA{constructor(t,n){this.name=t,this.data=n,this.texture_=null}getTexture(t){if(!this.texture_){const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}}function rA(s,t){return`operator_${s}_${Object.keys(t.functions).length}`}function fl(s){const t=s.toString();return t.includes(".")?t:t+".0"}function jd(s){if(s.length<2||s.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${s.length}(${s.map(fl).join(", ")})`}function sA(s){const t=Li(s),n=t.length>3?t[3]:1;return jd([t[0]/255,t[1]/255,t[2]/255,n])}function aA(s){const t=ie(s);return jd(t)}const Df={};let lA=0;function Ip(s){return s in Df||(Df[s]=lA++),Df[s]}function oA(s){return fl(Ip(s))}function Np(s){return"u_var_"+s}function uA(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const Of="getBandValue",Up="u_paletteTextures",cA="featureId",hA="geometryType",fA=-9999999;function dA(s,t,n,r){const a=de(s,t,n);return Vd(a,t,r)}function Ot(s){return(t,n,r)=>{const a=n.args.length,o=new Array(a);for(let c=0;c<a;++c)o[c]=Vd(n.args[c],r,t);return s(o,t)}}const gA={[U.Get]:(s,t)=>{const r=t.args[0].value;return r in s.properties||(s.properties[r]={name:r,type:t.type}),"a_prop_"+r},[U.Id]:s=>(s.featureId=!0,"a_"+cA),[U.GeometryType]:s=>(s.geometryType=!0,"a_"+hA),[U.LineMetric]:()=>"currentLineMetric",[U.Var]:(s,t)=>{const r=t.args[0].value;return r in s.variables||(s.variables[r]={name:r,type:t.type}),Np(r)},[U.Has]:(s,t)=>{const r=t.args[0].value;return r in s.properties||(s.properties[r]={name:r,type:t.type}),`(a_prop_${r} != ${fl(fA)})`},[U.Resolution]:()=>"u_resolution",[U.Zoom]:()=>"u_zoom",[U.Time]:()=>"u_time",[U.Any]:Ot(s=>`(${s.join(" || ")})`),[U.All]:Ot(s=>`(${s.join(" && ")})`),[U.Not]:Ot(([s])=>`(!${s})`),[U.Equal]:Ot(([s,t])=>`(${s} == ${t})`),[U.NotEqual]:Ot(([s,t])=>`(${s} != ${t})`),[U.GreaterThan]:Ot(([s,t])=>`(${s} > ${t})`),[U.GreaterThanOrEqualTo]:Ot(([s,t])=>`(${s} >= ${t})`),[U.LessThan]:Ot(([s,t])=>`(${s} < ${t})`),[U.LessThanOrEqualTo]:Ot(([s,t])=>`(${s} <= ${t})`),[U.Multiply]:Ot(s=>`(${s.join(" * ")})`),[U.Divide]:Ot(([s,t])=>`(${s} / ${t})`),[U.Add]:Ot(s=>`(${s.join(" + ")})`),[U.Subtract]:Ot(([s,t])=>`(${s} - ${t})`),[U.Clamp]:Ot(([s,t,n])=>`clamp(${s}, ${t}, ${n})`),[U.Mod]:Ot(([s,t])=>`mod(${s}, ${t})`),[U.Pow]:Ot(([s,t])=>`pow(${s}, ${t})`),[U.Abs]:Ot(([s])=>`abs(${s})`),[U.Floor]:Ot(([s])=>`floor(${s})`),[U.Ceil]:Ot(([s])=>`ceil(${s})`),[U.Round]:Ot(([s])=>`floor(${s} + 0.5)`),[U.Sin]:Ot(([s])=>`sin(${s})`),[U.Cos]:Ot(([s])=>`cos(${s})`),[U.Atan]:Ot(([s,t])=>t!==void 0?`atan(${s}, ${t})`:`atan(${s})`),[U.Sqrt]:Ot(([s])=>`sqrt(${s})`),[U.Match]:Ot(s=>{const t=s[0],n=s[s.length-1];let r=null;for(let a=s.length-3;a>=1;a-=2){const o=s[a],c=s[a+1];r=`(${t} == ${o} ? ${c} : ${r||n})`}return r}),[U.Between]:Ot(([s,t,n])=>`(${s} >= ${t} && ${s} <= ${n})`),[U.Interpolate]:Ot(([s,t,...n])=>{let r="";for(let a=0;a<n.length-2;a+=2){const o=n[a],c=r||n[a+1],f=n[a+2],d=n[a+3];let _;s===fl(1)?_=`(${t} - ${o}) / (${f} - ${o})`:_=`(pow(${s}, (${t} - ${o})) - 1.0) / (pow(${s}, (${f} - ${o})) - 1.0)`,r=`mix(${c}, ${d}, clamp(${_}, 0.0, 1.0))`}return r}),[U.Case]:Ot(s=>{const t=s[s.length-1];let n=null;for(let r=s.length-3;r>=0;r-=2){const a=s[r],o=s[r+1];n=`(${a} ? ${o} : ${n||t})`}return n}),[U.In]:Ot(([s,...t],n)=>{const r=rA("in",n),a=[];for(let o=0;o<t.length;o+=1)a.push(`  if (inputValue == ${t[o]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${a.join(`
`)}
  return false;
}`,`${r}(${s})`}),[U.Array]:Ot(s=>`vec${s.length}(${s.join(", ")})`),[U.Color]:Ot(s=>{if(s.length===1)return`vec4(vec3(${s[0]} / 255.0), 1.0)`;if(s.length===2)return`vec4(vec3(${s[0]} / 255.0), ${s[1]})`;const t=s.slice(0,3).map(r=>`${r} / 255.0`);if(s.length===3)return`vec4(${t.join(", ")}, 1.0)`;const n=s[3];return`vec4(${t.join(", ")}, ${n})`}),[U.Band]:Ot(([s,t,n],r)=>{if(!(Of in r.functions)){let a="";const o=r.bandCount||1;for(let c=0;c<o;c++){const f=Math.floor(c/4);let d=c%4;c===o-1&&d===1&&(d=3);const _=`${mt.TILE_TEXTURE_ARRAY}[${f}]`;a+=`  if (band == ${c+1}.0) {
    return texture2D(${_}, v_textureCoord + vec2(dx, dy))[${d}];
  }
`}r.functions[Of]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${mt.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${mt.TEXTURE_PIXEL_HEIGHT};
${a}
}`}return`${Of}(${s}, ${t??"0.0"}, ${n??"0.0"})`}),[U.Palette]:(s,t)=>{const[n,...r]=t.args,a=r.length,o=new Uint8Array(a*4);for(let _=0;_<r.length;_++){const m=r[_].value,y=Li(m),p=_*4;o[p]=y[0],o[p+1]=y[1],o[p+2]=y[2],o[p+3]=y[3]*255}s.paletteTextures||(s.paletteTextures=[]);const c=`${Up}[${s.paletteTextures.length}]`,f=new iA(c,o);s.paletteTextures.push(f);const d=Vd(n,yt,s);return`texture2D(${c}, vec2((${d} + 0.5) / ${a}.0, 0.5))`}};function Vd(s,t,n){if(s instanceof hp){const r=gA[s.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(s.operator)}`);return r(n,s,t)}if((s.type&yt)>0)return fl(s.value);if((s.type&be)>0)return s.value.toString();if((s.type&Oe)>0)return oA(s.value.toString());if((s.type&Qe)>0)return sA(s.value);if((s.type&Ii)>0)return jd(s.value);if((s.type&Es)>0)return aA(s.value);throw new Error(`Unexpected expression ${s.value} (expected type ${ps(t)})`)}function ls(s,t,n){const r=Id();return dA(t,n,r,s)}const Jo={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class zp extends Iu{constructor(t){t=t||{};const n=Object.assign({},t),r=t.cacheSize;delete t.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Jo.PRELOAD)}setPreload(t){this.set(Jo.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Jo.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Jo.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}function lE(s,t){const n=`
    attribute vec2 ${ou.TEXTURE_COORD};
    uniform mat4 ${mt.TILE_TRANSFORM};
    uniform float ${mt.TEXTURE_PIXEL_WIDTH};
    uniform float ${mt.TEXTURE_PIXEL_HEIGHT};
    uniform float ${mt.TEXTURE_RESOLUTION};
    uniform float ${mt.TEXTURE_ORIGIN_X};
    uniform float ${mt.TEXTURE_ORIGIN_Y};
    uniform float ${mt.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${ou.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${mt.TEXTURE_ORIGIN_X} + ${mt.TEXTURE_RESOLUTION} * ${mt.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${mt.TEXTURE_ORIGIN_Y} - ${mt.TEXTURE_RESOLUTION} * ${mt.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${mt.TILE_TRANSFORM} * vec4(${ou.TEXTURE_COORD}, ${mt.DEPTH}, 1.0);
    }
  `,r={...uA(),bandCount:t},a=[];if(s.color!==void 0){const y=ls(r,s.color,Qe);a.push(`color = ${y};`)}if(s.contrast!==void 0){const y=ls(r,s.contrast,yt);a.push(`color.rgb = clamp((${y} + 1.0) * color.rgb - (${y} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(s.exposure!==void 0){const y=ls(r,s.exposure,yt);a.push(`color.rgb = clamp((${y} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(s.saturation!==void 0){const y=ls(r,s.saturation,yt);a.push(`
      float saturation = ${y} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(s.gamma!==void 0){const y=ls(r,s.gamma,yt);a.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${y}));`)}if(s.brightness!==void 0){const y=ls(r,s.brightness,yt);a.push(`color.rgb = clamp(color.rgb + ${y}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const o={},c=Object.keys(r.variables).length;if(c>1&&!s.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let y=0;y<c;++y){const p=r.variables[Object.keys(r.variables)[y]];if(!(p.name in s.variables))throw new Error(`Missing '${p.name}' in style variables`);const v=Np(p.name);o[v]=function(){let T=s.variables[p.name];return typeof T=="string"&&(T=Ip(T)),T!==void 0?T:-9999999}}const f=Object.keys(o).map(function(y){return`uniform float ${y};`}),d=Math.ceil(t/4);f.push(`uniform sampler2D ${mt.TILE_TEXTURE_ARRAY}[${d}];`),r.paletteTextures&&f.push(`uniform sampler2D ${Up}[${r.paletteTextures.length}];`);const _=Object.keys(r.functions).map(function(y){return r.functions[y]}),m=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${mt.RENDER_EXTENT};
    uniform float ${mt.TRANSITION_ALPHA};
    uniform float ${mt.TEXTURE_PIXEL_WIDTH};
    uniform float ${mt.TEXTURE_PIXEL_HEIGHT};
    uniform float ${mt.RESOLUTION};
    uniform float ${mt.ZOOM};

    ${f.join(`
`)}

    ${_.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${mt.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${mt.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${mt.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${mt.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${mt.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${a.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${mt.TRANSITION_ALPHA};
    }`;return{vertexShader:n,fragmentShader:m,uniforms:o,paletteTextures:r.paletteTextures}}class Gp extends zp{constructor(t){t=t?Object.assign({},t):{};const n=t.style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=n,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(Lt.SOURCE,this.handleSourceUpdate_)}getSources(t,n){const r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(t,n):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if(t.getState()==="loading"){const n=()=>{t.getState()==="ready"&&(t.removeEventListener("change",n),this.setStyle(this.style_))};t.addEventListener("change",n)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,n=this.getSources([-t,-t,t,t],t);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4}createRenderer(){const t=lE(this.style_,this.getSourceBandCount_());return new nA(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,n){const r=this.getRenderer();let a;for(let o=0,c=n.length;o<c;++o)this.renderedSource_=n[o],r.prepareFrame(t)&&(a=r.renderFrame(t));return a}render(t,n){this.rendered=!0;const r=t.viewState,a=this.getSources(t.extent,r.resolution);let o=!0;for(let f=0,d=a.length;f<d;++f){const _=a[f],m=_.getState();if(m=="loading"){const y=()=>{_.getState()=="ready"&&(_.removeEventListener("change",y),this.changed())};_.addEventListener("change",y)}o=o&&m=="ready"}const c=this.renderSources(t,a);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=r.resolution,c;if(this.renderedResolution_>.5*r.resolution){const f=this.getSources(t.extent,this.renderedResolution_).filter(d=>!a.includes(d));if(f.length>0)return this.renderSources(t,f)}return c}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const n=lE(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}Gp.prototype.dispose;class _A{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(pu(),{get:(t,n)=>{if(typeof pu()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(t,n,r)=>(this.push_(n,r),!0)})}push_(...t){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(n=>{for(let r=0,a=n.length;r<a;++r){const o=n[r];if(typeof o=="function"){o(t);continue}const c=n[++r];if(typeof t[o]=="function")t[o](...c);else{if(typeof c=="function"){t[o]=c(t);continue}t[o]=c}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}let gs=null;function mA(){gs=Ee(1,1,void 0,{willReadFrequently:!0})}class yA extends Lp{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=En(),this.pixelTransform=En(),this.inversePixelTransform=En(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,n,r){gs||mA(),gs.clearRect(0,0,1,1);let a;try{gs.drawImage(t,n,r,1,1,0,0,1,1),a=gs.getImageData(0,0,1,1).data}catch{return gs=null,null}return a}getBackground(t){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(t.viewState.resolution)),r||void 0}useContainer(t,n,r){const a=this.getLayer().getClassName();let o,c;if(t&&t.className===a&&(!r||t&&t.style.backgroundColor&&Su(Li(t.style.backgroundColor),Li(r)))){const f=t.firstElementChild;f instanceof HTMLCanvasElement&&(c=f.getContext("2d"))}if(c&&tx(c.canvas.style.transform,n)?(this.container=t,this.context=c,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=a;let f=o.style;f.position="absolute",f.width="100%",f.height="100%",c=Ee();const d=c.canvas;o.appendChild(d),f=d.style,f.position="absolute",f.left="0",f.transformOrigin="top left",this.container=o,this.context=c}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(t,n,r){const a=Qn(r),o=Cu(r),c=wu(r),f=Au(r);De(n.coordinateToPixelTransform,a),De(n.coordinateToPixelTransform,o),De(n.coordinateToPixelTransform,c),De(n.coordinateToPixelTransform,f);const d=this.inversePixelTransform;De(d,a),De(d,o),De(d,c),De(d,f),t.save(),t.beginPath(),t.moveTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(c[0]),Math.round(c[1])),t.lineTo(Math.round(f[0]),Math.round(f[1])),t.clip()}prepareContainer(t,n){const r=t.extent,a=t.viewState.resolution,o=t.viewState.rotation,c=t.pixelRatio,f=Math.round(Yt(r)/a*c),d=Math.round(Le(r)/a*c);hr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,o,-f/2,-d/2),yd(this.inversePixelTransform,this.pixelTransform);const _=JR(this.pixelTransform);if(this.useContainer(n,_,this.getBackground(t)),!this.containerReused){const m=this.context.canvas;m.width!=f||m.height!=d?(m.width=f,m.height=d):this.context.clearRect(0,0,f,d),_!==m.style.transform&&(m.style.transform=_)}}dispatchRenderEvent_(t,n,r){const a=this.getLayer();if(a.hasListener(t)){const o=new Ja(t,this.inversePixelTransform,r,n);a.dispatchEvent(o)}}preRender(t,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Se.PRERENDER,t,n)}postRender(t,n){n.declutter||this.dispatchRenderEvent_(Se.POSTRENDER,t,n)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new _A),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Se.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Se.POSTRENDER,this.context,t))}getRenderTransform(t,n,r,a,o,c,f){const d=o/2,_=c/2,m=a/n,y=-m,p=-t[0]+f,v=-t[1];return hr(this.tempTransform,d,_,m,y,-r,p,v)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Lf(s,t,n,r,a){return`${zt(s)},${t},${Op(n,r,a)}`}function If(s,t,n){if(!(n in s))return s[n]=new Set([t]),!0;const r=s[n],a=r.has(t);return a||r.add(t),!a}function EA(s,t,n){const r=s[n];return r?r.delete(t):!1}function oE(s,t){const n=s.layerStatesArray[s.layerIndex];n.extent&&(t=Ie(t,$n(n.extent,s.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const a=r.getTileGridForProjection(s.viewState.projection).getExtent();a&&(t=Ie(t,a))}return t}class pA extends yA{constructor(t,n){super(t),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Ui(),this.tempTileRange_=new Xu(0,0,0,0),this.tempTileCoord_=Os(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new Dp(r),this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,n,r,a){const o=this.tileCache_,f=this.getLayer().getSource(),d=Lf(f,f.getKey(),t,n,r);let _;if(o.containsKey(d))_=o.get(d);else{if(_=f.getTile(t,n,r,a.pixelRatio,a.viewState.projection),!_)return null;o.set(d,_)}return _}getTile(t,n,r,a){const o=this.getOrCreateTile(t,n,r,a);return o||null}getData(t){const n=this.frameState;if(!n)return null;const r=this.getLayer(),a=De(n.pixelToCoordinateTransform,t.slice()),o=r.getExtent();if(o&&!nl(o,a))return null;const c=n.viewState,f=r.getRenderSource(),d=f.getTileGridForProjection(c.projection),_=f.getTilePixelRatio(n.pixelRatio);for(let m=d.getZForResolution(c.resolution);m>=d.getMinZoom();--m){const y=d.getTileCoordForCoordAndZ(a,m),p=this.getTile(m,y[1],y[2],n);if(!p||p.getState()!==tt.LOADED)continue;const v=d.getOrigin(m),T=ie(d.getTileSize(m)),S=d.getResolution(m);let x;if(p instanceof Fu||p instanceof Yd)x=p.getImage();else if(p instanceof hl){if(x=Ds(p.getData()),!x)continue}else continue;const M=Math.floor(_*((a[0]-v[0])/S-y[1]*T[0])),b=Math.floor(_*((v[1]-a[1])/S-y[2]*T[1])),L=Math.round(_*f.getGutterForProjection(c.projection));return this.getImageData(x,M+L,b+L)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=r,!0}enqueueTiles(t,n,r,a,o){const c=t.viewState,f=this.getLayer(),d=f.getRenderSource(),_=d.getTileGridForProjection(c.projection),m=zt(d);m in t.wantedTiles||(t.wantedTiles[m]={});const y=t.wantedTiles[m],p=f.getMapInternal(),v=Math.max(r-o,_.getMinZoom(),_.getZForResolution(Math.min(f.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(f.getMinZoom(),0)):_.getResolution(0)),d.zDirection)),T=c.rotation,S=T?od(c.center,c.resolution,T,t.size):void 0;for(let x=r;x>=v;--x){const M=_.getTileRangeForExtentAndZ(n,x,this.tempTileRange_),b=_.getResolution(x);for(let L=M.minX;L<=M.maxX;++L)for(let O=M.minY;O<=M.maxY;++O){if(T&&!_.tileCoordIntersectsViewport([x,L,O],S))continue;const C=this.getTile(x,L,O,t);if(!C||!If(a,C,x))continue;const K=C.getKey();if(y[K]=!0,C.getState()===tt.IDLE&&!t.tileQueue.isKeyQueued(K)){const X=Os(x,L,O,this.tempTileCoord_);t.tileQueue.enqueue([C,m,_.getTileCoordCenter(X),b])}}}}findStaleTile_(t,n){const r=this.tileCache_,a=t[0],o=t[1],c=t[2],f=this.getStaleKeys();for(let d=0;d<f.length;++d){const _=Lf(this.getLayer().getSource(),f[d],a,o,c);if(r.containsKey(_)){const m=r.peek(_);if(m.getState()===tt.LOADED)return m.endTransition(zt(this)),If(n,m,a),!0}}return!1}findAltTiles_(t,n,r,a){const o=t.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!o)return!1;let c=!0;const f=this.tileCache_,d=this.getLayer().getRenderSource(),_=d.getKey();for(let m=o.minX;m<=o.maxX;++m)for(let y=o.minY;y<=o.maxY;++y){const p=Lf(d,_,r,m,y);let v=!1;if(f.containsKey(p)){const T=f.peek(p);T.getState()===tt.LOADED&&(If(a,T,r),v=!0)}v||(c=!1)}return c}renderFrame(t,n){this.renderComplete=!0;const r=t.layerStatesArray[t.layerIndex],a=t.viewState,o=a.projection,c=a.resolution,f=a.center,d=t.pixelRatio,_=this.getLayer(),m=_.getSource(),y=m.getTileGridForProjection(o),p=y.getZForResolution(c,m.zDirection),v=y.getResolution(p),T=m.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==T&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=T):this.renderedSourceKey_=T;let S=t.extent;const x=m.getTilePixelRatio(d);this.prepareContainer(t,n);const M=this.context.canvas.width,b=this.context.canvas.height,L=r.extent&&$n(r.extent);L&&(S=Ie(S,$n(r.extent)));const O=v*M/2/x,C=v*b/2/x,F=[f[0]-O,f[1]-C,f[0]+O,f[1]+C],K={};this.renderedTiles.length=0;const X=_.getPreload();if(t.nextExtent){const W=y.getZForResolution(a.nextResolution,m.zDirection),it=oE(t,t.nextExtent);this.enqueueTiles(t,it,W,K,X)}const Z=oE(t,S);if(this.enqueueTiles(t,Z,p,K,0),X>0&&setTimeout(()=>{this.enqueueTiles(t,Z,p-1,K,X-1)},0),!(p in K))return this.container;const H=zt(this),rt=t.time;for(const W of K[p]){const it=W.getState();if(it===tt.EMPTY)continue;const A=W.tileCoord;if(it===tt.LOADED&&W.getAlpha(H,rt)===1){W.endTransition(H);continue}if(it!==tt.ERROR&&(this.renderComplete=!1),this.findStaleTile_(A,K)){EA(K,W,p),t.animate=!0;continue}if(this.findAltTiles_(y,A,p+1,K))continue;const $=y.getMinZoom();for(let et=p-1;et>=$&&!this.findAltTiles_(y,A,et,K);--et);}const J=v/c*d/x,st=this.getRenderContext(t);hr(this.tempTransform,M/2,b/2,J,J,0,-M/2,-b/2),r.extent&&this.clipUnrotated(st,t,L),m.getInterpolate()||(st.imageSmoothingEnabled=!1),this.preRender(st,t);const dt=Object.keys(K).map(Number);dt.sort(xu);let nt;const P=[],k=[];for(let W=dt.length-1;W>=0;--W){const it=dt[W],A=m.getTilePixelSize(it,d,o),Q=y.getResolution(it)/v,$=A[0]*Q*J,et=A[1]*Q*J,ut=y.getTileCoordForCoordAndZ(Qn(F),it),at=y.getTileCoordExtent(ut),vt=De(this.tempTransform,[x*(at[0]-F[0])/v,x*(F[3]-at[3])/v]),At=x*m.getGutterForProjection(o);for(const $t of K[it]){if($t.getState()!==tt.LOADED)continue;const te=$t.tileCoord,Dn=ut[1]-te[1],Pi=Math.round(vt[0]-(Dn-1)*$),ti=ut[2]-te[2],Bi=Math.round(vt[1]-(ti-1)*et),We=Math.round(vt[0]-Dn*$),Je=Math.round(vt[1]-ti*et),we=Pi-We,dr=Bi-Je,Xs=dt.length===1;let gr=!1;nt=[We,Je,We+we,Je,We+we,Je+dr,We,Je+dr];for(let On=0,ju=P.length;On<ju;++On)if(!Xs&&it<k[On]){const Ce=P[On];pl([We,Je,We+we,Je+dr],[Ce[0],Ce[3],Ce[4],Ce[7]])&&(gr||(st.save(),gr=!0),st.beginPath(),st.moveTo(nt[0],nt[1]),st.lineTo(nt[2],nt[3]),st.lineTo(nt[4],nt[5]),st.lineTo(nt[6],nt[7]),st.moveTo(Ce[6],Ce[7]),st.lineTo(Ce[4],Ce[5]),st.lineTo(Ce[2],Ce[3]),st.lineTo(Ce[0],Ce[1]),st.clip())}P.push(nt),k.push(it),this.drawTile($t,t,We,Je,we,dr,At,Xs),gr&&st.restore(),this.renderedTiles.unshift($t),this.updateUsedTiles(t.usedTiles,m,$t)}}if(this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Hf(this.renderedExtent_,F),this.renderedExtent_=F,this.renderedPixelRatio=d,this.postRender(this.context,t),r.extent&&st.restore(),st.imageSmoothingEnabled=!0,this.renderComplete){const W=(it,A)=>{const Y=zt(m),Q=A.wantedTiles[Y],$=Q?Object.keys(Q).length:0;this.updateCacheSize($),this.tileCache_.expireCache()};t.postRenderFunctions.push(W)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,n,r,a,o,c,f,d){let _;if(t instanceof hl){if(_=Ds(t.getData()),!_)throw new Error("Rendering array data is not yet supported")}else _=this.getTileImage(t);if(!_)return;const m=this.getRenderContext(n),y=zt(this),p=n.layerStatesArray[n.layerIndex],v=p.opacity*(d?t.getAlpha(y,n.time):1),T=v!==m.globalAlpha;T&&(m.save(),m.globalAlpha=v),m.drawImage(_,f,f,_.width-2*f,_.height-2*f,r,a,o,c),T&&m.restore(),v!==p.opacity?n.animate=!0:d&&t.endTransition(y)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,n,r){const a=zt(n);a in t||(t[a]={}),t[a][r.getKey()]=!0}}class uE extends zp{constructor(t){super(t)}createRenderer(){return new pA(this,{cacheSize:this.getCacheSize()})}}function pe(s){return(t,...n)=>TA(s,t,n)}function Bs(s,t){return pe(Pp(s,t).get)}const{apply:TA,getOwnPropertyDescriptor:Pp,getPrototypeOf:Kd,ownKeys:vA}=Reflect,{iterator:Al,toStringTag:RA}=Symbol,xA=Object,{create:qd,defineProperty:SA}=xA,bA=Array,AA=bA.prototype,Bp=AA[Al],wA=pe(Bp),Fp=ArrayBuffer,CA=Fp.prototype;Bs(CA,"byteLength");const cE=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;cE&&Bs(cE.prototype,"byteLength");const Xp=Kd(Uint8Array);Xp.from;const Ne=Xp.prototype;Ne[Al];pe(Ne.keys);pe(Ne.values);pe(Ne.entries);pe(Ne.set);pe(Ne.reverse);pe(Ne.fill);pe(Ne.copyWithin);pe(Ne.sort);pe(Ne.slice);pe(Ne.subarray);Bs(Ne,"buffer");Bs(Ne,"byteOffset");Bs(Ne,"length");Bs(Ne,RA);const MA=Uint8Array,Yp=Uint16Array,Zd=Uint32Array,DA=Float32Array,dl=Kd([][Al]()),Hp=pe(dl.next),OA=pe(function*(){}().next),LA=Kd(dl),IA=DataView.prototype,NA=pe(IA.getUint16),kd=WeakMap,jp=kd.prototype,Vp=pe(jp.get),UA=pe(jp.set),Kp=new kd,zA=qd(null,{next:{value:function(){const t=Vp(Kp,this);return Hp(t)}},[Al]:{value:function(){return this}}});function GA(s){if(s[Al]===Bp&&dl.next===Hp)return s;const t=qd(zA);return UA(Kp,t,wA(s)),t}const PA=new kd,BA=qd(LA,{next:{value:function(){const t=Vp(PA,this);return OA(t)},writable:!0,configurable:!0}});for(const s of vA(dl))s!=="next"&&SA(BA,s,Pp(dl,s));const qp=new Fp(4),FA=new DA(qp),XA=new Zd(qp),bn=new Yp(512),An=new MA(512);for(let s=0;s<256;++s){const t=s-127;t<-24?(bn[s]=0,bn[s|256]=32768,An[s]=24,An[s|256]=24):t<-14?(bn[s]=1024>>-t-14,bn[s|256]=1024>>-t-14|32768,An[s]=-t-1,An[s|256]=-t-1):t<=15?(bn[s]=t+15<<10,bn[s|256]=t+15<<10|32768,An[s]=13,An[s|256]=13):t<128?(bn[s]=31744,bn[s|256]=64512,An[s]=24,An[s|256]=24):(bn[s]=31744,bn[s|256]=64512,An[s]=13,An[s|256]=13)}const $d=new Zd(2048);for(let s=1;s<1024;++s){let t=s<<13,n=0;for(;(t&8388608)===0;)t<<=1,n-=8388608;t&=-8388609,n+=947912704,$d[s]=t|n}for(let s=1024;s<2048;++s)$d[s]=939524096+(s-1024<<13);const Fs=new Zd(64);for(let s=1;s<31;++s)Fs[s]=s<<23;Fs[31]=1199570944;Fs[32]=2147483648;for(let s=33;s<63;++s)Fs[s]=2147483648+(s-32<<23);Fs[63]=3347054592;const Zp=new Yp(64);for(let s=1;s<64;++s)s!==32&&(Zp[s]=1024);function YA(s){const t=s>>10;return XA[0]=$d[Zp[t]+(s&1023)]+Fs[t],FA[0]}function kp(s,t,...n){return YA(NA(s,t,...GA(n)))}var tu={exports:{}},hE;function HA(){if(hE)return tu.exports;hE=1;function s(t,n,r){const a=r&&r.debug||!1;a&&console.log("[xml-utils] getting "+n+" in "+t);const o=typeof t=="object"?t.outer:t,c=o.slice(0,o.indexOf(">")+1),f=['"',"'"];for(let d=0;d<f.length;d++){const _=f[d],m=n+"\\="+_+"([^"+_+"]*)"+_;a&&console.log("[xml-utils] pattern:",m);const p=new RegExp(m).exec(c);if(a&&console.log("[xml-utils] match:",p),p)return p[1]}}return tu.exports=s,tu.exports.default=s,tu.exports}var jA=HA();const Nf=bE(jA);var eu={exports:{}},nu={exports:{}},iu={exports:{}},fE;function VA(){if(fE)return iu.exports;fE=1;function s(t,n,r){const o=new RegExp(n).exec(t.slice(r));return o?r+o.index:-1}return iu.exports=s,iu.exports.default=s,iu.exports}var ru={exports:{}},dE;function KA(){if(dE)return ru.exports;dE=1;function s(t,n,r){const o=new RegExp(n).exec(t.slice(r));return o?r+o.index+o[0].length-1:-1}return ru.exports=s,ru.exports.default=s,ru.exports}var su={exports:{}},gE;function qA(){if(gE)return su.exports;gE=1;function s(t,n){const r=new RegExp(n,"g"),a=t.match(r);return a?a.length:0}return su.exports=s,su.exports.default=s,su.exports}var _E;function ZA(){if(_E)return nu.exports;_E=1;const s=VA(),t=KA(),n=qA();function r(a,o,c){const f=c&&c.debug||!1,d=!(c&&typeof c.nested===!1),_=c&&c.startIndex||0;f&&console.log("[xml-utils] starting findTagByName with",o," and ",c);const m=s(a,`<${o}[ 
>/]`,_);if(f&&console.log("[xml-utils] start:",m),m===-1)return;const y=a.slice(m+o.length);let p=t(y,"^[^<]*[ /]>",0);const v=p!==-1&&y[p-1]==="/";if(f&&console.log("[xml-utils] selfClosing:",v),v===!1)if(d){let M=0,b=1,L=0;for(;(p=t(y,"[ /]"+o+">",M))!==-1;){const O=y.substring(M,p+1);if(b+=n(O,"<"+o+`[ 
	>]`),L+=n(O,"</"+o+">"),L>=b)break;M=p}}else p=t(y,"[ /]"+o+">",0);const T=m+o.length+p+1;if(f&&console.log("[xml-utils] end:",T),T===-1)return;const S=a.slice(m,T);let x;return v?x=null:x=S.slice(S.indexOf(">")+1,S.lastIndexOf("<")),{inner:x,outer:S,start:m,end:T}}return nu.exports=r,nu.exports.default=r,nu.exports}var mE;function kA(){if(mE)return eu.exports;mE=1;const s=ZA();function t(n,r,a){const o=[],c=a&&a.debug||!1,f=a&&typeof a.nested=="boolean"?a.nested:!0;let d=a&&a.startIndex||0,_;for(;_=s(n,r,{debug:c,startIndex:d});)f?d=_.start+1+r.length:d=_.end,o.push(_);return c&&console.log("findTagsByName found",o.length,"tags"),o}return eu.exports=t,eu.exports.default=t,eu.exports}var $A=kA();const QA=bE($A),tl={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},wn={};for(const s in tl)tl.hasOwnProperty(s)&&(wn[tl[s]]=parseInt(s,10));const WA=[wn.BitsPerSample,wn.ExtraSamples,wn.SampleFormat,wn.StripByteCounts,wn.StripOffsets,wn.StripRowCounts,wn.TileByteCounts,wn.TileOffsets,wn.SubIFDs],Uf={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},Tt={};for(const s in Uf)Uf.hasOwnProperty(s)&&(Tt[Uf[s]]=parseInt(s,10));const Fe={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},JA={Unspecified:0},$w={AddCompression:1},Qw={None:0,Deflate:1,Zstandard:2},t2={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function e2(s,t){const{width:n,height:r}=s,a=new Uint8Array(n*r*3);let o;for(let c=0,f=0;c<s.length;++c,f+=3)o=256-s[c]/t*256,a[f]=o,a[f+1]=o,a[f+2]=o;return a}function n2(s,t){const{width:n,height:r}=s,a=new Uint8Array(n*r*3);let o;for(let c=0,f=0;c<s.length;++c,f+=3)o=s[c]/t*256,a[f]=o,a[f+1]=o,a[f+2]=o;return a}function i2(s,t){const{width:n,height:r}=s,a=new Uint8Array(n*r*3),o=t.length/3,c=t.length/3*2;for(let f=0,d=0;f<s.length;++f,d+=3){const _=s[f];a[d]=t[_]/65536*256,a[d+1]=t[_+o]/65536*256,a[d+2]=t[_+c]/65536*256}return a}function r2(s){const{width:t,height:n}=s,r=new Uint8Array(t*n*3);for(let a=0,o=0;a<s.length;a+=4,o+=3){const c=s[a],f=s[a+1],d=s[a+2],_=s[a+3];r[o]=255*((255-c)/256)*((255-_)/256),r[o+1]=255*((255-f)/256)*((255-_)/256),r[o+2]=255*((255-d)/256)*((255-_)/256)}return r}function s2(s){const{width:t,height:n}=s,r=new Uint8ClampedArray(t*n*3);for(let a=0,o=0;a<s.length;a+=3,o+=3){const c=s[a],f=s[a+1],d=s[a+2];r[o]=c+1.402*(d-128),r[o+1]=c-.34414*(f-128)-.71414*(d-128),r[o+2]=c+1.772*(f-128)}return r}const a2=.95047,l2=1,o2=1.08883;function u2(s){const{width:t,height:n}=s,r=new Uint8Array(t*n*3);for(let a=0,o=0;a<s.length;a+=3,o+=3){const c=s[a+0],f=s[a+1]<<24>>24,d=s[a+2]<<24>>24;let _=(c+16)/116,m=f/500+_,y=_-d/200,p,v,T;m=a2*(m*m*m>.008856?m*m*m:(m-16/116)/7.787),_=l2*(_*_*_>.008856?_*_*_:(_-16/116)/7.787),y=o2*(y*y*y>.008856?y*y*y:(y-16/116)/7.787),p=m*3.2406+_*-1.5372+y*-.4986,v=m*-.9689+_*1.8758+y*.0415,T=m*.0557+_*-.204+y*1.057,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,v=v>.0031308?1.055*v**(1/2.4)-.055:12.92*v,T=T>.0031308?1.055*T**(1/2.4)-.055:12.92*T,r[o]=Math.max(0,Math.min(1,p))*255,r[o+1]=Math.max(0,Math.min(1,v))*255,r[o+2]=Math.max(0,Math.min(1,T))*255}return r}const c2="modulepreload",h2=function(s){return"/dinamap-les/"+s},yE={},zi=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){let d=function(_){return Promise.all(_.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");a=d(n.map(_=>{if(_=h2(_),_ in yE)return;yE[_]=!0;const m=_.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${y}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":c2,m||(p.as="script"),p.crossOrigin="",p.href=_,f&&p.setAttribute("nonce",f),document.head.appendChild(p),m)return new Promise((v,T)=>{p.addEventListener("load",v),p.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${_}`)))})}))}function o(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return a.then(c=>{for(const f of c||[])f.status==="rejected"&&o(f.reason);return t().catch(o)})},$p=new Map;function Gi(s,t){Array.isArray(s)||(s=[s]),s.forEach(n=>$p.set(n,t))}async function Qp(s){const t=$p.get(s.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${s.Compression}`);const n=await t();return new n(s)}Gi([void 0,1],()=>zi(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([0,1])).then(s=>s.default));Gi(5,()=>zi(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([2,1])).then(s=>s.default));Gi(6,()=>{throw new Error("old style JPEG compression is not supported.")});Gi(7,()=>zi(()=>import("./jpeg-CKYXsxFN.js"),__vite__mapDeps([3,1])).then(s=>s.default));Gi([8,32946],()=>zi(()=>import("./deflate-B9JhHpvg.js"),__vite__mapDeps([4,5,1])).then(s=>s.default));Gi(32773,()=>zi(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([6,1])).then(s=>s.default));Gi(34887,()=>zi(()=>import("./lerc-BwN65Kk_.js"),__vite__mapDeps([7,5,1])).then(async s=>(await s.zstd.init(),s)).then(s=>s.default));Gi(50001,()=>zi(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([8,1])).then(s=>s.default));function Yu(s,t,n,r=1){return new(Object.getPrototypeOf(s)).constructor(t*n*r)}function f2(s,t,n,r,a){const o=t/r,c=n/a;return s.map(f=>{const d=Yu(f,r,a);for(let _=0;_<a;++_){const m=Math.min(Math.round(c*_),n-1);for(let y=0;y<r;++y){const p=Math.min(Math.round(o*y),t-1),v=f[m*t+p];d[_*r+y]=v}}return d})}function As(s,t,n){return(1-n)*s+n*t}function d2(s,t,n,r,a){const o=t/r,c=n/a;return s.map(f=>{const d=Yu(f,r,a);for(let _=0;_<a;++_){const m=c*_,y=Math.floor(m),p=Math.min(Math.ceil(m),n-1);for(let v=0;v<r;++v){const T=o*v,S=T%1,x=Math.floor(T),M=Math.min(Math.ceil(T),t-1),b=f[y*t+x],L=f[y*t+M],O=f[p*t+x],C=f[p*t+M],F=As(As(b,L,S),As(O,C,S),m%1);d[_*r+v]=F}}return d})}function g2(s,t,n,r,a,o="nearest"){switch(o.toLowerCase()){case"nearest":return f2(s,t,n,r,a);case"bilinear":case"linear":return d2(s,t,n,r,a);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function _2(s,t,n,r,a,o){const c=t/r,f=n/a,d=Yu(s,r,a,o);for(let _=0;_<a;++_){const m=Math.min(Math.round(f*_),n-1);for(let y=0;y<r;++y){const p=Math.min(Math.round(c*y),t-1);for(let v=0;v<o;++v){const T=s[m*t*o+p*o+v];d[_*r*o+y*o+v]=T}}}return d}function m2(s,t,n,r,a,o){const c=t/r,f=n/a,d=Yu(s,r,a,o);for(let _=0;_<a;++_){const m=f*_,y=Math.floor(m),p=Math.min(Math.ceil(m),n-1);for(let v=0;v<r;++v){const T=c*v,S=T%1,x=Math.floor(T),M=Math.min(Math.ceil(T),t-1);for(let b=0;b<o;++b){const L=s[y*t*o+x*o+b],O=s[y*t*o+M*o+b],C=s[p*t*o+x*o+b],F=s[p*t*o+M*o+b],K=As(As(L,O,S),As(C,F,S),m%1);d[_*r*o+v*o+b]=K}}}return d}function y2(s,t,n,r,a,o,c="nearest"){switch(c.toLowerCase()){case"nearest":return _2(s,t,n,r,a,o);case"bilinear":case"linear":return m2(s,t,n,r,a,o);default:throw new Error(`Unsupported resampling method: '${c}'`)}}function E2(s,t,n){let r=0;for(let a=t;a<n;++a)r+=s[a];return r}function td(s,t,n){switch(s){case 1:if(t<=8)return new Uint8Array(n);if(t<=16)return new Uint16Array(n);if(t<=32)return new Uint32Array(n);break;case 2:if(t===8)return new Int8Array(n);if(t===16)return new Int16Array(n);if(t===32)return new Int32Array(n);break;case 3:switch(t){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}break}throw Error("Unsupported data format/bitsPerSample")}function p2(s,t){return(s===1||s===2)&&t<=32&&t%8===0?!1:!(s===3&&(t===16||t===32||t===64))}function T2(s,t,n,r,a,o,c){const f=new DataView(s),d=n===2?c*o:c*o*r,_=n===2?1:r,m=td(t,a,d),y=parseInt("1".repeat(a),2);if(t===1){let p;n===1?p=r*a:p=a;let v=o*p;(v&7)!==0&&(v=v+7&-8);for(let T=0;T<c;++T){const S=T*v;for(let x=0;x<o;++x){const M=S+x*_*a;for(let b=0;b<_;++b){const L=M+b*a,O=(T*o+x)*_+b,C=Math.floor(L/8),F=L%8;if(F+a<=8)m[O]=f.getUint8(C)>>8-a-F&y;else if(F+a<=16)m[O]=f.getUint16(C)>>16-a-F&y;else if(F+a<=24){const K=f.getUint16(C)<<8|f.getUint8(C+2);m[O]=K>>24-a-F&y}else m[O]=f.getUint32(C)>>32-a-F&y}}}}return m.buffer}class Wp{constructor(t,n,r,a,o,c){this.fileDirectory=t,this.geoKeys=n,this.dataView=r,this.littleEndian=a,this.tiles=o?{}:null,this.isTiled=!t.StripOffsets;const f=t.PlanarConfiguration;if(this.planarConfiguration=typeof f>"u"?1:f,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=c}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let n=0;n<this.fileDirectory.BitsPerSample.length;++n)t+=this.getSampleByteSize(n);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const n=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(n){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(a,o){return kp(this,a,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,n){const r=this.getSampleFormat(t),a=this.getBitsPerSample(t);return td(r,a,n)}async getTileOrStrip(t,n,r,a,o){const c=Math.ceil(this.getWidth()/this.getTileWidth()),f=Math.ceil(this.getHeight()/this.getTileHeight());let d;const{tiles:_}=this;this.planarConfiguration===1?d=n*c+t:this.planarConfiguration===2&&(d=r*c*f+n*c+t);let m,y;this.isTiled?(m=this.fileDirectory.TileOffsets[d],y=this.fileDirectory.TileByteCounts[d]):(m=this.fileDirectory.StripOffsets[d],y=this.fileDirectory.StripByteCounts[d]);const p=(await this.source.fetch([{offset:m,length:y}],o))[0];let v;return _===null||!_[d]?(v=(async()=>{let T=await a.decode(this.fileDirectory,p);const S=this.getSampleFormat(),x=this.getBitsPerSample();return p2(S,x)&&(T=T2(T,S,this.planarConfiguration,this.getSamplesPerPixel(),x,this.getTileWidth(),this.getBlockHeight(n))),T})(),_!==null&&(_[d]=v)):v=_[d],{x:t,y:n,sample:r,data:await v}}async _readRaster(t,n,r,a,o,c,f,d,_){const m=this.getTileWidth(),y=this.getTileHeight(),p=this.getWidth(),v=this.getHeight(),T=Math.max(Math.floor(t[0]/m),0),S=Math.min(Math.ceil(t[2]/m),Math.ceil(p/m)),x=Math.max(Math.floor(t[1]/y),0),M=Math.min(Math.ceil(t[3]/y),Math.ceil(v/y)),b=t[2]-t[0];let L=this.getBytesPerPixel();const O=[],C=[];for(let X=0;X<n.length;++X)this.planarConfiguration===1?O.push(E2(this.fileDirectory.BitsPerSample,0,n[X])/8):O.push(0),C.push(this.getReaderForSample(n[X]));const F=[],{littleEndian:K}=this;for(let X=x;X<M;++X)for(let Z=T;Z<S;++Z){let H;this.planarConfiguration===1&&(H=this.getTileOrStrip(Z,X,0,o,_));for(let rt=0;rt<n.length;++rt){const J=rt,st=n[rt];this.planarConfiguration===2&&(L=this.getSampleByteSize(st),H=this.getTileOrStrip(Z,X,st,o,_));const dt=H.then(nt=>{const P=nt.data,k=new DataView(P),W=this.getBlockHeight(nt.y),it=nt.y*y,A=nt.x*m,Y=it+W,Q=(nt.x+1)*m,$=C[J],et=Math.min(W,W-(Y-t[3]),v-it),ut=Math.min(m,m-(Q-t[2]),p-A);for(let at=Math.max(0,t[1]-it);at<et;++at)for(let vt=Math.max(0,t[0]-A);vt<ut;++vt){const At=(at*m+vt)*L,$t=$.call(k,At+O[J],K);let te;a?(te=(at+it-t[1])*b*n.length+(vt+A-t[0])*n.length+J,r[te]=$t):(te=(at+it-t[1])*b+vt+A-t[0],r[J][te]=$t)}});F.push(dt)}}if(await Promise.all(F),c&&t[2]-t[0]!==c||f&&t[3]-t[1]!==f){let X;return a?X=y2(r,t[2]-t[0],t[3]-t[1],c,f,n.length,d):X=g2(r,t[2]-t[0],t[3]-t[1],c,f,d),X.width=c,X.height=f,X}return r.width=c||t[2]-t[0],r.height=f||t[3]-t[1],r}async readRasters({window:t,samples:n=[],interleave:r,pool:a=null,width:o,height:c,resampleMethod:f,fillValue:d,signal:_}={}){const m=t||[0,0,this.getWidth(),this.getHeight()];if(m[0]>m[2]||m[1]>m[3])throw new Error("Invalid subsets");const y=m[2]-m[0],p=m[3]-m[1],v=y*p,T=this.getSamplesPerPixel();if(!n||!n.length)for(let b=0;b<T;++b)n.push(b);else for(let b=0;b<n.length;++b)if(n[b]>=T)return Promise.reject(new RangeError(`Invalid sample index '${n[b]}'.`));let S;if(r){const b=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,L=Math.max.apply(null,this.fileDirectory.BitsPerSample);S=td(b,L,v*n.length),d&&S.fill(d)}else{S=[];for(let b=0;b<n.length;++b){const L=this.getArrayForSample(n[b],v);Array.isArray(d)&&b<d.length?L.fill(d[b]):d&&!Array.isArray(d)&&L.fill(d),S.push(L)}}const x=a||await Qp(this.fileDirectory);return await this._readRaster(m,n,S,r,x,o,c,f,_)}async readRGB({window:t,interleave:n=!0,pool:r=null,width:a,height:o,resampleMethod:c,enableAlpha:f=!1,signal:d}={}){const _=t||[0,0,this.getWidth(),this.getHeight()];if(_[0]>_[2]||_[1]>_[3])throw new Error("Invalid subsets");const m=this.fileDirectory.PhotometricInterpretation;if(m===Fe.RGB){let M=[0,1,2];if(this.fileDirectory.ExtraSamples!==JA.Unspecified&&f){M=[];for(let b=0;b<this.fileDirectory.BitsPerSample.length;b+=1)M.push(b)}return this.readRasters({window:t,interleave:n,samples:M,pool:r,width:a,height:o,resampleMethod:c,signal:d})}let y;switch(m){case Fe.WhiteIsZero:case Fe.BlackIsZero:case Fe.Palette:y=[0];break;case Fe.CMYK:y=[0,1,2,3];break;case Fe.YCbCr:case Fe.CIELab:y=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const p={window:_,interleave:!0,samples:y,pool:r,width:a,height:o,resampleMethod:c,signal:d},{fileDirectory:v}=this,T=await this.readRasters(p),S=2**this.fileDirectory.BitsPerSample[0];let x;switch(m){case Fe.WhiteIsZero:x=e2(T,S);break;case Fe.BlackIsZero:x=n2(T,S);break;case Fe.Palette:x=i2(T,v.ColorMap);break;case Fe.CMYK:x=r2(T);break;case Fe.YCbCr:x=s2(T);break;case Fe.CIELab:x=u2(T);break;default:throw new Error("Unsupported photometric interpretation.")}if(!n){const M=new Uint8Array(x.length/3),b=new Uint8Array(x.length/3),L=new Uint8Array(x.length/3);for(let O=0,C=0;O<x.length;O+=3,++C)M[C]=x[O],b[C]=x[O+1],L[C]=x[O+2];x=[M,b,L]}return x.width=T.width,x.height=T.height,x}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let n=0;n<this.fileDirectory.ModelTiepoint.length;n+=6)t.push({i:this.fileDirectory.ModelTiepoint[n],j:this.fileDirectory.ModelTiepoint[n+1],k:this.fileDirectory.ModelTiepoint[n+2],x:this.fileDirectory.ModelTiepoint[n+3],y:this.fileDirectory.ModelTiepoint[n+4],z:this.fileDirectory.ModelTiepoint[n+5]});return t}getGDALMetadata(t=null){const n={};if(!this.fileDirectory.GDAL_METADATA)return null;const r=this.fileDirectory.GDAL_METADATA;let a=QA(r,"Item");t===null?a=a.filter(o=>Nf(o,"sample")===void 0):a=a.filter(o=>Number(Nf(o,"sample"))===t);for(let o=0;o<a.length;++o){const c=a[o];n[Nf(c,"name")]=c.inner}return n}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,n=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(n)return[n[3],n[7],n[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const n=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(n)return[n[0],-n[1],n[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){const[a,o,c]=t.getResolution();return[a*t.getWidth()/this.getWidth(),o*t.getHeight()/this.getHeight(),c*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const n=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[a,o,c,f,d,_,m,y]=this.fileDirectory.ModelTransformation,v=[[0,0],[0,n],[r,0],[r,n]].map(([x,M])=>[f+a*x+o*M,y+d*x+_*M]),T=v.map(x=>x[0]),S=v.map(x=>x[1]);return[Math.min(...T),Math.min(...S),Math.max(...T),Math.max(...S)]}else{const a=this.getOrigin(),o=this.getResolution(),c=a[0],f=a[1],d=c+o[0]*r,_=f+o[1]*n;return[Math.min(c,d),Math.min(f,_),Math.max(c,d),Math.max(f,_)]}}}class v2{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,n){const r=this.getUint32(t,n),a=this.getUint32(t+4,n);let o;if(n){if(o=r+2**32*a,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+a,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(t,n){let r=0;const a=(this._dataView.getUint8(t+(n?7:0))&128)>0;let o=!0;for(let c=0;c<8;c++){let f=this._dataView.getUint8(t+(n?c:7-c));a&&(o?f!==0&&(f=~(f-1)&255,o=!1):f=~f&255),r+=f*256**c}return a&&(r=-r),r}getUint8(t,n){return this._dataView.getUint8(t,n)}getInt8(t,n){return this._dataView.getInt8(t,n)}getUint16(t,n){return this._dataView.getUint16(t,n)}getInt16(t,n){return this._dataView.getInt16(t,n)}getUint32(t,n){return this._dataView.getUint32(t,n)}getInt32(t,n){return this._dataView.getInt32(t,n)}getFloat16(t,n){return kp(this._dataView,t,n)}getFloat32(t,n){return this._dataView.getFloat32(t,n)}getFloat64(t,n){return this._dataView.getFloat64(t,n)}}class R2{constructor(t,n,r,a){this._dataView=new DataView(t),this._sliceOffset=n,this._littleEndian=r,this._bigTiff=a}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,n){return this.sliceOffset<=t&&this.sliceTop>=t+n}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const n=this.readUint32(t),r=this.readUint32(t+4);let a;if(this._littleEndian){if(a=n+2**32*r,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}if(a=2**32*n+r,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}readInt64(t){let n=0;const r=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let a=!0;for(let o=0;o<8;o++){let c=this._dataView.getUint8(t+(this._littleEndian?o:7-o));r&&(a?c!==0&&(c=~(c-1)&255,a=!1):c=~c&255),n+=c*256**o}return r&&(n=-n),n}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const x2=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class S2{constructor(t=x2,n){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=n?Promise.resolve(n):new Promise(r=>{zi(()=>import("./decoder-tqM1uIvc.js"),[]).then(a=>{r(a.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let a=0;a<t;a++)this.workers.push({worker:r(),idle:!0})}))}async decode(t,n){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?Qp(t).then(r=>r.decode(t,n)):new Promise(r=>{const a=this.workers.find(f=>f.idle)||this.workers[Math.floor(Math.random()*this.size)];a.idle=!1;const o=this.messageId++,c=f=>{f.data.id===o&&(a.idle=!0,r(f.data.decoded),a.worker.removeEventListener("message",c))};a.worker.addEventListener("message",c),a.worker.postMessage({fileDirectory:t,buffer:n,id:o},[n])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const EE=`\r
\r
`;function Jp(s){if(typeof Object.fromEntries<"u")return Object.fromEntries(s);const t={};for(const[n,r]of s)t[n.toLowerCase()]=r;return t}function b2(s){const t=s.split(`\r
`).map(n=>{const r=n.split(":").map(a=>a.trim());return r[0]=r[0].toLowerCase(),r});return Jp(t)}function A2(s){const[t,...n]=s.split(";").map(a=>a.trim()),r=n.map(a=>a.split("="));return{type:t,params:Jp(r)}}function ed(s){let t,n,r;return s&&([,t,n,r]=s.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),n=parseInt(n,10),r=parseInt(r,10)),{start:t,end:n,total:r}}function w2(s,t){let n=null;const r=new TextDecoder("ascii"),a=[],o=`--${t}`,c=`${o}--`;for(let f=0;f<10;++f)r.decode(new Uint8Array(s,f,o.length))===o&&(n=f);if(n===null)throw new Error("Could not find initial boundary");for(;n<s.byteLength;){const f=r.decode(new Uint8Array(s,n,Math.min(o.length+1024,s.byteLength-n)));if(f.length===0||f.startsWith(c))break;if(!f.startsWith(o))throw new Error("Part does not start with boundary");const d=f.substr(o.length+2);if(d.length===0)break;const _=d.indexOf(EE),m=b2(d.substr(0,_)),{start:y,end:p,total:v}=ed(m["content-range"]),T=n+o.length+_+EE.length,S=parseInt(p,10)+1-parseInt(y,10);a.push({headers:m,data:s.slice(T,T+S),offset:y,length:S,fileSize:v}),n=T+S+4}return a}class Qd{async fetch(t,n=void 0){return Promise.all(t.map(r=>this.fetchSlice(r,n)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class C2 extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[n,r]of t)this.onEviction(n,r.value)}_deleteIfExpired(t,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,n.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,n){if(this._deleteIfExpired(t,n)===!1)return n.value}_getItemValue(t,n){return n.expiry?this._getOrDeleteIfExpired(t,n):n.value}_peek(t,n){const r=n.get(t);return this._getItemValue(t,r)}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,n){this.oldCache.delete(t),this._set(t,n)}*_entriesAscending(){for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield t)}for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const n=this.cache.get(t);return this._getItemValue(t,n)}if(this.oldCache.has(t)){const n=this.oldCache.get(t);if(this._deleteIfExpired(t,n)===!1)return this._moveToRecent(t,n),n.value}}set(t,n,{maxAge:r=this.maxAge}={}){const a=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:n,expiry:a}):this._set(t,{value:n,expiry:a}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-t;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[n,r]=t;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const t of this.oldCache){const[n,r]=t;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let t=[...this.cache];for(let n=t.length-1;n>=0;--n){const r=t[n],[a,o]=r;this._deleteIfExpired(a,o)===!1&&(yield[a,o.value])}t=[...this.oldCache];for(let n=t.length-1;n>=0;--n){const r=t[n],[a,o]=r;this.cache.has(a)||this._deleteIfExpired(a,o)===!1&&(yield[a,o.value])}}*entriesAscending(){for(const[t,n]of this._entriesAscending())yield[t,n.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,n=this){for(const[r,a]of this.entriesAscending())t.call(n,a,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function M2(s){return new Promise(t=>setTimeout(t,s))}function D2(s,t){const n=Array.isArray(s)?s:Array.from(s),r=Array.isArray(t)?t:Array.from(t);return n.map((a,o)=>[a,r[o]])}class Ls extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Ls),this.name="AbortError"}}class O2 extends Error{constructor(t,n){super(n),this.errors=t,this.message=n,this.name="AggregateError"}}const L2=O2;class I2{constructor(t,n,r=null){this.offset=t,this.length=n,this.data=r}get top(){return this.offset+this.length}}class pE{constructor(t,n,r){this.offset=t,this.length=n,this.blockIds=r}}class N2 extends Qd{constructor(t,{blockSize:n=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=n,this.blockCache=new C2({maxSize:r,onEviction:(a,o)=>{this.evictedBlocks.set(a,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,n){const r=[],a=[],o=[];this.evictedBlocks.clear();for(const{offset:p,length:v}of t){let T=p+v;const{fileSize:S}=this;S!==null&&(T=Math.min(T,S));const x=Math.floor(p/this.blockSize)*this.blockSize;for(let M=x;M<T;M+=this.blockSize){const b=Math.floor(M/this.blockSize);!this.blockCache.has(b)&&!this.blockRequests.has(b)&&(this.blockIdsToFetch.add(b),a.push(b)),this.blockRequests.has(b)&&r.push(this.blockRequests.get(b)),o.push(b)}}await M2(),this.fetchBlocks(n);const c=[];for(const p of a)this.blockRequests.has(p)&&c.push(this.blockRequests.get(p));await Promise.allSettled(r),await Promise.allSettled(c);const f=[],d=o.filter(p=>this.abortedBlockIds.has(p)||!this.blockCache.has(p));if(d.forEach(p=>this.blockIdsToFetch.add(p)),d.length>0&&n&&!n.aborted){this.fetchBlocks(null);for(const p of d){const v=this.blockRequests.get(p);if(!v)throw new Error(`Block ${p} is not in the block requests`);f.push(v)}await Promise.allSettled(f)}if(n&&n.aborted)throw new Ls("Request was aborted");const _=o.map(p=>this.blockCache.get(p)||this.evictedBlocks.get(p)),m=_.filter(p=>!p);if(m.length)throw new L2(m,"Request failed");const y=new Map(D2(o,_));return this.readSliceData(t,y)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const n=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(n,t);for(let a=0;a<n.length;++a){const o=n[a];for(const c of o.blockIds)this.blockRequests.set(c,(async()=>{try{const f=(await r)[a],d=c*this.blockSize,_=d-f.offset,m=Math.min(_+this.blockSize,f.data.byteLength),y=f.data.slice(_,m),p=new I2(d,y.byteLength,y,c);this.blockCache.set(c,p),this.abortedBlockIds.delete(c)}catch(f){if(f.name==="AbortError")f.signal=t,this.blockCache.delete(c),this.abortedBlockIds.add(c);else throw f}finally{this.blockRequests.delete(c)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const n=Array.from(t).sort((c,f)=>c-f);if(n.length===0)return[];let r=[],a=null;const o=[];for(const c of n)a===null||a+1===c?(r.push(c),a=c):(o.push(new pE(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[c],a=c);return o.push(new pE(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(t,n){return t.map(r=>{let a=r.offset+r.length;this.fileSize!==null&&(a=Math.min(this.fileSize,a));const o=Math.floor(r.offset/this.blockSize),c=Math.floor(a/this.blockSize),f=new ArrayBuffer(r.length),d=new Uint8Array(f);for(let _=o;_<=c;++_){const m=n.get(_),y=m.offset-r.offset,p=m.top-a;let v=0,T=0,S;y<0?v=-y:y>0&&(T=y),p<0?S=m.length-v:S=a-m.offset-v;const x=new Uint8Array(m.data,v,S);d.set(x,T)}return f})}}class Wd{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Jd{constructor(t){this.url=t}async request({headers:t,signal:n}={}){throw new Error("request is not implemented")}}class U2 extends Wd{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class z2 extends Jd{constructor(t,n){super(t),this.credentials=n}async request({headers:t,signal:n}={}){const r=await fetch(this.url,{headers:t,credentials:this.credentials,signal:n});return new U2(r)}}class G2 extends Wd{constructor(t,n){super(),this.xhr=t,this.data=n}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class P2 extends Jd{constructRequest(t,n){return new Promise((r,a)=>{const o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(const[c,f]of Object.entries(t))o.setRequestHeader(c,f);o.onload=()=>{const c=o.response;r(new G2(o,c))},o.onerror=a,o.onabort=()=>a(new Ls("Request aborted")),o.send(),n&&(n.aborted&&o.abort(),n.addEventListener("abort",()=>o.abort()))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}const zf={};class B2 extends Wd{constructor(t,n){super(),this.response=t,this.dataPromise=n}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class F2 extends Jd{constructor(t){super(t),this.parsedUrl=zf.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",zf)}constructRequest(t,n){return new Promise((r,a)=>{const o=this.httpApi.get({...this.parsedUrl,headers:t},c=>{const f=new Promise(d=>{const _=[];c.on("data",m=>{_.push(m)}),c.on("end",()=>{const m=Buffer.concat(_).buffer;d(m)}),c.on("error",a)});r(new B2(c,f))});o.on("error",a),n&&(n.aborted&&o.destroy(new Ls("Request aborted")),n.addEventListener("abort",()=>o.destroy(new Ls("Request aborted"))))})}async request({headers:t,signal:n}={}){return await this.constructRequest(t,n)}}class tg extends Qd{constructor(t,n,r,a){super(),this.client=t,this.headers=n,this.maxRanges=r,this.allowFullFile=a,this._fileSize=null}async fetch(t,n){return this.maxRanges>=t.length?this.fetchSlices(t,n):(this.maxRanges>0&&t.length>1,Promise.all(t.map(r=>this.fetchSlice(r,n))))}async fetchSlices(t,n){const r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:a,length:o})=>`${a}-${a+o}`).join(",")}`},signal:n});if(r.ok)if(r.status===206){const{type:a,params:o}=A2(r.getHeader("content-type"));if(a==="multipart/byteranges"){const y=w2(await r.getData(),o.boundary);return this._fileSize=y[0].fileSize||null,y}const c=await r.getData(),{start:f,end:d,total:_}=ed(r.getHeader("content-range"));this._fileSize=_||null;const m=[{data:c,offset:f,length:d-f}];if(t.length>1){const y=await Promise.all(t.slice(1).map(p=>this.fetchSlice(p,n)));return m.concat(y)}return m}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const a=await r.getData();return this._fileSize=a.byteLength,[{data:a,offset:0,length:a.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,n){const{offset:r,length:a}=t,o=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+a}`},signal:n});if(o.ok)if(o.status===206){const c=await o.getData(),{total:f}=ed(o.getHeader("content-range"));return this._fileSize=f||null,{data:c,offset:r,length:a}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const c=await o.getData();return this._fileSize=c.byteLength,{data:c,offset:0,length:c.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function eg(s,{blockSize:t,cacheSize:n}){return t===null?s:new N2(s,{blockSize:t,cacheSize:n})}function X2(s,{headers:t={},credentials:n,maxRanges:r=0,allowFullFile:a=!1,...o}={}){const c=new z2(s,n),f=new tg(c,t,r,a);return eg(f,o)}function Y2(s,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...a}={}){const o=new P2(s),c=new tg(o,t,n,r);return eg(c,a)}function H2(s,{headers:t={},maxRanges:n=0,allowFullFile:r=!1,...a}={}){const o=new F2(s),c=new tg(o,t,n,r);return eg(c,a)}function nd(s,{forceXHR:t=!1,...n}={}){return typeof fetch=="function"&&!t?X2(s,n):typeof XMLHttpRequest<"u"?Y2(s,n):H2(s,n)}class j2 extends Qd{constructor(t){super(),this.file=t}async fetchSlice(t,n){return new Promise((r,a)=>{const o=this.file.slice(t.offset,t.offset+t.length),c=new FileReader;c.onload=f=>r(f.target.result),c.onerror=a,c.onabort=a,c.readAsArrayBuffer(o),n&&n.addEventListener("abort",()=>c.abort())})}}function V2(s){return new j2(s)}function id(s){switch(s){case Tt.BYTE:case Tt.ASCII:case Tt.SBYTE:case Tt.UNDEFINED:return 1;case Tt.SHORT:case Tt.SSHORT:return 2;case Tt.LONG:case Tt.SLONG:case Tt.FLOAT:case Tt.IFD:return 4;case Tt.RATIONAL:case Tt.SRATIONAL:case Tt.DOUBLE:case Tt.LONG8:case Tt.SLONG8:case Tt.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${s}`)}}function K2(s){const t=s.GeoKeyDirectory;if(!t)return null;const n={};for(let r=4;r<=t[3]*4;r+=4){const a=t2[t[r]],o=t[r+1]?tl[t[r+1]]:null,c=t[r+2],f=t[r+3];let d=null;if(!o)d=f;else{if(d=s[o],typeof d>"u"||d===null)throw new Error(`Could not get value of geoKey '${a}'.`);typeof d=="string"?d=d.substring(f,f+c-1):d.subarray&&(d=d.subarray(f,f+c),c===1&&(d=d[0]))}n[a]=d}return n}function os(s,t,n,r){let a=null,o=null;const c=id(t);switch(t){case Tt.BYTE:case Tt.ASCII:case Tt.UNDEFINED:a=new Uint8Array(n),o=s.readUint8;break;case Tt.SBYTE:a=new Int8Array(n),o=s.readInt8;break;case Tt.SHORT:a=new Uint16Array(n),o=s.readUint16;break;case Tt.SSHORT:a=new Int16Array(n),o=s.readInt16;break;case Tt.LONG:case Tt.IFD:a=new Uint32Array(n),o=s.readUint32;break;case Tt.SLONG:a=new Int32Array(n),o=s.readInt32;break;case Tt.LONG8:case Tt.IFD8:a=new Array(n),o=s.readUint64;break;case Tt.SLONG8:a=new Array(n),o=s.readInt64;break;case Tt.RATIONAL:a=new Uint32Array(n*2),o=s.readUint32;break;case Tt.SRATIONAL:a=new Int32Array(n*2),o=s.readInt32;break;case Tt.FLOAT:a=new Float32Array(n),o=s.readFloat32;break;case Tt.DOUBLE:a=new Float64Array(n),o=s.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===Tt.RATIONAL||t===Tt.SRATIONAL)for(let f=0;f<n;f+=2)a[f]=o.call(s,r+f*c),a[f+1]=o.call(s,r+(f*c+4));else for(let f=0;f<n;++f)a[f]=o.call(s,r+f*c);return t===Tt.ASCII?new TextDecoder("utf-8").decode(a):a}class q2{constructor(t,n,r){this.fileDirectory=t,this.geoKeyDirectory=n,this.nextIFDByteOffset=r}}class au extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class tT{async readRasters(t={}){const{window:n,width:r,height:a}=t;let{resX:o,resY:c,bbox:f}=t;const d=await this.getImage();let _=d;const m=await this.getImageCount(),y=d.getBoundingBox();if(n&&f)throw new Error('Both "bbox" and "window" passed.');if(r||a){if(n){const[T,S]=d.getOrigin(),[x,M]=d.getResolution();f=[T+n[0]*x,S+n[1]*M,T+n[2]*x,S+n[3]*M]}const v=f||y;if(r){if(o)throw new Error("Both width and resX passed");o=(v[2]-v[0])/r}if(a){if(c)throw new Error("Both width and resY passed");c=(v[3]-v[1])/a}}if(o||c){const v=[];for(let T=0;T<m;++T){const S=await this.getImage(T),{SubfileType:x,NewSubfileType:M}=S.fileDirectory;(T===0||x===2||M&1)&&v.push(S)}v.sort((T,S)=>T.getWidth()-S.getWidth());for(let T=0;T<v.length;++T){const S=v[T],x=(y[2]-y[0])/S.getWidth(),M=(y[3]-y[1])/S.getHeight();if(_=S,o&&o>x||c&&c>M)break}}let p=n;if(f){const[v,T]=d.getOrigin(),[S,x]=_.getResolution(d);p=[Math.round((f[0]-v)/S),Math.round((f[1]-T)/x),Math.round((f[2]-v)/S),Math.round((f[3]-T)/x)],p=[Math.min(p[0],p[2]),Math.min(p[1],p[3]),Math.max(p[0],p[2]),Math.max(p[1],p[3])]}return _.readRasters({...t,window:p})}}class Is extends tT{constructor(t,n,r,a,o={}){super(),this.source=t,this.littleEndian=n,this.bigTiff=r,this.firstIFDOffset=a,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,n){const r=this.bigTiff?4048:1024;return new R2((await this.source.fetch([{offset:t,length:typeof n<"u"?n:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const n=this.bigTiff?20:12,r=this.bigTiff?8:2;let a=await this.getSlice(t);const o=this.bigTiff?a.readUint64(t):a.readUint16(t),c=o*n+(this.bigTiff?16:6);a.covers(t,c)||(a=await this.getSlice(t,c));const f={};let d=t+(this.bigTiff?8:2);for(let y=0;y<o;d+=n,++y){const p=a.readUint16(d),v=a.readUint16(d+2),T=this.bigTiff?a.readUint64(d+4):a.readUint32(d+4);let S,x;const M=id(v),b=d+(this.bigTiff?12:8);if(M*T<=(this.bigTiff?8:4))S=os(a,v,T,b);else{const L=a.readOffset(b),O=id(v)*T;if(a.covers(L,O))S=os(a,v,T,L);else{const C=await this.getSlice(L,O);S=os(C,v,T,L)}}T===1&&WA.indexOf(p)===-1&&!(v===Tt.RATIONAL||v===Tt.SRATIONAL)?x=S[0]:x=S,f[tl[p]]=x}const _=K2(f),m=a.readOffset(t+r+n*o);return new q2(f,_,m)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(n){throw n instanceof au?new au(t):n}return this.ifdRequests[t]=(async()=>{const n=await this.ifdRequests[t-1];if(n.nextIFDByteOffset===0)throw new au(t);return this.parseFileDirectoryAt(n.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const n=await this.requestIFD(t);return new Wp(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,n=!0;for(;n;)try{await this.requestIFD(t),++t}catch(r){if(r instanceof au)n=!1;else throw r}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const n="GDAL_STRUCTURAL_METADATA_SIZE=",r=n.length+100;let a=await this.getSlice(t,r);if(n===os(a,Tt.ASCII,n.length,t)){const c=os(a,Tt.ASCII,r,t).split(`
`)[0],f=Number(c.split("=")[1].split(" ")[0])+c.length;f>r&&(a=await this.getSlice(t,f));const d=os(a,Tt.ASCII,f,t);this.ghostValues={},d.split(`
`).filter(_=>_.length>0).map(_=>_.split("=")).forEach(([_,m])=>{this.ghostValues[_]=m})}return this.ghostValues}static async fromSource(t,n,r){const a=(await t.fetch([{offset:0,length:1024}],r))[0],o=new v2(a),c=o.getUint16(0,0);let f;if(c===18761)f=!0;else if(c===19789)f=!1;else throw new TypeError("Invalid byte order value.");const d=o.getUint16(2,f);let _;if(d===42)_=!1;else if(d===43){if(_=!0,o.getUint16(4,f)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const m=_?o.getUint64(8,f):o.getUint32(4,f);return new Is(t,f,_,m,n)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class Z2 extends tT{constructor(t,n){super(),this.mainFile=t,this.overviewFiles=n,this.imageFiles=[t].concat(n),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(n=>n.parseFileDirectoryAt(n.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let n=0,r=0;for(let a=0;a<this.imageFiles.length;a++){const o=this.imageFiles[a];for(let c=0;c<this.imageCounts[a];c++){if(t===n){const f=await o.requestIFD(r);return new Wp(f.fileDirectory,f.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}n++,r++}r=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(n=>n.getImageCount()));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce((n,r)=>n+r,0),this.imageCount}}async function k2(s,t={},n){return Is.fromSource(nd(s,t),n)}async function $2(s,t){return Is.fromSource(V2(s),t)}async function Q2(s,t=[],n={},r){const a=await Is.fromSource(nd(s,n),r),o=await Promise.all(t.map(c=>Is.fromSource(nd(c,n))));return new Z2(a,o)}const us=[0,0,0],wi=5;class ng{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,jt(Fv(this.resolutions_,(a,o)=>o-a),"`resolutions` must be sorted in descending order");let n;if(!t.origins){for(let a=0,o=this.resolutions_.length-1;a<o;++a)if(!n)n=this.resolutions_[a]/this.resolutions_[a+1];else if(this.resolutions_[a]/this.resolutions_[a+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,jt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=t.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Qn(r)),jt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,jt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:xd,jt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((a,o)=>{const c=new Xu(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(r){const f=this.getTileRangeForExtentAndZ(r,o);c.minX=Math.max(f.minX,c.minX),c.maxX=Math.min(f.maxX,c.maxX),c.minY=Math.max(f.minY,c.minY),c.maxY=Math.min(f.maxY,c.maxY)}return c}):r&&this.calculateTileRanges_(r)}forEachTileCoord(t,n,r){const a=this.getTileRangeForExtentAndZ(t,n);for(let o=a.minX,c=a.maxX;o<=c;++o)for(let f=a.minY,d=a.maxY;f<=d;++f)r([n,o,f])}forEachTileCoordParentTileRange(t,n,r,a){let o,c,f,d=null,_=t[0]-1;for(this.zoomFactor_===2?(c=t[1],f=t[2]):d=this.getTileCoordExtent(t,a);_>=this.minZoom;){if(c!==void 0&&f!==void 0?(c=Math.floor(c/2),f=Math.floor(f/2),o=as(c,c,f,f,r)):o=this.getTileRangeForExtentAndZ(d,_,r),n(_,o))return!0;--_}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,n,r){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const o=t[1]*2,c=t[2]*2;return as(o,o+1,c,c+1,n)}const a=this.getTileCoordExtent(t,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,n)}return null}getTileRangeForTileCoordAndZ(t,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const a=t[0],o=t[1],c=t[2];if(n===a)return as(o,c,o,c,r);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,n-a),_=Math.floor(o*d),m=Math.floor(c*d);if(n<a)return as(_,_,m,m,r);const y=Math.floor(d*(o+1))-1,p=Math.floor(d*(c+1))-1;return as(_,y,m,p,r)}const f=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(f,n,r)}getTileRangeForExtentAndZ(t,n,r){this.getTileCoordForXYAndZ_(t[0],t[3],n,!1,us);const a=us[1],o=us[2];this.getTileCoordForXYAndZ_(t[2],t[1],n,!0,us);const c=us[1],f=us[2];return as(a,c,o,f,r)}getTileCoordCenter(t){const n=this.getOrigin(t[0]),r=this.getResolution(t[0]),a=ie(this.getTileSize(t[0]),this.tmpSize_);return[n[0]+(t[1]+.5)*a[0]*r,n[1]-(t[2]+.5)*a[1]*r]}getTileCoordExtent(t,n){const r=this.getOrigin(t[0]),a=this.getResolution(t[0]),o=ie(this.getTileSize(t[0]),this.tmpSize_),c=r[0]+t[1]*o[0]*a,f=r[1]-(t[2]+1)*o[1]*a,d=c+o[0]*a,_=f+o[1]*a;return Ns(c,f,d,_,n)}getTileCoordForCoordAndResolution(t,n,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],n,!1,r)}getTileCoordForXYAndResolution_(t,n,r,a,o){const c=this.getZForResolution(r),f=r/this.getResolution(c),d=this.getOrigin(c),_=ie(this.getTileSize(c),this.tmpSize_);let m=f*(t-d[0])/r/_[0],y=f*(d[1]-n)/r/_[1];return a?(m=Ho(m,wi)-1,y=Ho(y,wi)-1):(m=Yo(m,wi),y=Yo(y,wi)),Os(c,m,y,o)}getTileCoordForXYAndZ_(t,n,r,a,o){const c=this.getOrigin(r),f=this.getResolution(r),d=ie(this.getTileSize(r),this.tmpSize_);let _=(t-c[0])/f/d[0],m=(c[1]-n)/f/d[1];return a?(_=Ho(_,wi)-1,m=Ho(m,wi)-1):(_=Yo(_,wi),m=Yo(m,wi)),Os(r,_,m,o)}getTileCoordForCoordAndZ(t,n,r){return this.getTileCoordForXYAndZ_(t[0],t[1],n,!1,r)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,n){const r=ad(this.resolutions_,t,n||0);return qt(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,n){return ep(n,0,n.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const n=this.resolutions_.length,r=new Array(n);for(let a=this.minZoom;a<n;++a)r[a]=this.getTileRangeForExtentAndZ(t,a);this.fullTileRanges_=r}}const W2=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,J2=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class tw{constructor(t){this.gl_=t,this.program_=rd(t,J2,W2),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,n,r,a,o,c,f,d,_,m,y,p,v){const T=this.gl_;d===void 0&&(d=a),_===void 0&&(_=o),c===void 0&&(c=n),f===void 0&&(f=r),m===void 0&&(m=c),y===void 0&&(y=f),p===void 0&&(p=T.canvas.width),v===void 0&&(v=T.canvas.height),T.bindTexture(T.TEXTURE_2D,t),T.useProgram(this.program_),T.bindBuffer(T.ARRAY_BUFFER,this.positionBuffer),T.enableVertexAttribArray(this.positionLocation),T.vertexAttribPointer(this.positionLocation,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,this.texcoordBuffer),T.enableVertexAttribArray(this.texcoordLocation),T.vertexAttribPointer(this.texcoordLocation,2,T.FLOAT,!1,0,0);let S=Qf(0,p,0,v,-1,1);S=xb(S,d,_,0),S=ky(S,m,y,1),T.uniformMatrix4fv(this.matrixLocation,!1,S);let x=Sb(a/n,o/r,0);x=ky(x,c/n,f/r,1),T.uniformMatrix4fv(this.textureMatrixLocation,!1,x),T.uniform1i(this.textureLocation,0),T.drawArrays(T.TRIANGLES,0,this.positions.length/2)}}function TE(s,t,n){const r=s.createShader(t);if(r===null)throw new Error("Shader compilation failed");if(s.shaderSource(r,n),s.compileShader(r),!s.getShaderParameter(r,s.COMPILE_STATUS)){const a=s.getShaderInfoLog(r);throw a===null?new Error("Shader info log creation failed"):new Error(a)}return r}function rd(s,t,n){const r=s.createProgram(),a=TE(s,s.VERTEX_SHADER,n),o=TE(s,s.FRAGMENT_SHADER,t);if(r===null)throw new Error("Program creation failed");if(s.attachShader(r,a),s.attachShader(r,o),s.linkProgram(r),!s.getProgramParameter(r,s.LINK_STATUS))throw s.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}const ew=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,nw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,iw=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,rw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function sw(s,t,n,r){let a;return n&&n.length?a=n.shift():ME?a=new OffscreenCanvas(s||300,t||300):a=document.createElement("canvas"),s&&(a.width=s),t&&(a.height=t),a.getContext("webgl",r)}function aw(s){const t=s.canvas;t.width=1,t.height=1,s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT|s.STENCIL_BUFFER_BIT)}const vE=[];function lw(s,t,n,r,a,o,c,f,d,_,m,y,p,v){const T=Math.round(r*t),S=Math.round(r*n);s.canvas.width=T,s.canvas.height=S;let x,M;if(M=s.createTexture(),s.bindTexture(s.TEXTURE_2D,M),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),p?(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR)):(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST)),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,T,S,0,s.RGBA,m,null),x=s.createFramebuffer(),s.bindFramebuffer(s.FRAMEBUFFER,x),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,M,0),x===null)throw new Error("Could not create framebuffer");if(M===null)throw new Error("Could not create texture");if(d.length===0)return{width:T,height:S,framebuffer:x,texture:M};const b=Ui();d.forEach(function(H,rt,J){NE(b,H.extent)});let L,O,C;const F=1/a;{if(L=s.createTexture(),M===null)throw new Error("Could not create texture");O=Math.round(Yt(b)*F),C=Math.round(Le(b)*F);const H=s.getParameter(s.MAX_TEXTURE_SIZE),rt=Math.max(O,C),J=rt>H?H/rt:1,st=Math.round(O*J),dt=Math.round(C*J);s.bindTexture(s.TEXTURE_2D,L),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),p?(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR)):(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.NEAREST)),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,st,dt,0,s.RGBA,m,null);const nt=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,nt),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,L,0);const P=new tw(s);d.forEach(function(k,W,it){const A=(k.extent[0]-b[0])*F*J,Y=-(k.extent[3]-b[3])*F*J,Q=Yt(k.extent)*F*J,$=Le(k.extent)*F*J;if(s.bindFramebuffer(s.FRAMEBUFFER,nt),s.viewport(0,0,st,dt),k.clipExtent){const et=(k.clipExtent[0]-b[0])*F*J,ut=-(k.clipExtent[3]-b[3])*F*J,at=Yt(k.clipExtent)*F*J,vt=Le(k.clipExtent)*F*J;s.enable(s.SCISSOR_TEST),s.scissor(p?et:Math.round(et),p?ut:Math.round(ut),p?at:Math.round(et+at)-Math.round(et),p?vt:Math.round(ut+vt)-Math.round(ut))}P.drawImage(k.texture,k.width,k.height,_,_,k.width-2*_,k.height-2*_,p?A:Math.round(A),p?Y:Math.round(Y),p?Q:Math.round(A+Q)-Math.round(A),p?$:Math.round(Y+$)-Math.round(Y),st,dt),s.disable(s.SCISSOR_TEST)}),s.deleteFramebuffer(nt)}const K=Qn(c),X=Qn(b),Z=H=>{const rt=(H[0][0]-K[0])/o*r,J=-(H[0][1]-K[1])/o*r,st=(H[1][0]-K[0])/o*r,dt=-(H[1][1]-K[1])/o*r,nt=(H[2][0]-K[0])/o*r,P=-(H[2][1]-K[1])/o*r;return{u1:st,v1:dt,u0:rt,v0:J,u2:nt,v2:P}};s.bindFramebuffer(s.FRAMEBUFFER,x),s.viewport(0,0,T,S);{const H=[],rt=[],J=rd(s,rw,iw);s.useProgram(J);const st=s.getUniformLocation(J,"u_texture");s.bindTexture(s.TEXTURE_2D,L),s.uniform1i(st,0),f.getTriangles().forEach(function(A,Y,Q){const $=A.source,et=A.target,{u1:ut,v1:at,u0:vt,v0:At,u2:$t,v2:te}=Z(et),Dn=($[0][0]-X[0])/a/O,Pi=-($[0][1]-X[1])/a/C,ti=($[1][0]-X[0])/a/O,Bi=-($[1][1]-X[1])/a/C,We=($[2][0]-X[0])/a/O,Je=-($[2][1]-X[1])/a/C;H.push(ut,at,vt,At,$t,te),rt.push(ti,Bi,Dn,Pi,We,Je)});const dt=Qf(0,T,S,0,-1,1),nt=s.getUniformLocation(J,"u_matrix");s.uniformMatrix4fv(nt,!1,dt);const P=s.getAttribLocation(J,"a_position"),k=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,k),s.bufferData(s.ARRAY_BUFFER,new Float32Array(H),s.STATIC_DRAW),s.vertexAttribPointer(P,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(P);const W=s.getAttribLocation(J,"a_texcoord"),it=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,it),s.bufferData(s.ARRAY_BUFFER,new Float32Array(rt),s.STATIC_DRAW),s.vertexAttribPointer(W,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(W),s.drawArrays(s.TRIANGLES,0,H.length/2)}if(y){const H=rd(s,nw,ew);s.useProgram(H);const rt=Qf(0,T,S,0,-1,1),J=s.getUniformLocation(H,"u_matrix");s.uniformMatrix4fv(J,!1,rt);const st=Array.isArray(y)?y:[0,0,0,255],dt=s.getUniformLocation(H,"u_val");s.uniform4fv(dt,st);const nt=s.getAttribLocation(H,"a_position"),P=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,P),s.vertexAttribPointer(nt,2,s.FLOAT,!1,0,0),s.enableVertexAttribArray(nt);const k=f.getTriangles().reduce(function(W,it){const A=it.target,{u1:Y,v1:Q,u0:$,v0:et,u2:ut,v2:at}=Z(A);return W.concat([Y,Q,$,et,$,et,ut,at,ut,at,Y,Q])},[]);s.bufferData(s.ARRAY_BUFFER,new Float32Array(k),s.STATIC_DRAW),s.drawArrays(s.LINES,0,k.length/2)}return{width:T,height:S,framebuffer:x,texture:M}}class ow extends hl{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=t.renderEdges!==void 0?t.renderEdges:!1,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const n=t.sourceProj,r=n.getExtent(),a=t.sourceTileGrid.getExtent();this.clipExtent_=n.canWrapX()?a?Ie(r,a):r:a;const o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),c=this.targetTileGrid_.getExtent();let f=this.sourceTileGrid_.getExtent();const d=c?Ie(o,c):o;if(il(d)===0){this.state=tt.EMPTY;return}r&&(f?f=Ie(f,r):f=r);const _=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),m=t.targetProj,y=Ap(n,m,d,_);if(!isFinite(y)||y<=0){this.state=tt.EMPTY;return}const p=t.errorThreshold!==void 0?t.errorThreshold:Cp;if(this.triangulation_=new wp(n,m,d,f,y*p,_,t.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=tt.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(y);let v=this.triangulation_.calculateSourceExtent();if(f&&(n.canWrapX()?(v[1]=qt(v[1],f[1],f[3]),v[3]=qt(v[3],f[1],f[3])):v=Ie(v,f)),!il(v))this.state=tt.EMPTY;else{let T=0,S=0;n.canWrapX()&&(T=Yt(r),S=Math.floor((v[0]-r[0])/T)),GE(v.slice(),n).forEach(M=>{const b=this.sourceTileGrid_.getTileRangeForExtentAndZ(M,this.sourceZ_),L=t.getTileFunction;for(let O=b.minX;O<=b.maxX;O++)for(let C=b.minY;C<=b.maxY;C++){const F=L(this.sourceZ_,O,C,this.pixelRatio_);if(F){const K=S*T;this.sourceTiles_.push({tile:F,offset:K})}}++S}),this.sourceTiles_.length===0&&(this.state=tt.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let n=!1;if(this.sourceTiles_.forEach(O=>{const C=O.tile;if(!C||C.getState()!==tt.LOADED)return;const F=C.getSize(),K=this.gutter_;let X;const Z=Wf(C.getData());Z?X=Z:(n=!0,X=Pb(Ds(C.getData())));const H=[F[0]+2*K,F[1]+2*K],rt=X instanceof Float32Array,J=H[0]*H[1],st=rt?Float32Array:Uint8ClampedArray,dt=new st(X.buffer),nt=st.BYTES_PER_ELEMENT,P=nt*dt.length/J,k=dt.byteLength/H[1],W=Math.floor(k/nt/H[0]),it=this.sourceTileGrid_.getTileCoordExtent(C.tileCoord);it[0]+=O.offset,it[2]+=O.offset;const A=this.clipExtent_?.slice();A&&(A[0]+=O.offset,A[2]+=O.offset),t.push({extent:it,clipExtent:A,data:dt,dataType:st,bytesPerPixel:P,pixelSize:H,bandCount:W})}),this.sourceTiles_.length=0,t.length===0){this.state=tt.ERROR,this.changed();return}const r=this.wrappedTileCoord_[0],a=this.targetTileGrid_.getTileSize(r),o=typeof a=="number"?a:a[0],c=typeof a=="number"?a:a[1],f=o*this.pixelRatio_,d=c*this.pixelRatio_,_=this.targetTileGrid_.getResolution(r),m=this.sourceTileGrid_.getResolution(this.sourceZ_),y=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),p=t[0].bandCount,v=new t[0].dataType(p*f*d),T=sw(f,d,vE,{premultipliedAlpha:!1,antialias:!1});let S;const x=T.RGBA;let M;t[0].dataType==Float32Array?(M=T.FLOAT,T.getExtension("WEBGL_color_buffer_float"),T.getExtension("OES_texture_float"),T.getExtension("EXT_float_blend"),S=T.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(M=T.UNSIGNED_BYTE,S=this.interpolate);const b=4,L=Math.ceil(p/b);for(let O=L-1;O>=0;--O){const C=[];for(let st=0,dt=t.length;st<dt;++st){const nt=t[st],P=nt.pixelSize,k=P[0],W=P[1],it=new nt.dataType(b*k*W),A=nt.data;let Y=O*b;for(let $=0,et=it.length;$<et;$+=b)it[$]=A[Y],it[$+1]=A[Y+1],it[$+2]=A[Y+2],it[$+3]=A[Y+3],Y+=p;const Q=T.createTexture();T.bindTexture(T.TEXTURE_2D,Q),S?(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR)):(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST)),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texImage2D(T.TEXTURE_2D,0,x,k,W,0,x,M,it),C.push({extent:nt.extent,clipExtent:nt.clipExtent,texture:Q,width:k,height:W})}const{framebuffer:F,width:K,height:X}=lw(T,o,c,this.pixelRatio_,m,_,y,this.triangulation_,C,this.gutter_,M,this.renderEdges_,S),Z=K,H=X*b,rt=new t[0].dataType(Z*H);T.bindFramebuffer(T.FRAMEBUFFER,F),T.readPixels(0,0,K,X,T.RGBA,M,rt);let J=O*b;for(let st=0,dt=rt.length;st<dt;st+=b){const nt=(Z-1-(st/H|0))*H+st%H;v[J]=rt[nt],v[J+1]=rt[nt+1],v[J+2]=rt[nt+2],v[J+3]=rt[nt+3],J+=p}}if(aw(T),vE.push(T.canvas),n){const O=Ee(o,c),C=new ImageData(v,o);O.putImageData(C,0,0),this.reprojData_=O.canvas}else this.reprojData_=v;this.reprojSize_=[Math.round(f),Math.round(d)],this.state=tt.LOADED,this.changed()}load(){if(this.state!==tt.IDLE&&this.state!==tt.ERROR)return;this.state=tt.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r!==tt.IDLE&&r!==tt.LOADING)return;t++;const a=Ut(n,_t.CHANGE,()=>{const o=n.getState();(o==tt.LOADED||o==tt.ERROR||o==tt.EMPTY)&&(kt(a),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(a)}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n}){n.getState()==tt.IDLE&&n.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(kt),this.sourcesListenerKeys_=null}}function ig(s){let t=s.getDefaultTileGrid();return t||(t=hw(s),s.setDefaultTileGrid(t)),t}function uw(s,t,n){const r=t[0],a=s.getTileCoordCenter(t),o=Hu(n);if(!nl(o,a)){const c=Yt(o),f=Math.ceil((o[0]-a[0])/c);return a[0]+=c*f,s.getTileCoordForCoordAndZ(a,r)}return t}function cw(s,t,n,r){r=r!==void 0?r:"top-left";const a=nT(s,t,n);return new ng({extent:s,origin:lR(s,r),resolutions:a,tileSize:n})}function eT(s){const t=s||{},n=t.extent||Ae("EPSG:3857").getExtent(),r={extent:n,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:nT(n,t.maxZoom,t.tileSize,t.maxResolution)};return new ng(r)}function nT(s,t,n,r){t=t!==void 0?t:wx,n=ie(n!==void 0?n:xd);const a=Le(s),o=Yt(s);r=r>0?r:Math.max(o/n[0],a/n[1]);const c=t+1,f=new Array(c);for(let d=0;d<c;++d)f[d]=r/Math.pow(2,d);return f}function hw(s,t,n,r){const a=Hu(s);return cw(a,t,n,r)}function Hu(s){s=Ae(s);let t=s.getExtent();if(!t){const n=180*Cs.degrees/s.getMetersPerUnit();t=Ns(-n,-n,n,n)}return t}class fw extends Wn{constructor(t){super(),this.projection=Ae(t.projection),this.attributions_=RE(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,a){n.viewResolver=r,n.viewRejector=a})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=RE(t),this.changed()}setState(t){this.state_=t,this.changed()}}function RE(s){return s?typeof s=="function"?s:(Array.isArray(s)||(s=[s]),t=>s):null}class iT extends fw{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const n=[256,256];this.tileGrid&&ie(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=t.key||zt(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const n=t?this.getTileGridForProjection(t):this.tileGrid;return n?n.getResolutions():null}getTile(t,n,r,a,o){return Mt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:ig(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,n,r){const a=this.getTileGridForProjection(r),o=this.getTilePixelRatio(n),c=ie(a.getTileSize(t),this.tmpSize);return o==1?c:vS(c,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,n){const r=n!==void 0?n:this.getProjection(),a=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=uw(a,t,r)),$b(t,a)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class rT extends Ni{constructor(t,n){super(t),this.tile=n}}const ws={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class dw extends iT{constructor(t){const n=t.projection===void 0?"EPSG:3857":t.projection;let r=t.tileGrid;r===void 0&&n&&(r=eT({extent:Hu(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:n,tileGrid:r,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.tileSize_=t.tileSize?ie(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=t.bandCount===void 0?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const n=this.getTileGrid();return n?ie(n.getTileSize(t)):[256,256]}getGutterForProjection(t){const n=this.getProjection();return(!n||xs(n,t))&&!this.transformMatrix?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,n,r,a,o){const c=this.tileGrid||this.getTileGridForProjection(o||a),f=Math.max.apply(null,c.getResolutions().map((v,T)=>{const S=ie(c.getTileSize(T)),x=this.getTileSize(T);return Math.max(x[0]/S[0],x[1]/S[1])})),d=this.getTileGridForProjection(a),_=[t,n,r],m=this.getTileCoordForTileUrlFunction(_,a),y=Object.assign({sourceProj:o||a,sourceTileGrid:c,targetProj:a,targetTileGrid:d,tileCoord:_,wrappedTileCoord:m,pixelRatio:f,gutter:this.gutter_,getTileFunction:(v,T,S,x)=>this.getTile(v,T,S,x),transformMatrix:this.transformMatrix},this.tileOptions),p=new ow(y);return p.key=this.getKey(),p}getTile(t,n,r,a,o){const c=this.getProjection();if(o&&(c&&!xs(c,o)||this.transformMatrix))return this.getReprojTile_(t,n,r,o,c);const f=this.getTileSize(t),d=this.loader_,_=new AbortController,m={signal:_.signal,crossOrigin:this.crossOrigin_},y=this.getTileCoordForTileUrlFunction([t,n,r]);if(!y)return null;const p=y[0],v=y[1],T=y[2],S=this.getTileGrid()?.getFullTileRange(p);S&&(m.maxY=S.getHeight()-1);function x(){return AE(function(){return d(p,v,T,m)})}const M=Object.assign({tileCoord:[t,n,r],loader:x,size:f,controller:_},this.tileOptions),b=new hl(M);return b.key=this.getKey(),b.addEventListener(_t.CHANGE,this.handleTileChange_),b}handleTileChange_(t){const n=t.target,r=zt(n),a=n.getState();let o;a==tt.LOADING?(this.tileLoadingKeys_[r]=!0,o=ws.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=a==tt.ERROR?ws.TILELOADERROR:a==tt.LOADED?ws.TILELOADEND:void 0),o&&this.dispatchEvent(new rT(o,n))}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||xs(n,t))&&!this.transformMatrix)return this.tileGrid;const r=zt(t);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=ig(t)),this.tileGridForProjection_[r]}setTileGridForProjection(t,n){const r=Ae(t);if(r){const a=zt(r);a in this.tileGridForProjection_||(this.tileGridForProjection_[a]=n)}}}function gw(s){return((s.fileDirectory.NewSubfileType||0)&4)===4}function _w(s,t){if(!s)return!1;if(s===!0)return!0;if(t.getSamplesPerPixel()!==3)return!1;const n=t.fileDirectory.PhotometricInterpretation,r=Fe;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const xE="STATISTICS_MAXIMUM",SE="STATISTICS_MINIMUM",Gf=256;let Pf;function mw(){return Pf||(Pf=new S2),Pf}function yw(s){try{return s.getBoundingBox(!0)}catch{return[0,0,s.getWidth(),s.getHeight()]}}function Ew(s){try{return s.getOrigin().slice(0,2)}catch{return[0,s.getHeight()]}}function pw(s,t){try{return s.getResolution(t)}catch{return[t.getWidth()/s.getWidth(),t.getHeight()/s.getHeight()]}}function Tw(s){const t=s.geoKeys;if(!t)return null;if(t.ProjectedCSTypeGeoKey&&t.ProjectedCSTypeGeoKey!==32767){const n="EPSG:"+t.ProjectedCSTypeGeoKey;let r=Ae(n);if(!r){const a=hy(t.ProjLinearUnitsGeoKey);a&&(r=new rl({code:n,units:a}))}return r}if(t.GeographicTypeGeoKey&&t.GeographicTypeGeoKey!==32767){const n="EPSG:"+t.GeographicTypeGeoKey;let r=Ae(n);if(!r){const a=hy(t.GeogAngularUnitsGeoKey);a&&(r=new rl({code:n,units:a}))}return r}return null}function vw(s){return s.getImageCount().then(function(t){const n=new Array(t);for(let r=0;r<t;++r)n[r]=s.getImage(r);return Promise.all(n)})}function Rw(s,t){let n;return s.blob?n=$2(s.blob):s.overviews?n=Q2(s.url,s.overviews,t):n=k2(s.url,t),n.then(vw)}function Qa(s,t,n,r,a){if(Array.isArray(s)){const o=s.length;if(!Array.isArray(t)||o!=t.length){const c=new Error(r);throw a(c),c}for(let c=0;c<o;++c)Qa(s[c],t[c],n,r,a);return}if(t=t,Math.abs(s-t)>n*s)throw new Error(r)}function xw(s){return s instanceof Int8Array?-128:s instanceof Int16Array?-32768:s instanceof Int32Array?-2147483648:s instanceof Float32Array?12e-39:0}function Sw(s){return s instanceof Int8Array?127:s instanceof Uint8Array||s instanceof Uint8ClampedArray?255:s instanceof Int16Array?32767:s instanceof Uint16Array?65535:s instanceof Int32Array?2147483647:s instanceof Uint32Array?4294967295:s instanceof Float32Array?34e37:255}class bw extends dw{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:t.interpolate!==!1,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const n=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(n),this.sourceMasks_=new Array(n),this.resolutionFactors_=new Array(n),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=t.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map(o=>o.url).join(","));const r=this,a=new Array(n);for(let o=0;o<n;++o)a[o]=Rw(this.sourceInfo_[o],this.sourceOptions_);Promise.all(a).then(function(o){r.configure_(o)}).catch(function(o){cy(o),r.error_=o,r.setState("error")})}getError(){return this.error_}determineProjection(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const a=n[r],o=Tw(a);if(o){this.projection=o;break}}}determineTransformMatrix(t){const n=t[0];for(let r=n.length-1;r>=0;--r){const o=n[r].fileDirectory.ModelTransformation;if(o){const[c,f,d,_,m,y,p,v]=o,T=al(al([1/Math.sqrt(c*c+m*m),0,0,-1/Math.sqrt(f*f+y*y),_,v],[c,m,f,y,0,0]),[1,0,0,1,-_,-v]);this.transformMatrix=T,this.addAlpha_=!0;break}}}configure_(t){let n,r,a,o,c;const f=new Array(t.length),d=new Array(t.length),_=new Array(t.length);let m=0;const y=t.length;for(let x=0;x<y;++x){const M=[],b=[];t[x].forEach(Z=>{gw(Z)?b.push(Z):M.push(Z)});const L=M.length;if(b.length>0&&b.length!==L)throw new Error(`Expected one mask per image found ${b.length} masks and ${L} images`);let O,C;const F=new Array(L),K=new Array(L),X=new Array(L);d[x]=new Array(L),_[x]=new Array(L);for(let Z=0;Z<L;++Z){const H=M[Z],rt=H.getGDALNoData();_[x][Z]=H.getGDALMetadata(0),d[x][Z]=rt;const J=this.sourceInfo_[x].bands;f[x]=J?J.length:H.getSamplesPerPixel();const st=L-(Z+1);O||(O=yw(H)),C||(C=Ew(H));const dt=pw(H,M[0]);X[st]=dt[0];const nt=[H.getTileWidth(),H.getTileHeight()];nt[0]!==nt[1]&&nt[1]<Gf&&(nt[0]=Gf,nt[1]=Gf),F[st]=nt;const P=dt[0]/Math.abs(dt[1]);K[st]=[nt[0],nt[1]/P]}if(n?Ie(n,O,n):n=O,!r)r=C;else{const Z=`Origin mismatch for source ${x}, got [${C}] but expected [${r}]`;Qa(r,C,0,Z,this.viewRejector)}if(!c)c=X,this.resolutionFactors_[x]=1;else{c.length-m>X.length&&(m=c.length-X.length);const Z=c[c.length-1]/X[X.length-1];this.resolutionFactors_[x]=Z;const H=X.map(J=>J*=Z),rt=`Resolution mismatch for source ${x}, got [${H}] but expected [${c}]`;Qa(c.slice(m,c.length),H,.02,rt,this.viewRejector)}a?Qa(a.slice(m,a.length),K,.01,`Tile size mismatch for source ${x}`,this.viewRejector):a=K,o?Qa(o.slice(m,o.length),F,0,`Tile size mismatch for source ${x}`,this.viewRejector):o=F,this.sourceImagery_[x]=M.reverse(),this.sourceMasks_[x]=b.reverse()}for(let x=0,M=this.sourceImagery_.length;x<M;++x){const b=this.sourceImagery_[x];for(;b.length<c.length;)b.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=f,this.nodataValues_=d,this.metadata_=_;t:for(let x=0;x<y;++x){if(this.sourceInfo_[x].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[x].length){this.addAlpha_=!0;break}const M=d[x],b=this.sourceInfo_[x].bands;if(b){for(let L=0;L<b.length;++L)if(M[b[L]-1]!==null){this.addAlpha_=!0;break t}continue}for(let L=0;L<M.length;++L)if(M[L]!==null){this.addAlpha_=!0;break t}}let p=this.addAlpha_?1:0;for(let x=0;x<y;++x)p+=f[x];this.bandCount=p;const v=new ng({extent:n,minZoom:m,origin:r,resolutions:c,tileSizes:a});this.tileGrid=v,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const T=1;c.length===2?c=[c[0],c[1],c[1]/2]:c.length===1&&(c=[c[0]*2,c[0],c[0]/2]);let S=n;if(this.transformMatrix){const x=yd(En(),this.transformMatrix.slice()),M=KE(b=>De(x,b));S=cR(n,M)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:c,center:Eu(cr(S),this.projection),extent:qE(S,this.projection),zoom:T})}loadTile_(t,n,r,a){const o=this.getTileSize(t),c=this.sourceImagery_.length,f=new Array(c*2),d=this.nodataValues_,_=this.sourceInfo_,m=mw();for(let y=0;y<c;++y){const p=_[y],v=this.resolutionFactors_[y],T=[Math.round(n*(o[0]*v)),Math.round(r*(o[1]*v)),Math.round((n+1)*(o[0]*v)),Math.round((r+1)*(o[1]*v))],S=this.sourceImagery_[y][t];let x;p.bands&&(x=p.bands.map(function(C){return C-1}));let M;"nodata"in p&&p.nodata!==null?M=p.nodata:x?M=x.map(function(C){return d[y][C]}):M=d[y];const b={window:T,width:o[0],height:o[1],samples:x,fillValue:M,pool:m,interleave:!1,signal:a.signal};_w(this.convertToRGB_,S)?f[y]=S.readRGB(b):f[y]=S.readRasters(b);const L=c+y,O=this.sourceMasks_[y][t];if(!O){f[L]=Promise.resolve(null);continue}f[L]=O.readRasters({window:T,width:o[0],height:o[1],samples:[0],pool:m,interleave:!1})}return Promise.all(f).then(this.composeTile_.bind(this,o)).catch(function(y){throw cy(y),y})}composeTile_(t,n){const r=this.metadata_,a=this.sourceInfo_,o=this.sourceImagery_.length,c=this.bandCount,f=this.samplesPerPixel_,d=this.nodataValues_,_=this.normalize_,m=this.addAlpha_,y=t[0]*t[1],p=y*c;let v;_?v=new Uint8Array(p):v=new Float32Array(p);let T=0;for(let S=0;S<y;++S){let x=m;for(let M=0;M<o;++M){const b=a[M];let L=b.min,O=b.max,C,F;if(_){const K=r[M][0];L===void 0&&(K&&SE in K?L=parseFloat(K[SE]):L=xw(n[M][0])),O===void 0&&(K&&xE in K?O=parseFloat(K[xE]):O=Sw(n[M][0])),C=255/(O-L),F=-L*C}for(let K=0;K<f[M];++K){const X=n[M][K][S];let Z;if(_?Z=qt(C*X+F,0,255):Z=X,!m)v[T]=Z;else{let H=b.nodata;if(H===void 0){let J;b.bands?J=b.bands[K]-1:J=K,H=d[M][J]}const rt=isNaN(H);(!rt&&X!==H||rt&&!isNaN(X))&&(x=!1,v[T]=Z)}T++}if(!x){const K=o+M,X=n[K];X&&!X[0][S]&&(x=!0)}}m&&(x||(v[T]=255),T++)}return v}}const Aw=/\{z\}/g,ww=/\{x\}/g,Cw=/\{y\}/g,Mw=/\{-y\}/g;function Dw(s,t,n,r,a){return s.replace(Aw,t.toString()).replace(ww,n.toString()).replace(Cw,r.toString()).replace(Mw,function(){if(a===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(a-r).toString()})}function Ow(s){const t=[];let n=/\{([a-z])-([a-z])\}/.exec(s);if(n){const r=n[1].charCodeAt(0),a=n[2].charCodeAt(0);let o;for(o=r;o<=a;++o)t.push(s.replace(n[0],String.fromCharCode(o)));return t}if(n=/\{(\d+)-(\d+)\}/.exec(s),n){const r=parseInt(n[2],10);for(let a=parseInt(n[1],10);a<=r;a++)t.push(s.replace(n[0],a.toString()));return t}return t.push(s),t}function Lw(s,t){return function(n,r,a){if(!n)return;let o;const c=n[0];if(t){const f=t.getFullTileRange(c);f&&(o=f.getHeight()-1)}return Dw(s,c,n[1],n[2],o)}}function Iw(s,t){const n=s.length,r=new Array(n);for(let a=0;a<n;++a)r[a]=Lw(s[a],t);return Nw(r)}function Nw(s){return s.length===1?s[0]:function(t,n,r){if(!t)return;const a=Zb(t),o=vs(a,s.length);return s[o](t,n,r)}}class rg extends iT{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===rg.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const n=t.target,r=zt(n),a=n.getState();let o;a==tt.LOADING?(this.tileLoadingKeys_[r]=!0,o=ws.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=a==tt.ERROR?ws.TILELOADERROR:a==tt.LOADED?ws.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new rT(o,n))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,n){this.tileUrlFunction=t,typeof n<"u"?this.setKey(n):this.changed()}setUrl(t){const n=Ow(t);this.urls=n,this.setUrls(n)}setUrls(t){this.urls=t;const n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Iw(t,this.tileGrid),n):this.setKey(n)}tileUrlFunction(t,n,r){}}class Uw extends rg{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:zw,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Fu,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!xs(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const n=this.getProjection();if(this.tileGrid&&(!n||xs(n,t)))return this.tileGrid;const r=zt(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=ig(t)),this.tileGridForProjection[r]}createTile_(t,n,r,a,o,c){const f=[t,n,r],d=this.getTileCoordForTileUrlFunction(f,o),_=d?this.tileUrlFunction(d,a,o):void 0,m=new this.tileClass(f,_!==void 0?tt.IDLE:tt.EMPTY,_!==void 0?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=c,m.addEventListener(_t.CHANGE,this.handleTileChange.bind(this)),m}getTile(t,n,r,a,o){const c=this.getProjection();if(!c||!o||xs(c,o))return this.getTileInternal(t,n,r,a,c||o);const f=[t,n,r],d=this.getKey(),_=this.getTileGridForProjection(c),m=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(f,o),p=new Yd(c,_,o,m,f,y,this.getTilePixelRatio(a),this.getGutter(),(v,T,S,x)=>this.getTileInternal(v,T,S,x,c),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=d,p}getTileInternal(t,n,r,a,o){const c=this.getKey();return this.createTile_(t,n,r,a,o,c)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,n){const r=Ae(t);if(r){const a=zt(r);a in this.tileGridForProjection||(this.tileGridForProjection[a]=n)}}}function zw(s,t){s.getImage().src=t}class sT extends Uw{constructor(t){t=t||{};const n=t.projection!==void 0?t.projection:"EPSG:3857",r=t.tileGrid!==void 0?t.tileGrid:eT({extent:Hu(n),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Gw='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Pw extends sT{constructor(t){t=t||{};let n;t.attributions!==void 0?n=t.attributions:n=[Gw];const r=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",a=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:r,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:a,wrapX:t.wrapX,zDirection:t.zDirection})}}const Bf="units",Bw=[1,2,5],Va=25.4/.28;class Fw extends Lu{constructor(t){t=t||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:t.render,target:t.target}),this.on,this.once,this.un;const r=t.className!==void 0?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+vl,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=t.minWidth!==void 0?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Bf,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(Bf)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(Bf,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=t.center,r=t.projection,a=this.getUnits(),o=a=="degrees"?"degrees":"m";let c=mu(r,t.resolution,n,o);const f=this.minWidth_*(this.dpi_||Va)/Va,d=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Va)/Va:void 0;let _=f*c,m="";if(a=="degrees"){const L=Cs.degrees;_*=L,_<L/60?(m="",c*=3600):_<L?(m="",c*=60):m=""}else if(a=="imperial")_<.9144?(m="in",c/=.0254):_<1609.344?(m="ft",c/=.3048):(m="mi",c/=1609.344);else if(a=="nautical")c/=1852,m="NM";else if(a=="metric")_<1e-6?(m="nm",c*=1e9):_<.001?(m="m",c*=1e6):_<1?(m="mm",c*=1e3):_<1e3?m="m":(m="km",c/=1e3);else if(a=="us")_<.9144?(m="in",c*=39.37):_<1609.344?(m="ft",c/=.30480061):(m="mi",c/=1609.3472);else throw new Error("Invalid units");let y=3*Math.floor(Math.log(f*c)/Math.log(10)),p,v,T,S=0,x,M;for(;;){T=Math.floor(y/3);const L=Math.pow(10,T);if(p=Bw[(y%3+3)%3]*L,v=Math.round(p/c),isNaN(v)){this.element.style.display="none",this.renderedVisible_=!1;return}if(d!==void 0&&v>=d){p=S,v=x,T=M;break}else if(v>=f)break;S=p,x=v,M=T,++y}const b=this.scaleBar_?this.createScaleBar(v,p,m):p.toFixed(T<0?-T:0)+" "+m;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=v&&(this.innerElement_.style.width=v+"px",this.renderedWidth_=v),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,n,r){const a=this.getScaleForResolution(),o=a<1?Math.round(1/a).toLocaleString()+" : 1":"1 : "+Math.round(a).toLocaleString(),c=this.scaleBarSteps_,f=t/c,d=[this.createMarker("absolute")];for(let m=0;m<c;++m){const y=m%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";d.push(`<div><div class="ol-scale-singlebar ${y}" style="width: ${f}px;"></div>`+this.createMarker("relative")+(m%2===0||c===2?this.createStepText(m,t,!1,n,r):"")+"</div>")}return d.push(this.createStepText(c,t,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+o+"</div>":"")+d.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${t==="absolute"?3:-10}px;"></div>`}createStepText(t,n,r,a,o){const f=(t===0?0:Math.round(a/this.scaleBarSteps_*t*100)/100)+(t===0?"":" "+o),d=t===0?-3:n/this.scaleBarSteps_*-1,_=t===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${d}px;text-align: ${t===0?"left":"center"};min-width: ${_}px;left: ${r?n+"px":"unset"};">`+f+"</div>"}getScaleForResolution(){const t=mu(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||Va,r=1e3/25.4;return t*r*n}render(t){const n=t.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const Xw=[115.367526,-8.129998],Yw=18,aT="osm",lT="satellite",_s="geotiff",oT=[{id:"osm",type:aT,label:"OpenStreetMap",layerOrder:0,layerVisibilityDefault:!0,metadata:{}},{id:"satellite",type:lT,label:"Satellite",layerOrder:1,layerVisibilityDefault:!1,metadata:{tileUrl:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributionUrl:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",attributionName:"ArcGIS - World Imagery",maxZoom:18}},{id:"geotiff1",type:_s,label:"Dinacon 2025 - Ben/Andy - Drone Scan Land (higher)",layerOrder:2,layerVisibilityDefault:!0,metadata:{url:"https://dinamap-les.s3.amazonaws.com/geotiff/Segara-Lestari-Drone-Scan-higher-altitude-2025-07-16-orthophoto.raw.cog.tif",contributedOn:"2025-07-16",contributedBy:"Ben / Andy"}},{id:"geotiff2",type:_s,label:"Dinacon 2025 - Ben/Andy - Drone Scan Land (lower)",layerOrder:3,layerVisibilityDefault:!0,metadata:{url:"https://dinamap-les.s3.amazonaws.com/geotiff/Segara-Lestari-Drone-Scan-lower-altitude-2025-07-16-orthophoto.raw.cog.tif",contributedOn:"2025-07-16",contributedBy:"Ben / Andy"}},{id:"geotiff3",type:_s,label:"Dinacon 2025 - Logan - Rough Drone Sea Scan 1",layerOrder:4,layerVisibilityDefault:!0,metadata:{url:"https://dinamap-les.s3.amazonaws.com/geotiff/2025-07-dinacon-drone-sea-1.cog.tif",contributedOn:"2025-07-09",contributedBy:"Logan"}},{id:"geotiff4",type:_s,label:"Dinacon 2025 - Logan - Rough Drone Sea Scan 2",layerOrder:5,layerVisibilityDefault:!0,metadata:{url:"https://dinamap-les.s3.amazonaws.com/geotiff/2025-07-dinacon-drone-sea-2.cog.tif",contributedOn:"2025-07-09",contributedBy:"Logan"}},{id:"geotiff5",type:_s,label:"Dinacon 2025 - Alison - Coral Tables Segara Lestari",layerOrder:6,layerVisibilityDefault:!0,metadata:{url:"https://dinamap-les.s3.amazonaws.com/geotiff/2025-07-dinacon-alison-coral-tables.cog.tif",contributedOn:"2025-07-09",contributedBy:"Alison"}}],Hw=oT.toSorted((s,t)=>{if(s.layerOrder===t.layerOrder)throw`Layer config error: layers ${s.id} and ${t.id} cannot have the same layerOrder`;return s.layerOrder-t.layerOrder}),jw=()=>Hw,uT={};oT.forEach(s=>uT[s.id]=s.layerVisibilityDefault);const Vw=()=>uT,Kw=({homeLatLng:s,homeZoom:t,layerConfigs:n,layerVisibility:r})=>{const a=ms.useRef(),[o,c]=ms.useState(null);return ms.useEffect(()=>{const f=n.map(_=>{const m=r[_.id];if(_.type===aT)return new uE({source:new Pw,visible:m});if(_.type===lT){const{tileUrl:y,attributionUrl:p,attributionName:v,maxZoom:T}=_.metadata;return new uE({source:new sT({url:y,attributions:`Tiles  <a href=${p}>${v}</a>`,maxZoom:T}),visible:m})}else{if(_.type===_s)return console.log(_),new Gp({visible:m,source:new bw({sources:[{url:_.metadata.url}]})});throw`Unknown layer config type: ${_.type} (id: ${_.id})`}}),d=new vb({target:a.current,layers:f,view:new Cn({center:KR(s),zoom:t,maxZoom:void 0}),controls:ip().extend([new Fw({units:"metric",bar:!0,steps:6,minWidth:180})])});return c(d),()=>d.setTarget(void 0)},[]),ms.useEffect(()=>{o&&n.forEach(({id:f,layerOrder:d})=>{o.getLayers().getArray()[d].setVisible(r[f])})},[r,o]),Mn.jsx("div",{style:{height:"100vh",width:"100%"},ref:a})},qw=({layerConfigs:s,layerVisibility:t,setLayerVisibility:n})=>{const r=a=>{n(o=>({...o,[a]:!o[a]}))};return Mn.jsx("div",{className:"layer-toggle",children:s.map(({id:a,label:o})=>Mn.jsxs("div",{onClick:()=>r(a),children:[Mn.jsx("input",{type:"checkbox",checked:t[a],readOnly:!0}),Mn.jsx("label",{children:o})]},`layer-label-${a}`))})};function Zw(){const s=jw(),[t,n]=ms.useState(Vw());return Mn.jsxs("div",{className:"App",children:[Mn.jsx(Kw,{homeLatLng:Xw,homeZoom:Yw,layerConfigs:s,layerVisibility:t}),Mn.jsx(qw,{layerConfigs:s,layerVisibility:t,setLayerVisibility:n})]})}Gv.createRoot(document.getElementById("root")).render(Mn.jsx(ms.StrictMode,{children:Mn.jsx(Zw,{})}));export{$w as L,Qw as a,bE as g};
