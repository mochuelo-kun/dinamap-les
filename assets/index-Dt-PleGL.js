const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-in9isEBO.js","assets/basedecoder-B2c5_Eok.js","assets/lzw-_aCqfs4w.js","assets/jpeg-CKYXsxFN.js","assets/deflate-B9JhHpvg.js","assets/pako.esm-Cram60i4.js","assets/packbits-DDWKfGV_.js","assets/lerc-BoF60oRA.js","assets/webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function RR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var f0={exports:{}},Pc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT;function dI(){if(yT)return Pc;yT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var u in s)u!=="key"&&(a[u]=s[u])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return Pc.Fragment=e,Pc.jsx=t,Pc.jsxs=t,Pc}var _T;function gI(){return _T||(_T=1,f0.exports=dI()),f0.exports}var vt=gI(),d0={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function mI(){if(ET)return Fe;ET=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),p=Symbol.iterator;function _(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function S(I,K,k){this.props=I,this.context=K,this.refs=b,this.updater=k||E}S.prototype.isReactComponent={},S.prototype.setState=function(I,K){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,K,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function R(){}R.prototype=S.prototype;function v(I,K,k){this.props=I,this.context=K,this.refs=b,this.updater=k||E}var D=v.prototype=new R;D.constructor=v,x(D,S.prototype),D.isPureReactComponent=!0;var A=Array.isArray,C={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function z(I,K,k,re,de,xe){return k=xe.ref,{$$typeof:n,type:I,key:K,ref:k!==void 0?k:null,props:xe}}function U(I,K){return z(I.type,K,void 0,void 0,void 0,I.props)}function Y(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function $(I){var K={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(k){return K[k]})}var le=/\/+/g;function ie(I,K){return typeof I=="object"&&I!==null&&I.key!=null?$(""+I.key):K.toString(36)}function ce(){}function fe(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(ce,ce):(I.status="pending",I.then(function(K){I.status==="pending"&&(I.status="fulfilled",I.value=K)},function(K){I.status==="pending"&&(I.status="rejected",I.reason=K)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function ue(I,K,k,re,de){var xe=typeof I;(xe==="undefined"||xe==="boolean")&&(I=null);var me=!1;if(I===null)me=!0;else switch(xe){case"bigint":case"string":case"number":me=!0;break;case"object":switch(I.$$typeof){case n:case e:me=!0;break;case g:return me=I._init,ue(me(I._payload),K,k,re,de)}}if(me)return de=de(I),me=re===""?"."+ie(I,0):re,A(de)?(k="",me!=null&&(k=me.replace(le,"$&/")+"/"),ue(de,K,k,"",function(bt){return bt})):de!=null&&(Y(de)&&(de=U(de,k+(de.key==null||I&&I.key===de.key?"":(""+de.key).replace(le,"$&/")+"/")+me)),K.push(de)),1;me=0;var Pe=re===""?".":re+":";if(A(I))for(var He=0;He<I.length;He++)re=I[He],xe=Pe+ie(re,He),me+=ue(re,K,k,xe,de);else if(He=_(I),typeof He=="function")for(I=He.call(I),He=0;!(re=I.next()).done;)re=re.value,xe=Pe+ie(re,He++),me+=ue(re,K,k,xe,de);else if(xe==="object"){if(typeof I.then=="function")return ue(fe(I),K,k,re,de);throw K=String(I),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return me}function P(I,K,k){if(I==null)return I;var re=[],de=0;return ue(I,re,"","",function(xe){return K.call(k,xe,de++)}),re}function W(I){if(I._status===-1){var K=I._result;K=K(),K.then(function(k){(I._status===0||I._status===-1)&&(I._status=1,I._result=k)},function(k){(I._status===0||I._status===-1)&&(I._status=2,I._result=k)}),I._status===-1&&(I._status=0,I._result=K)}if(I._status===1)return I._result.default;throw I._result}var te=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function he(){}return Fe.Children={map:P,forEach:function(I,K,k){P(I,function(){K.apply(this,arguments)},k)},count:function(I){var K=0;return P(I,function(){K++}),K},toArray:function(I){return P(I,function(K){return K})||[]},only:function(I){if(!Y(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Fe.Component=S,Fe.Fragment=t,Fe.Profiler=s,Fe.PureComponent=v,Fe.StrictMode=i,Fe.Suspense=f,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(I){return C.H.useMemoCache(I)}},Fe.cache=function(I){return function(){return I.apply(null,arguments)}},Fe.cloneElement=function(I,K,k){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var re=x({},I.props),de=I.key,xe=void 0;if(K!=null)for(me in K.ref!==void 0&&(xe=void 0),K.key!==void 0&&(de=""+K.key),K)!B.call(K,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&K.ref===void 0||(re[me]=K[me]);var me=arguments.length-2;if(me===1)re.children=k;else if(1<me){for(var Pe=Array(me),He=0;He<me;He++)Pe[He]=arguments[He+2];re.children=Pe}return z(I.type,de,void 0,void 0,xe,re)},Fe.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},Fe.createElement=function(I,K,k){var re,de={},xe=null;if(K!=null)for(re in K.key!==void 0&&(xe=""+K.key),K)B.call(K,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(de[re]=K[re]);var me=arguments.length-2;if(me===1)de.children=k;else if(1<me){for(var Pe=Array(me),He=0;He<me;He++)Pe[He]=arguments[He+2];de.children=Pe}if(I&&I.defaultProps)for(re in me=I.defaultProps,me)de[re]===void 0&&(de[re]=me[re]);return z(I,xe,void 0,void 0,null,de)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(I){return{$$typeof:u,render:I}},Fe.isValidElement=Y,Fe.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:W}},Fe.memo=function(I,K){return{$$typeof:d,type:I,compare:K===void 0?null:K}},Fe.startTransition=function(I){var K=C.T,k={};C.T=k;try{var re=I(),de=C.S;de!==null&&de(k,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(he,te)}catch(xe){te(xe)}finally{C.T=K}},Fe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Fe.use=function(I){return C.H.use(I)},Fe.useActionState=function(I,K,k){return C.H.useActionState(I,K,k)},Fe.useCallback=function(I,K){return C.H.useCallback(I,K)},Fe.useContext=function(I){return C.H.useContext(I)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(I,K){return C.H.useDeferredValue(I,K)},Fe.useEffect=function(I,K,k){var re=C.H;if(typeof k=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(I,K)},Fe.useId=function(){return C.H.useId()},Fe.useImperativeHandle=function(I,K,k){return C.H.useImperativeHandle(I,K,k)},Fe.useInsertionEffect=function(I,K){return C.H.useInsertionEffect(I,K)},Fe.useLayoutEffect=function(I,K){return C.H.useLayoutEffect(I,K)},Fe.useMemo=function(I,K){return C.H.useMemo(I,K)},Fe.useOptimistic=function(I,K){return C.H.useOptimistic(I,K)},Fe.useReducer=function(I,K,k){return C.H.useReducer(I,K,k)},Fe.useRef=function(I){return C.H.useRef(I)},Fe.useState=function(I){return C.H.useState(I)},Fe.useSyncExternalStore=function(I,K,k){return C.H.useSyncExternalStore(I,K,k)},Fe.useTransition=function(){return C.H.useTransition()},Fe.version="19.1.0",Fe}var xT;function Fy(){return xT||(xT=1,d0.exports=mI()),d0.exports}var Vn=Fy(),g0={exports:{}},Fc={},m0={exports:{}},p0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function pI(){return ST||(ST=1,function(n){function e(P,W){var te=P.length;P.push(W);e:for(;0<te;){var he=te-1>>>1,I=P[he];if(0<s(I,W))P[he]=W,P[te]=I,te=he;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var W=P[0],te=P.pop();if(te!==W){P[0]=te;e:for(var he=0,I=P.length,K=I>>>1;he<K;){var k=2*(he+1)-1,re=P[k],de=k+1,xe=P[de];if(0>s(re,te))de<I&&0>s(xe,re)?(P[he]=xe,P[de]=te,he=de):(P[he]=re,P[k]=te,he=k);else if(de<I&&0>s(xe,te))P[he]=xe,P[de]=te,he=de;else break e}}return W}function s(P,W){var te=P.sortIndex-W.sortIndex;return te!==0?te:P.id-W.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var f=[],d=[],g=1,p=null,_=3,E=!1,x=!1,b=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function A(P){for(var W=t(d);W!==null;){if(W.callback===null)i(d);else if(W.startTime<=P)i(d),W.sortIndex=W.expirationTime,e(f,W);else break;W=t(d)}}function C(P){if(b=!1,A(P),!x)if(t(f)!==null)x=!0,B||(B=!0,ie());else{var W=t(d);W!==null&&ue(C,W.startTime-P)}}var B=!1,z=-1,U=5,Y=-1;function $(){return S?!0:!(n.unstable_now()-Y<U)}function le(){if(S=!1,B){var P=n.unstable_now();Y=P;var W=!0;try{e:{x=!1,b&&(b=!1,v(z),z=-1),E=!0;var te=_;try{t:{for(A(P),p=t(f);p!==null&&!(p.expirationTime>P&&$());){var he=p.callback;if(typeof he=="function"){p.callback=null,_=p.priorityLevel;var I=he(p.expirationTime<=P);if(P=n.unstable_now(),typeof I=="function"){p.callback=I,A(P),W=!0;break t}p===t(f)&&i(f),A(P)}else i(f);p=t(f)}if(p!==null)W=!0;else{var K=t(d);K!==null&&ue(C,K.startTime-P),W=!1}}break e}finally{p=null,_=te,E=!1}W=void 0}}finally{W?ie():B=!1}}}var ie;if(typeof D=="function")ie=function(){D(le)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,fe=ce.port2;ce.port1.onmessage=le,ie=function(){fe.postMessage(null)}}else ie=function(){R(le,0)};function ue(P,W){z=R(function(){P(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(P){switch(_){case 1:case 2:case 3:var W=3;break;default:W=_}var te=_;_=W;try{return P()}finally{_=te}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(P,W){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var te=_;_=P;try{return W()}finally{_=te}},n.unstable_scheduleCallback=function(P,W,te){var he=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?he+te:he):te=he,P){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=te+I,P={id:g++,callback:W,priorityLevel:P,startTime:te,expirationTime:I,sortIndex:-1},te>he?(P.sortIndex=te,e(d,P),t(f)===null&&P===t(d)&&(b?(v(z),z=-1):b=!0,ue(C,te-he))):(P.sortIndex=I,e(f,P),x||E||(x=!0,B||(B=!0,ie()))),P},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(P){var W=_;return function(){var te=_;_=W;try{return P.apply(this,arguments)}finally{_=te}}}}(p0)),p0}var TT;function yI(){return TT||(TT=1,m0.exports=pI()),m0.exports}var y0={exports:{}},In={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function _I(){if(bT)return In;bT=1;var n=Fy();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,g){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,In.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,g)},In.flushSync=function(f){var d=l.T,g=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=g,i.d.f()}},In.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},In.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},In.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,p=u(g,d.crossOrigin),_=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:_,fetchPriority:E}):g==="script"&&i.d.X(f,{crossOrigin:p,integrity:_,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},In.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=u(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},In.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,p=u(g,d.crossOrigin);i.d.L(f,g,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},In.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=u(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},In.requestFormReset=function(f){i.d.r(f)},In.unstable_batchedUpdates=function(f,d){return f(d)},In.useFormState=function(f,d,g){return l.H.useFormState(f,d,g)},In.useFormStatus=function(){return l.H.useHostTransitionStatus()},In.version="19.1.0",In}var vT;function EI(){if(vT)return y0.exports;vT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),y0.exports=_I(),y0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wT;function xI(){if(wT)return Fc;wT=1;var n=yI(),e=Fy(),t=EI();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(i(188))}function f(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var c=r,h=o;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){c=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return u(m),r;if(y===h)return u(m),o;y=y.sibling}throw Error(i(188))}if(c.return!==h.return)c=m,h=y;else{for(var T=!1,w=m.child;w;){if(w===c){T=!0,c=m,h=y;break}if(w===h){T=!0,h=m,c=y;break}w=w.sibling}if(!T){for(w=y.child;w;){if(w===c){T=!0,c=y,h=m;break}if(w===h){T=!0,h=y,c=m;break}w=w.sibling}if(!T)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?r:o}function d(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=d(r),o!==null)return o;r=r.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),v=Symbol.for("react.consumer"),D=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),le=Symbol.iterator;function ie(r){return r===null||typeof r!="object"?null:(r=le&&r[le]||r["@@iterator"],typeof r=="function"?r:null)}var ce=Symbol.for("react.client.reference");function fe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ce?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case C:return"Suspense";case B:return"SuspenseList";case Y:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case E:return"Portal";case D:return(r.displayName||"Context")+".Provider";case v:return(r._context.displayName||"Context")+".Consumer";case A:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return o=r.displayName||null,o!==null?o:fe(r.type)||"Memo";case U:o=r._payload,r=r._init;try{return fe(r(o))}catch{}}return null}var ue=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},he=[],I=-1;function K(r){return{current:r}}function k(r){0>I||(r.current=he[I],he[I]=null,I--)}function re(r,o){I++,he[I]=r.current,r.current=o}var de=K(null),xe=K(null),me=K(null),Pe=K(null);function He(r,o){switch(re(me,o),re(xe,r),re(de,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Y1(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Y1(o),r=V1(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}k(de),re(de,r)}function bt(){k(de),k(xe),k(me)}function wt(r){r.memoizedState!==null&&re(Pe,r);var o=de.current,c=V1(o,r.type);o!==c&&(re(xe,r),re(de,c))}function Gi(r){xe.current===r&&(k(de),k(xe)),Pe.current===r&&(k(Pe),Ic._currentValue=te)}var Ts=Object.prototype.hasOwnProperty,Hi=n.unstable_scheduleCallback,hi=n.unstable_cancelCallback,An=n.unstable_shouldYield,Qn=n.unstable_requestPaint,_n=n.unstable_now,Zs=n.unstable_getCurrentPriorityLevel,Ws=n.unstable_ImmediatePriority,es=n.unstable_UserBlockingPriority,Xi=n.unstable_NormalPriority,Qs=n.unstable_LowPriority,Bt=n.unstable_IdlePriority,Ul=n.log,kl=n.unstable_setDisableYieldValue,ts=null,nn=null;function ns(r){if(typeof Ul=="function"&&kl(r),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(ts,r)}catch{}}var Cn=Math.clz32?Math.clz32:ng,$u=Math.log,zl=Math.LN2;function ng(r){return r>>>=0,r===0?32:31-($u(r)/zl|0)|0}var qa=256,ia=4194304;function is(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Js(r,o,c){var h=r.pendingLanes;if(h===0)return 0;var m=0,y=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var w=h&134217727;return w!==0?(h=w&~y,h!==0?m=is(h):(T&=w,T!==0?m=is(T):c||(c=w&~r,c!==0&&(m=is(c))))):(w=h&~y,w!==0?m=is(w):T!==0?m=is(T):c||(c=h&~r,c!==0&&(m=is(c)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,c=o&-o,y>=c||y===32&&(c&4194048)!==0)?o:m}function er(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function ig(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $a(){var r=qa;return qa<<=1,(qa&4194048)===0&&(qa=256),r}function tr(){var r=ia;return ia<<=1,(ia&62914560)===0&&(ia=4194304),r}function bs(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function ji(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ku(r,o,c,h,m,y){var T=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var w=r.entanglements,O=r.expirationTimes,X=r.hiddenUpdates;for(c=T&~c;0<c;){var J=31-Cn(c),se=1<<J;w[J]=0,O[J]=-1;var j=X[J];if(j!==null)for(X[J]=null,J=0;J<j.length;J++){var Z=j[J];Z!==null&&(Z.lane&=-536870913)}c&=~se}h!==0&&Gl(r,h,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(T&~o))}function Gl(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var h=31-Cn(o);r.entangledLanes|=o,r.entanglements[h]=r.entanglements[h]|1073741824|c&4194090}function Gn(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var h=31-Cn(c),m=1<<h;m&o|r[h]&o&&(r[h]|=o),c&=~m}}function Yi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Mn(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fi(){var r=W.p;return r!==0?r:(r=window.event,r===void 0?32:hT(r.type))}function Jn(r,o){var c=W.p;try{return W.p=r,o()}finally{W.p=c}}var sn=Math.random().toString(36).slice(2),_t="__reactFiber$"+sn,Ye="__reactProps$"+sn,Dt="__reactContainer$"+sn,di="__reactEvents$"+sn,sg="__reactListeners$"+sn,sM="__reactHandles$"+sn,LE="__reactResources$"+sn,Hl="__reactMarker$"+sn;function rg(r){delete r[_t],delete r[Ye],delete r[di],delete r[sg],delete r[sM]}function Ka(r){var o=r[_t];if(o)return o;for(var c=r.parentNode;c;){if(o=c[Dt]||c[_t]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=Z1(r);r!==null;){if(c=r[_t])return c;r=Z1(r)}return o}r=c,c=r.parentNode}return null}function Za(r){if(r=r[_t]||r[Dt]){var o=r.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return r}return null}function Xl(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Wa(r){var o=r[LE];return o||(o=r[LE]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function rn(r){r[Hl]=!0}var NE=new Set,BE={};function sa(r,o){Qa(r,o),Qa(r+"Capture",o)}function Qa(r,o){for(BE[r]=o,r=0;r<o.length;r++)NE.add(o[r])}var rM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),PE={},FE={};function aM(r){return Ts.call(FE,r)?!0:Ts.call(PE,r)?!1:rM.test(r)?FE[r]=!0:(PE[r]=!0,!1)}function Zu(r,o,c){if(aM(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function Wu(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function vs(r,o,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+h)}}var ag,UE;function Ja(r){if(ag===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);ag=o&&o[1]||"",UE=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ag+r+UE}var og=!1;function lg(r,o){if(!r||og)return"";og=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Z){var j=Z}Reflect.construct(r,[],se)}else{try{se.call()}catch(Z){j=Z}r.call(se.prototype)}}else{try{throw Error()}catch(Z){j=Z}(se=r())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Z){if(Z&&j&&typeof Z.stack=="string")return[Z.stack,j.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),T=y[0],w=y[1];if(T&&w){var O=T.split(`
`),X=w.split(`
`);for(m=h=0;h<O.length&&!O[h].includes("DetermineComponentFrameRoot");)h++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(h===O.length||m===X.length)for(h=O.length-1,m=X.length-1;1<=h&&0<=m&&O[h]!==X[m];)m--;for(;1<=h&&0<=m;h--,m--)if(O[h]!==X[m]){if(h!==1||m!==1)do if(h--,m--,0>m||O[h]!==X[m]){var J=`
`+O[h].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=h&&0<=m);break}}}finally{og=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ja(c):""}function oM(r){switch(r.tag){case 26:case 27:case 5:return Ja(r.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 15:return lg(r.type,!1);case 11:return lg(r.type.render,!1);case 1:return lg(r.type,!0);case 31:return Ja("Activity");default:return""}}function kE(r){try{var o="";do o+=oM(r),r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function wi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function zE(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function lM(r){var o=zE(r)?"checked":"value",c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o),h=""+r[o];if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){h=""+T,y.call(this,T)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Qu(r){r._valueTracker||(r._valueTracker=lM(r))}function GE(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return r&&(h=zE(r)?r.checked?"true":"false":r.value),r=h,r!==c?(o.setValue(r),!0):!1}function Ju(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var cM=/[\n"\\]/g;function Ri(r){return r.replace(cM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function cg(r,o,c,h,m,y,T,w){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),o!=null?T==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+wi(o)):r.value!==""+wi(o)&&(r.value=""+wi(o)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),o!=null?ug(r,T,wi(o)):c!=null?ug(r,T,wi(c)):h!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+wi(w):r.removeAttribute("name")}function HE(r,o,c,h,m,y,T,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),o!=null||c!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;c=c!=null?""+wi(c):"",o=o!=null?""+wi(o):c,w||o===r.value||(r.value=o),r.defaultValue=o}h=h??m,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=w?r.checked:!!h,r.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T)}function ug(r,o,c){o==="number"&&Ju(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function eo(r,o,c,h){if(r=r.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<r.length;c++)m=o.hasOwnProperty("$"+r[c].value),r[c].selected!==m&&(r[c].selected=m),m&&h&&(r[c].defaultSelected=!0)}else{for(c=""+wi(c),o=null,m=0;m<r.length;m++){if(r[m].value===c){r[m].selected=!0,h&&(r[m].defaultSelected=!0);return}o!==null||r[m].disabled||(o=r[m])}o!==null&&(o.selected=!0)}}function XE(r,o,c){if(o!=null&&(o=""+wi(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+wi(c):""}function jE(r,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(i(92));if(ue(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=wi(o),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h)}function to(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var uM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function YE(r,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":h?r.setProperty(o,c):typeof c!="number"||c===0||uM.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function VE(r,o,c){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var m in o)h=o[m],o.hasOwnProperty(m)&&c[m]!==h&&YE(r,m,h)}else for(var y in o)o.hasOwnProperty(y)&&YE(r,y,o[y])}function hg(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eh(r){return fM.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var fg=null;function dg(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var no=null,io=null;function qE(r){var o=Za(r);if(o&&(r=o.stateNode)){var c=r[Ye]||null;e:switch(r=o.stateNode,o.type){case"input":if(cg(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ri(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==r&&h.form===r.form){var m=h[Ye]||null;if(!m)throw Error(i(90));cg(h,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===r.form&&GE(h)}break e;case"textarea":XE(r,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&eo(r,!!c.multiple,o,!1)}}}var gg=!1;function $E(r,o,c){if(gg)return r(o,c);gg=!0;try{var h=r(o);return h}finally{if(gg=!1,(no!==null||io!==null)&&(kh(),no&&(o=no,r=io,io=no=null,qE(o),r)))for(o=0;o<r.length;o++)qE(r[o])}}function jl(r,o){var c=r.stateNode;if(c===null)return null;var h=c[Ye]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(i(231,o,typeof c));return c}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mg=!1;if(ws)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){mg=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{mg=!1}var nr=null,pg=null,th=null;function KE(){if(th)return th;var r,o=pg,c=o.length,h,m="value"in nr?nr.value:nr.textContent,y=m.length;for(r=0;r<c&&o[r]===m[r];r++);var T=c-r;for(h=1;h<=T&&o[c-h]===m[y-h];h++);return th=m.slice(r,1<h?1-h:void 0)}function nh(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function ih(){return!0}function ZE(){return!1}function ei(r){function o(c,h,m,y,T){this._reactName=c,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(c=r[w],this[w]=c?c(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ih:ZE,this.isPropagationStopped=ZE,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ih)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ih)},persist:function(){},isPersistent:ih}),o}var ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=ei(ra),Vl=g({},ra,{view:0,detail:0}),dM=ei(Vl),yg,_g,ql,rh=g({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xg,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ql&&(ql&&r.type==="mousemove"?(yg=r.screenX-ql.screenX,_g=r.screenY-ql.screenY):_g=yg=0,ql=r),yg)},movementY:function(r){return"movementY"in r?r.movementY:_g}}),WE=ei(rh),gM=g({},rh,{dataTransfer:0}),mM=ei(gM),pM=g({},Vl,{relatedTarget:0}),Eg=ei(pM),yM=g({},ra,{animationName:0,elapsedTime:0,pseudoElement:0}),_M=ei(yM),EM=g({},ra,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xM=ei(EM),SM=g({},ra,{data:0}),QE=ei(SM),TM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wM(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=vM[r])?!!o[r]:!1}function xg(){return wM}var RM=g({},Vl,{key:function(r){if(r.key){var o=TM[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=nh(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bM[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xg,charCode:function(r){return r.type==="keypress"?nh(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?nh(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),AM=ei(RM),CM=g({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JE=ei(CM),MM=g({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xg}),DM=ei(MM),IM=g({},ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),OM=ei(IM),LM=g({},rh,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),NM=ei(LM),BM=g({},ra,{newState:0,oldState:0}),PM=ei(BM),FM=[9,13,27,32],Sg=ws&&"CompositionEvent"in window,$l=null;ws&&"documentMode"in document&&($l=document.documentMode);var UM=ws&&"TextEvent"in window&&!$l,ex=ws&&(!Sg||$l&&8<$l&&11>=$l),tx=" ",nx=!1;function ix(r,o){switch(r){case"keyup":return FM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function kM(r,o){switch(r){case"compositionend":return sx(o);case"keypress":return o.which!==32?null:(nx=!0,tx);case"textInput":return r=o.data,r===tx&&nx?null:r;default:return null}}function zM(r,o){if(so)return r==="compositionend"||!Sg&&ix(r,o)?(r=KE(),th=pg=nr=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ex&&o.locale!=="ko"?null:o.data;default:return null}}var GM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rx(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!GM[r.type]:o==="textarea"}function ax(r,o,c,h){no?io?io.push(h):io=[h]:no=h,o=Yh(o,"onChange"),0<o.length&&(c=new sh("onChange","change",null,c,h),r.push({event:c,listeners:o}))}var Kl=null,Zl=null;function HM(r){z1(r,0)}function ah(r){var o=Xl(r);if(GE(o))return r}function ox(r,o){if(r==="change")return o}var lx=!1;if(ws){var Tg;if(ws){var bg="oninput"in document;if(!bg){var cx=document.createElement("div");cx.setAttribute("oninput","return;"),bg=typeof cx.oninput=="function"}Tg=bg}else Tg=!1;lx=Tg&&(!document.documentMode||9<document.documentMode)}function ux(){Kl&&(Kl.detachEvent("onpropertychange",hx),Zl=Kl=null)}function hx(r){if(r.propertyName==="value"&&ah(Zl)){var o=[];ax(o,Zl,r,dg(r)),$E(HM,o)}}function XM(r,o,c){r==="focusin"?(ux(),Kl=o,Zl=c,Kl.attachEvent("onpropertychange",hx)):r==="focusout"&&ux()}function jM(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ah(Zl)}function YM(r,o){if(r==="click")return ah(o)}function VM(r,o){if(r==="input"||r==="change")return ah(o)}function qM(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var gi=typeof Object.is=="function"?Object.is:qM;function Wl(r,o){if(gi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var m=c[h];if(!Ts.call(o,m)||!gi(r[m],o[m]))return!1}return!0}function fx(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function dx(r,o){var c=fx(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=o&&h>=o)return{node:c,offset:o-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=fx(c)}}function gx(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?gx(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function mx(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ju(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=Ju(r.document)}return o}function vg(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var $M=ws&&"documentMode"in document&&11>=document.documentMode,ro=null,wg=null,Ql=null,Rg=!1;function px(r,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Rg||ro==null||ro!==Ju(h)||(h=ro,"selectionStart"in h&&vg(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ql&&Wl(Ql,h)||(Ql=h,h=Yh(wg,"onSelect"),0<h.length&&(o=new sh("onSelect","select",null,o,c),r.push({event:o,listeners:h}),o.target=ro)))}function aa(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var ao={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionrun:aa("Transition","TransitionRun"),transitionstart:aa("Transition","TransitionStart"),transitioncancel:aa("Transition","TransitionCancel"),transitionend:aa("Transition","TransitionEnd")},Ag={},yx={};ws&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function oa(r){if(Ag[r])return Ag[r];if(!ao[r])return r;var o=ao[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in yx)return Ag[r]=o[c];return r}var _x=oa("animationend"),Ex=oa("animationiteration"),xx=oa("animationstart"),KM=oa("transitionrun"),ZM=oa("transitionstart"),WM=oa("transitioncancel"),Sx=oa("transitionend"),Tx=new Map,Cg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cg.push("scrollEnd");function Vi(r,o){Tx.set(r,o),sa(o,[r])}var bx=new WeakMap;function Ai(r,o){if(typeof r=="object"&&r!==null){var c=bx.get(r);return c!==void 0?c:(o={value:r,source:o,stack:kE(o)},bx.set(r,o),o)}return{value:r,source:o,stack:kE(o)}}var Ci=[],oo=0,Mg=0;function oh(){for(var r=oo,o=Mg=oo=0;o<r;){var c=Ci[o];Ci[o++]=null;var h=Ci[o];Ci[o++]=null;var m=Ci[o];Ci[o++]=null;var y=Ci[o];if(Ci[o++]=null,h!==null&&m!==null){var T=h.pending;T===null?m.next=m:(m.next=T.next,T.next=m),h.pending=m}y!==0&&vx(c,m,y)}}function lh(r,o,c,h){Ci[oo++]=r,Ci[oo++]=o,Ci[oo++]=c,Ci[oo++]=h,Mg|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function Dg(r,o,c,h){return lh(r,o,c,h),ch(r)}function lo(r,o){return lh(r,null,null,o),ch(r)}function vx(r,o,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var m=!1,y=r.return;y!==null;)y.childLanes|=c,h=y.alternate,h!==null&&(h.childLanes|=c),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&o!==null&&(m=31-Cn(c),r=y.hiddenUpdates,h=r[m],h===null?r[m]=[o]:h.push(o),o.lane=c|536870912),y):null}function ch(r){if(50<bc)throw bc=0,Pm=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var co={};function QM(r,o,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(r,o,c,h){return new QM(r,o,c,h)}function Ig(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Rs(r,o){var c=r.alternate;return c===null?(c=mi(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function wx(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function uh(r,o,c,h,m,y){var T=0;if(h=r,typeof r=="function")Ig(r)&&(T=1);else if(typeof r=="string")T=eI(r,c,de.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case Y:return r=mi(31,c,o,m),r.elementType=Y,r.lanes=y,r;case x:return la(c.children,m,y,o);case b:T=8,m|=24;break;case S:return r=mi(12,c,o,m|2),r.elementType=S,r.lanes=y,r;case C:return r=mi(13,c,o,m),r.elementType=C,r.lanes=y,r;case B:return r=mi(19,c,o,m),r.elementType=B,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case R:case D:T=10;break e;case v:T=9;break e;case A:T=11;break e;case z:T=14;break e;case U:T=16,h=null;break e}T=29,c=Error(i(130,r===null?"null":typeof r,"")),h=null}return o=mi(T,c,o,m),o.elementType=r,o.type=h,o.lanes=y,o}function la(r,o,c,h){return r=mi(7,r,h,o),r.lanes=c,r}function Og(r,o,c){return r=mi(6,r,null,o),r.lanes=c,r}function Lg(r,o,c){return o=mi(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var uo=[],ho=0,hh=null,fh=0,Mi=[],Di=0,ca=null,As=1,Cs="";function ua(r,o){uo[ho++]=fh,uo[ho++]=hh,hh=r,fh=o}function Rx(r,o,c){Mi[Di++]=As,Mi[Di++]=Cs,Mi[Di++]=ca,ca=r;var h=As;r=Cs;var m=32-Cn(h)-1;h&=~(1<<m),c+=1;var y=32-Cn(o)+m;if(30<y){var T=m-m%5;y=(h&(1<<T)-1).toString(32),h>>=T,m-=T,As=1<<32-Cn(o)+m|c<<m|h,Cs=y+r}else As=1<<y|c<<m|h,Cs=r}function Ng(r){r.return!==null&&(ua(r,1),Rx(r,1,0))}function Bg(r){for(;r===hh;)hh=uo[--ho],uo[ho]=null,fh=uo[--ho],uo[ho]=null;for(;r===ca;)ca=Mi[--Di],Mi[Di]=null,Cs=Mi[--Di],Mi[Di]=null,As=Mi[--Di],Mi[Di]=null}var Hn=null,It=null,rt=!1,ha=null,ss=!1,Pg=Error(i(519));function fa(r){var o=Error(i(418,""));throw tc(Ai(o,r)),Pg}function Ax(r){var o=r.stateNode,c=r.type,h=r.memoizedProps;switch(o[_t]=r,o[Ye]=h,c){case"dialog":qe("cancel",o),qe("close",o);break;case"iframe":case"object":case"embed":qe("load",o);break;case"video":case"audio":for(c=0;c<wc.length;c++)qe(wc[c],o);break;case"source":qe("error",o);break;case"img":case"image":case"link":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"input":qe("invalid",o),HE(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Qu(o);break;case"select":qe("invalid",o);break;case"textarea":qe("invalid",o),jE(o,h.value,h.defaultValue,h.children),Qu(o)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||j1(o.textContent,c)?(h.popover!=null&&(qe("beforetoggle",o),qe("toggle",o)),h.onScroll!=null&&qe("scroll",o),h.onScrollEnd!=null&&qe("scrollend",o),h.onClick!=null&&(o.onclick=Vh),o=!0):o=!1,o||fa(r)}function Cx(r){for(Hn=r.return;Hn;)switch(Hn.tag){case 5:case 13:ss=!1;return;case 27:case 3:ss=!0;return;default:Hn=Hn.return}}function Jl(r){if(r!==Hn)return!1;if(!rt)return Cx(r),rt=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||Qm(r.type,r.memoizedProps)),c=!c),c&&It&&fa(r),Cx(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,o=0;r;){if(r.nodeType===8)if(c=r.data,c==="/$"){if(o===0){It=$i(r.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++;r=r.nextSibling}It=null}}else o===27?(o=It,_r(r.type)?(r=n0,n0=null,It=r):It=o):It=Hn?$i(r.stateNode.nextSibling):null;return!0}function ec(){It=Hn=null,rt=!1}function Mx(){var r=ha;return r!==null&&(ii===null?ii=r:ii.push.apply(ii,r),ha=null),r}function tc(r){ha===null?ha=[r]:ha.push(r)}var Fg=K(null),da=null,Ms=null;function ir(r,o,c){re(Fg,o._currentValue),o._currentValue=c}function Ds(r){r._currentValue=Fg.current,k(Fg)}function Ug(r,o,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),r===c)break;r=r.return}}function kg(r,o,c,h){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var T=m.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=m;for(var O=0;O<o.length;O++)if(w.context===o[O]){y.lanes|=c,w=y.alternate,w!==null&&(w.lanes|=c),Ug(y.return,c,r),h||(T=null);break e}y=w.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(i(341));T.lanes|=c,y=T.alternate,y!==null&&(y.lanes|=c),Ug(T,c,r),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===r){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function nc(r,o,c,h){r=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var w=m.type;gi(m.pendingProps.value,T.value)||(r!==null?r.push(w):r=[w])}}else if(m===Pe.current){if(T=m.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Ic):r=[Ic])}m=m.return}r!==null&&kg(o,r,c,h),o.flags|=262144}function dh(r){for(r=r.firstContext;r!==null;){if(!gi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ga(r){da=r,Ms=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Dn(r){return Dx(da,r)}function gh(r,o){return da===null&&ga(r),Dx(r,o)}function Dx(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ms===null){if(r===null)throw Error(i(308));Ms=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Ms=Ms.next=o;return c}var JM=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},eD=n.unstable_scheduleCallback,tD=n.unstable_NormalPriority,Wt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zg(){return{controller:new JM,data:new Map,refCount:0}}function ic(r){r.refCount--,r.refCount===0&&eD(tD,function(){r.controller.abort()})}var sc=null,Gg=0,fo=0,go=null;function nD(r,o){if(sc===null){var c=sc=[];Gg=0,fo=Xm(),go={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Gg++,o.then(Ix,Ix),o}function Ix(){if(--Gg===0&&sc!==null){go!==null&&(go.status="fulfilled");var r=sc;sc=null,fo=0,go=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function iD(r,o){var c=[],h={status:"pending",value:null,reason:null,then:function(m){c.push(m)}};return r.then(function(){h.status="fulfilled",h.value=o;for(var m=0;m<c.length;m++)(0,c[m])(o)},function(m){for(h.status="rejected",h.reason=m,m=0;m<c.length;m++)(0,c[m])(void 0)}),h}var Ox=P.S;P.S=function(r,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&nD(r,o),Ox!==null&&Ox(r,o)};var ma=K(null);function Hg(){var r=ma.current;return r!==null?r:Et.pooledCache}function mh(r,o){o===null?re(ma,ma.current):re(ma,o.pool)}function Lx(){var r=Hg();return r===null?null:{parent:Wt._currentValue,pool:r}}var rc=Error(i(460)),Nx=Error(i(474)),ph=Error(i(542)),Xg={then:function(){}};function Bx(r){return r=r.status,r==="fulfilled"||r==="rejected"}function yh(){}function Px(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(yh,yh),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Ux(r),r;default:if(typeof o.status=="string")o.then(yh,yh);else{if(r=Et,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(h){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=h}},function(h){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Ux(r),r}throw ac=o,rc}}var ac=null;function Fx(){if(ac===null)throw Error(i(459));var r=ac;return ac=null,r}function Ux(r){if(r===rc||r===ph)throw Error(i(483))}var sr=!1;function jg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yg(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function rr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ar(r,o,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(lt&2)!==0){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,o=ch(r),vx(r,null,c),o}return lh(r,h,o,c),ch(r)}function oc(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,Gn(r,c)}}function Vg(r,o){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};y===null?m=y=T:y=y.next=T,c=c.next}while(c!==null);y===null?m=y=o:y=y.next=o}else m=y=o;c={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var qg=!1;function lc(){if(qg){var r=go;if(r!==null)throw r}}function cc(r,o,c,h){qg=!1;var m=r.updateQueue;sr=!1;var y=m.firstBaseUpdate,T=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var O=w,X=O.next;O.next=null,T===null?y=X:T.next=X,T=O;var J=r.alternate;J!==null&&(J=J.updateQueue,w=J.lastBaseUpdate,w!==T&&(w===null?J.firstBaseUpdate=X:w.next=X,J.lastBaseUpdate=O))}if(y!==null){var se=m.baseState;T=0,J=X=O=null,w=y;do{var j=w.lane&-536870913,Z=j!==w.lane;if(Z?(We&j)===j:(h&j)===j){j!==0&&j===fo&&(qg=!0),J!==null&&(J=J.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ae=r,we=w;j=o;var ft=c;switch(we.tag){case 1:if(Ae=we.payload,typeof Ae=="function"){se=Ae.call(ft,se,j);break e}se=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=we.payload,j=typeof Ae=="function"?Ae.call(ft,se,j):Ae,j==null)break e;se=g({},se,j);break e;case 2:sr=!0}}j=w.callback,j!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[j]:Z.push(j))}else Z={lane:j,tag:w.tag,payload:w.payload,callback:w.callback,next:null},J===null?(X=J=Z,O=se):J=J.next=Z,T|=j;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;Z=w,w=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);J===null&&(O=se),m.baseState=O,m.firstBaseUpdate=X,m.lastBaseUpdate=J,y===null&&(m.shared.lanes=0),gr|=T,r.lanes=T,r.memoizedState=se}}function kx(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function zx(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)kx(c[r],o)}var mo=K(null),_h=K(0);function Gx(r,o){r=Fs,re(_h,r),re(mo,o),Fs=r|o.baseLanes}function $g(){re(_h,Fs),re(mo,mo.current)}function Kg(){Fs=_h.current,k(mo),k(_h)}var or=0,Xe=null,ut=null,jt=null,Eh=!1,po=!1,pa=!1,xh=0,uc=0,yo=null,sD=0;function Pt(){throw Error(i(321))}function Zg(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!gi(r[c],o[c]))return!1;return!0}function Wg(r,o,c,h,m,y){return or=y,Xe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=r===null||r.memoizedState===null?vS:wS,pa=!1,y=c(h,m),pa=!1,po&&(y=Xx(o,c,h,m)),Hx(r),y}function Hx(r){P.H=Rh;var o=ut!==null&&ut.next!==null;if(or=0,jt=ut=Xe=null,Eh=!1,uc=0,yo=null,o)throw Error(i(300));r===null||an||(r=r.dependencies,r!==null&&dh(r)&&(an=!0))}function Xx(r,o,c,h){Xe=r;var m=0;do{if(po&&(yo=null),uc=0,po=!1,25<=m)throw Error(i(301));if(m+=1,jt=ut=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=hD,y=o(c,h)}while(po);return y}function rD(){var r=P.H,o=r.useState()[0];return o=typeof o.then=="function"?hc(o):o,r=r.useState()[0],(ut!==null?ut.memoizedState:null)!==r&&(Xe.flags|=1024),o}function Qg(){var r=xh!==0;return xh=0,r}function Jg(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function em(r){if(Eh){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Eh=!1}or=0,jt=ut=Xe=null,po=!1,uc=xh=0,yo=null}function ti(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?Xe.memoizedState=jt=r:jt=jt.next=r,jt}function Yt(){if(ut===null){var r=Xe.alternate;r=r!==null?r.memoizedState:null}else r=ut.next;var o=jt===null?Xe.memoizedState:jt.next;if(o!==null)jt=o,ut=r;else{if(r===null)throw Xe.alternate===null?Error(i(467)):Error(i(310));ut=r,r={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},jt===null?Xe.memoizedState=jt=r:jt=jt.next=r}return jt}function tm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(r){var o=uc;return uc+=1,yo===null&&(yo=[]),r=Px(yo,r,o),o=Xe,(jt===null?o.memoizedState:jt.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?vS:wS),r}function Sh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hc(r);if(r.$$typeof===D)return Dn(r)}throw Error(i(438,String(r)))}function nm(r){var o=null,c=Xe.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=Xe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=tm(),Xe.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),h=0;h<r;h++)c[h]=$;return o.index++,c}function Is(r,o){return typeof o=="function"?o(r):o}function Th(r){var o=Yt();return im(o,ut,r)}function im(r,o,c){var h=r.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var m=r.baseQueue,y=h.pending;if(y!==null){if(m!==null){var T=m.next;m.next=y.next,y.next=T}o.baseQueue=m=y,h.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{o=m.next;var w=T=null,O=null,X=o,J=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(We&se)===se:(or&se)===se){var j=X.revertLane;if(j===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===fo&&(J=!0);else if((or&j)===j){X=X.next,j===fo&&(J=!0);continue}else se={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(w=O=se,T=y):O=O.next=se,Xe.lanes|=j,gr|=j;se=X.action,pa&&c(y,se),y=X.hasEagerState?X.eagerState:c(y,se)}else j={lane:se,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},O===null?(w=O=j,T=y):O=O.next=j,Xe.lanes|=se,gr|=se;X=X.next}while(X!==null&&X!==o);if(O===null?T=y:O.next=w,!gi(y,r.memoizedState)&&(an=!0,J&&(c=go,c!==null)))throw c;r.memoizedState=y,r.baseState=T,r.baseQueue=O,h.lastRenderedState=y}return m===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function sm(r){var o=Yt(),c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var h=c.dispatch,m=c.pending,y=o.memoizedState;if(m!==null){c.pending=null;var T=m=m.next;do y=r(y,T.action),T=T.next;while(T!==m);gi(y,o.memoizedState)||(an=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,h]}function jx(r,o,c){var h=Xe,m=Yt(),y=rt;if(y){if(c===void 0)throw Error(i(407));c=c()}else c=o();var T=!gi((ut||m).memoizedState,c);T&&(m.memoizedState=c,an=!0),m=m.queue;var w=qx.bind(null,h,m,r);if(fc(2048,8,w,[r]),m.getSnapshot!==o||T||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,_o(9,bh(),Vx.bind(null,h,m,c,o),null),Et===null)throw Error(i(349));y||(or&124)!==0||Yx(h,o,c)}return c}function Yx(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=Xe.updateQueue,o===null?(o=tm(),Xe.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function Vx(r,o,c,h){o.value=c,o.getSnapshot=h,$x(o)&&Kx(r)}function qx(r,o,c){return c(function(){$x(o)&&Kx(r)})}function $x(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!gi(r,c)}catch{return!0}}function Kx(r){var o=lo(r,2);o!==null&&xi(o,r,2)}function rm(r){var o=ti();if(typeof r=="function"){var c=r;if(r=c(),pa){ns(!0);try{c()}finally{ns(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:r},o}function Zx(r,o,c,h){return r.baseState=c,im(r,ut,typeof h=="function"?h:Is)}function aD(r,o,c,h,m){if(wh(r))throw Error(i(485));if(r=o.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};P.T!==null?c(!0):y.isTransition=!1,h(y),c=o.pending,c===null?(y.next=o.pending=y,Wx(o,y)):(y.next=c.next,o.pending=c.next=y)}}function Wx(r,o){var c=o.action,h=o.payload,m=r.state;if(o.isTransition){var y=P.T,T={};P.T=T;try{var w=c(m,h),O=P.S;O!==null&&O(T,w),Qx(r,o,w)}catch(X){am(r,o,X)}finally{P.T=y}}else try{y=c(m,h),Qx(r,o,y)}catch(X){am(r,o,X)}}function Qx(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){Jx(r,o,h)},function(h){return am(r,o,h)}):Jx(r,o,c)}function Jx(r,o,c){o.status="fulfilled",o.value=c,eS(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,Wx(r,c)))}function am(r,o,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,eS(o),o=o.next;while(o!==h)}r.action=null}function eS(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function tS(r,o){return o}function nS(r,o){if(rt){var c=Et.formState;if(c!==null){e:{var h=Xe;if(rt){if(It){t:{for(var m=It,y=ss;m.nodeType!==8;){if(!y){m=null;break t}if(m=$i(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){It=$i(m.nextSibling),h=m.data==="F!";break e}}fa(h)}h=!1}h&&(o=c[0])}}return c=ti(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tS,lastRenderedState:o},c.queue=h,c=SS.bind(null,Xe,h),h.dispatch=c,h=rm(!1),y=hm.bind(null,Xe,!1,h.queue),h=ti(),m={state:o,dispatch:null,action:r,pending:null},h.queue=m,c=aD.bind(null,Xe,m,y,c),m.dispatch=c,h.memoizedState=r,[o,c,!1]}function iS(r){var o=Yt();return sS(o,ut,r)}function sS(r,o,c){if(o=im(r,o,tS)[0],r=Th(Is)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=hc(o)}catch(T){throw T===rc?ph:T}else h=o;o=Yt();var m=o.queue,y=m.dispatch;return c!==o.memoizedState&&(Xe.flags|=2048,_o(9,bh(),oD.bind(null,m,c),null)),[h,y,r]}function oD(r,o){r.action=o}function rS(r){var o=Yt(),c=ut;if(c!==null)return sS(o,c,r);Yt(),o=o.memoizedState,c=Yt();var h=c.queue.dispatch;return c.memoizedState=r,[o,h,!1]}function _o(r,o,c,h){return r={tag:r,create:c,deps:h,inst:o,next:null},o=Xe.updateQueue,o===null&&(o=tm(),Xe.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,o.lastEffect=r),r}function bh(){return{destroy:void 0,resource:void 0}}function aS(){return Yt().memoizedState}function vh(r,o,c,h){var m=ti();h=h===void 0?null:h,Xe.flags|=r,m.memoizedState=_o(1|o,bh(),c,h)}function fc(r,o,c,h){var m=Yt();h=h===void 0?null:h;var y=m.memoizedState.inst;ut!==null&&h!==null&&Zg(h,ut.memoizedState.deps)?m.memoizedState=_o(o,y,c,h):(Xe.flags|=r,m.memoizedState=_o(1|o,y,c,h))}function oS(r,o){vh(8390656,8,r,o)}function lS(r,o){fc(2048,8,r,o)}function cS(r,o){return fc(4,2,r,o)}function uS(r,o){return fc(4,4,r,o)}function hS(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function fS(r,o,c){c=c!=null?c.concat([r]):null,fc(4,4,hS.bind(null,o,r),c)}function om(){}function dS(r,o){var c=Yt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&Zg(o,h[1])?h[0]:(c.memoizedState=[r,o],r)}function gS(r,o){var c=Yt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&Zg(o,h[1]))return h[0];if(h=r(),pa){ns(!0);try{r()}finally{ns(!1)}}return c.memoizedState=[h,o],h}function lm(r,o,c){return c===void 0||(or&1073741824)!==0?r.memoizedState=o:(r.memoizedState=c,r=y1(),Xe.lanes|=r,gr|=r,c)}function mS(r,o,c,h){return gi(c,o)?c:mo.current!==null?(r=lm(r,c,h),gi(r,o)||(an=!0),r):(or&42)===0?(an=!0,r.memoizedState=c):(r=y1(),Xe.lanes|=r,gr|=r,o)}function pS(r,o,c,h,m){var y=W.p;W.p=y!==0&&8>y?y:8;var T=P.T,w={};P.T=w,hm(r,!1,o,c);try{var O=m(),X=P.S;if(X!==null&&X(w,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=iD(O,h);dc(r,o,J,Ei(r))}else dc(r,o,h,Ei(r))}catch(se){dc(r,o,{then:function(){},status:"rejected",reason:se},Ei())}finally{W.p=y,P.T=T}}function lD(){}function cm(r,o,c,h){if(r.tag!==5)throw Error(i(476));var m=yS(r).queue;pS(r,m,o,te,c===null?lD:function(){return _S(r),c(h)})}function yS(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:te},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function _S(r){var o=yS(r).next.queue;dc(r,o,{},Ei())}function um(){return Dn(Ic)}function ES(){return Yt().memoizedState}function xS(){return Yt().memoizedState}function cD(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=Ei();r=rr(c);var h=ar(o,r,c);h!==null&&(xi(h,o,c),oc(h,o,c)),o={cache:zg()},r.payload=o;return}o=o.return}}function uD(r,o,c){var h=Ei();c={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},wh(r)?TS(o,c):(c=Dg(r,o,c,h),c!==null&&(xi(c,r,h),bS(c,o,h)))}function SS(r,o,c){var h=Ei();dc(r,o,c,h)}function dc(r,o,c,h){var m={lane:h,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(wh(r))TS(o,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var T=o.lastRenderedState,w=y(T,c);if(m.hasEagerState=!0,m.eagerState=w,gi(w,T))return lh(r,o,m,0),Et===null&&oh(),!1}catch{}finally{}if(c=Dg(r,o,m,h),c!==null)return xi(c,r,h),bS(c,o,h),!0}return!1}function hm(r,o,c,h){if(h={lane:2,revertLane:Xm(),action:h,hasEagerState:!1,eagerState:null,next:null},wh(r)){if(o)throw Error(i(479))}else o=Dg(r,c,h,2),o!==null&&xi(o,r,2)}function wh(r){var o=r.alternate;return r===Xe||o!==null&&o===Xe}function TS(r,o){po=Eh=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function bS(r,o,c){if((c&4194048)!==0){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,Gn(r,c)}}var Rh={readContext:Dn,use:Sh,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useLayoutEffect:Pt,useInsertionEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useSyncExternalStore:Pt,useId:Pt,useHostTransitionStatus:Pt,useFormState:Pt,useActionState:Pt,useOptimistic:Pt,useMemoCache:Pt,useCacheRefresh:Pt},vS={readContext:Dn,use:Sh,useCallback:function(r,o){return ti().memoizedState=[r,o===void 0?null:o],r},useContext:Dn,useEffect:oS,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,vh(4194308,4,hS.bind(null,o,r),c)},useLayoutEffect:function(r,o){return vh(4194308,4,r,o)},useInsertionEffect:function(r,o){vh(4,2,r,o)},useMemo:function(r,o){var c=ti();o=o===void 0?null:o;var h=r();if(pa){ns(!0);try{r()}finally{ns(!1)}}return c.memoizedState=[h,o],h},useReducer:function(r,o,c){var h=ti();if(c!==void 0){var m=c(o);if(pa){ns(!0);try{c(o)}finally{ns(!1)}}}else m=o;return h.memoizedState=h.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},h.queue=r,r=r.dispatch=uD.bind(null,Xe,r),[h.memoizedState,r]},useRef:function(r){var o=ti();return r={current:r},o.memoizedState=r},useState:function(r){r=rm(r);var o=r.queue,c=SS.bind(null,Xe,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:om,useDeferredValue:function(r,o){var c=ti();return lm(c,r,o)},useTransition:function(){var r=rm(!1);return r=pS.bind(null,Xe,r.queue,!0,!1),ti().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var h=Xe,m=ti();if(rt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=o(),Et===null)throw Error(i(349));(We&124)!==0||Yx(h,o,c)}m.memoizedState=c;var y={value:c,getSnapshot:o};return m.queue=y,oS(qx.bind(null,h,y,r),[r]),h.flags|=2048,_o(9,bh(),Vx.bind(null,h,y,c,o),null),c},useId:function(){var r=ti(),o=Et.identifierPrefix;if(rt){var c=Cs,h=As;c=(h&~(1<<32-Cn(h)-1)).toString(32)+c,o=""+o+"R"+c,c=xh++,0<c&&(o+="H"+c.toString(32)),o+=""}else c=sD++,o=""+o+"r"+c.toString(32)+"";return r.memoizedState=o},useHostTransitionStatus:um,useFormState:nS,useActionState:nS,useOptimistic:function(r){var o=ti();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=hm.bind(null,Xe,!0,c),c.dispatch=o,[r,o]},useMemoCache:nm,useCacheRefresh:function(){return ti().memoizedState=cD.bind(null,Xe)}},wS={readContext:Dn,use:Sh,useCallback:dS,useContext:Dn,useEffect:lS,useImperativeHandle:fS,useInsertionEffect:cS,useLayoutEffect:uS,useMemo:gS,useReducer:Th,useRef:aS,useState:function(){return Th(Is)},useDebugValue:om,useDeferredValue:function(r,o){var c=Yt();return mS(c,ut.memoizedState,r,o)},useTransition:function(){var r=Th(Is)[0],o=Yt().memoizedState;return[typeof r=="boolean"?r:hc(r),o]},useSyncExternalStore:jx,useId:ES,useHostTransitionStatus:um,useFormState:iS,useActionState:iS,useOptimistic:function(r,o){var c=Yt();return Zx(c,ut,r,o)},useMemoCache:nm,useCacheRefresh:xS},hD={readContext:Dn,use:Sh,useCallback:dS,useContext:Dn,useEffect:lS,useImperativeHandle:fS,useInsertionEffect:cS,useLayoutEffect:uS,useMemo:gS,useReducer:sm,useRef:aS,useState:function(){return sm(Is)},useDebugValue:om,useDeferredValue:function(r,o){var c=Yt();return ut===null?lm(c,r,o):mS(c,ut.memoizedState,r,o)},useTransition:function(){var r=sm(Is)[0],o=Yt().memoizedState;return[typeof r=="boolean"?r:hc(r),o]},useSyncExternalStore:jx,useId:ES,useHostTransitionStatus:um,useFormState:rS,useActionState:rS,useOptimistic:function(r,o){var c=Yt();return ut!==null?Zx(c,ut,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:nm,useCacheRefresh:xS},Eo=null,gc=0;function Ah(r){var o=gc;return gc+=1,Eo===null&&(Eo=[]),Px(Eo,r,o)}function mc(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ch(r,o){throw o.$$typeof===p?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function RS(r){var o=r._init;return o(r._payload)}function AS(r){function o(F,N){if(r){var G=F.deletions;G===null?(F.deletions=[N],F.flags|=16):G.push(N)}}function c(F,N){if(!r)return null;for(;N!==null;)o(F,N),N=N.sibling;return null}function h(F){for(var N=new Map;F!==null;)F.key!==null?N.set(F.key,F):N.set(F.index,F),F=F.sibling;return N}function m(F,N){return F=Rs(F,N),F.index=0,F.sibling=null,F}function y(F,N,G){return F.index=G,r?(G=F.alternate,G!==null?(G=G.index,G<N?(F.flags|=67108866,N):G):(F.flags|=67108866,N)):(F.flags|=1048576,N)}function T(F){return r&&F.alternate===null&&(F.flags|=67108866),F}function w(F,N,G,ne){return N===null||N.tag!==6?(N=Og(G,F.mode,ne),N.return=F,N):(N=m(N,G),N.return=F,N)}function O(F,N,G,ne){var Se=G.type;return Se===x?J(F,N,G.props.children,ne,G.key):N!==null&&(N.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===U&&RS(Se)===N.type)?(N=m(N,G.props),mc(N,G),N.return=F,N):(N=uh(G.type,G.key,G.props,null,F.mode,ne),mc(N,G),N.return=F,N)}function X(F,N,G,ne){return N===null||N.tag!==4||N.stateNode.containerInfo!==G.containerInfo||N.stateNode.implementation!==G.implementation?(N=Lg(G,F.mode,ne),N.return=F,N):(N=m(N,G.children||[]),N.return=F,N)}function J(F,N,G,ne,Se){return N===null||N.tag!==7?(N=la(G,F.mode,ne,Se),N.return=F,N):(N=m(N,G),N.return=F,N)}function se(F,N,G){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Og(""+N,F.mode,G),N.return=F,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case _:return G=uh(N.type,N.key,N.props,null,F.mode,G),mc(G,N),G.return=F,G;case E:return N=Lg(N,F.mode,G),N.return=F,N;case U:var ne=N._init;return N=ne(N._payload),se(F,N,G)}if(ue(N)||ie(N))return N=la(N,F.mode,G,null),N.return=F,N;if(typeof N.then=="function")return se(F,Ah(N),G);if(N.$$typeof===D)return se(F,gh(F,N),G);Ch(F,N)}return null}function j(F,N,G,ne){var Se=N!==null?N.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Se!==null?null:w(F,N,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _:return G.key===Se?O(F,N,G,ne):null;case E:return G.key===Se?X(F,N,G,ne):null;case U:return Se=G._init,G=Se(G._payload),j(F,N,G,ne)}if(ue(G)||ie(G))return Se!==null?null:J(F,N,G,ne,null);if(typeof G.then=="function")return j(F,N,Ah(G),ne);if(G.$$typeof===D)return j(F,N,gh(F,G),ne);Ch(F,G)}return null}function Z(F,N,G,ne,Se){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return F=F.get(G)||null,w(N,F,""+ne,Se);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case _:return F=F.get(ne.key===null?G:ne.key)||null,O(N,F,ne,Se);case E:return F=F.get(ne.key===null?G:ne.key)||null,X(N,F,ne,Se);case U:var je=ne._init;return ne=je(ne._payload),Z(F,N,G,ne,Se)}if(ue(ne)||ie(ne))return F=F.get(G)||null,J(N,F,ne,Se,null);if(typeof ne.then=="function")return Z(F,N,G,Ah(ne),Se);if(ne.$$typeof===D)return Z(F,N,G,gh(N,ne),Se);Ch(N,ne)}return null}function Ae(F,N,G,ne){for(var Se=null,je=null,be=N,Re=N=0,ln=null;be!==null&&Re<G.length;Re++){be.index>Re?(ln=be,be=null):ln=be.sibling;var nt=j(F,be,G[Re],ne);if(nt===null){be===null&&(be=ln);break}r&&be&&nt.alternate===null&&o(F,be),N=y(nt,N,Re),je===null?Se=nt:je.sibling=nt,je=nt,be=ln}if(Re===G.length)return c(F,be),rt&&ua(F,Re),Se;if(be===null){for(;Re<G.length;Re++)be=se(F,G[Re],ne),be!==null&&(N=y(be,N,Re),je===null?Se=be:je.sibling=be,je=be);return rt&&ua(F,Re),Se}for(be=h(be);Re<G.length;Re++)ln=Z(be,F,Re,G[Re],ne),ln!==null&&(r&&ln.alternate!==null&&be.delete(ln.key===null?Re:ln.key),N=y(ln,N,Re),je===null?Se=ln:je.sibling=ln,je=ln);return r&&be.forEach(function(br){return o(F,br)}),rt&&ua(F,Re),Se}function we(F,N,G,ne){if(G==null)throw Error(i(151));for(var Se=null,je=null,be=N,Re=N=0,ln=null,nt=G.next();be!==null&&!nt.done;Re++,nt=G.next()){be.index>Re?(ln=be,be=null):ln=be.sibling;var br=j(F,be,nt.value,ne);if(br===null){be===null&&(be=ln);break}r&&be&&br.alternate===null&&o(F,be),N=y(br,N,Re),je===null?Se=br:je.sibling=br,je=br,be=ln}if(nt.done)return c(F,be),rt&&ua(F,Re),Se;if(be===null){for(;!nt.done;Re++,nt=G.next())nt=se(F,nt.value,ne),nt!==null&&(N=y(nt,N,Re),je===null?Se=nt:je.sibling=nt,je=nt);return rt&&ua(F,Re),Se}for(be=h(be);!nt.done;Re++,nt=G.next())nt=Z(be,F,Re,nt.value,ne),nt!==null&&(r&&nt.alternate!==null&&be.delete(nt.key===null?Re:nt.key),N=y(nt,N,Re),je===null?Se=nt:je.sibling=nt,je=nt);return r&&be.forEach(function(fI){return o(F,fI)}),rt&&ua(F,Re),Se}function ft(F,N,G,ne){if(typeof G=="object"&&G!==null&&G.type===x&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case _:e:{for(var Se=G.key;N!==null;){if(N.key===Se){if(Se=G.type,Se===x){if(N.tag===7){c(F,N.sibling),ne=m(N,G.props.children),ne.return=F,F=ne;break e}}else if(N.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===U&&RS(Se)===N.type){c(F,N.sibling),ne=m(N,G.props),mc(ne,G),ne.return=F,F=ne;break e}c(F,N);break}else o(F,N);N=N.sibling}G.type===x?(ne=la(G.props.children,F.mode,ne,G.key),ne.return=F,F=ne):(ne=uh(G.type,G.key,G.props,null,F.mode,ne),mc(ne,G),ne.return=F,F=ne)}return T(F);case E:e:{for(Se=G.key;N!==null;){if(N.key===Se)if(N.tag===4&&N.stateNode.containerInfo===G.containerInfo&&N.stateNode.implementation===G.implementation){c(F,N.sibling),ne=m(N,G.children||[]),ne.return=F,F=ne;break e}else{c(F,N);break}else o(F,N);N=N.sibling}ne=Lg(G,F.mode,ne),ne.return=F,F=ne}return T(F);case U:return Se=G._init,G=Se(G._payload),ft(F,N,G,ne)}if(ue(G))return Ae(F,N,G,ne);if(ie(G)){if(Se=ie(G),typeof Se!="function")throw Error(i(150));return G=Se.call(G),we(F,N,G,ne)}if(typeof G.then=="function")return ft(F,N,Ah(G),ne);if(G.$$typeof===D)return ft(F,N,gh(F,G),ne);Ch(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,N!==null&&N.tag===6?(c(F,N.sibling),ne=m(N,G),ne.return=F,F=ne):(c(F,N),ne=Og(G,F.mode,ne),ne.return=F,F=ne),T(F)):c(F,N)}return function(F,N,G,ne){try{gc=0;var Se=ft(F,N,G,ne);return Eo=null,Se}catch(be){if(be===rc||be===ph)throw be;var je=mi(29,be,null,F.mode);return je.lanes=ne,je.return=F,je}finally{}}}var xo=AS(!0),CS=AS(!1),Ii=K(null),rs=null;function lr(r){var o=r.alternate;re(Qt,Qt.current&1),re(Ii,r),rs===null&&(o===null||mo.current!==null||o.memoizedState!==null)&&(rs=r)}function MS(r){if(r.tag===22){if(re(Qt,Qt.current),re(Ii,r),rs===null){var o=r.alternate;o!==null&&o.memoizedState!==null&&(rs=r)}}else cr()}function cr(){re(Qt,Qt.current),re(Ii,Ii.current)}function Os(r){k(Ii),rs===r&&(rs=null),k(Qt)}var Qt=K(0);function Mh(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||t0(c)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function fm(r,o,c,h){o=r.memoizedState,c=c(h,o),c=c==null?o:g({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var dm={enqueueSetState:function(r,o,c){r=r._reactInternals;var h=Ei(),m=rr(h);m.payload=o,c!=null&&(m.callback=c),o=ar(r,m,h),o!==null&&(xi(o,r,h),oc(o,r,h))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var h=Ei(),m=rr(h);m.tag=1,m.payload=o,c!=null&&(m.callback=c),o=ar(r,m,h),o!==null&&(xi(o,r,h),oc(o,r,h))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=Ei(),h=rr(c);h.tag=2,o!=null&&(h.callback=o),o=ar(r,h,c),o!==null&&(xi(o,r,c),oc(o,r,c))}};function DS(r,o,c,h,m,y,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,y,T):o.prototype&&o.prototype.isPureReactComponent?!Wl(c,h)||!Wl(m,y):!0}function IS(r,o,c,h){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==r&&dm.enqueueReplaceState(o,o.state,null)}function ya(r,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(r=r.defaultProps){c===o&&(c=g({},c));for(var m in r)c[m]===void 0&&(c[m]=r[m])}return c}var Dh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function OS(r){Dh(r)}function LS(r){console.error(r)}function NS(r){Dh(r)}function Ih(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function BS(r,o,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function gm(r,o,c){return c=rr(c),c.tag=3,c.payload={element:null},c.callback=function(){Ih(r,o)},c}function PS(r){return r=rr(r),r.tag=3,r}function FS(r,o,c,h){var m=c.type.getDerivedStateFromError;if(typeof m=="function"){var y=h.value;r.payload=function(){return m(y)},r.callback=function(){BS(o,c,h)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){BS(o,c,h),typeof m!="function"&&(mr===null?mr=new Set([this]):mr.add(this));var w=h.stack;this.componentDidCatch(h.value,{componentStack:w!==null?w:""})})}function fD(r,o,c,h,m){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&nc(o,c,m,!0),c=Ii.current,c!==null){switch(c.tag){case 13:return rs===null?Um():c.alternate===null&&Ot===0&&(Ot=3),c.flags&=-257,c.flags|=65536,c.lanes=m,h===Xg?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),zm(r,h,m)),!1;case 22:return c.flags|=65536,h===Xg?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),zm(r,h,m)),!1}throw Error(i(435,c.tag))}return zm(r,h,m),Um(),!1}if(rt)return o=Ii.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,h!==Pg&&(r=Error(i(422),{cause:h}),tc(Ai(r,c)))):(h!==Pg&&(o=Error(i(423),{cause:h}),tc(Ai(o,c))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,h=Ai(h,c),m=gm(r.stateNode,h,m),Vg(r,m),Ot!==4&&(Ot=2)),!1;var y=Error(i(520),{cause:h});if(y=Ai(y,c),Tc===null?Tc=[y]:Tc.push(y),Ot!==4&&(Ot=2),o===null)return!0;h=Ai(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=m&-m,c.lanes|=r,r=gm(c.stateNode,h,r),Vg(c,r),!1;case 1:if(o=c.type,y=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(mr===null||!mr.has(y))))return c.flags|=65536,m&=-m,c.lanes|=m,m=PS(m),FS(m,r,c,h),Vg(c,m),!1}c=c.return}while(c!==null);return!1}var US=Error(i(461)),an=!1;function En(r,o,c,h){o.child=r===null?CS(o,null,c,h):xo(o,r.child,c,h)}function kS(r,o,c,h,m){c=c.render;var y=o.ref;if("ref"in h){var T={};for(var w in h)w!=="ref"&&(T[w]=h[w])}else T=h;return ga(o),h=Wg(r,o,c,T,y,m),w=Qg(),r!==null&&!an?(Jg(r,o,m),Ls(r,o,m)):(rt&&w&&Ng(o),o.flags|=1,En(r,o,h,m),o.child)}function zS(r,o,c,h,m){if(r===null){var y=c.type;return typeof y=="function"&&!Ig(y)&&y.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=y,GS(r,o,y,h,m)):(r=uh(c.type,null,h,o,o.mode,m),r.ref=o.ref,r.return=o,o.child=r)}if(y=r.child,!Tm(r,m)){var T=y.memoizedProps;if(c=c.compare,c=c!==null?c:Wl,c(T,h)&&r.ref===o.ref)return Ls(r,o,m)}return o.flags|=1,r=Rs(y,h),r.ref=o.ref,r.return=o,o.child=r}function GS(r,o,c,h,m){if(r!==null){var y=r.memoizedProps;if(Wl(y,h)&&r.ref===o.ref)if(an=!1,o.pendingProps=h=y,Tm(r,m))(r.flags&131072)!==0&&(an=!0);else return o.lanes=r.lanes,Ls(r,o,m)}return mm(r,o,c,h,m)}function HS(r,o,c){var h=o.pendingProps,m=h.children,y=r!==null?r.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|c:c,r!==null){for(m=o.child=r.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return XS(r,o,h,c)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&mh(o,y!==null?y.cachePool:null),y!==null?Gx(o,y):$g(),MS(o);else return o.lanes=o.childLanes=536870912,XS(r,o,y!==null?y.baseLanes|c:c,c)}else y!==null?(mh(o,y.cachePool),Gx(o,y),cr(),o.memoizedState=null):(r!==null&&mh(o,null),$g(),cr());return En(r,o,m,c),o.child}function XS(r,o,c,h){var m=Hg();return m=m===null?null:{parent:Wt._currentValue,pool:m},o.memoizedState={baseLanes:c,cachePool:m},r!==null&&mh(o,null),$g(),MS(o),r!==null&&nc(r,o,h,!0),null}function Oh(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function mm(r,o,c,h,m){return ga(o),c=Wg(r,o,c,h,void 0,m),h=Qg(),r!==null&&!an?(Jg(r,o,m),Ls(r,o,m)):(rt&&h&&Ng(o),o.flags|=1,En(r,o,c,m),o.child)}function jS(r,o,c,h,m,y){return ga(o),o.updateQueue=null,c=Xx(o,h,c,m),Hx(r),h=Qg(),r!==null&&!an?(Jg(r,o,y),Ls(r,o,y)):(rt&&h&&Ng(o),o.flags|=1,En(r,o,c,y),o.child)}function YS(r,o,c,h,m){if(ga(o),o.stateNode===null){var y=co,T=c.contextType;typeof T=="object"&&T!==null&&(y=Dn(T)),y=new c(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=dm,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},jg(o),T=c.contextType,y.context=typeof T=="object"&&T!==null?Dn(T):co,y.state=o.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(fm(o,c,T,h),y.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&dm.enqueueReplaceState(y,y.state,null),cc(o,h,y,m),lc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(r===null){y=o.stateNode;var w=o.memoizedProps,O=ya(c,w);y.props=O;var X=y.context,J=c.contextType;T=co,typeof J=="object"&&J!==null&&(T=Dn(J));var se=c.getDerivedStateFromProps;J=typeof se=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,J||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||X!==T)&&IS(o,y,h,T),sr=!1;var j=o.memoizedState;y.state=j,cc(o,h,y,m),lc(),X=o.memoizedState,w||j!==X||sr?(typeof se=="function"&&(fm(o,c,se,h),X=o.memoizedState),(O=sr||DS(o,c,O,h,j,X,T))?(J||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=X),y.props=h,y.state=X,y.context=T,h=O):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,Yg(r,o),T=o.memoizedProps,J=ya(c,T),y.props=J,se=o.pendingProps,j=y.context,X=c.contextType,O=co,typeof X=="object"&&X!==null&&(O=Dn(X)),w=c.getDerivedStateFromProps,(X=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==se||j!==O)&&IS(o,y,h,O),sr=!1,j=o.memoizedState,y.state=j,cc(o,h,y,m),lc();var Z=o.memoizedState;T!==se||j!==Z||sr||r!==null&&r.dependencies!==null&&dh(r.dependencies)?(typeof w=="function"&&(fm(o,c,w,h),Z=o.memoizedState),(J=sr||DS(o,c,J,h,j,Z,O)||r!==null&&r.dependencies!==null&&dh(r.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,Z,O),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,Z,O)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&j===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&j===r.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=Z),y.props=h,y.state=Z,y.context=O,h=J):(typeof y.componentDidUpdate!="function"||T===r.memoizedProps&&j===r.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&j===r.memoizedState||(o.flags|=1024),h=!1)}return y=h,Oh(r,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,r!==null&&h?(o.child=xo(o,r.child,null,m),o.child=xo(o,null,c,m)):En(r,o,c,m),o.memoizedState=y.state,r=o.child):r=Ls(r,o,m),r}function VS(r,o,c,h){return ec(),o.flags|=256,En(r,o,c,h),o.child}var pm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ym(r){return{baseLanes:r,cachePool:Lx()}}function _m(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=Oi),r}function qS(r,o,c){var h=o.pendingProps,m=!1,y=(o.flags&128)!==0,T;if((T=y)||(T=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),T&&(m=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,r===null){if(rt){if(m?lr(o):cr(),rt){var w=It,O;if(O=w){e:{for(O=w,w=ss;O.nodeType!==8;){if(!w){w=null;break e}if(O=$i(O.nextSibling),O===null){w=null;break e}}w=O}w!==null?(o.memoizedState={dehydrated:w,treeContext:ca!==null?{id:As,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},O=mi(18,null,null,0),O.stateNode=w,O.return=o,o.child=O,Hn=o,It=null,O=!0):O=!1}O||fa(o)}if(w=o.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return t0(w)?o.lanes=32:o.lanes=536870912,null;Os(o)}return w=h.children,h=h.fallback,m?(cr(),m=o.mode,w=Lh({mode:"hidden",children:w},m),h=la(h,m,c,null),w.return=o,h.return=o,w.sibling=h,o.child=w,m=o.child,m.memoizedState=ym(c),m.childLanes=_m(r,T,c),o.memoizedState=pm,h):(lr(o),Em(o,w))}if(O=r.memoizedState,O!==null&&(w=O.dehydrated,w!==null)){if(y)o.flags&256?(lr(o),o.flags&=-257,o=xm(r,o,c)):o.memoizedState!==null?(cr(),o.child=r.child,o.flags|=128,o=null):(cr(),m=h.fallback,w=o.mode,h=Lh({mode:"visible",children:h.children},w),m=la(m,w,c,null),m.flags|=2,h.return=o,m.return=o,h.sibling=m,o.child=h,xo(o,r.child,null,c),h=o.child,h.memoizedState=ym(c),h.childLanes=_m(r,T,c),o.memoizedState=pm,o=m);else if(lr(o),t0(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var X=T.dgst;T=X,h=Error(i(419)),h.stack="",h.digest=T,tc({value:h,source:null,stack:null}),o=xm(r,o,c)}else if(an||nc(r,o,c,!1),T=(c&r.childLanes)!==0,an||T){if(T=Et,T!==null&&(h=c&-c,h=(h&42)!==0?1:Yi(h),h=(h&(T.suspendedLanes|c))!==0?0:h,h!==0&&h!==O.retryLane))throw O.retryLane=h,lo(r,h),xi(T,r,h),US;w.data==="$?"||Um(),o=xm(r,o,c)}else w.data==="$?"?(o.flags|=192,o.child=r.child,o=null):(r=O.treeContext,It=$i(w.nextSibling),Hn=o,rt=!0,ha=null,ss=!1,r!==null&&(Mi[Di++]=As,Mi[Di++]=Cs,Mi[Di++]=ca,As=r.id,Cs=r.overflow,ca=o),o=Em(o,h.children),o.flags|=4096);return o}return m?(cr(),m=h.fallback,w=o.mode,O=r.child,X=O.sibling,h=Rs(O,{mode:"hidden",children:h.children}),h.subtreeFlags=O.subtreeFlags&65011712,X!==null?m=Rs(X,m):(m=la(m,w,c,null),m.flags|=2),m.return=o,h.return=o,h.sibling=m,o.child=h,h=m,m=o.child,w=r.child.memoizedState,w===null?w=ym(c):(O=w.cachePool,O!==null?(X=Wt._currentValue,O=O.parent!==X?{parent:X,pool:X}:O):O=Lx(),w={baseLanes:w.baseLanes|c,cachePool:O}),m.memoizedState=w,m.childLanes=_m(r,T,c),o.memoizedState=pm,h):(lr(o),c=r.child,r=c.sibling,c=Rs(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,r!==null&&(T=o.deletions,T===null?(o.deletions=[r],o.flags|=16):T.push(r)),o.child=c,o.memoizedState=null,c)}function Em(r,o){return o=Lh({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Lh(r,o){return r=mi(22,r,null,o),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function xm(r,o,c){return xo(o,r.child,null,c),r=Em(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function $S(r,o,c){r.lanes|=o;var h=r.alternate;h!==null&&(h.lanes|=o),Ug(r.return,o,c)}function Sm(r,o,c,h,m){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=c,y.tailMode=m)}function KS(r,o,c){var h=o.pendingProps,m=h.revealOrder,y=h.tail;if(En(r,o,h.children,c),h=Qt.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$S(r,c,o);else if(r.tag===19)$S(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}switch(re(Qt,h),m){case"forwards":for(c=o.child,m=null;c!==null;)r=c.alternate,r!==null&&Mh(r)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),Sm(o,!1,m,c,y);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(r=m.alternate,r!==null&&Mh(r)===null){o.child=m;break}r=m.sibling,m.sibling=c,c=m,m=r}Sm(o,!0,c,null,y);break;case"together":Sm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ls(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),gr|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(nc(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,c=Rs(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Rs(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function Tm(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&dh(r)))}function dD(r,o,c){switch(o.tag){case 3:He(o,o.stateNode.containerInfo),ir(o,Wt,r.memoizedState.cache),ec();break;case 27:case 5:wt(o);break;case 4:He(o,o.stateNode.containerInfo);break;case 10:ir(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(lr(o),o.flags|=128,null):(c&o.child.childLanes)!==0?qS(r,o,c):(lr(o),r=Ls(r,o,c),r!==null?r.sibling:null);lr(o);break;case 19:var m=(r.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(nc(r,o,c,!1),h=(c&o.childLanes)!==0),m){if(h)return KS(r,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),re(Qt,Qt.current),h)break;return null;case 22:case 23:return o.lanes=0,HS(r,o,c);case 24:ir(o,Wt,r.memoizedState.cache)}return Ls(r,o,c)}function ZS(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)an=!0;else{if(!Tm(r,c)&&(o.flags&128)===0)return an=!1,dD(r,o,c);an=(r.flags&131072)!==0}else an=!1,rt&&(o.flags&1048576)!==0&&Rx(o,fh,o.index);switch(o.lanes=0,o.tag){case 16:e:{r=o.pendingProps;var h=o.elementType,m=h._init;if(h=m(h._payload),o.type=h,typeof h=="function")Ig(h)?(r=ya(h,r),o.tag=1,o=YS(null,o,h,r,c)):(o.tag=0,o=mm(null,o,h,r,c));else{if(h!=null){if(m=h.$$typeof,m===A){o.tag=11,o=kS(null,o,h,r,c);break e}else if(m===z){o.tag=14,o=zS(null,o,h,r,c);break e}}throw o=fe(h)||h,Error(i(306,o,""))}}return o;case 0:return mm(r,o,o.type,o.pendingProps,c);case 1:return h=o.type,m=ya(h,o.pendingProps),YS(r,o,h,m,c);case 3:e:{if(He(o,o.stateNode.containerInfo),r===null)throw Error(i(387));h=o.pendingProps;var y=o.memoizedState;m=y.element,Yg(r,o),cc(o,h,null,c);var T=o.memoizedState;if(h=T.cache,ir(o,Wt,h),h!==y.cache&&kg(o,[Wt],c,!0),lc(),h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=VS(r,o,h,c);break e}else if(h!==m){m=Ai(Error(i(424)),o),tc(m),o=VS(r,o,h,c);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(It=$i(r.firstChild),Hn=o,rt=!0,ha=null,ss=!0,c=CS(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(ec(),h===m){o=Ls(r,o,c);break e}En(r,o,h,c)}o=o.child}return o;case 26:return Oh(r,o),r===null?(c=eT(o.type,null,o.pendingProps,null))?o.memoizedState=c:rt||(c=o.type,r=o.pendingProps,h=qh(me.current).createElement(c),h[_t]=o,h[Ye]=r,Sn(h,c,r),rn(h),o.stateNode=h):o.memoizedState=eT(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return wt(o),r===null&&rt&&(h=o.stateNode=W1(o.type,o.pendingProps,me.current),Hn=o,ss=!0,m=It,_r(o.type)?(n0=m,It=$i(h.firstChild)):It=m),En(r,o,o.pendingProps.children,c),Oh(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&rt&&((m=h=It)&&(h=GD(h,o.type,o.pendingProps,ss),h!==null?(o.stateNode=h,Hn=o,It=$i(h.firstChild),ss=!1,m=!0):m=!1),m||fa(o)),wt(o),m=o.type,y=o.pendingProps,T=r!==null?r.memoizedProps:null,h=y.children,Qm(m,y)?h=null:T!==null&&Qm(m,T)&&(o.flags|=32),o.memoizedState!==null&&(m=Wg(r,o,rD,null,null,c),Ic._currentValue=m),Oh(r,o),En(r,o,h,c),o.child;case 6:return r===null&&rt&&((r=c=It)&&(c=HD(c,o.pendingProps,ss),c!==null?(o.stateNode=c,Hn=o,It=null,r=!0):r=!1),r||fa(o)),null;case 13:return qS(r,o,c);case 4:return He(o,o.stateNode.containerInfo),h=o.pendingProps,r===null?o.child=xo(o,null,h,c):En(r,o,h,c),o.child;case 11:return kS(r,o,o.type,o.pendingProps,c);case 7:return En(r,o,o.pendingProps,c),o.child;case 8:return En(r,o,o.pendingProps.children,c),o.child;case 12:return En(r,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,ir(o,o.type,h.value),En(r,o,h.children,c),o.child;case 9:return m=o.type._context,h=o.pendingProps.children,ga(o),m=Dn(m),h=h(m),o.flags|=1,En(r,o,h,c),o.child;case 14:return zS(r,o,o.type,o.pendingProps,c);case 15:return GS(r,o,o.type,o.pendingProps,c);case 19:return KS(r,o,c);case 31:return h=o.pendingProps,c=o.mode,h={mode:h.mode,children:h.children},r===null?(c=Lh(h,c),c.ref=o.ref,o.child=c,c.return=o,o=c):(c=Rs(r.child,h),c.ref=o.ref,o.child=c,c.return=o,o=c),o;case 22:return HS(r,o,c);case 24:return ga(o),h=Dn(Wt),r===null?(m=Hg(),m===null&&(m=Et,y=zg(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=c),m=y),o.memoizedState={parent:h,cache:m},jg(o),ir(o,Wt,m)):((r.lanes&c)!==0&&(Yg(r,o),cc(o,null,null,c),lc()),m=r.memoizedState,y=o.memoizedState,m.parent!==h?(m={parent:h,cache:h},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),ir(o,Wt,h)):(h=y.cache,ir(o,Wt,h),h!==m.cache&&kg(o,[Wt],c,!0))),En(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ns(r){r.flags|=4}function WS(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!rT(o)){if(o=Ii.current,o!==null&&((We&4194048)===We?rs!==null:(We&62914560)!==We&&(We&536870912)===0||o!==rs))throw ac=Xg,Nx;r.flags|=8192}}function Nh(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?tr():536870912,r.lanes|=o,vo|=o)}function pc(r,o){if(!rt)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Ct(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(o)for(var m=r.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags&65011712,h|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)c|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=h,r.childLanes=c,o}function gD(r,o,c){var h=o.pendingProps;switch(Bg(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(o),null;case 1:return Ct(o),null;case 3:return c=o.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Ds(Wt),bt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Jl(o)?Ns(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mx())),Ct(o),null;case 26:return c=o.memoizedState,r===null?(Ns(o),c!==null?(Ct(o),WS(o,c)):(Ct(o),o.flags&=-16777217)):c?c!==r.memoizedState?(Ns(o),Ct(o),WS(o,c)):(Ct(o),o.flags&=-16777217):(r.memoizedProps!==h&&Ns(o),Ct(o),o.flags&=-16777217),null;case 27:Gi(o),c=me.current;var m=o.type;if(r!==null&&o.stateNode!=null)r.memoizedProps!==h&&Ns(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Ct(o),null}r=de.current,Jl(o)?Ax(o):(r=W1(m,h,c),o.stateNode=r,Ns(o))}return Ct(o),null;case 5:if(Gi(o),c=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==h&&Ns(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Ct(o),null}if(r=de.current,Jl(o))Ax(o);else{switch(m=qh(me.current),r){case 1:r=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:r=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":r=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":r=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":r=m.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof h.is=="string"?m.createElement("select",{is:h.is}):m.createElement("select"),h.multiple?r.multiple=!0:h.size&&(r.size=h.size);break;default:r=typeof h.is=="string"?m.createElement(c,{is:h.is}):m.createElement(c)}}r[_t]=o,r[Ye]=h;e:for(m=o.child;m!==null;){if(m.tag===5||m.tag===6)r.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===o)break e;for(;m.sibling===null;){if(m.return===null||m.return===o)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}o.stateNode=r;e:switch(Sn(r,c,h),c){case"button":case"input":case"select":case"textarea":r=!!h.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ns(o)}}return Ct(o),o.flags&=-16777217,null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==h&&Ns(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(r=me.current,Jl(o)){if(r=o.stateNode,c=o.memoizedProps,h=null,m=Hn,m!==null)switch(m.tag){case 27:case 5:h=m.memoizedProps}r[_t]=o,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||j1(r.nodeValue,c)),r||fa(o)}else r=qh(r).createTextNode(h),r[_t]=o,o.stateNode=r}return Ct(o),null;case 13:if(h=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=Jl(o),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(i(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[_t]=o}else ec(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ct(o),m=!1}else m=Mx(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(Os(o),o):(Os(o),null)}if(Os(o),(o.flags&128)!==0)return o.lanes=c,o;if(c=h!==null,r=r!==null&&r.memoizedState!==null,c){h=o.child,m=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(m=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048)}return c!==r&&c&&(o.child.flags|=8192),Nh(o,o.updateQueue),Ct(o),null;case 4:return bt(),r===null&&qm(o.stateNode.containerInfo),Ct(o),null;case 10:return Ds(o.type),Ct(o),null;case 19:if(k(Qt),m=o.memoizedState,m===null)return Ct(o),null;if(h=(o.flags&128)!==0,y=m.rendering,y===null)if(h)pc(m,!1);else{if(Ot!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(y=Mh(r),y!==null){for(o.flags|=128,pc(m,!1),r=y.updateQueue,o.updateQueue=r,Nh(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)wx(c,r),c=c.sibling;return re(Qt,Qt.current&1|2),o.child}r=r.sibling}m.tail!==null&&_n()>Fh&&(o.flags|=128,h=!0,pc(m,!1),o.lanes=4194304)}else{if(!h)if(r=Mh(y),r!==null){if(o.flags|=128,h=!0,r=r.updateQueue,o.updateQueue=r,Nh(o,r),pc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!y.alternate&&!rt)return Ct(o),null}else 2*_n()-m.renderingStartTime>Fh&&c!==536870912&&(o.flags|=128,h=!0,pc(m,!1),o.lanes=4194304);m.isBackwards?(y.sibling=o.child,o.child=y):(r=m.last,r!==null?r.sibling=y:o.child=y,m.last=y)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=_n(),o.sibling=null,r=Qt.current,re(Qt,h?r&1|2:r&1),o):(Ct(o),null);case 22:case 23:return Os(o),Kg(),h=o.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(Ct(o),o.subtreeFlags&6&&(o.flags|=8192)):Ct(o),c=o.updateQueue,c!==null&&Nh(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),r!==null&&k(ma),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ds(Wt),Ct(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function mD(r,o){switch(Bg(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ds(Wt),bt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Gi(o),null;case 13:if(Os(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ec()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return k(Qt),null;case 4:return bt(),null;case 10:return Ds(o.type),null;case 22:case 23:return Os(o),Kg(),r!==null&&k(ma),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Ds(Wt),null;case 25:return null;default:return null}}function QS(r,o){switch(Bg(o),o.tag){case 3:Ds(Wt),bt();break;case 26:case 27:case 5:Gi(o);break;case 4:bt();break;case 13:Os(o);break;case 19:k(Qt);break;case 10:Ds(o.type);break;case 22:case 23:Os(o),Kg(),r!==null&&k(ma);break;case 24:Ds(Wt)}}function yc(r,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var m=h.next;c=m;do{if((c.tag&r)===r){h=void 0;var y=c.create,T=c.inst;h=y(),T.destroy=h}c=c.next}while(c!==m)}}catch(w){dt(o,o.return,w)}}function ur(r,o,c){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var y=m.next;h=y;do{if((h.tag&r)===r){var T=h.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,m=o;var O=c,X=w;try{X()}catch(J){dt(m,O,J)}}}h=h.next}while(h!==y)}}catch(J){dt(o,o.return,J)}}function JS(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{zx(o,c)}catch(h){dt(r,r.return,h)}}}function e1(r,o,c){c.props=ya(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){dt(r,o,h)}}function _c(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(m){dt(r,o,m)}}function as(r,o){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(m){dt(r,o,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(m){dt(r,o,m)}else c.current=null}function t1(r){var o=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(m){dt(r,r.return,m)}}function bm(r,o,c){try{var h=r.stateNode;PD(h,r.type,c,o),h[Ye]=o}catch(m){dt(r,r.return,m)}}function n1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&_r(r.type)||r.tag===4}function vm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||n1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&_r(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function wm(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Vh));else if(h!==4&&(h===27&&_r(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(wm(r,o,c),r=r.sibling;r!==null;)wm(r,o,c),r=r.sibling}function Bh(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(h!==4&&(h===27&&_r(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Bh(r,o,c),r=r.sibling;r!==null;)Bh(r,o,c),r=r.sibling}function i1(r){var o=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Sn(o,h,c),o[_t]=r,o[Ye]=c}catch(y){dt(r,r.return,y)}}var Bs=!1,Ft=!1,Rm=!1,s1=typeof WeakSet=="function"?WeakSet:Set,on=null;function pD(r,o){if(r=r.containerInfo,Zm=Jh,r=mx(r),vg(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var T=0,w=-1,O=-1,X=0,J=0,se=r,j=null;t:for(;;){for(var Z;se!==c||m!==0&&se.nodeType!==3||(w=T+m),se!==y||h!==0&&se.nodeType!==3||(O=T+h),se.nodeType===3&&(T+=se.nodeValue.length),(Z=se.firstChild)!==null;)j=se,se=Z;for(;;){if(se===r)break t;if(j===c&&++X===m&&(w=T),j===y&&++J===h&&(O=T),(Z=se.nextSibling)!==null)break;se=j,j=se.parentNode}se=Z}c=w===-1||O===-1?null:{start:w,end:O}}else c=null}c=c||{start:0,end:0}}else c=null;for(Wm={focusedElem:r,selectionRange:c},Jh=!1,on=o;on!==null;)if(o=on,r=o.child,(o.subtreeFlags&1024)!==0&&r!==null)r.return=o,on=r;else for(;on!==null;){switch(o=on,y=o.alternate,r=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,c=o,m=y.memoizedProps,y=y.memoizedState,h=c.stateNode;try{var Ae=ya(c.type,m,c.elementType===c.type);r=h.getSnapshotBeforeUpdate(Ae,y),h.__reactInternalSnapshotBeforeUpdate=r}catch(we){dt(c,c.return,we)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)e0(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":e0(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,on=r;break}on=o.return}}function r1(r,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:hr(r,c),h&4&&yc(5,c);break;case 1:if(hr(r,c),h&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(T){dt(c,c.return,T)}else{var m=ya(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(m,o,r.__reactInternalSnapshotBeforeUpdate)}catch(T){dt(c,c.return,T)}}h&64&&JS(c),h&512&&_c(c,c.return);break;case 3:if(hr(r,c),h&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{zx(r,o)}catch(T){dt(c,c.return,T)}}break;case 27:o===null&&h&4&&i1(c);case 26:case 5:hr(r,c),o===null&&h&4&&t1(c),h&512&&_c(c,c.return);break;case 12:hr(r,c);break;case 13:hr(r,c),h&4&&l1(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=wD.bind(null,c),XD(r,c))));break;case 22:if(h=c.memoizedState!==null||Bs,!h){o=o!==null&&o.memoizedState!==null||Ft,m=Bs;var y=Ft;Bs=h,(Ft=o)&&!y?fr(r,c,(c.subtreeFlags&8772)!==0):hr(r,c),Bs=m,Ft=y}break;case 30:break;default:hr(r,c)}}function a1(r){var o=r.alternate;o!==null&&(r.alternate=null,a1(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&rg(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Rt=null,ni=!1;function Ps(r,o,c){for(c=c.child;c!==null;)o1(r,o,c),c=c.sibling}function o1(r,o,c){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(ts,c)}catch{}switch(c.tag){case 26:Ft||as(c,o),Ps(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ft||as(c,o);var h=Rt,m=ni;_r(c.type)&&(Rt=c.stateNode,ni=!1),Ps(r,o,c),Ac(c.stateNode),Rt=h,ni=m;break;case 5:Ft||as(c,o);case 6:if(h=Rt,m=ni,Rt=null,Ps(r,o,c),Rt=h,ni=m,Rt!==null)if(ni)try{(Rt.nodeType===9?Rt.body:Rt.nodeName==="HTML"?Rt.ownerDocument.body:Rt).removeChild(c.stateNode)}catch(y){dt(c,o,y)}else try{Rt.removeChild(c.stateNode)}catch(y){dt(c,o,y)}break;case 18:Rt!==null&&(ni?(r=Rt,K1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Bc(r)):K1(Rt,c.stateNode));break;case 4:h=Rt,m=ni,Rt=c.stateNode.containerInfo,ni=!0,Ps(r,o,c),Rt=h,ni=m;break;case 0:case 11:case 14:case 15:Ft||ur(2,c,o),Ft||ur(4,c,o),Ps(r,o,c);break;case 1:Ft||(as(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&e1(c,o,h)),Ps(r,o,c);break;case 21:Ps(r,o,c);break;case 22:Ft=(h=Ft)||c.memoizedState!==null,Ps(r,o,c),Ft=h;break;default:Ps(r,o,c)}}function l1(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Bc(r)}catch(c){dt(o,o.return,c)}}function yD(r){switch(r.tag){case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new s1),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new s1),o;default:throw Error(i(435,r.tag))}}function Am(r,o){var c=yD(r);o.forEach(function(h){var m=RD.bind(null,r,h);c.has(h)||(c.add(h),h.then(m,m))})}function pi(r,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var m=c[h],y=r,T=o,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(_r(w.type)){Rt=w.stateNode,ni=!1;break e}break;case 5:Rt=w.stateNode,ni=!1;break e;case 3:case 4:Rt=w.stateNode.containerInfo,ni=!0;break e}w=w.return}if(Rt===null)throw Error(i(160));o1(y,T,m),Rt=null,ni=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)c1(o,r),o=o.sibling}var qi=null;function c1(r,o){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:pi(o,r),yi(r),h&4&&(ur(3,r,r.return),yc(3,r),ur(5,r,r.return));break;case 1:pi(o,r),yi(r),h&512&&(Ft||c===null||as(c,c.return)),h&64&&Bs&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var m=qi;if(pi(o,r),yi(r),h&512&&(Ft||c===null||as(c,c.return)),h&4){var y=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,m=m.ownerDocument||m;t:switch(h){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Hl]||y[_t]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(h),m.head.insertBefore(y,m.querySelector("head > title"))),Sn(y,h,c),y[_t]=r,rn(y),h=y;break e;case"link":var T=iT("link","href",m).get(h+(c.href||""));if(T){for(var w=0;w<T.length;w++)if(y=T[w],y.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&y.getAttribute("rel")===(c.rel==null?null:c.rel)&&y.getAttribute("title")===(c.title==null?null:c.title)&&y.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(w,1);break t}}y=m.createElement(h),Sn(y,h,c),m.head.appendChild(y);break;case"meta":if(T=iT("meta","content",m).get(h+(c.content||""))){for(w=0;w<T.length;w++)if(y=T[w],y.getAttribute("content")===(c.content==null?null:""+c.content)&&y.getAttribute("name")===(c.name==null?null:c.name)&&y.getAttribute("property")===(c.property==null?null:c.property)&&y.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&y.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(w,1);break t}}y=m.createElement(h),Sn(y,h,c),m.head.appendChild(y);break;default:throw Error(i(468,h))}y[_t]=r,rn(y),h=y}r.stateNode=h}else sT(m,r.type,r.stateNode);else r.stateNode=nT(m,h,r.memoizedProps);else y!==h?(y===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):y.count--,h===null?sT(m,r.type,r.stateNode):nT(m,h,r.memoizedProps)):h===null&&r.stateNode!==null&&bm(r,r.memoizedProps,c.memoizedProps)}break;case 27:pi(o,r),yi(r),h&512&&(Ft||c===null||as(c,c.return)),c!==null&&h&4&&bm(r,r.memoizedProps,c.memoizedProps);break;case 5:if(pi(o,r),yi(r),h&512&&(Ft||c===null||as(c,c.return)),r.flags&32){m=r.stateNode;try{to(m,"")}catch(Z){dt(r,r.return,Z)}}h&4&&r.stateNode!=null&&(m=r.memoizedProps,bm(r,m,c!==null?c.memoizedProps:m)),h&1024&&(Rm=!0);break;case 6:if(pi(o,r),yi(r),h&4){if(r.stateNode===null)throw Error(i(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(Z){dt(r,r.return,Z)}}break;case 3:if(Zh=null,m=qi,qi=$h(o.containerInfo),pi(o,r),qi=m,yi(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Bc(o.containerInfo)}catch(Z){dt(r,r.return,Z)}Rm&&(Rm=!1,u1(r));break;case 4:h=qi,qi=$h(r.stateNode.containerInfo),pi(o,r),yi(r),qi=h;break;case 12:pi(o,r),yi(r);break;case 13:pi(o,r),yi(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Lm=_n()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Am(r,h)));break;case 22:m=r.memoizedState!==null;var O=c!==null&&c.memoizedState!==null,X=Bs,J=Ft;if(Bs=X||m,Ft=J||O,pi(o,r),Ft=J,Bs=X,yi(r),h&8192)e:for(o=r.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(c===null||O||Bs||Ft||_a(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){O=c=o;try{if(y=O.stateNode,m)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=O.stateNode;var se=O.memoizedProps.style,j=se!=null&&se.hasOwnProperty("display")?se.display:null;w.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(Z){dt(O,O.return,Z)}}}else if(o.tag===6){if(c===null){O=o;try{O.stateNode.nodeValue=m?"":O.memoizedProps}catch(Z){dt(O,O.return,Z)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Am(r,c))));break;case 19:pi(o,r),yi(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Am(r,h)));break;case 30:break;case 21:break;default:pi(o,r),yi(r)}}function yi(r){var o=r.flags;if(o&2){try{for(var c,h=r.return;h!==null;){if(n1(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var m=c.stateNode,y=vm(r);Bh(r,y,m);break;case 5:var T=c.stateNode;c.flags&32&&(to(T,""),c.flags&=-33);var w=vm(r);Bh(r,w,T);break;case 3:case 4:var O=c.stateNode.containerInfo,X=vm(r);wm(r,X,O);break;default:throw Error(i(161))}}catch(J){dt(r,r.return,J)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function u1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;u1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function hr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)r1(r,o.alternate,o),o=o.sibling}function _a(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:ur(4,o,o.return),_a(o);break;case 1:as(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&e1(o,o.return,c),_a(o);break;case 27:Ac(o.stateNode);case 26:case 5:as(o,o.return),_a(o);break;case 22:o.memoizedState===null&&_a(o);break;case 30:_a(o);break;default:_a(o)}r=r.sibling}}function fr(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,m=r,y=o,T=y.flags;switch(y.tag){case 0:case 11:case 15:fr(m,y,c),yc(4,y);break;case 1:if(fr(m,y,c),h=y,m=h.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){dt(h,h.return,X)}if(h=y,m=h.updateQueue,m!==null){var w=h.stateNode;try{var O=m.shared.hiddenCallbacks;if(O!==null)for(m.shared.hiddenCallbacks=null,m=0;m<O.length;m++)kx(O[m],w)}catch(X){dt(h,h.return,X)}}c&&T&64&&JS(y),_c(y,y.return);break;case 27:i1(y);case 26:case 5:fr(m,y,c),c&&h===null&&T&4&&t1(y),_c(y,y.return);break;case 12:fr(m,y,c);break;case 13:fr(m,y,c),c&&T&4&&l1(m,y);break;case 22:y.memoizedState===null&&fr(m,y,c),_c(y,y.return);break;case 30:break;default:fr(m,y,c)}o=o.sibling}}function Cm(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&ic(c))}function Mm(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ic(r))}function os(r,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)h1(r,o,c,h),o=o.sibling}function h1(r,o,c,h){var m=o.flags;switch(o.tag){case 0:case 11:case 15:os(r,o,c,h),m&2048&&yc(9,o);break;case 1:os(r,o,c,h);break;case 3:os(r,o,c,h),m&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ic(r)));break;case 12:if(m&2048){os(r,o,c,h),r=o.stateNode;try{var y=o.memoizedProps,T=y.id,w=y.onPostCommit;typeof w=="function"&&w(T,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(O){dt(o,o.return,O)}}else os(r,o,c,h);break;case 13:os(r,o,c,h);break;case 23:break;case 22:y=o.stateNode,T=o.alternate,o.memoizedState!==null?y._visibility&2?os(r,o,c,h):Ec(r,o):y._visibility&2?os(r,o,c,h):(y._visibility|=2,So(r,o,c,h,(o.subtreeFlags&10256)!==0)),m&2048&&Cm(T,o);break;case 24:os(r,o,c,h),m&2048&&Mm(o.alternate,o);break;default:os(r,o,c,h)}}function So(r,o,c,h,m){for(m=m&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=r,T=o,w=c,O=h,X=T.flags;switch(T.tag){case 0:case 11:case 15:So(y,T,w,O,m),yc(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?So(y,T,w,O,m):Ec(y,T):(J._visibility|=2,So(y,T,w,O,m)),m&&X&2048&&Cm(T.alternate,T);break;case 24:So(y,T,w,O,m),m&&X&2048&&Mm(T.alternate,T);break;default:So(y,T,w,O,m)}o=o.sibling}}function Ec(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,h=o,m=h.flags;switch(h.tag){case 22:Ec(c,h),m&2048&&Cm(h.alternate,h);break;case 24:Ec(c,h),m&2048&&Mm(h.alternate,h);break;default:Ec(c,h)}o=o.sibling}}var xc=8192;function To(r){if(r.subtreeFlags&xc)for(r=r.child;r!==null;)f1(r),r=r.sibling}function f1(r){switch(r.tag){case 26:To(r),r.flags&xc&&r.memoizedState!==null&&nI(qi,r.memoizedState,r.memoizedProps);break;case 5:To(r);break;case 3:case 4:var o=qi;qi=$h(r.stateNode.containerInfo),To(r),qi=o;break;case 22:r.memoizedState===null&&(o=r.alternate,o!==null&&o.memoizedState!==null?(o=xc,xc=16777216,To(r),xc=o):To(r));break;default:To(r)}}function d1(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Sc(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];on=h,m1(h,r)}d1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)g1(r),r=r.sibling}function g1(r){switch(r.tag){case 0:case 11:case 15:Sc(r),r.flags&2048&&ur(9,r,r.return);break;case 3:Sc(r);break;case 12:Sc(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Ph(r)):Sc(r);break;default:Sc(r)}}function Ph(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];on=h,m1(h,r)}d1(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:ur(8,o,o.return),Ph(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Ph(o));break;default:Ph(o)}r=r.sibling}}function m1(r,o){for(;on!==null;){var c=on;switch(c.tag){case 0:case 11:case 15:ur(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:ic(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,on=h;else e:for(c=r;on!==null;){h=on;var m=h.sibling,y=h.return;if(a1(h),h===c){on=null;break e}if(m!==null){m.return=y,on=m;break e}on=y}}}var _D={getCacheForType:function(r){var o=Dn(Wt),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c}},ED=typeof WeakMap=="function"?WeakMap:Map,lt=0,Et=null,Ve=null,We=0,ct=0,_i=null,dr=!1,bo=!1,Dm=!1,Fs=0,Ot=0,gr=0,Ea=0,Im=0,Oi=0,vo=0,Tc=null,ii=null,Om=!1,Lm=0,Fh=1/0,Uh=null,mr=null,xn=0,pr=null,wo=null,Ro=0,Nm=0,Bm=null,p1=null,bc=0,Pm=null;function Ei(){if((lt&2)!==0&&We!==0)return We&-We;if(P.T!==null){var r=fo;return r!==0?r:Xm()}return fi()}function y1(){Oi===0&&(Oi=(We&536870912)===0||rt?$a():536870912);var r=Ii.current;return r!==null&&(r.flags|=32),Oi}function xi(r,o,c){(r===Et&&(ct===2||ct===9)||r.cancelPendingCommit!==null)&&(Ao(r,0),yr(r,We,Oi,!1)),ji(r,c),((lt&2)===0||r!==Et)&&(r===Et&&((lt&2)===0&&(Ea|=c),Ot===4&&yr(r,We,Oi,!1)),ls(r))}function _1(r,o,c){if((lt&6)!==0)throw Error(i(327));var h=!c&&(o&124)===0&&(o&r.expiredLanes)===0||er(r,o),m=h?TD(r,o):km(r,o,!0),y=h;do{if(m===0){bo&&!h&&yr(r,o,0,!1);break}else{if(c=r.current.alternate,y&&!xD(c)){m=km(r,o,!1),y=!1;continue}if(m===2){if(y=o,r.errorRecoveryDisabledLanes&y)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var w=r;m=Tc;var O=w.current.memoizedState.isDehydrated;if(O&&(Ao(w,T).flags|=256),T=km(w,T,!1),T!==2){if(Dm&&!O){w.errorRecoveryDisabledLanes|=y,Ea|=y,m=4;break e}y=ii,ii=m,y!==null&&(ii===null?ii=y:ii.push.apply(ii,y))}m=T}if(y=!1,m!==2)continue}}if(m===1){Ao(r,0),yr(r,o,0,!0);break}e:{switch(h=r,y=m,y){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:yr(h,o,Oi,!dr);break e;case 2:ii=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(m=Lm+300-_n(),10<m)){if(yr(h,o,Oi,!dr),Js(h,0,!0)!==0)break e;h.timeoutHandle=q1(E1.bind(null,h,c,ii,Uh,Om,o,Oi,Ea,vo,dr,y,2,-0,0),m);break e}E1(h,c,ii,Uh,Om,o,Oi,Ea,vo,dr,y,0,-0,0)}}break}while(!0);ls(r)}function E1(r,o,c,h,m,y,T,w,O,X,J,se,j,Z){if(r.timeoutHandle=-1,se=o.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Dc={stylesheets:null,count:0,unsuspend:tI},f1(o),se=iI(),se!==null)){r.cancelPendingCommit=se(R1.bind(null,r,o,y,c,h,m,T,w,O,J,1,j,Z)),yr(r,y,T,!X);return}R1(r,o,y,c,h,m,T,w,O)}function xD(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var m=c[h],y=m.getSnapshot;m=m.value;try{if(!gi(y(),m))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function yr(r,o,c,h){o&=~Im,o&=~Ea,r.suspendedLanes|=o,r.pingedLanes&=~o,h&&(r.warmLanes|=o),h=r.expirationTimes;for(var m=o;0<m;){var y=31-Cn(m),T=1<<y;h[y]=-1,m&=~T}c!==0&&Gl(r,c,o)}function kh(){return(lt&6)===0?(vc(0),!1):!0}function Fm(){if(Ve!==null){if(ct===0)var r=Ve.return;else r=Ve,Ms=da=null,em(r),Eo=null,gc=0,r=Ve;for(;r!==null;)QS(r.alternate,r),r=r.return;Ve=null}}function Ao(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,UD(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Fm(),Et=r,Ve=c=Rs(r.current,null),We=o,ct=0,_i=null,dr=!1,bo=er(r,o),Dm=!1,vo=Oi=Im=Ea=gr=Ot=0,ii=Tc=null,Om=!1,(o&8)!==0&&(o|=o&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=o;0<h;){var m=31-Cn(h),y=1<<m;o|=r[m],h&=~y}return Fs=o,oh(),c}function x1(r,o){Xe=null,P.H=Rh,o===rc||o===ph?(o=Fx(),ct=3):o===Nx?(o=Fx(),ct=4):ct=o===US?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,_i=o,Ve===null&&(Ot=1,Ih(r,Ai(o,r.current)))}function S1(){var r=P.H;return P.H=Rh,r===null?Rh:r}function T1(){var r=P.A;return P.A=_D,r}function Um(){Ot=4,dr||(We&4194048)!==We&&Ii.current!==null||(bo=!0),(gr&134217727)===0&&(Ea&134217727)===0||Et===null||yr(Et,We,Oi,!1)}function km(r,o,c){var h=lt;lt|=2;var m=S1(),y=T1();(Et!==r||We!==o)&&(Uh=null,Ao(r,o)),o=!1;var T=Ot;e:do try{if(ct!==0&&Ve!==null){var w=Ve,O=_i;switch(ct){case 8:Fm(),T=6;break e;case 3:case 2:case 9:case 6:Ii.current===null&&(o=!0);var X=ct;if(ct=0,_i=null,Co(r,w,O,X),c&&bo){T=0;break e}break;default:X=ct,ct=0,_i=null,Co(r,w,O,X)}}SD(),T=Ot;break}catch(J){x1(r,J)}while(!0);return o&&r.shellSuspendCounter++,Ms=da=null,lt=h,P.H=m,P.A=y,Ve===null&&(Et=null,We=0,oh()),T}function SD(){for(;Ve!==null;)b1(Ve)}function TD(r,o){var c=lt;lt|=2;var h=S1(),m=T1();Et!==r||We!==o?(Uh=null,Fh=_n()+500,Ao(r,o)):bo=er(r,o);e:do try{if(ct!==0&&Ve!==null){o=Ve;var y=_i;t:switch(ct){case 1:ct=0,_i=null,Co(r,o,y,1);break;case 2:case 9:if(Bx(y)){ct=0,_i=null,v1(o);break}o=function(){ct!==2&&ct!==9||Et!==r||(ct=7),ls(r)},y.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Bx(y)?(ct=0,_i=null,v1(o)):(ct=0,_i=null,Co(r,o,y,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var w=Ve;if(!T||rT(T)){ct=0,_i=null;var O=w.sibling;if(O!==null)Ve=O;else{var X=w.return;X!==null?(Ve=X,zh(X)):Ve=null}break t}}ct=0,_i=null,Co(r,o,y,5);break;case 6:ct=0,_i=null,Co(r,o,y,6);break;case 8:Fm(),Ot=6;break e;default:throw Error(i(462))}}bD();break}catch(J){x1(r,J)}while(!0);return Ms=da=null,P.H=h,P.A=m,lt=c,Ve!==null?0:(Et=null,We=0,oh(),Ot)}function bD(){for(;Ve!==null&&!An();)b1(Ve)}function b1(r){var o=ZS(r.alternate,r,Fs);r.memoizedProps=r.pendingProps,o===null?zh(r):Ve=o}function v1(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=jS(c,o,o.pendingProps,o.type,void 0,We);break;case 11:o=jS(c,o,o.pendingProps,o.type.render,o.ref,We);break;case 5:em(o);default:QS(c,o),o=Ve=wx(o,Fs),o=ZS(c,o,Fs)}r.memoizedProps=r.pendingProps,o===null?zh(r):Ve=o}function Co(r,o,c,h){Ms=da=null,em(o),Eo=null,gc=0;var m=o.return;try{if(fD(r,m,o,c,We)){Ot=1,Ih(r,Ai(c,r.current)),Ve=null;return}}catch(y){if(m!==null)throw Ve=m,y;Ot=1,Ih(r,Ai(c,r.current)),Ve=null;return}o.flags&32768?(rt||h===1?r=!0:bo||(We&536870912)!==0?r=!1:(dr=r=!0,(h===2||h===9||h===3||h===6)&&(h=Ii.current,h!==null&&h.tag===13&&(h.flags|=16384))),w1(o,r)):zh(o)}function zh(r){var o=r;do{if((o.flags&32768)!==0){w1(o,dr);return}r=o.return;var c=gD(o.alternate,o,Fs);if(c!==null){Ve=c;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=r}while(o!==null);Ot===0&&(Ot=5)}function w1(r,o){do{var c=mD(r.alternate,r);if(c!==null){c.flags&=32767,Ve=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=c}while(r!==null);Ot=6,Ve=null}function R1(r,o,c,h,m,y,T,w,O){r.cancelPendingCommit=null;do Gh();while(xn!==0);if((lt&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(y=o.lanes|o.childLanes,y|=Mg,Ku(r,c,y,T,w,O),r===Et&&(Ve=Et=null,We=0),wo=o,pr=r,Ro=c,Nm=y,Bm=m,p1=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,AD(Xi,function(){return I1(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,m=W.p,W.p=2,T=lt,lt|=4;try{pD(r,o,c)}finally{lt=T,W.p=m,P.T=h}}xn=1,A1(),C1(),M1()}}function A1(){if(xn===1){xn=0;var r=pr,o=wo,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var h=W.p;W.p=2;var m=lt;lt|=4;try{c1(o,r);var y=Wm,T=mx(r.containerInfo),w=y.focusedElem,O=y.selectionRange;if(T!==w&&w&&w.ownerDocument&&gx(w.ownerDocument.documentElement,w)){if(O!==null&&vg(w)){var X=O.start,J=O.end;if(J===void 0&&(J=X),"selectionStart"in w)w.selectionStart=X,w.selectionEnd=Math.min(J,w.value.length);else{var se=w.ownerDocument||document,j=se&&se.defaultView||window;if(j.getSelection){var Z=j.getSelection(),Ae=w.textContent.length,we=Math.min(O.start,Ae),ft=O.end===void 0?we:Math.min(O.end,Ae);!Z.extend&&we>ft&&(T=ft,ft=we,we=T);var F=dx(w,we),N=dx(w,ft);if(F&&N&&(Z.rangeCount!==1||Z.anchorNode!==F.node||Z.anchorOffset!==F.offset||Z.focusNode!==N.node||Z.focusOffset!==N.offset)){var G=se.createRange();G.setStart(F.node,F.offset),Z.removeAllRanges(),we>ft?(Z.addRange(G),Z.extend(N.node,N.offset)):(G.setEnd(N.node,N.offset),Z.addRange(G))}}}}for(se=[],Z=w;Z=Z.parentNode;)Z.nodeType===1&&se.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<se.length;w++){var ne=se[w];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Jh=!!Zm,Wm=Zm=null}finally{lt=m,W.p=h,P.T=c}}r.current=o,xn=2}}function C1(){if(xn===2){xn=0;var r=pr,o=wo,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var h=W.p;W.p=2;var m=lt;lt|=4;try{r1(r,o.alternate,o)}finally{lt=m,W.p=h,P.T=c}}xn=3}}function M1(){if(xn===4||xn===3){xn=0,Qn();var r=pr,o=wo,c=Ro,h=p1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?xn=5:(xn=0,wo=pr=null,D1(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(mr=null),Mn(c),o=o.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(ts,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=P.T,m=W.p,W.p=2,P.T=null;try{for(var y=r.onRecoverableError,T=0;T<h.length;T++){var w=h[T];y(w.value,{componentStack:w.stack})}}finally{P.T=o,W.p=m}}(Ro&3)!==0&&Gh(),ls(r),m=r.pendingLanes,(c&4194090)!==0&&(m&42)!==0?r===Pm?bc++:(bc=0,Pm=r):bc=0,vc(0)}}function D1(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,ic(o)))}function Gh(r){return A1(),C1(),M1(),I1()}function I1(){if(xn!==5)return!1;var r=pr,o=Nm;Nm=0;var c=Mn(Ro),h=P.T,m=W.p;try{W.p=32>c?32:c,P.T=null,c=Bm,Bm=null;var y=pr,T=Ro;if(xn=0,wo=pr=null,Ro=0,(lt&6)!==0)throw Error(i(331));var w=lt;if(lt|=4,g1(y.current),h1(y,y.current,T,c),lt=w,vc(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(ts,y)}catch{}return!0}finally{W.p=m,P.T=h,D1(r,o)}}function O1(r,o,c){o=Ai(c,o),o=gm(r.stateNode,o,2),r=ar(r,o,2),r!==null&&(ji(r,2),ls(r))}function dt(r,o,c){if(r.tag===3)O1(r,r,c);else for(;o!==null;){if(o.tag===3){O1(o,r,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(mr===null||!mr.has(h))){r=Ai(c,r),c=PS(2),h=ar(o,c,2),h!==null&&(FS(c,h,o,r),ji(h,2),ls(h));break}}o=o.return}}function zm(r,o,c){var h=r.pingCache;if(h===null){h=r.pingCache=new ED;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(c)||(Dm=!0,m.add(c),r=vD.bind(null,r,o,c),o.then(r,r))}function vD(r,o,c){var h=r.pingCache;h!==null&&h.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,Et===r&&(We&c)===c&&(Ot===4||Ot===3&&(We&62914560)===We&&300>_n()-Lm?(lt&2)===0&&Ao(r,0):Im|=c,vo===We&&(vo=0)),ls(r)}function L1(r,o){o===0&&(o=tr()),r=lo(r,o),r!==null&&(ji(r,o),ls(r))}function wD(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),L1(r,c)}function RD(r,o){var c=0;switch(r.tag){case 13:var h=r.stateNode,m=r.memoizedState;m!==null&&(c=m.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),L1(r,c)}function AD(r,o){return Hi(r,o)}var Hh=null,Mo=null,Gm=!1,Xh=!1,Hm=!1,xa=0;function ls(r){r!==Mo&&r.next===null&&(Mo===null?Hh=Mo=r:Mo=Mo.next=r),Xh=!0,Gm||(Gm=!0,MD())}function vc(r,o){if(!Hm&&Xh){Hm=!0;do for(var c=!1,h=Hh;h!==null;){if(r!==0){var m=h.pendingLanes;if(m===0)var y=0;else{var T=h.suspendedLanes,w=h.pingedLanes;y=(1<<31-Cn(42|r)+1)-1,y&=m&~(T&~w),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(c=!0,F1(h,y))}else y=We,y=Js(h,h===Et?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||er(h,y)||(c=!0,F1(h,y));h=h.next}while(c);Hm=!1}}function CD(){N1()}function N1(){Xh=Gm=!1;var r=0;xa!==0&&(FD()&&(r=xa),xa=0);for(var o=_n(),c=null,h=Hh;h!==null;){var m=h.next,y=B1(h,o);y===0?(h.next=null,c===null?Hh=m:c.next=m,m===null&&(Mo=c)):(c=h,(r!==0||(y&3)!==0)&&(Xh=!0)),h=m}vc(r)}function B1(r,o){for(var c=r.suspendedLanes,h=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var T=31-Cn(y),w=1<<T,O=m[T];O===-1?((w&c)===0||(w&h)!==0)&&(m[T]=ig(w,o)):O<=o&&(r.expiredLanes|=w),y&=~w}if(o=Et,c=We,c=Js(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===o&&(ct===2||ct===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&hi(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||er(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(h!==null&&hi(h),Mn(c)){case 2:case 8:c=es;break;case 32:c=Xi;break;case 268435456:c=Bt;break;default:c=Xi}return h=P1.bind(null,r),c=Hi(c,h),r.callbackPriority=o,r.callbackNode=c,o}return h!==null&&h!==null&&hi(h),r.callbackPriority=2,r.callbackNode=null,2}function P1(r,o){if(xn!==0&&xn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(Gh()&&r.callbackNode!==c)return null;var h=We;return h=Js(r,r===Et?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(_1(r,h,o),B1(r,_n()),r.callbackNode!=null&&r.callbackNode===c?P1.bind(null,r):null)}function F1(r,o){if(Gh())return null;_1(r,o,!0)}function MD(){kD(function(){(lt&6)!==0?Hi(Ws,CD):N1()})}function Xm(){return xa===0&&(xa=$a()),xa}function U1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:eh(""+r)}function k1(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function DD(r,o,c,h,m){if(o==="submit"&&c&&c.stateNode===m){var y=U1((m[Ye]||null).action),T=h.submitter;T&&(o=(o=T[Ye]||null)?U1(o.formAction):T.getAttribute("formAction"),o!==null&&(y=o,T=null));var w=new sh("action","action",null,h,m);r.push({event:w,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(xa!==0){var O=T?k1(m,T):new FormData(m);cm(c,{pending:!0,data:O,method:m.method,action:y},null,O)}}else typeof y=="function"&&(w.preventDefault(),O=T?k1(m,T):new FormData(m),cm(c,{pending:!0,data:O,method:m.method,action:y},y,O))},currentTarget:m}]})}}for(var jm=0;jm<Cg.length;jm++){var Ym=Cg[jm],ID=Ym.toLowerCase(),OD=Ym[0].toUpperCase()+Ym.slice(1);Vi(ID,"on"+OD)}Vi(_x,"onAnimationEnd"),Vi(Ex,"onAnimationIteration"),Vi(xx,"onAnimationStart"),Vi("dblclick","onDoubleClick"),Vi("focusin","onFocus"),Vi("focusout","onBlur"),Vi(KM,"onTransitionRun"),Vi(ZM,"onTransitionStart"),Vi(WM,"onTransitionCancel"),Vi(Sx,"onTransitionEnd"),Qa("onMouseEnter",["mouseout","mouseover"]),Qa("onMouseLeave",["mouseout","mouseover"]),Qa("onPointerEnter",["pointerout","pointerover"]),Qa("onPointerLeave",["pointerout","pointerover"]),sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sa("onBeforeInput",["compositionend","keypress","textInput","paste"]),sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wc));function z1(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],m=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var T=h.length-1;0<=T;T--){var w=h[T],O=w.instance,X=w.currentTarget;if(w=w.listener,O!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=X;try{y(m)}catch(J){Dh(J)}m.currentTarget=null,y=O}else for(T=0;T<h.length;T++){if(w=h[T],O=w.instance,X=w.currentTarget,w=w.listener,O!==y&&m.isPropagationStopped())break e;y=w,m.currentTarget=X;try{y(m)}catch(J){Dh(J)}m.currentTarget=null,y=O}}}}function qe(r,o){var c=o[di];c===void 0&&(c=o[di]=new Set);var h=r+"__bubble";c.has(h)||(G1(o,r,2,!1),c.add(h))}function Vm(r,o,c){var h=0;o&&(h|=4),G1(c,r,h,o)}var jh="_reactListening"+Math.random().toString(36).slice(2);function qm(r){if(!r[jh]){r[jh]=!0,NE.forEach(function(c){c!=="selectionchange"&&(LD.has(c)||Vm(c,!1,r),Vm(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[jh]||(o[jh]=!0,Vm("selectionchange",!1,o))}}function G1(r,o,c,h){switch(hT(o)){case 2:var m=aI;break;case 8:m=oI;break;default:m=o0}c=m.bind(null,o,c,r),m=void 0,!mg||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?r.addEventListener(o,c,{capture:!0,passive:m}):r.addEventListener(o,c,!0):m!==void 0?r.addEventListener(o,c,{passive:m}):r.addEventListener(o,c,!1)}function $m(r,o,c,h,m){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var w=h.stateNode.containerInfo;if(w===m)break;if(T===4)for(T=h.return;T!==null;){var O=T.tag;if((O===3||O===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;w!==null;){if(T=Ka(w),T===null)return;if(O=T.tag,O===5||O===6||O===26||O===27){h=y=T;continue e}w=w.parentNode}}h=h.return}$E(function(){var X=y,J=dg(c),se=[];e:{var j=Tx.get(r);if(j!==void 0){var Z=sh,Ae=r;switch(r){case"keypress":if(nh(c)===0)break e;case"keydown":case"keyup":Z=AM;break;case"focusin":Ae="focus",Z=Eg;break;case"focusout":Ae="blur",Z=Eg;break;case"beforeblur":case"afterblur":Z=Eg;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=WE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=mM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=DM;break;case _x:case Ex:case xx:Z=_M;break;case Sx:Z=OM;break;case"scroll":case"scrollend":Z=dM;break;case"wheel":Z=NM;break;case"copy":case"cut":case"paste":Z=xM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=JE;break;case"toggle":case"beforetoggle":Z=PM}var we=(o&4)!==0,ft=!we&&(r==="scroll"||r==="scrollend"),F=we?j!==null?j+"Capture":null:j;we=[];for(var N=X,G;N!==null;){var ne=N;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||F===null||(ne=jl(N,F),ne!=null&&we.push(Rc(N,ne,G))),ft)break;N=N.return}0<we.length&&(j=new Z(j,Ae,null,c,J),se.push({event:j,listeners:we}))}}if((o&7)===0){e:{if(j=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",j&&c!==fg&&(Ae=c.relatedTarget||c.fromElement)&&(Ka(Ae)||Ae[Dt]))break e;if((Z||j)&&(j=J.window===J?J:(j=J.ownerDocument)?j.defaultView||j.parentWindow:window,Z?(Ae=c.relatedTarget||c.toElement,Z=X,Ae=Ae?Ka(Ae):null,Ae!==null&&(ft=a(Ae),we=Ae.tag,Ae!==ft||we!==5&&we!==27&&we!==6)&&(Ae=null)):(Z=null,Ae=X),Z!==Ae)){if(we=WE,ne="onMouseLeave",F="onMouseEnter",N="mouse",(r==="pointerout"||r==="pointerover")&&(we=JE,ne="onPointerLeave",F="onPointerEnter",N="pointer"),ft=Z==null?j:Xl(Z),G=Ae==null?j:Xl(Ae),j=new we(ne,N+"leave",Z,c,J),j.target=ft,j.relatedTarget=G,ne=null,Ka(J)===X&&(we=new we(F,N+"enter",Ae,c,J),we.target=G,we.relatedTarget=ft,ne=we),ft=ne,Z&&Ae)t:{for(we=Z,F=Ae,N=0,G=we;G;G=Do(G))N++;for(G=0,ne=F;ne;ne=Do(ne))G++;for(;0<N-G;)we=Do(we),N--;for(;0<G-N;)F=Do(F),G--;for(;N--;){if(we===F||F!==null&&we===F.alternate)break t;we=Do(we),F=Do(F)}we=null}else we=null;Z!==null&&H1(se,j,Z,we,!1),Ae!==null&&ft!==null&&H1(se,ft,Ae,we,!0)}}e:{if(j=X?Xl(X):window,Z=j.nodeName&&j.nodeName.toLowerCase(),Z==="select"||Z==="input"&&j.type==="file")var Se=ox;else if(rx(j))if(lx)Se=VM;else{Se=jM;var je=XM}else Z=j.nodeName,!Z||Z.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?X&&hg(X.elementType)&&(Se=ox):Se=YM;if(Se&&(Se=Se(r,X))){ax(se,Se,c,J);break e}je&&je(r,j,X),r==="focusout"&&X&&j.type==="number"&&X.memoizedProps.value!=null&&ug(j,"number",j.value)}switch(je=X?Xl(X):window,r){case"focusin":(rx(je)||je.contentEditable==="true")&&(ro=je,wg=X,Ql=null);break;case"focusout":Ql=wg=ro=null;break;case"mousedown":Rg=!0;break;case"contextmenu":case"mouseup":case"dragend":Rg=!1,px(se,c,J);break;case"selectionchange":if($M)break;case"keydown":case"keyup":px(se,c,J)}var be;if(Sg)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else so?ix(r,c)&&(Re="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Re="onCompositionStart");Re&&(ex&&c.locale!=="ko"&&(so||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&so&&(be=KE()):(nr=J,pg="value"in nr?nr.value:nr.textContent,so=!0)),je=Yh(X,Re),0<je.length&&(Re=new QE(Re,r,null,c,J),se.push({event:Re,listeners:je}),be?Re.data=be:(be=sx(c),be!==null&&(Re.data=be)))),(be=UM?kM(r,c):zM(r,c))&&(Re=Yh(X,"onBeforeInput"),0<Re.length&&(je=new QE("onBeforeInput","beforeinput",null,c,J),se.push({event:je,listeners:Re}),je.data=be)),DD(se,r,X,c,J)}z1(se,o)})}function Rc(r,o,c){return{instance:r,listener:o,currentTarget:c}}function Yh(r,o){for(var c=o+"Capture",h=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=jl(r,c),m!=null&&h.unshift(Rc(r,m,y)),m=jl(r,o),m!=null&&h.push(Rc(r,m,y))),r.tag===3)return h;r=r.return}return[]}function Do(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function H1(r,o,c,h,m){for(var y=o._reactName,T=[];c!==null&&c!==h;){var w=c,O=w.alternate,X=w.stateNode;if(w=w.tag,O!==null&&O===h)break;w!==5&&w!==26&&w!==27||X===null||(O=X,m?(X=jl(c,y),X!=null&&T.unshift(Rc(c,X,O))):m||(X=jl(c,y),X!=null&&T.push(Rc(c,X,O)))),c=c.return}T.length!==0&&r.push({event:o,listeners:T})}var ND=/\r\n?/g,BD=/\u0000|\uFFFD/g;function X1(r){return(typeof r=="string"?r:""+r).replace(ND,`
`).replace(BD,"")}function j1(r,o){return o=X1(o),X1(r)===o}function Vh(){}function ht(r,o,c,h,m,y){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||to(r,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&to(r,""+h);break;case"className":Wu(r,"class",h);break;case"tabIndex":Wu(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Wu(r,c,h);break;case"style":VE(r,h,y);break;case"data":if(o!=="object"){Wu(r,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=eh(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(c==="formAction"?(o!=="input"&&ht(r,o,"name",m.name,m,null),ht(r,o,"formEncType",m.formEncType,m,null),ht(r,o,"formMethod",m.formMethod,m,null),ht(r,o,"formTarget",m.formTarget,m,null)):(ht(r,o,"encType",m.encType,m,null),ht(r,o,"method",m.method,m,null),ht(r,o,"target",m.target,m,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=eh(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=Vh);break;case"onScroll":h!=null&&qe("scroll",r);break;case"onScrollEnd":h!=null&&qe("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=eh(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":qe("beforetoggle",r),qe("toggle",r),Zu(r,"popover",h);break;case"xlinkActuate":vs(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":vs(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":vs(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":vs(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":vs(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":vs(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":vs(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":vs(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":vs(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Zu(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hM.get(c)||c,Zu(r,c,h))}}function Km(r,o,c,h,m,y){switch(c){case"style":VE(r,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(m.children!=null)throw Error(i(60));r.innerHTML=c}}break;case"children":typeof h=="string"?to(r,h):(typeof h=="number"||typeof h=="bigint")&&to(r,""+h);break;case"onScroll":h!=null&&qe("scroll",r);break;case"onScrollEnd":h!=null&&qe("scrollend",r);break;case"onClick":h!=null&&(r.onclick=Vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!BE.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(m=c.endsWith("Capture"),o=c.slice(2,m?c.length-7:void 0),y=r[Ye]||null,y=y!=null?y[c]:null,typeof y=="function"&&r.removeEventListener(o,y,m),typeof h=="function")){typeof y!="function"&&y!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,h,m);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):Zu(r,c,h)}}}function Sn(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",r),qe("load",r);var h=!1,m=!1,y;for(y in c)if(c.hasOwnProperty(y)){var T=c[y];if(T!=null)switch(y){case"src":h=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ht(r,o,y,T,c,null)}}m&&ht(r,o,"srcSet",c.srcSet,c,null),h&&ht(r,o,"src",c.src,c,null);return;case"input":qe("invalid",r);var w=y=T=m=null,O=null,X=null;for(h in c)if(c.hasOwnProperty(h)){var J=c[h];if(J!=null)switch(h){case"name":m=J;break;case"type":T=J;break;case"checked":O=J;break;case"defaultChecked":X=J;break;case"value":y=J;break;case"defaultValue":w=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,o));break;default:ht(r,o,h,J,c,null)}}HE(r,y,w,O,X,T,m,!1),Qu(r);return;case"select":qe("invalid",r),h=T=y=null;for(m in c)if(c.hasOwnProperty(m)&&(w=c[m],w!=null))switch(m){case"value":y=w;break;case"defaultValue":T=w;break;case"multiple":h=w;default:ht(r,o,m,w,c,null)}o=y,c=T,r.multiple=!!h,o!=null?eo(r,!!h,o,!1):c!=null&&eo(r,!!h,c,!0);return;case"textarea":qe("invalid",r),y=m=h=null;for(T in c)if(c.hasOwnProperty(T)&&(w=c[T],w!=null))switch(T){case"value":h=w;break;case"defaultValue":m=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ht(r,o,T,w,c,null)}jE(r,h,m,y),Qu(r);return;case"option":for(O in c)if(c.hasOwnProperty(O)&&(h=c[O],h!=null))switch(O){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:ht(r,o,O,h,c,null)}return;case"dialog":qe("beforetoggle",r),qe("toggle",r),qe("cancel",r),qe("close",r);break;case"iframe":case"object":qe("load",r);break;case"video":case"audio":for(h=0;h<wc.length;h++)qe(wc[h],r);break;case"image":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"embed":case"source":case"link":qe("error",r),qe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(h=c[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ht(r,o,X,h,c,null)}return;default:if(hg(o)){for(J in c)c.hasOwnProperty(J)&&(h=c[J],h!==void 0&&Km(r,o,J,h,c,void 0));return}}for(w in c)c.hasOwnProperty(w)&&(h=c[w],h!=null&&ht(r,o,w,h,c,null))}function PD(r,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,T=null,w=null,O=null,X=null,J=null;for(Z in c){var se=c[Z];if(c.hasOwnProperty(Z)&&se!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":O=se;default:h.hasOwnProperty(Z)||ht(r,o,Z,null,h,se)}}for(var j in h){var Z=h[j];if(se=c[j],h.hasOwnProperty(j)&&(Z!=null||se!=null))switch(j){case"type":y=Z;break;case"name":m=Z;break;case"checked":X=Z;break;case"defaultChecked":J=Z;break;case"value":T=Z;break;case"defaultValue":w=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:Z!==se&&ht(r,o,j,Z,h,se)}}cg(r,T,w,O,X,J,y,m);return;case"select":Z=T=w=j=null;for(y in c)if(O=c[y],c.hasOwnProperty(y)&&O!=null)switch(y){case"value":break;case"multiple":Z=O;default:h.hasOwnProperty(y)||ht(r,o,y,null,h,O)}for(m in h)if(y=h[m],O=c[m],h.hasOwnProperty(m)&&(y!=null||O!=null))switch(m){case"value":j=y;break;case"defaultValue":w=y;break;case"multiple":T=y;default:y!==O&&ht(r,o,m,y,h,O)}o=w,c=T,h=Z,j!=null?eo(r,!!c,j,!1):!!h!=!!c&&(o!=null?eo(r,!!c,o,!0):eo(r,!!c,c?[]:"",!1));return;case"textarea":Z=j=null;for(w in c)if(m=c[w],c.hasOwnProperty(w)&&m!=null&&!h.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ht(r,o,w,null,h,m)}for(T in h)if(m=h[T],y=c[T],h.hasOwnProperty(T)&&(m!=null||y!=null))switch(T){case"value":j=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==y&&ht(r,o,T,m,h,y)}XE(r,j,Z);return;case"option":for(var Ae in c)if(j=c[Ae],c.hasOwnProperty(Ae)&&j!=null&&!h.hasOwnProperty(Ae))switch(Ae){case"selected":r.selected=!1;break;default:ht(r,o,Ae,null,h,j)}for(O in h)if(j=h[O],Z=c[O],h.hasOwnProperty(O)&&j!==Z&&(j!=null||Z!=null))switch(O){case"selected":r.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:ht(r,o,O,j,h,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in c)j=c[we],c.hasOwnProperty(we)&&j!=null&&!h.hasOwnProperty(we)&&ht(r,o,we,null,h,j);for(X in h)if(j=h[X],Z=c[X],h.hasOwnProperty(X)&&j!==Z&&(j!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,o));break;default:ht(r,o,X,j,h,Z)}return;default:if(hg(o)){for(var ft in c)j=c[ft],c.hasOwnProperty(ft)&&j!==void 0&&!h.hasOwnProperty(ft)&&Km(r,o,ft,void 0,h,j);for(J in h)j=h[J],Z=c[J],!h.hasOwnProperty(J)||j===Z||j===void 0&&Z===void 0||Km(r,o,J,j,h,Z);return}}for(var F in c)j=c[F],c.hasOwnProperty(F)&&j!=null&&!h.hasOwnProperty(F)&&ht(r,o,F,null,h,j);for(se in h)j=h[se],Z=c[se],!h.hasOwnProperty(se)||j===Z||j==null&&Z==null||ht(r,o,se,j,h,Z)}var Zm=null,Wm=null;function qh(r){return r.nodeType===9?r:r.ownerDocument}function Y1(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function V1(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Qm(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Jm=null;function FD(){var r=window.event;return r&&r.type==="popstate"?r===Jm?!1:(Jm=r,!0):(Jm=null,!1)}var q1=typeof setTimeout=="function"?setTimeout:void 0,UD=typeof clearTimeout=="function"?clearTimeout:void 0,$1=typeof Promise=="function"?Promise:void 0,kD=typeof queueMicrotask=="function"?queueMicrotask:typeof $1<"u"?function(r){return $1.resolve(null).then(r).catch(zD)}:q1;function zD(r){setTimeout(function(){throw r})}function _r(r){return r==="head"}function K1(r,o){var c=o,h=0,m=0;do{var y=c.nextSibling;if(r.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(0<h&&8>h){c=h;var T=r.ownerDocument;if(c&1&&Ac(T.documentElement),c&2&&Ac(T.body),c&4)for(c=T.head,Ac(c),T=c.firstChild;T;){var w=T.nextSibling,O=T.nodeName;T[Hl]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||c.removeChild(T),T=w}}if(m===0){r.removeChild(y),Bc(o);return}m--}else c==="$"||c==="$?"||c==="$!"?m++:h=c.charCodeAt(0)-48;else h=0;c=y}while(c);Bc(o)}function e0(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":e0(c),rg(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function GD(r,o,c,h){for(;r.nodeType===1;){var m=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[Hl])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=$i(r.nextSibling),r===null)break}return null}function HD(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=$i(r.nextSibling),r===null))return null;return r}function t0(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function XD(r,o){var c=r.ownerDocument;if(r.data!=="$?"||c.readyState==="complete")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function $i(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return r}var n0=null;function Z1(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return r;o--}else c==="/$"&&o++}r=r.previousSibling}return null}function W1(r,o,c){switch(o=qh(c),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Ac(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);rg(r)}var Li=new Map,Q1=new Set;function $h(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Us=W.d;W.d={f:jD,r:YD,D:VD,C:qD,L:$D,m:KD,X:WD,S:ZD,M:QD};function jD(){var r=Us.f(),o=kh();return r||o}function YD(r){var o=Za(r);o!==null&&o.tag===5&&o.type==="form"?_S(o):Us.r(r)}var Io=typeof document>"u"?null:document;function J1(r,o,c){var h=Io;if(h&&typeof o=="string"&&o){var m=Ri(o);m='link[rel="'+r+'"][href="'+m+'"]',typeof c=="string"&&(m+='[crossorigin="'+c+'"]'),Q1.has(m)||(Q1.add(m),r={rel:r,crossOrigin:c,href:o},h.querySelector(m)===null&&(o=h.createElement("link"),Sn(o,"link",r),rn(o),h.head.appendChild(o)))}}function VD(r){Us.D(r),J1("dns-prefetch",r,null)}function qD(r,o){Us.C(r,o),J1("preconnect",r,o)}function $D(r,o,c){Us.L(r,o,c);var h=Io;if(h&&r&&o){var m='link[rel="preload"][as="'+Ri(o)+'"]';o==="image"&&c&&c.imageSrcSet?(m+='[imagesrcset="'+Ri(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(m+='[imagesizes="'+Ri(c.imageSizes)+'"]')):m+='[href="'+Ri(r)+'"]';var y=m;switch(o){case"style":y=Oo(r);break;case"script":y=Lo(r)}Li.has(y)||(r=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),Li.set(y,r),h.querySelector(m)!==null||o==="style"&&h.querySelector(Cc(y))||o==="script"&&h.querySelector(Mc(y))||(o=h.createElement("link"),Sn(o,"link",r),rn(o),h.head.appendChild(o)))}}function KD(r,o){Us.m(r,o);var c=Io;if(c&&r){var h=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Ri(h)+'"][href="'+Ri(r)+'"]',y=m;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Lo(r)}if(!Li.has(y)&&(r=g({rel:"modulepreload",href:r},o),Li.set(y,r),c.querySelector(m)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Mc(y)))return}h=c.createElement("link"),Sn(h,"link",r),rn(h),c.head.appendChild(h)}}}function ZD(r,o,c){Us.S(r,o,c);var h=Io;if(h&&r){var m=Wa(h).hoistableStyles,y=Oo(r);o=o||"default";var T=m.get(y);if(!T){var w={loading:0,preload:null};if(T=h.querySelector(Cc(y)))w.loading=5;else{r=g({rel:"stylesheet",href:r,"data-precedence":o},c),(c=Li.get(y))&&i0(r,c);var O=T=h.createElement("link");rn(O),Sn(O,"link",r),O._p=new Promise(function(X,J){O.onload=X,O.onerror=J}),O.addEventListener("load",function(){w.loading|=1}),O.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Kh(T,o,h)}T={type:"stylesheet",instance:T,count:1,state:w},m.set(y,T)}}}function WD(r,o){Us.X(r,o);var c=Io;if(c&&r){var h=Wa(c).hoistableScripts,m=Lo(r),y=h.get(m);y||(y=c.querySelector(Mc(m)),y||(r=g({src:r,async:!0},o),(o=Li.get(m))&&s0(r,o),y=c.createElement("script"),rn(y),Sn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function QD(r,o){Us.M(r,o);var c=Io;if(c&&r){var h=Wa(c).hoistableScripts,m=Lo(r),y=h.get(m);y||(y=c.querySelector(Mc(m)),y||(r=g({src:r,async:!0,type:"module"},o),(o=Li.get(m))&&s0(r,o),y=c.createElement("script"),rn(y),Sn(y,"link",r),c.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(m,y))}}function eT(r,o,c,h){var m=(m=me.current)?$h(m):null;if(!m)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Oo(c.href),c=Wa(m).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Oo(c.href);var y=Wa(m).hoistableStyles,T=y.get(r);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,T),(y=m.querySelector(Cc(r)))&&!y._p&&(T.instance=y,T.state.loading=5),Li.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Li.set(r,c),y||JD(m,r,c,T.state))),o&&h===null)throw Error(i(528,""));return T}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Lo(c),c=Wa(m).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Oo(r){return'href="'+Ri(r)+'"'}function Cc(r){return'link[rel="stylesheet"]['+r+"]"}function tT(r){return g({},r,{"data-precedence":r.precedence,precedence:null})}function JD(r,o,c,h){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=r.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),Sn(o,"link",c),rn(o),r.head.appendChild(o))}function Lo(r){return'[src="'+Ri(r)+'"]'}function Mc(r){return"script[async]"+r}function nT(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=r.querySelector('style[data-href~="'+Ri(c.href)+'"]');if(h)return o.instance=h,rn(h),h;var m=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),rn(h),Sn(h,"style",m),Kh(h,c.precedence,r),o.instance=h;case"stylesheet":m=Oo(c.href);var y=r.querySelector(Cc(m));if(y)return o.state.loading|=4,o.instance=y,rn(y),y;h=tT(c),(m=Li.get(m))&&i0(h,m),y=(r.ownerDocument||r).createElement("link"),rn(y);var T=y;return T._p=new Promise(function(w,O){T.onload=w,T.onerror=O}),Sn(y,"link",h),o.state.loading|=4,Kh(y,c.precedence,r),o.instance=y;case"script":return y=Lo(c.src),(m=r.querySelector(Mc(y)))?(o.instance=m,rn(m),m):(h=c,(m=Li.get(y))&&(h=g({},c),s0(h,m)),r=r.ownerDocument||r,m=r.createElement("script"),rn(m),Sn(m,"link",h),r.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,Kh(h,c.precedence,r));return o.instance}function Kh(r,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=h.length?h[h.length-1]:null,y=m,T=0;T<h.length;T++){var w=h[T];if(w.dataset.precedence===o)y=w;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function i0(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function s0(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Zh=null;function iT(r,o,c){if(Zh===null){var h=new Map,m=Zh=new Map;m.set(c,h)}else m=Zh,h=m.get(c),h||(h=new Map,m.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),m=0;m<c.length;m++){var y=c[m];if(!(y[Hl]||y[_t]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(o)||"";T=r+T;var w=h.get(T);w?w.push(y):h.set(T,[y])}}return h}function sT(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function eI(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function rT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Dc=null;function tI(){}function nI(r,o,c){if(Dc===null)throw Error(i(475));var h=Dc;if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Oo(c.href),y=r.querySelector(Cc(m));if(y){r=y._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(h.count++,h=Wh.bind(h),r.then(h,h)),o.state.loading|=4,o.instance=y,rn(y);return}y=r.ownerDocument||r,c=tT(c),(m=Li.get(m))&&i0(c,m),y=y.createElement("link"),rn(y);var T=y;T._p=new Promise(function(w,O){T.onload=w,T.onerror=O}),Sn(y,"link",c),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,r),(r=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=Wh.bind(h),r.addEventListener("load",o),r.addEventListener("error",o))}}function iI(){if(Dc===null)throw Error(i(475));var r=Dc;return r.stylesheets&&r.count===0&&r0(r,r.stylesheets),0<r.count?function(o){var c=setTimeout(function(){if(r.stylesheets&&r0(r,r.stylesheets),r.unsuspend){var h=r.unsuspend;r.unsuspend=null,h()}},6e4);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c)}}:null}function Wh(){if(this.count--,this.count===0){if(this.stylesheets)r0(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Qh=null;function r0(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Qh=new Map,o.forEach(sI,r),Qh=null,Wh.call(r))}function sI(r,o){if(!(o.state.loading&4)){var c=Qh.get(r);if(c)var h=c.get(null);else{c=new Map,Qh.set(r,c);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var T=m[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),h=T)}h&&c.set(null,h)}m=o.instance,T=m.getAttribute("data-precedence"),y=c.get(T)||h,y===h&&c.set(null,m),c.set(T,m),this.count++,h=Wh.bind(this),m.addEventListener("load",h),m.addEventListener("error",h),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),o.state.loading|=4}}var Ic={$$typeof:D,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function rI(r,o,c,h,m,y,T,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.hiddenUpdates=bs(null),this.identifierPrefix=h,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function aT(r,o,c,h,m,y,T,w,O,X,J,se){return r=new rI(r,o,c,T,w,O,X,se),o=1,y===!0&&(o|=24),y=mi(3,null,null,o),r.current=y,y.stateNode=r,o=zg(),o.refCount++,r.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:c,cache:o},jg(y),r}function oT(r){return r?(r=co,r):co}function lT(r,o,c,h,m,y){m=oT(m),h.context===null?h.context=m:h.pendingContext=m,h=rr(o),h.payload={element:c},y=y===void 0?null:y,y!==null&&(h.callback=y),c=ar(r,h,o),c!==null&&(xi(c,r,o),oc(c,r,o))}function cT(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function a0(r,o){cT(r,o),(r=r.alternate)&&cT(r,o)}function uT(r){if(r.tag===13){var o=lo(r,67108864);o!==null&&xi(o,r,67108864),a0(r,67108864)}}var Jh=!0;function aI(r,o,c,h){var m=P.T;P.T=null;var y=W.p;try{W.p=2,o0(r,o,c,h)}finally{W.p=y,P.T=m}}function oI(r,o,c,h){var m=P.T;P.T=null;var y=W.p;try{W.p=8,o0(r,o,c,h)}finally{W.p=y,P.T=m}}function o0(r,o,c,h){if(Jh){var m=l0(h);if(m===null)$m(r,o,h,ef,c),fT(r,h);else if(cI(m,r,o,c,h))h.stopPropagation();else if(fT(r,h),o&4&&-1<lI.indexOf(r)){for(;m!==null;){var y=Za(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=is(y.pendingLanes);if(T!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var O=1<<31-Cn(T);w.entanglements[1]|=O,T&=~O}ls(y),(lt&6)===0&&(Fh=_n()+500,vc(0))}}break;case 13:w=lo(y,2),w!==null&&xi(w,y,2),kh(),a0(y,2)}if(y=l0(h),y===null&&$m(r,o,h,ef,c),y===m)break;m=y}m!==null&&h.stopPropagation()}else $m(r,o,h,null,c)}}function l0(r){return r=dg(r),c0(r)}var ef=null;function c0(r){if(ef=null,r=Ka(r),r!==null){var o=a(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=l(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return ef=r,null}function hT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zs()){case Ws:return 2;case es:return 8;case Xi:case Qs:return 32;case Bt:return 268435456;default:return 32}default:return 32}}var u0=!1,Er=null,xr=null,Sr=null,Oc=new Map,Lc=new Map,Tr=[],lI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fT(r,o){switch(r){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(o.pointerId)}}function Nc(r,o,c,h,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Za(o),o!==null&&uT(o)),r):(r.eventSystemFlags|=h,o=r.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),r)}function cI(r,o,c,h,m){switch(o){case"focusin":return Er=Nc(Er,r,o,c,h,m),!0;case"dragenter":return xr=Nc(xr,r,o,c,h,m),!0;case"mouseover":return Sr=Nc(Sr,r,o,c,h,m),!0;case"pointerover":var y=m.pointerId;return Oc.set(y,Nc(Oc.get(y)||null,r,o,c,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Lc.set(y,Nc(Lc.get(y)||null,r,o,c,h,m)),!0}return!1}function dT(r){var o=Ka(r.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){r.blockedOn=o,Jn(r.priority,function(){if(c.tag===13){var h=Ei();h=Yi(h);var m=lo(c,h);m!==null&&xi(m,c,h),a0(c,h)}});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function tf(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=l0(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);fg=h,c.target.dispatchEvent(h),fg=null}else return o=Za(c),o!==null&&uT(o),r.blockedOn=c,!1;o.shift()}return!0}function gT(r,o,c){tf(r)&&c.delete(o)}function uI(){u0=!1,Er!==null&&tf(Er)&&(Er=null),xr!==null&&tf(xr)&&(xr=null),Sr!==null&&tf(Sr)&&(Sr=null),Oc.forEach(gT),Lc.forEach(gT)}function nf(r,o){r.blockedOn===o&&(r.blockedOn=null,u0||(u0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,uI)))}var sf=null;function mT(r){sf!==r&&(sf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sf===r&&(sf=null);for(var o=0;o<r.length;o+=3){var c=r[o],h=r[o+1],m=r[o+2];if(typeof h!="function"){if(c0(h||c)===null)continue;break}var y=Za(c);y!==null&&(r.splice(o,3),o-=3,cm(y,{pending:!0,data:m,method:c.method,action:h},h,m))}}))}function Bc(r){function o(O){return nf(O,r)}Er!==null&&nf(Er,r),xr!==null&&nf(xr,r),Sr!==null&&nf(Sr,r),Oc.forEach(o),Lc.forEach(o);for(var c=0;c<Tr.length;c++){var h=Tr[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<Tr.length&&(c=Tr[0],c.blockedOn===null);)dT(c),c.blockedOn===null&&Tr.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var m=c[h],y=c[h+1],T=m[Ye]||null;if(typeof y=="function")T||mT(c);else if(T){var w=null;if(y&&y.hasAttribute("formAction")){if(m=y,T=y[Ye]||null)w=T.formAction;else if(c0(m)!==null)continue}else w=T.action;typeof w=="function"?c[h+1]=w:(c.splice(h,3),h-=3),mT(c)}}}function h0(r){this._internalRoot=r}rf.prototype.render=h0.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var c=o.current,h=Ei();lT(c,h,r,o,null,null)},rf.prototype.unmount=h0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;lT(r.current,2,null,r,null,null),kh(),o[Dt]=null}};function rf(r){this._internalRoot=r}rf.prototype.unstable_scheduleHydration=function(r){if(r){var o=fi();r={blockedOn:null,target:r,priority:o};for(var c=0;c<Tr.length&&o!==0&&o<Tr[c].priority;c++);Tr.splice(c,0,r),c===0&&dT(r)}};var pT=e.version;if(pT!=="19.1.0")throw Error(i(527,pT,"19.1.0"));W.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(o),r=r!==null?d(r):null,r=r===null?null:r.stateNode,r};var hI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{ts=af.inject(hI),nn=af}catch{}}return Fc.createRoot=function(r,o){if(!s(r))throw Error(i(299));var c=!1,h="",m=OS,y=LS,T=NS,w=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(w=o.unstable_transitionCallbacks)),o=aT(r,1,!1,null,null,c,h,m,y,T,w,null),r[Dt]=o.current,qm(r),new h0(o)},Fc.hydrateRoot=function(r,o,c){if(!s(r))throw Error(i(299));var h=!1,m="",y=OS,T=LS,w=NS,O=null,X=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(w=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks),c.formState!==void 0&&(X=c.formState)),o=aT(r,1,!0,o,c??null,h,m,y,T,w,O,X),o.context=oT(null),c=o.current,h=Ei(),h=Yi(h),m=rr(h),m.callback=null,ar(c,m,h),c=h,o.current.lanes=c,ji(o,c),ls(o),r[Dt]=o.current,qm(r),new rf(o)},Fc.version="19.1.0",Fc}var RT;function SI(){if(RT)return g0.exports;RT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),g0.exports=xI(),g0.exports}var TI=SI();const ri={ADD:"add",REMOVE:"remove"},gl={PROPERTYCHANGE:"propertychange"},Me={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Bu{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function bI(n,e,t){let i,s;t=t||Xs;let a=0,l=n.length,u=!1;for(;a<l;)i=a+(l-a>>1),s=+t(n[i],e),s<0?a=i+1:(l=i,u=!s);return u?a:~a}function Xs(n,e){return n>e?1:n<e?-1:0}function AR(n,e){return n<e?1:n>e?-1:0}function Uy(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let s=1;s<i;++s){const a=n[s];if(a===e)return s;if(a<e)return t(e,n[s-1],a)>0?s-1:s}return i-1}if(t>0){for(let s=1;s<i;++s)if(n[s]<e)return s-1;return i-1}if(t<0){for(let s=1;s<i;++s)if(n[s]<=e)return s;return i-1}for(let s=1;s<i;++s){if(n[s]==e)return s;if(n[s]<e)return n[s-1]-e<e-n[s]?s-1:s}return i-1}function vI(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function ky(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let s=0;s<i;s++)n[n.length]=t[s]}function ea(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function wI(n,e,t){const i=e||Xs;return n.every(function(s,a){if(a===0)return!0;const l=i(n[a-1],s);return!(l>0||l===0)})}function uu(){return!0}function wd(){return!1}function hu(){}function CR(n){let e,t,i;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==i||!ea(s,t))&&(i=this,t=s,e=n.apply(this,arguments)),e}}function MR(n){function e(){let t;try{t=n()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Cl(n){for(const e in n)delete n[e]}function ml(n){let e;for(e in n)return!1;return!e}class $s{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Pu extends Bu{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const a=t?new $s(e):e;a.target||(a.target=this.eventTarget_||this);const l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,u[i]=0),++l[i];let f;for(let d=0,g=s.length;d<g;++d)if("handleEvent"in s[d]?f=s[d].handleEvent(a):f=s[d].call(this,a),f===!1||a.propagationStopped){f=!1;break}if(--l[i]===0){let d=u[i];for(delete u[i];d--;)this.removeEventListener(i,hu);delete l[i]}return f}disposeInternal(){this.listeners_&&Cl(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const s=i.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=hu,++this.pendingRemovals_[e]):(i.splice(s,1),i.length===0&&delete this.listeners_[e]))}}function et(n,e,t,i,s){if(s){const l=t;t=function(u){return n.removeEventListener(e,t),l.call(i??this,u)}}else i&&i!==n&&(t=t.bind(i));const a={target:n,type:e,listener:t};return n.addEventListener(e,t),a}function Wf(n,e,t,i){return et(n,e,t,i,!0)}function St(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Cl(n))}class Fu extends Pu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Me.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let a=0;a<i;++a)s[a]=et(this,e[a],t);return s}return et(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let a=0;a<s;++a)i[a]=Wf(this,e[a],t)}else i=Wf(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)RI(i);else if(Array.isArray(e))for(let s=0,a=e.length;s<a;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Fu.prototype.on;Fu.prototype.once;Fu.prototype.un;function RI(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)St(n[e]);else St(n)}function Je(){throw new Error("Unimplemented abstract method.")}let AI=0;function De(n){return n.ol_uid||(n.ol_uid=String(++AI))}class AT extends $s{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class Ss extends Fu{constructor(e){super(),this.on,this.once,this.un,De(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new AT(i,e,t)),i=gl.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new AT(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const s=this.values_||(this.values_={});if(i)s[e]=t;else{const a=s[e];s[e]=t,a!==t&&this.notify(e,a)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],ml(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const CT={LENGTH:"length"};class of extends $s{constructor(e,t,i){super(e),this.element=t,this.index=i}}class ys extends Ss{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(CT.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new of(ri.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,s=t.length;i<s;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new of(ri.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new of(ri.REMOVE,s,e)),this.dispatchEvent(new of(ri.ADD,t,e))}updateLength_(){this.set(CT.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}class $o extends $s{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Lr extends $o{constructor(e,t,i,s,a,l){super(e,t,a),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=l}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Lt={SINGLECLICK:"singleclick",CLICK:Me.CLICK,DBLCLICK:Me.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ha=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",CI=Ha.includes("safari")&&!Ha.includes("chrom"),MI=CI&&(Ha.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Ha)),DI=Ha.includes("webkit")&&!Ha.includes("edge"),DR=Ha.includes("macintosh"),II=typeof devicePixelRatio<"u"?devicePixelRatio:1,Rd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IR=typeof Image<"u"&&Image.prototype.decode,OR=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}(),Qp={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class OI extends Pu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=et(i,Qp.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=et(i,Qp.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Me.TOUCHMOVE,this.boundHandleTouchMove_,OR?{passive:!1}:!1)}emulateClick_(e){let t=new Lr(Lt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Lr(Lt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Lr(Lt.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Lt.POINTERUP||t.type==Lt.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Lt.POINTERDOWN||t.type==Lt.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Lr(Lt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(St),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Lr(Lt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(et(i,Lt.POINTERMOVE,this.handlePointerMove_,this),et(i,Lt.POINTERUP,this.handlePointerUp_,this),et(this.element_,Lt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(et(this.element_.getRootNode(),Lt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Lr(Lt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Lr(Lt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(St(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Me.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(St(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(St),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Nr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Pn={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},ge={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ot(n,e){if(!n)throw new Error(e)}const Qf=1/0;class LI{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Cl(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){ot(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Qf?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,s=t.length,a=t[e],l=i[e],u=e;for(;e<s>>1;){const f=this.getLeftChildIndex_(e),d=this.getRightChildIndex_(e),g=d<s&&i[d]<i[f]?d:f;t[e]=t[g],i[e]=i[g],e=g}t[e]=a,i[e]=l,this.siftDown_(u,e)}siftDown_(e,t){const i=this.elements_,s=this.priorities_,a=i[t],l=s[t];for(;t>e;){const u=this.getParentIndex_(t);if(s[u]>l)i[t]=i[u],s[t]=s[u],t=u;else break}i[t]=a,s[t]=l}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let s=0;const a=t.length;let l,u,f;for(u=0;u<a;++u)l=t[u],f=e(l),f==Qf?delete this.queuedElements_[this.keyFunction_(l)]:(i[s]=f,t[s++]=l);t.length=s,i.length=s,this.heapify_()}}class NI extends LI{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Me.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===ge.LOADED||i===ge.ERROR||i===ge.EMPTY){i!==ge.ERROR&&t.removeEventListener(Me.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const s=this.dequeue()[0],a=s.getKey();s.getState()===ge.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,s.load())}}}function BI(n,e,t,i,s){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Qf;const a=n.viewState.center,l=i[0]-a[0],u=i[1]-a[1];return 65536*Math.log(s)+Math.sqrt(l*l+u*u)/s}const Fn={ANIMATING:0,INTERACTING:1},Ki={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Tt(n,e,t){return Math.min(Math.max(n,e),t)}function PI(n,e,t,i,s,a){const l=s-t,u=a-i;if(l!==0||u!==0){const f=((n-t)*l+(e-i)*u)/(l*l+u*u);f>1?(t=s,i=a):f>0&&(t+=l*f,i+=u*f)}return rl(n,e,t,i)}function rl(n,e,t,i){const s=t-n,a=i-e;return s*s+a*a}function FI(n){const e=n.length;for(let i=0;i<e;i++){let s=i,a=Math.abs(n[i][i]);for(let u=i+1;u<e;u++){const f=Math.abs(n[u][i]);f>a&&(a=f,s=u)}if(a===0)return null;const l=n[s];n[s]=n[i],n[i]=l;for(let u=i+1;u<e;u++){const f=-n[u][i]/n[i][i];for(let d=i;d<e+1;d++)i==d?n[u][d]=0:n[u][d]+=f*n[i][d]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let s=i-1;s>=0;s--)n[s][e]-=n[s][i]*t[i]}return t}function MT(n){return n*180/Math.PI}function zr(n){return n*Math.PI/180}function Pa(n,e){const t=n%e;return t*e<0?t+e:t}function Ui(n,e,t){return n+t*(e-n)}function Ad(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function lf(n,e){return Math.floor(Ad(n,e))}function cf(n,e){return Math.ceil(Ad(n,e))}function Jp(n,e,t){if(n>=e&&n<t)return n;const i=t-e;return((n-e)%i+i)%i+e}function DT(n,e,t){return function(i,s,a,l,u){if(!i)return;if(!s&&!e)return i;const f=e?0:a[0]*s,d=e?0:a[1]*s,g=u?u[0]:0,p=u?u[1]:0;let _=n[0]+f/2+g,E=n[2]-f/2+g,x=n[1]+d/2+p,b=n[3]-d/2+p;_>E&&(_=(E+_)/2,E=_),x>b&&(x=(b+x)/2,b=x);let S=Tt(i[0],_,E),R=Tt(i[1],x,b);if(l&&t&&s){const v=30*s;S+=-v*Math.log(1+Math.max(0,_-i[0])/v)+v*Math.log(1+Math.max(0,i[0]-E)/v),R+=-v*Math.log(1+Math.max(0,x-i[1])/v)+v*Math.log(1+Math.max(0,i[1]-b)/v)}return[S,R]}}function UI(n){return n}const fn={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ey(n){const e=bi();for(let t=0,i=n.length;t<i;++t)eu(e,n[t]);return e}function kI(n,e,t){const i=Math.min.apply(null,n),s=Math.min.apply(null,e),a=Math.max.apply(null,n),l=Math.max.apply(null,e);return Vs(i,s,a,l,t)}function zy(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function LR(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function NR(n,e,t){let i,s;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?s=n[1]-t:n[3]<t?s=t-n[3]:s=0,i*i+s*s}function Vr(n,e){return BR(n,e[0],e[1])}function qc(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function BR(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function ty(n,e){const t=n[0],i=n[1],s=n[2],a=n[3],l=e[0],u=e[1];let f=fn.UNKNOWN;return l<t?f=f|fn.LEFT:l>s&&(f=f|fn.RIGHT),u<i?f=f|fn.BELOW:u>a&&(f=f|fn.ABOVE),f===fn.UNKNOWN&&(f=fn.INTERSECTING),f}function bi(){return[1/0,1/0,-1/0,-1/0]}function Vs(n,e,t,i,s){return s?(s[0]=n,s[1]=e,s[2]=t,s[3]=i,s):[n,e,t,i]}function Uu(n){return Vs(1/0,1/0,-1/0,-1/0,n)}function PR(n,e){const t=n[0],i=n[1];return Vs(t,i,t,i,e)}function Gy(n,e,t,i,s){const a=Uu(s);return UR(a,n,e,t,i)}function fu(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function FR(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function eu(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function UR(n,e,t,i,s){for(;t<i;t+=s)zI(n,e[t],e[t+1]);return n}function zI(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function kR(n,e){let t;return t=e(Cd(n)),t||(t=e(Md(n)),t)||(t=e(Dd(n)),t)||(t=e(qs(n)),t)?t:!1}function du(n){let e=0;return Ml(n)||(e=tt(n)*gn(n)),e}function Cd(n){return[n[0],n[1]]}function Md(n){return[n[2],n[1]]}function qr(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function GI(n,e){let t;if(e==="bottom-left")t=Cd(n);else if(e==="bottom-right")t=Md(n);else if(e==="top-left")t=qs(n);else if(e==="top-right")t=Dd(n);else throw new Error("Invalid corner");return t}function ny(n,e,t,i,s){const[a,l,u,f,d,g,p,_]=Hy(n,e,t,i);return Vs(Math.min(a,u,d,p),Math.min(l,f,g,_),Math.max(a,u,d,p),Math.max(l,f,g,_),s)}function Hy(n,e,t,i){const s=e*i[0]/2,a=e*i[1]/2,l=Math.cos(t),u=Math.sin(t),f=s*l,d=s*u,g=a*l,p=a*u,_=n[0],E=n[1];return[_-f+p,E-d-g,_-f-p,E-d+g,_+f-p,E+d+g,_+f+p,E+d-g,_-f+p,E-d-g]}function gn(n){return n[3]-n[1]}function $n(n,e,t){const i=t||bi();return oi(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):Uu(i),i}function qs(n){return[n[0],n[3]]}function Dd(n){return[n[2],n[3]]}function tt(n){return n[2]-n[0]}function oi(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Ml(n){return n[2]<n[0]||n[3]<n[1]}function HI(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function XI(n,e,t){let i=!1;const s=ty(n,e),a=ty(n,t);if(s===fn.INTERSECTING||a===fn.INTERSECTING)i=!0;else{const l=n[0],u=n[1],f=n[2],d=n[3],g=e[0],p=e[1],_=t[0],E=t[1],x=(E-p)/(_-g);let b,S;a&fn.ABOVE&&!(s&fn.ABOVE)&&(b=_-(E-d)/x,i=b>=l&&b<=f),!i&&a&fn.RIGHT&&!(s&fn.RIGHT)&&(S=E-(_-f)*x,i=S>=u&&S<=d),!i&&a&fn.BELOW&&!(s&fn.BELOW)&&(b=_-(E-u)/x,i=b>=l&&b<=f),!i&&a&fn.LEFT&&!(s&fn.LEFT)&&(S=E-(_-l)*x,i=S>=u&&S<=d)}return i}function jI(n,e,t,i){if(Ml(n))return Uu(t);let s=[];s=[n[0],n[1],n[2],n[1],n[2],n[3],n[0],n[3]],e(s,s,2);const a=[],l=[];for(let u=0,f=s.length;u<f;u+=2)a.push(s[u]),l.push(s[u+1]);return kI(a,l,t)}function zR(n,e){const t=e.getExtent(),i=qr(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const s=tt(t),l=Math.floor((i[0]-t[0])/s)*s;n[0]-=l,n[2]-=l}return n}function Xy(n,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[i[0],n[1],i[2],n[3]]];zR(n,e);const s=tt(i);if(tt(n)>s&&!t)return[[i[0],n[1],i[2],n[3]]];if(n[0]<i[0])return[[n[0]+s,n[1],i[2],n[3]],[i[0],n[1],n[2],n[3]]];if(n[2]>i[2])return[[n[0],n[1],i[2],n[3]],[i[0],n[1],n[2]-s,n[3]]]}return[n]}function YI(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function Jf(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function jy(n,e){const t=Math.cos(e),i=Math.sin(e),s=n[0]*t-n[1]*i,a=n[1]*t+n[0]*i;return n[0]=s,n[1]=a,n}function VI(n,e){return n[0]*=e,n[1]*=e,n}function GR(n,e){if(e.canWrapX()){const t=tt(e.getExtent()),i=qI(n,e,t);i&&(n[0]-=i*t)}return n}function qI(n,e,t){const i=e.getExtent();let s=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||tt(i),s=Math.floor((n[0]-i[0])/t)),s}function HR(n){return Math.pow(n,3)}function Dl(n){return 1-HR(1-n)}function $I(n){return 3*n*n-2*n*n*n}function KI(n){return n}const ZI=63710088e-1;function IT(n,e,t){t=t||ZI;const i=zr(n[1]),s=zr(e[1]),a=(s-i)/2,l=zr(e[0]-n[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function XR(...n){console.warn(...n)}function OT(...n){console.error(...n)}const WI={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function LT(n){return WI[n]}const pl={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class gu{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||pl[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ku=6378137,el=Math.PI*ku,QI=[-el,-el,el,el],JI=[-180,-85,180,85],uf=ku*Math.log(Math.tan(Math.PI/2));class No extends gu{constructor(e){super({code:e,units:"m",extent:QI,global:!0,worldExtent:JI,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ku)}})}}const NT=[new No("EPSG:3857"),new No("EPSG:102100"),new No("EPSG:102113"),new No("EPSG:900913"),new No("http://www.opengis.net/def/crs/EPSG/0/3857"),new No("http://www.opengis.net/gml/srs/epsg.xml#3857")];function eO(n,e,t,i){const s=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(s));for(let a=0;a<s;a+=i){e[a]=el*n[a]/180;let l=ku*Math.log(Math.tan(Math.PI*(+n[a+1]+90)/360));l>uf?l=uf:l<-uf&&(l=-uf),e[a+1]=l}return e}function tO(n,e,t,i){const s=n.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=n.slice():e=new Array(s));for(let a=0;a<s;a+=i)e[a]=180*n[a]/el,e[a+1]=360*Math.atan(Math.exp(n[a+1]/ku))/Math.PI-90;return e}const nO=6378137,BT=[-180,-90,180,90],iO=Math.PI*nO/180;class Sa extends gu{constructor(e,t){super({code:e,units:"degrees",extent:BT,axisOrientation:t,global:!0,metersPerUnit:iO,worldExtent:BT})}}const PT=[new Sa("CRS:84"),new Sa("EPSG:4326","neu"),new Sa("urn:ogc:def:crs:OGC:1.3:CRS84"),new Sa("urn:ogc:def:crs:OGC:2:84"),new Sa("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Sa("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Sa("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let iy={};function sO(n){return iy[n]||iy[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function rO(n,e){iy[n]=e}let al={};function mu(n,e,t){const i=n.getCode(),s=e.getCode();i in al||(al[i]={}),al[i][s]=t}function _0(n,e){return n in al&&e in al[n]?al[n][e]:null}const ed=.9996,zi=.00669438,Id=zi*zi,Od=Id*zi,Da=zi/(1-zi),FT=Math.sqrt(1-zi),yl=(1-FT)/(1+FT),jR=yl*yl,Yy=jR*yl,Vy=Yy*yl,YR=Vy*yl,VR=1-zi/4-3*Id/64-5*Od/256,aO=3*zi/8+3*Id/32+45*Od/1024,oO=15*Id/256+45*Od/1024,lO=35*Od/3072,cO=3/2*yl-27/32*Yy+269/512*YR,uO=21/16*jR-55/32*Vy,hO=151/96*Yy-417/128*YR,fO=1097/512*Vy,td=6378137;function dO(n,e,t){const i=n-5e5,l=(t.north?e:e-1e7)/ed/(td*VR),u=l+cO*Math.sin(2*l)+uO*Math.sin(4*l)+hO*Math.sin(6*l)+fO*Math.sin(8*l),f=Math.sin(u),d=f*f,g=Math.cos(u),p=f/g,_=p*p,E=_*_,x=1-zi*d,b=Math.sqrt(1-zi*d),S=td/b,R=(1-zi)/x,v=Da*g**2,D=v*v,A=i/(S*ed),C=A*A,B=C*A,z=B*A,U=z*A,Y=U*A,$=u-p/R*(C/2-z/24*(5+3*_+10*v-4*D-9*Da))+Y/720*(61+90*_+298*v+45*E-252*Da-3*D);let le=(A-B/6*(1+2*_+v)+U/120*(5-2*v+28*_-3*D+8*Da+24*E))/g;return le=Jp(le+zr(qR(t.number)),-Math.PI,Math.PI),[MT(le),MT($)]}const UT=-80,kT=84,gO=-180,mO=180;function pO(n,e,t){n=Jp(n,gO,mO),e<UT?e=UT:e>kT&&(e=kT);const i=zr(e),s=Math.sin(i),a=Math.cos(i),l=s/a,u=l*l,f=u*u,d=zr(n),g=qR(t.number),p=zr(g),_=td/Math.sqrt(1-zi*s**2),E=Da*a**2,x=a*Jp(d-p,-Math.PI,Math.PI),b=x*x,S=b*x,R=S*x,v=R*x,D=v*x,A=td*(VR*i-aO*Math.sin(2*i)+oO*Math.sin(4*i)-lO*Math.sin(6*i)),C=ed*_*(x+S/6*(1-u+E)+v/120*(5-18*u+f+72*E-58*Da))+5e5;let B=ed*(A+_*l*(b/2+R/24*(5-u+9*E+4*E**2)+D/720*(61-58*u+f+600*E-330*Da)));return t.north||(B+=1e7),[C,B]}function qR(n){return(n-1)*6-180+3}const yO=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function $R(n){let e=0;for(const s of yO){const a=n.match(s);if(a){e=parseInt(a[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function zT(n,e){return function(t,i,s,a){const l=t.length;s=s>1?s:2,a=a??s,i||(s>2?i=t.slice():i=new Array(l));for(let u=0;u<l;u+=a){const f=t[u],d=t[u+1],g=n(f,d,e);i[u]=g[0],i[u+1]=g[1]}return i}}function _O(n){return $R(n)?new gu({code:n,units:"m"}):null}function EO(n){const e=$R(n.getCode());return e?{forward:zT(pO,e),inverse:zT(dO,e)}:null}const xO=[EO],SO=[_O];let sy=!0;function KR(n){sy=!1}function qy(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function ry(n){rO(n.getCode(),n),mu(n,n,qy)}function TO(n){n.forEach(ry)}function bn(n){if(typeof n!="string")return n;const e=sO(n);if(e)return e;for(const t of SO){const i=t(n);if(i)return i}return null}function nd(n,e,t,i){n=bn(n);let s;const a=n.getPointResolutionFunc();if(a){if(s=a(e,t),i&&i!==n.getUnits()){const l=n.getMetersPerUnit();l&&(s=s*l/pl[i])}}else{const l=n.getUnits();if(l=="degrees"&&!i||i=="degrees")s=e;else{const u=Ky(n,bn("EPSG:4326"));if(!u&&l!=="degrees")s=e*n.getMetersPerUnit();else{let d=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];d=u(d,d,2);const g=IT(d.slice(0,2),d.slice(2,4)),p=IT(d.slice(4,6),d.slice(6,8));s=(g+p)/2}const f=i?pl[i]:n.getMetersPerUnit();f!==void 0&&(s/=f)}}return s}function GT(n){TO(n),n.forEach(function(e){n.forEach(function(t){e!==t&&mu(e,t,qy)})})}function bO(n,e,t,i){n.forEach(function(s){e.forEach(function(a){mu(s,a,t),mu(a,s,i)})})}function $y(n,e){return n?typeof n=="string"?bn(n):n:bn(e)}function ZR(n){return function(e,t,i,s){const a=e.length;i=i!==void 0?i:2,s=s??i,t=t!==void 0?t:new Array(a);for(let l=0;l<a;l+=s){const u=n(e.slice(l,l+i)),f=u.length;for(let d=0,g=s;d<g;++d)t[l+d]=d>=f?e[l+d]:u[d]}return t}}function E0(n,e){return KR(),Ld(n,"EPSG:4326","EPSG:3857")}function vO(n,e){const t=Ld(n,"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=Pa(i+180,360)-180),t}function ol(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Ky(n,e)===qy)&&t}function Ky(n,e){const t=n.getCode(),i=e.getCode();let s=_0(t,i);if(s)return s;let a=null,l=null;for(const f of xO)a||(a=f(n)),l||(l=f(e));if(!a&&!l)return null;const u="EPSG:4326";if(l)if(a)s=x0(a.inverse,l.forward);else{const f=_0(t,u);f&&(s=x0(f,l.forward))}else{const f=_0(u,i);f&&(s=x0(a.inverse,f))}return s&&(ry(n),ry(e),mu(n,e,s)),s}function x0(n,e){return function(t,i,s,a){return i=n(t,i,s,a),e(i,i,s,a)}}function id(n,e){const t=bn(n),i=bn(e);return Ky(t,i)}function Ld(n,e,t){const i=id(e,t);if(!i){const s=bn(e).getCode(),a=bn(t).getCode();throw new Error(`No transform available between ${s} and ${a}`)}return i(n,void 0,n.length)}function sd(n,e){return n}function Gs(n,e){return sy&&!Jf(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(sy=!1,XR("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Zy(n,e){return n}function _s(n,e){return n}function wO(){GT(NT),GT(PT),bO(PT,NT,eO,tO)}wO();const Wy=new Array(6);function zn(){return[1,0,0,1,0,0]}function RO(n){return Nd(n,1,0,0,1,0,0)}function pu(n,e){const t=n[0],i=n[1],s=n[2],a=n[3],l=n[4],u=n[5],f=e[0],d=e[1],g=e[2],p=e[3],_=e[4],E=e[5];return n[0]=t*f+s*d,n[1]=i*f+a*d,n[2]=t*g+s*p,n[3]=i*g+a*p,n[4]=t*_+s*E+l,n[5]=i*_+a*E+u,n}function Nd(n,e,t,i,s,a,l){return n[0]=e,n[1]=t,n[2]=i,n[3]=s,n[4]=a,n[5]=l,n}function AO(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function $t(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function CO(n,e){const t=Math.cos(e),i=Math.sin(e);return pu(n,Nd(Wy,t,i,-i,t,0,0))}function HT(n,e,t){return pu(n,Nd(Wy,e,0,0,t,0,0))}function MO(n,e,t){return pu(n,Nd(Wy,1,0,0,1,e,t))}function Qi(n,e,t,i,s,a,l,u){const f=Math.sin(a),d=Math.cos(a);return n[0]=i*d,n[1]=s*f,n[2]=-i*f,n[3]=s*d,n[4]=l*i*d-u*i*f+e,n[5]=l*s*f+u*s*d+t,n}function Qy(n,e){const t=DO(e);ot(t!==0,"Transformation matrix cannot be inverted");const i=e[0],s=e[1],a=e[2],l=e[3],u=e[4],f=e[5];return n[0]=l/t,n[1]=-s/t,n[2]=-a/t,n[3]=i/t,n[4]=(a*f-l*u)/t,n[5]=-(i*f-s*u)/t,n}function DO(n){return n[0]*n[3]-n[1]*n[2]}const IO=[1e5,1e5,1e5,1e5,2,2];function OO(n){return"matrix("+n.join(", ")+")"}function XT(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function LO(n,e){const t=XT(n),i=XT(e);for(let s=0;s<6;++s)if(Math.round((t[s]-i[s])*IO[s])!==0)return!1;return!0}function Gr(n,e,t,i,s,a,l){a=a||[],l=l||2;let u=0;for(let f=e;f<t;f+=i){const d=n[f],g=n[f+1];a[u++]=s[0]*d+s[2]*g+s[4],a[u++]=s[1]*d+s[3]*g+s[5];for(let p=2;p<l;p++)a[u++]=n[f+p]}return a&&a.length!=u&&(a.length=u),a}function WR(n,e,t,i,s,a,l){l=l||[];const u=Math.cos(s),f=Math.sin(s),d=a[0],g=a[1];let p=0;for(let _=e;_<t;_+=i){const E=n[_]-d,x=n[_+1]-g;l[p++]=d+E*u-x*f,l[p++]=g+E*f+x*u;for(let b=_+2;b<_+i;++b)l[p++]=n[b]}return l&&l.length!=p&&(l.length=p),l}function NO(n,e,t,i,s,a,l,u){u=u||[];const f=l[0],d=l[1];let g=0;for(let p=e;p<t;p+=i){const _=n[p]-f,E=n[p+1]-d;u[g++]=f+s*_,u[g++]=d+a*E;for(let x=p+2;x<p+i;++x)u[g++]=n[x]}return u&&u.length!=g&&(u.length=g),u}function BO(n,e,t,i,s,a,l){l=l||[];let u=0;for(let f=e;f<t;f+=i){l[u++]=n[f]+s,l[u++]=n[f+1]+a;for(let d=f+2;d<f+i;++d)l[u++]=n[d]}return l&&l.length!=u&&(l.length=u),l}const jT=zn(),PO=[NaN,NaN];class FO extends Ss{constructor(){super(),this.extent_=bi(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=CR((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Je()}closestPointXY(e,t,i,s){return Je()}containsXY(e,t){return this.closestPointXY(e,t,PO,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Je()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Uu(t),this.extentRevision_=this.getRevision()}return HI(this.extent_,e)}rotate(e,t){Je()}scale(e,t,i){Je()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Je()}getType(){return Je()}applyTransform(e){Je()}intersectsExtent(e){return Je()}translate(e,t){Je()}transform(e,t){const i=bn(e),s=i.getUnits()=="tile-pixels"?function(a,l,u){const f=i.getExtent(),d=i.getWorldExtent(),g=gn(d)/gn(f);Qi(jT,d[0],d[3],g,-g,0,0,0);const p=Gr(a,0,a.length,u,jT,l),_=id(i,t);return _?_(p,p,u):p}:id(i,t);return this.applyTransform(s),this}}class Jy extends FO{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Gy(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Je()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=YT(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Je()}setLayout(e,t,i){let s;if(e)s=YT(e);else{for(let a=0;a<i;++a){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=UO(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();WR(i,0,i.length,s,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=qr(this.getExtent()));const s=this.getFlatCoordinates();if(s){const a=this.getStride();NO(s,0,s.length,a,e,t,i,s),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const s=this.getStride();BO(i,0,i.length,s,e,t,i),this.changed()}}}function UO(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function YT(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function kO(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const s=n.getStride();return Gr(i,0,i.length,s,e,t)}function QR(n,e,t,i){let s=0;const a=n[t-i],l=n[t-i+1];let u=0,f=0;for(;e<t;e+=i){const d=n[e]-a,g=n[e+1]-l;s+=f*d-u*g,u=d,f=g}return s/2}function zO(n,e,t,i){let s=0;for(let a=0,l=t.length;a<l;++a){const u=t[a];s+=QR(n,e,u,i),e=u}return s}function VT(n,e,t,i,s,a,l){const u=n[e],f=n[e+1],d=n[t]-u,g=n[t+1]-f;let p;if(d===0&&g===0)p=e;else{const _=((s-u)*d+(a-f)*g)/(d*d+g*g);if(_>1)p=t;else if(_>0){for(let E=0;E<i;++E)l[E]=Ui(n[e+E],n[t+E],_);l.length=i;return}else p=e}for(let _=0;_<i;++_)l[_]=n[p+_];l.length=i}function JR(n,e,t,i,s){let a=n[e],l=n[e+1];for(e+=i;e<t;e+=i){const u=n[e],f=n[e+1],d=rl(a,l,u,f);d>s&&(s=d),a=u,l=f}return s}function GO(n,e,t,i,s){for(let a=0,l=t.length;a<l;++a){const u=t[a];s=JR(n,e,u,i,s),e=u}return s}function eA(n,e,t,i,s,a,l,u,f,d,g){if(e==t)return d;let p,_;if(s===0){if(_=rl(l,u,n[e],n[e+1]),_<d){for(p=0;p<i;++p)f[p]=n[e+p];return f.length=i,_}return d}g=g||[NaN,NaN];let E=e+i;for(;E<t;)if(VT(n,E-i,E,i,l,u,g),_=rl(l,u,g[0],g[1]),_<d){for(d=_,p=0;p<i;++p)f[p]=g[p];f.length=i,E+=i}else E+=i*Math.max((Math.sqrt(_)-Math.sqrt(d))/s|0,1);if(VT(n,t-i,e,i,l,u,g),_=rl(l,u,g[0],g[1]),_<d){for(d=_,p=0;p<i;++p)f[p]=g[p];f.length=i}return d}function HO(n,e,t,i,s,a,l,u,f,d,g){g=g||[NaN,NaN];for(let p=0,_=t.length;p<_;++p){const E=t[p];d=eA(n,e,E,i,s,a,l,u,f,d,g),e=E}return d}function XO(n,e,t,i){for(let s=0,a=t.length;s<a;++s)n[e++]=t[s];return e}function tA(n,e,t,i){for(let s=0,a=t.length;s<a;++s){const l=t[s];for(let u=0;u<i;++u)n[e++]=l[u]}return e}function jO(n,e,t,i,s){s=s||[];let a=0;for(let l=0,u=t.length;l<u;++l){const f=tA(n,e,t[l],i);s[a++]=f,e=f}return s.length=a,s}function tl(n,e,t,i,s){s=s!==void 0?s:[];let a=0;for(let l=e;l<t;l+=i)s[a++]=n.slice(l,l+i);return s.length=a,s}function rd(n,e,t,i,s){s=s!==void 0?s:[];let a=0;for(let l=0,u=t.length;l<u;++l){const f=t[l];s[a++]=tl(n,e,f,i,s[a]),e=f}return s.length=a,s}function qT(n,e,t,i,s){s=s!==void 0?s:[];let a=0;for(let l=0,u=t.length;l<u;++l){const f=t[l];s[a++]=f.length===1&&f[0]===e?[]:rd(n,e,f,i,s[a]),e=f[f.length-1]}return s.length=a,s}function e_(n,e,t,i,s,a,l){const u=(t-e)/i;if(u<3){for(;e<t;e+=i)a[l++]=n[e],a[l++]=n[e+1];return l}const f=new Array(u);f[0]=1,f[u-1]=1;const d=[e,t-i];let g=0;for(;d.length>0;){const p=d.pop(),_=d.pop();let E=0;const x=n[_],b=n[_+1],S=n[p],R=n[p+1];for(let v=_+i;v<p;v+=i){const D=n[v],A=n[v+1],C=PI(D,A,x,b,S,R);C>E&&(g=v,E=C)}E>s&&(f[(g-e)/i]=1,_+i<g&&d.push(_,g),g+i<p&&d.push(g,p))}for(let p=0;p<u;++p)f[p]&&(a[l++]=n[e+p*i],a[l++]=n[e+p*i+1]);return l}function YO(n,e,t,i,s,a,l,u){for(let f=0,d=t.length;f<d;++f){const g=t[f];l=e_(n,e,g,i,s,a,l),u.push(l),e=g}return l}function va(n,e){return e*Math.round(n/e)}function VO(n,e,t,i,s,a,l){if(e==t)return l;let u=va(n[e],s),f=va(n[e+1],s);e+=i,a[l++]=u,a[l++]=f;let d,g;do if(d=va(n[e],s),g=va(n[e+1],s),e+=i,e==t)return a[l++]=d,a[l++]=g,l;while(d==u&&g==f);for(;e<t;){const p=va(n[e],s),_=va(n[e+1],s);if(e+=i,p==d&&_==g)continue;const E=d-u,x=g-f,b=p-u,S=_-f;if(E*S==x*b&&(E<0&&b<E||E==b||E>0&&b>E)&&(x<0&&S<x||x==S||x>0&&S>x)){d=p,g=_;continue}a[l++]=d,a[l++]=g,u=d,f=g,d=p,g=_}return a[l++]=d,a[l++]=g,l}function nA(n,e,t,i,s,a,l,u){for(let f=0,d=t.length;f<d;++f){const g=t[f];l=VO(n,e,g,i,s,a,l),u.push(l),e=g}return l}class yu extends Jy{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new yu(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,s){return s<NR(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(JR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),eA(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,s))}getArea(){return QR(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return tl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=e_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new yu(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=tA(this.flatCoordinates,0,e,this.stride),this.changed()}}class Bd extends Jy{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Bd(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,s){const a=this.flatCoordinates,l=rl(e,t,a[0],a[1]);if(l<s){const u=this.stride;for(let f=0;f<u;++f)i[f]=a[f];return i.length=u,l}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return PR(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return BR(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=XO(this.flatCoordinates,0,e,this.stride),this.changed()}}function qO(n,e,t,i,s){return!kR(s,function(l){return!Ia(n,e,t,i,l[0],l[1])})}function Ia(n,e,t,i,s,a){let l=0,u=n[t-i],f=n[t-i+1];for(;e<t;e+=i){const d=n[e],g=n[e+1];f<=a?g>a&&(d-u)*(a-f)-(s-u)*(g-f)>0&&l++:g<=a&&(d-u)*(a-f)-(s-u)*(g-f)<0&&l--,u=d,f=g}return l!==0}function iA(n,e,t,i,s,a){if(t.length===0||!Ia(n,e,t[0],i,s,a))return!1;for(let l=1,u=t.length;l<u;++l)if(Ia(n,t[l-1],t[l],i,s,a))return!1;return!0}function t_(n,e,t,i,s,a,l){let u,f,d,g,p,_,E;const x=s[a+1],b=[];for(let v=0,D=t.length;v<D;++v){const A=t[v];for(g=n[A-i],_=n[A-i+1],u=e;u<A;u+=i)p=n[u],E=n[u+1],(x<=_&&E<=x||_<=x&&x<=E)&&(d=(x-_)/(E-_)*(p-g)+g,b.push(d)),g=p,_=E}let S=NaN,R=-1/0;for(b.sort(Xs),g=b[0],u=1,f=b.length;u<f;++u){p=b[u];const v=Math.abs(p-g);v>R&&(d=(g+p)/2,iA(n,e,t,i,d,x)&&(S=d,R=v)),g=p}return isNaN(S)&&(S=s[a]),l?(l.push(S,x,R),l):[S,x,R]}function $O(n,e,t,i,s){let a=[];for(let l=0,u=t.length;l<u;++l){const f=t[l];a=t_(n,e,f,i,s,2*l,a),e=f[f.length-1]}return a}function KO(n,e,t,i,s){let a;for(e+=i;e<t;e+=i)if(a=s(n.slice(e-i,e),n.slice(e,e+i)),a)return a;return!1}function sA(n,e,t,i,s,a){return a=a??UR(bi(),n,e,t,i),oi(s,a)?a[0]>=s[0]&&a[2]<=s[2]||a[1]>=s[1]&&a[3]<=s[3]?!0:KO(n,e,t,i,function(l,u){return XI(s,l,u)}):!1}function rA(n,e,t,i,s){return!!(sA(n,e,t,i,s)||Ia(n,e,t,i,s[0],s[1])||Ia(n,e,t,i,s[0],s[3])||Ia(n,e,t,i,s[2],s[1])||Ia(n,e,t,i,s[2],s[3]))}function ZO(n,e,t,i,s){if(!rA(n,e,t[0],i,s))return!1;if(t.length===1)return!0;for(let a=1,l=t.length;a<l;++a)if(qO(n,t[a-1],t[a],i,s)&&!sA(n,t[a-1],t[a],i,s))return!1;return!0}function WO(n,e,t,i){for(;e<t-i;){for(let s=0;s<i;++s){const a=n[e+s];n[e+s]=n[t-i+s],n[t-i+s]=a}e+=i,t-=i}}function n_(n,e,t,i){let s=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const u=n[e],f=n[e+1];s+=(u-a)*(f+l),a=u,l=f}return s===0?void 0:s>0}function QO(n,e,t,i,s){s=s!==void 0?s:!1;for(let a=0,l=t.length;a<l;++a){const u=t[a],f=n_(n,e,u,i);if(a===0){if(s&&f||!s&&!f)return!1}else if(s&&!f||!s&&f)return!1;e=u}return!0}function $T(n,e,t,i,s){s=s!==void 0?s:!1;for(let a=0,l=t.length;a<l;++a){const u=t[a],f=n_(n,e,u,i);(a===0?s&&f||!s&&!f:s&&!f||!s&&f)&&WO(n,e,u,i),e=u}return e}function JO(n,e){const t=[];let i=0,s=0,a;for(let l=0,u=e.length;l<u;++l){const f=e[l],d=n_(n,i,f,2);if(a===void 0&&(a=d),d===a)t.push(e.slice(s,l+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=l+1,i=f}return t}class _u extends Jy{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?ky(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new _u(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,s){return s<NR(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(GO(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),HO(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,s))}containsXY(e,t){return iA(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return zO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),$T(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,rd(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=qr(this.getExtent());this.flatInteriorPoint_=t_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Bd(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new yu(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,s=[];let a=0;for(let l=0,u=i.length;l<u;++l){const f=i[l],d=new yu(t.slice(a,f),e);s.push(d),a=f}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;QO(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=$T(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=nA(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new _u(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return ZO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=jO(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function KT(n){if(Ml(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],s=n[3],a=[e,t,e,s,i,s,i,t,e,t];return new _u(a,"XY",[a.length])}function i_(n,e,t,i){const s=tt(e)/t[0],a=gn(e)/t[1];return i?Math.min(n,Math.max(s,a)):Math.min(n,Math.min(s,a))}function s_(n,e,t){let i=Math.min(n,e);const s=50;return i*=Math.log(1+s*Math.max(0,n/e-1))/s+1,t&&(i=Math.max(i,t),i/=Math.log(1+s*Math.max(0,t/n-1))/s+1),Tt(i,t/2,e*2)}function e3(n,e,t,i){return e=e!==void 0?e:!0,function(s,a,l,u){if(s!==void 0){const f=n[0],d=n[n.length-1],g=t?i_(f,t,l,i):f;if(u)return e?s_(s,g,d):Tt(s,d,g);const p=Math.min(g,s),_=Math.floor(Uy(n,p,a));return n[_]>g&&_<n.length-1?n[_+1]:n[_]}}}function t3(n,e,t,i,s,a){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(l,u,f,d){if(l!==void 0){const g=s?i_(e,s,f,a):e;if(d)return i?s_(l,g,t):Tt(l,t,g);const p=1e-9,_=Math.ceil(Math.log(e/g)/Math.log(n)-p),E=-u*(.5-p)+.5,x=Math.min(g,l),b=Math.floor(Math.log(e/x)/Math.log(n)+E),S=Math.max(_,b),R=e/Math.pow(n,S);return Tt(R,t,g)}}}function ZT(n,e,t,i,s){return t=t!==void 0?t:!0,function(a,l,u,f){if(a!==void 0){const d=i?i_(n,i,u,s):n;return!t||!f?Tt(a,e,d):s_(a,d,e)}}}function r_(n){if(n!==void 0)return 0}function WT(n){if(n!==void 0)return n}function n3(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function i3(n){const e=zr(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const s3=42,a_=256,S0=0;class ms extends Ss{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=$y(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&KR(),e.center&&(e.center=Gs(e.center,this.projection_)),e.extent&&(e.extent=_s(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const u in Ki)delete t[u];this.setProperties(t,!0);const i=a3(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=r3(e),a=i.constraint,l=o3(e);this.constraints_={center:s,resolution:a,rotation:l},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const s=e||[0,0,0,0];t=t||[0,0,0,0];const a=this.getResolution(),l=a/2*(s[3]-t[3]+t[1]-s[1]),u=a/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([i[0]+l,i[1]-u])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=Gs(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=Gs(s.anchor,this.getProjection())),t[i]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const g=arguments[s];g.center&&this.setCenterInternal(g.center),g.zoom!==void 0?this.setZoom(g.zoom):g.resolution&&this.setResolution(g.resolution),g.rotation!==void 0&&this.setRotation(g.rotation)}if(s===t){i&&hf(i,!0);return}let a=Date.now(),l=this.targetCenter_.slice(),u=this.targetResolution_,f=this.targetRotation_;const d=[];for(;s<t;++s){const g=arguments[s],p={start:a,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||$I,callback:i};if(g.center&&(p.sourceCenter=l,p.targetCenter=g.center.slice(),l=p.targetCenter),g.zoom!==void 0?(p.sourceResolution=u,p.targetResolution=this.getResolutionForZoom(g.zoom),u=p.targetResolution):g.resolution&&(p.sourceResolution=u,p.targetResolution=g.resolution,u=p.targetResolution),g.rotation!==void 0){p.sourceRotation=f;const _=Pa(g.rotation-f+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=f+_,f=p.targetRotation}l3(p)?p.complete=!0:a+=p.duration,d.push(p)}this.animations_.push(d),this.setHint(Fn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Fn.ANIMATING]>0}getInteracting(){return this.hints_[Fn.INTERACTING]>0}cancelAnimations(){this.setHint(Fn.ANIMATING,-this.hints_[Fn.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const s=this.animations_[t];if(s[0].callback&&hf(s[0].callback,!1),!e)for(let a=0,l=s.length;a<l;++a){const u=s[a];if(!u.complete){e=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let a=!0;for(let l=0,u=s.length;l<u;++l){const f=s[l];if(f.complete)continue;const d=e-f.start;let g=f.duration>0?d/f.duration:1;g>=1?(f.complete=!0,g=1):a=!1;const p=f.easing(g);if(f.sourceCenter){const _=f.sourceCenter[0],E=f.sourceCenter[1],x=f.targetCenter[0],b=f.targetCenter[1];this.nextCenter_=f.targetCenter;const S=_+p*(x-_),R=E+p*(b-E);this.targetCenter_=[S,R]}if(f.sourceResolution&&f.targetResolution){const _=p===1?f.targetResolution:f.sourceResolution+p*(f.targetResolution-f.sourceResolution);if(f.anchor){const E=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(_,0,E,!0);this.targetCenter_=this.calculateCenterZoom(x,f.anchor)}this.nextResolution_=f.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(f.sourceRotation!==void 0&&f.targetRotation!==void 0){const _=p===1?Pa(f.targetRotation+Math.PI,2*Math.PI)-Math.PI:f.sourceRotation+p*(f.targetRotation-f.sourceRotation);if(f.anchor){const E=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(E,f.anchor)}this.nextRotation_=f.targetRotation,this.targetRotation_=_}if(this.applyTargetState_(!0),t=!0,!f.complete)break}if(a){this.animations_[i]=null,this.setHint(Fn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const l=s[0].callback;l&&hf(l,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-t[0],s[1]-t[1]],jy(i,e-this.getRotation()),YI(i,t)),i}calculateCenterZoom(e,t){let i;const s=this.getCenterInternal(),a=this.getResolution();if(s!==void 0&&a!==void 0){const l=t[0]-e*(t[0]-s[0])/a,u=t[1]-e*(t[1]-s[1])/a;i=[l,u]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],s=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&sd(e,this.getProjection())}getCenterInternal(){return this.get(Ki.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Zy(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ot(t,"The view center is not defined");const i=this.getResolution();ot(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return ot(s!==void 0,"The view rotation is not defined"),ny(t,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Ki.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(_s(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=tt(e)/t[0],s=gn(e)/t[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(t/i)/Math.log(e);return function(a){return t/Math.pow(e,a*s)}}getRotation(){return this.get(Ki.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,a=Math.log(i/s)/t;return function(l){return Math.log(i/l)/t/a}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const a=this.padding_;if(a){const l=this.getViewportSizeMinusPadding_();s=T0(s,this.getViewportSize_(),[l[0]/2+a[3],l[1]/2+a[0]],t,i)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,s;if(this.resolutions_){const a=Uy(this.resolutions_,e,1);t=a,i=this.resolutions_[a],a==this.resolutions_.length-1?s=2:s=i/this.resolutions_[a+1]}else i=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const t=Tt(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Tt(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ot(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ot(!Ml(e),"Cannot fit empty extent provided as `geometry`");const s=_s(e,this.getProjection());i=KT(s)}else if(e.getType()==="Circle"){const s=_s(e.getExtent(),this.getProjection());i=KT(s),i.rotate(this.getRotation(),qr(s))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),s=Math.sin(-t),a=e.getFlatCoordinates(),l=e.getStride();let u=1/0,f=1/0,d=-1/0,g=-1/0;for(let p=0,_=a.length;p<_;p+=l){const E=a[p]*i-a[p+1]*s,x=a[p]*s+a[p+1]*i;u=Math.min(u,E),f=Math.min(f,x),d=Math.max(d,E),g=Math.max(g,x)}return[u,f,d,g]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],a=t.nearest!==void 0?t.nearest:!1;let l;t.minResolution!==void 0?l=t.minResolution:t.maxZoom!==void 0?l=this.getResolutionForZoom(t.maxZoom):l=0;const u=this.rotatedExtentForGeometry(e);let f=this.getResolutionForExtentInternal(u,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);f=isNaN(f)?l:Math.max(f,l),f=this.getConstrainedResolution(f,a?0:1);const d=this.getRotation(),g=Math.sin(d),p=Math.cos(d),_=qr(u);_[0]+=(s[1]-s[3])/2*f,_[1]+=(s[0]-s[2])/2*f;const E=_[0]*p-_[1]*g,x=_[1]*p+_[0]*g,b=this.getConstrainedCenter([E,x],f),S=t.callback?t.callback:hu;t.duration!==void 0?this.animateInternal({resolution:f,center:b,duration:t.duration,easing:t.easing},S):(this.targetResolution_=f,this.targetCenter_=b,this.applyTargetState_(!1,!0),hf(S,!0))}centerOn(e,t,i){this.centerOnInternal(Gs(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(T0(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,s){let a;const l=this.padding_;if(l&&e){const u=this.getViewportSizeMinusPadding_(-i),f=T0(e,s,[u[0]/2+l[3],u[1]/2+l[0]],t,i);a=[e[0]-f[0],e[1]-f[1]]}return a}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=sd(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Gs(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*e,0,s,i);t&&(this.targetCenter_=this.calculateCenterZoom(a,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Gs(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Gs(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,0,a,i),u=this.constraints_.center(this.targetCenter_,l,a,i,this.calculateCenterShift(this.targetCenter_,l,s,a));this.get(Ki.ROTATION)!==s&&this.set(Ki.ROTATION,s),this.get(Ki.RESOLUTION)!==l&&(this.set(Ki.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(Ki.CENTER)||!Jf(this.get(Ki.CENTER),u))&&this.set(Ki.CENTER,u),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const s=t||0,a=this.constraints_.rotation(this.targetRotation_),l=this.getViewportSize_(a),u=this.constraints_.resolution(this.targetResolution_,s,l),f=this.constraints_.center(this.targetCenter_,u,l,!1,this.calculateCenterShift(this.targetCenter_,u,a,l));if(e===0&&!this.cancelAnchor_){this.targetResolution_=u,this.targetRotation_=a,this.targetCenter_=f,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==u||this.getRotation()!==a||!this.getCenterInternal()||!Jf(this.getCenterInternal(),f))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:a,center:f,resolution:u,duration:e,easing:Dl,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Fn.INTERACTING,1)}endInteraction(e,t,i){i=i&&Gs(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Fn.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function hf(n,e){setTimeout(function(){n(e)},0)}function r3(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return DT(n.extent,n.constrainOnlyCenter,t)}const e=$y(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,DT(t,!1,!1)}return UI}function a3(n){let e,t,i,l=n.minZoom!==void 0?n.minZoom:S0,u=n.maxZoom!==void 0?n.maxZoom:28;const f=n.zoomFactor!==void 0?n.zoomFactor:2,d=n.multiWorld!==void 0?n.multiWorld:!1,g=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,p=n.showFullExtent!==void 0?n.showFullExtent:!1,_=$y(n.projection,"EPSG:3857"),E=_.getExtent();let x=n.constrainOnlyCenter,b=n.extent;if(!d&&!b&&_.isGlobal()&&(x=!1,b=E),n.resolutions!==void 0){const S=n.resolutions;t=S[l],i=S[u]!==void 0?S[u]:S[S.length-1],n.constrainResolution?e=e3(S,g,!x&&b,p):e=ZT(t,i,g,!x&&b,p)}else{const R=(E?Math.max(tt(E),gn(E)):360*pl.degrees/_.getMetersPerUnit())/a_/Math.pow(2,S0),v=R/Math.pow(2,28-S0);t=n.maxResolution,t!==void 0?l=0:t=R/Math.pow(f,l),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(f,u):i=R/Math.pow(f,u):i=v),u=l+Math.floor(Math.log(t/i)/Math.log(f)),i=t/Math.pow(f,u-l),n.constrainResolution?e=t3(f,t,i,g,!x&&b,p):e=ZT(t,i,g,!x&&b,p)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:l,zoomFactor:f}}function o3(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?i3():t===!1?WT:typeof t=="number"?n3(t):WT}return r_}function l3(n){return!(n.sourceCenter&&n.targetCenter&&!Jf(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function T0(n,e,t,i,s){const a=Math.cos(-s);let l=Math.sin(-s),u=n[0]*a-n[1]*l,f=n[1]*a+n[0]*l;u+=(e[0]/2-t[0])*i,f+=(t[1]-e[1]/2)*i,l=-l;const d=u*a-f*l,g=f*a+u*l;return[d,g]}const ff="ol-hidden",zu="ol-unselectable",o_="ol-control",QT="ol-collapsed",c3=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),JT=["style","variant","weight","size","lineHeight","family"],ay={normal:400,bold:700},oy=function(n){const e=n.match(c3);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let i=0,s=JT.length;i<s;++i){const a=e[i+1];a!==void 0&&(t[JT[i]]=typeof a=="string"?a.trim():a)}return isNaN(Number(t.weight))&&t.weight in ay&&(t.weight=ay[t.weight]),t.families=t.family.split(/,\s?/).map(i=>i.trim().replace(/^['"]|['"]$/g,"")),t};function Nt(n,e,t,i){let s;return t&&t.length?s=t.shift():Rd?s=new OffscreenCanvas(n||300,e||300):s=document.createElement("canvas"),n&&(s.width=n),e&&(s.height=e),s.getContext("2d",i)}let b0;function ad(){return b0||(b0=Nt(1,1)),b0}function Pd(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function eb(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function u3(n){for(;n.lastChild;)n.lastChild.remove()}function h3(n,e){const t=n.childNodes;for(let i=0;;++i){const s=t[i],a=e[i];if(!s&&!a)break;if(s!==a){if(!s){n.appendChild(a);continue}if(!a){n.removeChild(s),--i;continue}n.insertBefore(a,s)}}}class Fd extends Ss{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,i=this.listenerKeys.length;t<i;++t)St(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){const t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==hu&&this.listenerKeys.push(et(e,Nr.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class f3 extends Fd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",a=e.collapseLabel!==void 0?e.collapseLabel:"",l=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof a=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a,this.collapseLabel_.className=l):this.collapseLabel_=a;const u=e.label!==void 0?e.label:"i";typeof u=="string"?(this.label_=document.createElement("span"),this.label_.textContent=u,this.label_.className=s):this.label_=u;const f=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(f),this.toggleButton_.addEventListener(Me.CLICK,this.handleClick_.bind(this),!1);const d=t+" "+zu+" "+o_+(this.collapsed_&&this.collapsible_?" "+QT:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=d,g.appendChild(this.toggleButton_),g.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>i.add(s)):i.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(a=>a.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(s)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>MR(()=>s))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!ea(t,this.renderedAttributions_)){u3(this.ulElement_);for(let s=0,a=t.length;s<a;++s){const l=document.createElement("li");l.innerHTML=t[s],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(QT),this.collapsed_?eb(this.collapseLabel_,this.label_):eb(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class d3 extends Fd{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const a=e.tipLabel?e.tipLabel:"Reset rotation",l=document.createElement("button");l.className=t+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(this.label_),l.addEventListener(Me.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+zu+" "+o_,f=this.element;f.className=u,f.appendChild(l),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ff)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Dl}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const a=this.element.classList.contains(ff);!a&&i===0?this.element.classList.add(ff):a&&i!==0&&this.element.classList.remove(ff)}this.label_.style.transform=s}this.rotation_=i}}class g3 extends Fd{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",a=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",l=e.zoomInLabel!==void 0?e.zoomInLabel:"+",u=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",f=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",d=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=s,g.setAttribute("type","button"),g.title=f,g.appendChild(typeof l=="string"?document.createTextNode(l):l),g.addEventListener(Me.CLICK,this.handleClick_.bind(this,i),!1);const p=document.createElement("button");p.className=a,p.setAttribute("type","button"),p.title=d,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(Me.CLICK,this.handleClick_.bind(this,-i),!1);const _=t+" "+zu+" "+o_,E=this.element;E.className=_,E.appendChild(g),E.appendChild(p),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const a=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:Dl})):i.setZoom(a)}}}function aA(n){n=n||{};const e=new ys;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new g3(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new d3(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new f3(n.attributionOptions)),e}class m3{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[t+2]-this.points_[i+2];if(s<1e3/60)return!1;const a=this.points_[t]-this.points_[i],l=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(l,a),this.initialVelocity_=Math.sqrt(a*a+l*l)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const tb={ACTIVE:"active"};class Gu extends Ss{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(tb.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(tb.ACTIVE,e)}setMap(e){this.map_=e}}function p3(n,e,t){const i=n.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:KI,center:n.getConstrainedCenter(s)})}}function l_(n,e,t,i){const s=n.getZoom();if(s===void 0)return;const a=n.getConstrainedZoom(s+e),l=n.getResolutionForZoom(a);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:l,anchor:t,duration:i!==void 0?i:250,easing:Dl})}class y3 extends Gu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Lt.DBLCLICK){const i=e.originalEvent,s=e.map,a=e.coordinate,l=i.shiftKey?-this.delta_:this.delta_,u=s.getView();l_(u,l,a,this.duration_),i.preventDefault(),t=!0}return!t}}function ly(n){const e=arguments;return function(t){let i=!0;for(let s=0,a=e.length;s<a&&(i=i&&e[s](t),!!i);++s);return i}}const _3=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},E3=function(n){const e=n.map.getTargetElement(),t=e.getRootNode(),i=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},oA=function(n){const e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?E3(n):!0},x3=uu,lA=function(n){const e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(DI&&DR&&e.ctrlKey)},cA=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},S3=function(n){const e=n.originalEvent;return DR?e.metaKey:e.ctrlKey},T3=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},uA=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},v0=function(n){const e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},b3=function(n){const e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class Hu extends Gu{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Lt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Lt.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Lt.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Lt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function c_(n){const e=n.length;let t=0,i=0;for(let s=0;s<e;s++)t+=n[s].clientX,i+=n[s].clientY;return{clientX:t/e,clientY:i/e}}class v3 extends Hu{constructor(e){super({stopDown:wd}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:ly(cA,b3);this.condition_=e.onFocusOnly?ly(oA,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,s=t.getEventPixel(c_(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const a=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],u=e.map.getView();VI(a,u.getResolution()),jy(a,u.getRotation()),u.adjustCenterInternal(a)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),l=i.getCenterInternal(),u=t.getPixelFromCoordinateInternal(l),f=t.getCoordinateFromPixelInternal([u[0]-s*Math.cos(a),u[1]-s*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(f),duration:500,easing:Dl})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class w3 extends Hu{constructor(e){e=e||{},super({stopDown:wd}),this.condition_=e.condition?e.condition:_3,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!v0(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===r_)return;const s=t.getSize(),a=e.pixel,l=Math.atan2(s[1]/2-a[1],a[0]-s[0]/2);if(this.lastAngle_!==void 0){const u=l-this.lastAngle_;i.adjustRotationInternal(-u)}this.lastAngle_=l}handleUpEvent(e){return v0(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return v0(e)&&lA(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class R3 extends Bu{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+i,s.top=Math.min(e[1],t[1])+i,s.width=Math.abs(t[0]-e[0])+i,s.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new _u([s])}getGeometry(){return this.geometry_}}const Bo={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Uc extends $s{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class A3 extends Hu{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new R3(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??lA,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const s=i[0]-t[0],a=i[1]-t[1];return s*s+a*a>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Uc(Bo.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Uc(t?Bo.BOXEND:Bo.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Uc(Bo.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Uc(Bo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Uc(Bo.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class C3 extends A3{constructor(e){e=e||{};const t=e.condition?e.condition:T3;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const a=i.rotatedExtentForGeometry(s),l=i.getResolutionForExtentInternal(a),u=i.getResolution()/l;s=s.clone(),s.scale(u*u)}i.fitInternal(s,{duration:this.duration_,easing:Dl})}}const Ta={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class M3 extends Gu{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return cA(t)&&uA(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Me.KEYDOWN){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==Ta.DOWN||s==Ta.LEFT||s==Ta.RIGHT||s==Ta.UP)){const l=e.map.getView(),u=l.getResolution()*this.pixelDelta_;let f=0,d=0;s==Ta.DOWN?d=-u:s==Ta.LEFT?f=-u:s==Ta.RIGHT?f=u:d=u;const g=[f,d];jy(g,l.getRotation()),p3(l,g,this.duration_),i.preventDefault(),t=!0}}return!t}}class D3 extends Gu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!S3(t)&&uA(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Me.KEYDOWN||e.type==Me.KEYPRESS){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==="+"||s==="-")){const a=e.map,l=s==="+"?this.delta_:-this.delta_,u=a.getView();l_(u,l,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const I3=40,O3=300;class L3 extends Gu{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:x3;this.condition_=e.onFocusOnly?ly(oA,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Me.WHEEL)return!0;const i=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let a=s.deltaY;switch(s.deltaMode){case WheelEvent.DOM_DELTA_LINE:a*=I3;break;case WheelEvent.DOM_DELTA_PAGE:a*=O3;break}if(a===0)return!1;this.lastDelta_=a;const l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?"trackpad":"wheel");const u=i.getView();if(this.mode_==="trackpad"&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=l,!1;this.totalDelta_+=a;const f=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),f),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Tt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),l_(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class N3 extends Hu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=wd),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],s=this.targetPointers[1],a=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const f=a-this.lastAngle_;this.rotationDelta_+=f,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=f}this.lastAngle_=a;const l=e.map,u=l.getView();u.getConstraints().rotation!==r_&&(this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(c_(this.targetPointers))),this.rotating_&&(l.render(),u.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class B3 extends Hu{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=wd),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],s=this.targetPointers[1],a=i.clientX-s.clientX,l=i.clientY-s.clientY,u=Math.sqrt(a*a+l*l);this.lastDistance_!==void 0&&(t=this.lastDistance_/u),this.lastDistance_=u;const f=e.map,d=f.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=f.getCoordinateFromPixelInternal(f.getEventPixel(c_(this.targetPointers))),f.render(),d.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function P3(n){n=n||{};const e=new ys,t=new m3(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new w3),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new y3({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new v3({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new N3),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new B3({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new M3),e.push(new D3({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new L3({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new C3({duration:n.zoomDuration})),e}const st={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class hA extends Ss{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[st.OPACITY]=e.opacity!==void 0?e.opacity:1,ot(typeof t[st.OPACITY]=="number","Layer opacity must be a number"),t[st.VISIBLE]=e.visible!==void 0?e.visible:!0,t[st.Z_INDEX]=e.zIndex,t[st.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[st.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[st.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[st.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Tt(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Je()}getLayerStatesArray(e){return Je()}getExtent(){return this.get(st.EXTENT)}getMaxResolution(){return this.get(st.MAX_RESOLUTION)}getMinResolution(){return this.get(st.MIN_RESOLUTION)}getMinZoom(){return this.get(st.MIN_ZOOM)}getMaxZoom(){return this.get(st.MAX_ZOOM)}getOpacity(){return this.get(st.OPACITY)}getSourceState(){return Je()}getVisible(){return this.get(st.VISIBLE)}getZIndex(){return this.get(st.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(st.EXTENT,e)}setMaxResolution(e){this.set(st.MAX_RESOLUTION,e)}setMinResolution(e){this.set(st.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(st.MAX_ZOOM,e)}setMinZoom(e){this.set(st.MIN_ZOOM,e)}setOpacity(e){ot(typeof e=="number","Layer opacity must be a number"),this.set(st.OPACITY,e)}setVisible(e){this.set(st.VISIBLE,e)}setZIndex(e){this.set(st.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Fr extends $s{constructor(e,t){super(e),this.layer=t}}const w0={LAYERS:"layers"};class Il extends hA{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(w0.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new ys(i.slice(),{unique:!0}):ot(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new ys(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(St),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(et(e,ri.ADD,this.handleLayersAdd_,this),et(e,ri.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(St);Cl(this.listenerKeys_);const t=e.getArray();for(let i=0,s=t.length;i<s;i++){const a=t[i];this.registerLayerListeners_(a),this.dispatchEvent(new Fr("addlayer",a))}this.changed()}registerLayerListeners_(e){const t=[et(e,gl.PROPERTYCHANGE,this.handleLayerChange_,this),et(e,Me.CHANGE,this.handleLayerChange_,this)];e instanceof Il&&t.push(et(e,"addlayer",this.handleLayerGroupAdd_,this),et(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[De(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Fr("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Fr("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Fr("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=De(t);this.listenerKeys_[i].forEach(St),delete this.listenerKeys_[i],this.dispatchEvent(new Fr("removelayer",t)),this.changed()}getLayers(){return this.get(w0.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let s=0,a=i.length;s<a;++s)this.dispatchEvent(new Fr("removelayer",i[s]))}this.set(w0.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(l){l.getLayerStatesArray(t)});const s=this.getLayerState();let a=s.zIndex;!e&&s.zIndex===void 0&&(a=0);for(let l=i,u=t.length;l<u;l++){const f=t[l];f.opacity*=s.opacity,f.visible=f.visible&&s.visible,f.maxResolution=Math.min(f.maxResolution,s.maxResolution),f.minResolution=Math.max(f.minResolution,s.minResolution),f.minZoom=Math.max(f.minZoom,s.minZoom),f.maxZoom=Math.min(f.maxZoom,s.maxZoom),s.extent!==void 0&&(f.extent!==void 0?f.extent=$n(f.extent,s.extent):f.extent=s.extent),f.zIndex===void 0&&(f.zIndex=a)}return t}getSourceState(){return"ready"}}const dn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Ud extends hA{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(st.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(st.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(St(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=et(e,Me.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof ms?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;if(t.layerStatesArray){if(s=t.layerStatesArray.find(l=>l.layer===this),!s)return!1}else s=this.getLayerState();const a=this.getExtent();return u_(s,t.viewState)&&(!a||oi(a,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];const t=this.getSource()?.getAttributions();if(!t)return[];const i=e instanceof ms?e.getViewStateAndExtent():e;let s=t(i);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(st.MAP,e)}getMapInternal(){return this.get(st.MAP)}setMap(e){this.mapPrecomposeKey_&&(St(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(St(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=et(e,dn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=et(this,Me.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);ot(!t.some(s=>s.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(st.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function u_(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}function fA(n,e,t=0,i=n.length-1,s=F3){for(;i>t;){if(i-t>600){const f=i-t+1,d=e-t+1,g=Math.log(f),p=.5*Math.exp(2*g/3),_=.5*Math.sqrt(g*p*(f-p)/f)*(d-f/2<0?-1:1),E=Math.max(t,Math.floor(e-d*p/f+_)),x=Math.min(i,Math.floor(e+(f-d)*p/f+_));fA(n,e,E,x,s)}const a=n[e];let l=t,u=i;for(kc(n,t,e),s(n[i],a)>0&&kc(n,t,i);l<u;){for(kc(n,l,u),l++,u--;s(n[l],a)<0;)l++;for(;s(n[u],a)>0;)u--}s(n[t],a)===0?kc(n,t,u):(u++,kc(n,u,i)),u<=e&&(t=u+1),e<=u&&(i=u-1)}}function kc(n,e,t){const i=n[e];n[e]=n[t],n[t]=i}function F3(n,e){return n<e?-1:n>e?1:0}let dA=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!gf(e,t))return i;const s=this.toBBox,a=[];for(;t;){for(let l=0;l<t.children.length;l++){const u=t.children[l],f=t.leaf?s(u):u;gf(e,f)&&(t.leaf?i.push(u):A0(e,f)?this._all(u,i):a.push(u))}t=a.pop()}return i}collides(e){let t=this.data;if(!gf(e,t))return!1;const i=[];for(;t;){for(let s=0;s<t.children.length;s++){const a=t.children[s],l=t.leaf?this.toBBox(a):a;if(gf(e,l)){if(t.leaf||A0(e,l))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Ko([]),this}remove(e,t){if(!e)return this;let i=this.data;const s=this.toBBox(e),a=[],l=[];let u,f,d;for(;i||a.length;){if(i||(i=a.pop(),f=a[a.length-1],u=l.pop(),d=!0),i.leaf){const g=U3(e,i.children,t);if(g!==-1)return i.children.splice(g,1),a.push(i),this._condense(a),this}!d&&!i.leaf&&A0(i,s)?(a.push(i),l.push(u),u=0,f=i,i=i.children[0]):f?(u++,i=f.children[u],d=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,s){const a=i-t+1;let l=this._maxEntries,u;if(a<=l)return u=Ko(e.slice(t,i+1)),Po(u,this.toBBox),u;s||(s=Math.ceil(Math.log(a)/Math.log(l)),l=Math.ceil(a/Math.pow(l,s-1))),u=Ko([]),u.leaf=!1,u.height=s;const f=Math.ceil(a/l),d=f*Math.ceil(Math.sqrt(l));nb(e,t,i,d,this.compareMinX);for(let g=t;g<=i;g+=d){const p=Math.min(g+d-1,i);nb(e,g,p,f,this.compareMinY);for(let _=g;_<=p;_+=f){const E=Math.min(_+f-1,p);u.children.push(this._build(e,_,E,s-1))}}return Po(u,this.toBBox),u}_chooseSubtree(e,t,i,s){for(;s.push(t),!(t.leaf||s.length-1===i);){let a=1/0,l=1/0,u;for(let f=0;f<t.children.length;f++){const d=t.children[f],g=R0(d),p=G3(e,d)-g;p<l?(l=p,a=g<a?g:a,u=d):p===l&&g<a&&(a=g,u=d)}t=u||t.children[0]}return t}_insert(e,t,i){const s=i?e:this.toBBox(e),a=[],l=this._chooseSubtree(s,this.data,t,a);for(l.children.push(e),Kc(l,s);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(s,a,t)}_split(e,t){const i=e[t],s=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,s);const l=this._chooseSplitIndex(i,a,s),u=Ko(i.children.splice(l,i.children.length-l));u.height=i.height,u.leaf=i.leaf,Po(i,this.toBBox),Po(u,this.toBBox),t?e[t-1].children.push(u):this._splitRoot(i,u)}_splitRoot(e,t){this.data=Ko([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Po(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let s,a=1/0,l=1/0;for(let u=t;u<=i-t;u++){const f=$c(e,0,u,this.toBBox),d=$c(e,u,i,this.toBBox),g=H3(f,d),p=R0(f)+R0(d);g<a?(a=g,s=u,l=p<l?p:l):g===a&&p<l&&(l=p,s=u)}return s||i-t}_chooseSplitAxis(e,t,i){const s=e.leaf?this.compareMinX:k3,a=e.leaf?this.compareMinY:z3,l=this._allDistMargin(e,t,i,s),u=this._allDistMargin(e,t,i,a);l<u&&e.children.sort(s)}_allDistMargin(e,t,i,s){e.children.sort(s);const a=this.toBBox,l=$c(e,0,t,a),u=$c(e,i-t,i,a);let f=df(l)+df(u);for(let d=t;d<i-t;d++){const g=e.children[d];Kc(l,e.leaf?a(g):g),f+=df(l)}for(let d=i-t-1;d>=t;d--){const g=e.children[d];Kc(u,e.leaf?a(g):g),f+=df(u)}return f}_adjustParentBBoxes(e,t,i){for(let s=i;s>=0;s--)Kc(t[s],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Po(e[t],this.toBBox)}};function U3(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Po(n,e){$c(n,0,n.children.length,e,n)}function $c(n,e,t,i,s){s||(s=Ko(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let a=e;a<t;a++){const l=n.children[a];Kc(s,n.leaf?i(l):l)}return s}function Kc(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function k3(n,e){return n.minX-e.minX}function z3(n,e){return n.minY-e.minY}function R0(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function df(n){return n.maxX-n.minX+(n.maxY-n.minY)}function G3(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function H3(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),s=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,a-i)}function A0(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function gf(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Ko(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function nb(n,e,t,i,s){const a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;const l=e+Math.ceil((t-e)/i/2)*i;fA(n,l,e,t,s),a.push(e,l,l,t)}}const h_=[NaN,NaN,NaN,0];let C0;function X3(){return C0||(C0=Nt(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),C0}const j3=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Y3=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,V3=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,q3=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function mf(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function tu(n){throw new Error('failed to parse "'+n+'" as color')}function gA(n){if(n.toLowerCase().startsWith("rgb")){const a=n.match(Y3)||n.match(j3)||n.match(V3);if(a){const l=a[4],u=100/255;return[Tt(mf(a[1],u)+.5|0,0,255),Tt(mf(a[2],u)+.5|0,0,255),Tt(mf(a[3],u)+.5|0,0,255),l!==void 0?Tt(mf(l,100),0,1):1]}tu(n)}if(n.startsWith("#")){if(q3.test(n)){const a=n.substring(1),l=a.length<=4?1:2,u=[0,0,0,255];for(let f=0,d=a.length;f<d;f+=l){let g=parseInt(a.substring(f,f+l),16);l===1&&(g+=g<<4),u[f/l]=g}return u[3]=u[3]/255,u}tu(n)}const e=X3();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&tu(n));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return gA(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const s=Array.from(e.getImageData(0,0,1,1).data);return s[3]=Ad(s[3]/255,3),s}function $3(n){return typeof n=="string"?n:d_(n)}const K3=1024,zc={};let M0=0;function Z3(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function D0(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function I0(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function O0(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function L0(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function ib(n){const e=O0(n[0]),t=O0(n[1]),i=O0(n[2]),s=L0(e*.222488403+t*.716873169+i*.06060791),a=500*(L0(e*.452247074+t*.399439023+i*.148375274)-s),l=200*(s-L0(e*.016863605+t*.117638439+i*.865350722)),u=Math.atan2(l,a)*(180/Math.PI);return[116*s-16,Math.sqrt(a*a+l*l),u<0?u+360:u,n[3]]}function W3(n){const e=(n[0]+16)/116,t=n[1],i=n[2]*Math.PI/180,s=I0(e),a=I0(e+t/500*Math.cos(i)),l=I0(e-t/200*Math.sin(i)),u=D0(a*3.021973625-s*1.617392459-l*.404875592),f=D0(a*-.943766287+s*1.916279586+l*.027607165),d=D0(a*.069407491-s*.22898585+l*1.159737864);return[Tt(u+.5|0,0,255),Tt(f+.5|0,0,255),Tt(d+.5|0,0,255),n[3]]}function f_(n){if(n==="none")return h_;if(zc.hasOwnProperty(n))return zc[n];if(M0>=K3){let t=0;for(const i in zc)(t++&3)===0&&(delete zc[i],--M0)}const e=gA(n);e.length!==4&&tu(n);for(const t of e)isNaN(t)&&tu(n);return zc[n]=e,++M0,e}function $r(n){return Array.isArray(n)?n:f_(n)}function d_(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const s=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+s+")"}function sb(n){return n[0]>0&&n[1]>0}function Q3(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Gt(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}let Ya=0;const Un=1<<Ya++,Ne=1<<Ya++,qn=1<<Ya++,Si=1<<Ya++,Kr=1<<Ya++,nl=1<<Ya++,pf=Math.pow(2,Ya)-1,g_={[Un]:"boolean",[Ne]:"number",[qn]:"string",[Si]:"color",[Kr]:"number[]",[nl]:"size"},J3=Object.keys(g_).map(Number).sort(Xs);function eL(n){return n in g_}function il(n){const e=[];for(const t of J3)Zc(n,t)&&e.push(g_[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Zc(n,e){return(n&e)===e}function vr(n,e){return n===e}class en{constructor(e,t){if(!eL(e))throw new Error(`literal expressions must have a specific type, got ${il(e)}`);this.type=e,this.value=t}}class mA{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function m_(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function mn(n,e,t){switch(typeof n){case"boolean":{if(vr(e,qn))return new en(qn,n?"true":"false");if(!Zc(e,Un))throw new Error(`got a boolean, but expected ${il(e)}`);return new en(Un,n)}case"number":{if(vr(e,nl))return new en(nl,Gt(n));if(vr(e,Un))return new en(Un,!!n);if(vr(e,qn))return new en(qn,n.toString());if(!Zc(e,Ne))throw new Error(`got a number, but expected ${il(e)}`);return new en(Ne,n)}case"string":{if(vr(e,Si))return new en(Si,f_(n));if(vr(e,Un))return new en(Un,!!n);if(!Zc(e,qn))throw new Error(`got a string, but expected ${il(e)}`);return new en(qn,n)}}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return hL(n,e,t);for(const i of n)if(typeof i!="number")throw new Error("expected an array of numbers");if(vr(e,nl)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new en(nl,n)}if(vr(e,Si)){if(n.length===3)return new en(Si,[...n,1]);if(n.length===4)return new en(Si,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!Zc(e,Kr))throw new Error(`got an array of numbers, but expected ${il(e)}`);return new en(Kr,n)}const H={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},tL={[H.Get]:Ce(Ue(1,1/0),rb),[H.Var]:Ce(Ue(1,1),nL),[H.Has]:Ce(Ue(1,1/0),rb),[H.Id]:Ce(iL,Fo),[H.Concat]:Ce(Ue(2,1/0),at(qn)),[H.GeometryType]:Ce(sL,Fo),[H.LineMetric]:Ce(Fo),[H.Resolution]:Ce(N0,Fo),[H.Zoom]:Ce(N0,Fo),[H.Time]:Ce(N0,Fo),[H.Any]:Ce(Ue(2,1/0),at(Un)),[H.All]:Ce(Ue(2,1/0),at(Un)),[H.Not]:Ce(Ue(1,1),at(Un)),[H.Equal]:Ce(Ue(2,2),at(pf)),[H.NotEqual]:Ce(Ue(2,2),at(pf)),[H.GreaterThan]:Ce(Ue(2,2),at(Ne)),[H.GreaterThanOrEqualTo]:Ce(Ue(2,2),at(Ne)),[H.LessThan]:Ce(Ue(2,2),at(Ne)),[H.LessThanOrEqualTo]:Ce(Ue(2,2),at(Ne)),[H.Multiply]:Ce(Ue(2,1/0),ab),[H.Coalesce]:Ce(Ue(2,1/0),ab),[H.Divide]:Ce(Ue(2,2),at(Ne)),[H.Add]:Ce(Ue(2,1/0),at(Ne)),[H.Subtract]:Ce(Ue(2,2),at(Ne)),[H.Clamp]:Ce(Ue(3,3),at(Ne)),[H.Mod]:Ce(Ue(2,2),at(Ne)),[H.Pow]:Ce(Ue(2,2),at(Ne)),[H.Abs]:Ce(Ue(1,1),at(Ne)),[H.Floor]:Ce(Ue(1,1),at(Ne)),[H.Ceil]:Ce(Ue(1,1),at(Ne)),[H.Round]:Ce(Ue(1,1),at(Ne)),[H.Sin]:Ce(Ue(1,1),at(Ne)),[H.Cos]:Ce(Ue(1,1),at(Ne)),[H.Atan]:Ce(Ue(1,2),at(Ne)),[H.Sqrt]:Ce(Ue(1,1),at(Ne)),[H.Match]:Ce(Ue(4,1/0),ob,aL),[H.Between]:Ce(Ue(3,3),at(Ne)),[H.Interpolate]:Ce(Ue(6,1/0),ob,oL),[H.Case]:Ce(Ue(3,1/0),rL,lL),[H.In]:Ce(Ue(2,2),cL),[H.Number]:Ce(Ue(1,1/0),at(pf)),[H.String]:Ce(Ue(1,1/0),at(pf)),[H.Array]:Ce(Ue(1,1/0),at(Ne)),[H.Color]:Ce(Ue(1,4),at(Ne)),[H.Band]:Ce(Ue(1,3),at(Ne)),[H.Palette]:Ce(Ue(2,2),uL),[H.ToString]:Ce(Ue(1,1),at(Un|Ne|qn|Si))};function rb(n,e,t){const i=n.length-1,s=new Array(i);for(let a=0;a<i;++a){const l=n[a+1];switch(typeof l){case"number":{s[a]=new en(Ne,l);break}case"string":{s[a]=new en(qn,l);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${l}`)}a===0&&t.properties.add(String(l))}return s}function nL(n,e,t){const i=n[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new en(qn,i)]}function iL(n,e,t){t.featureId=!0}function sL(n,e,t){t.geometryType=!0}function N0(n,e,t){t.mapState=!0}function Fo(n,e,t){const i=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function Ue(n,e){return function(t,i,s){const a=t[0],l=t.length-1;if(n===e){if(l!==n){const u=n===1?"":"s";throw new Error(`expected ${n} argument${u} for ${a}, got ${l}`)}}else if(l<n||l>e){const u=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${u} arguments for ${a}, got ${l}`)}}}function ab(n,e,t){const i=n.length-1,s=new Array(i);for(let a=0;a<i;++a){const l=mn(n[a+1],e,t);s[a]=l}return s}function at(n){return function(e,t,i){const s=e.length-1,a=new Array(s);for(let l=0;l<s;++l){const u=mn(e[l+1],n,i);a[l]=u}return a}}function rL(n,e,t){const i=n[0],s=n.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${s} instead`)}function ob(n,e,t){const i=n[0],s=n.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${s} instead`)}function aL(n,e,t){const i=n.length-1,s=qn|Ne|Un,a=mn(n[1],s,t),l=mn(n[n.length-1],e,t),u=new Array(i-2);for(let f=0;f<i-2;f+=2){try{const d=mn(n[f+2],a.type,t);u[f]=d}catch(d){throw new Error(`failed to parse argument ${f+1} of match expression: ${d.message}`)}try{const d=mn(n[f+3],l.type,t);u[f+1]=d}catch(d){throw new Error(`failed to parse argument ${f+2} of match expression: ${d.message}`)}}return[a,...u,l]}function oL(n,e,t){const i=n[1];let s;switch(i[0]){case"linear":s=1;break;case"exponential":const f=i[1];if(typeof f!="number"||f<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(f)} instead`);s=f;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const a=new en(Ne,s);let l;try{l=mn(n[2],Ne,t)}catch(f){throw new Error(`failed to parse argument 1 in interpolate expression: ${f.message}`)}const u=new Array(n.length-3);for(let f=0;f<u.length;f+=2){try{const d=mn(n[f+3],Ne,t);u[f]=d}catch(d){throw new Error(`failed to parse argument ${f+2} for interpolate expression: ${d.message}`)}try{const d=mn(n[f+4],e,t);u[f+1]=d}catch(d){throw new Error(`failed to parse argument ${f+3} for interpolate expression: ${d.message}`)}}return[a,l,...u]}function lL(n,e,t){const i=mn(n[n.length-1],e,t),s=new Array(n.length-1);for(let a=0;a<s.length-1;a+=2){try{const l=mn(n[a+1],Un,t);s[a]=l}catch(l){throw new Error(`failed to parse argument ${a} of case expression: ${l.message}`)}try{const l=mn(n[a+2],i.type,t);s[a+1]=l}catch(l){throw new Error(`failed to parse argument ${a+1} of case expression: ${l.message}`)}}return s[s.length-1]=i,s}function cL(n,e,t){let i=n[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],s=qn}else s=Ne;const a=new Array(i.length);for(let u=0;u<a.length;u++)try{const f=mn(i[u],s,t);a[u]=f}catch(f){throw new Error(`failed to parse haystack item ${u} for "in" expression: ${f.message}`)}return[mn(n[1],s,t),...a]}function uL(n,e,t){let i;try{i=mn(n[1],Ne,t)}catch(l){throw new Error(`failed to parse first argument in palette expression: ${l.message}`)}const s=n[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const a=new Array(s.length);for(let l=0;l<a.length;l++){let u;try{u=mn(s[l],Si,t)}catch(f){throw new Error(`failed to parse color at index ${l} in palette expression: ${f.message}`)}if(!(u instanceof en))throw new Error(`the palette color at index ${l} must be a literal value`);a[l]=u}return[i,...a]}function Ce(...n){return function(e,t,i){const s=e[0];let a;for(let l=0;l<n.length;l++){const u=n[l](e,t,i);if(l==n.length-1){if(!u)throw new Error("expected last argument validator to return the parsed args");a=u}}return new mA(t,s,...a)}}function hL(n,e,t){const i=n[0],s=tL[i];if(!s)throw new Error(`unknown operator: ${i}`);return s(n,e,t)}function pA(n){if(!n)return"";const e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return pA(n.getGeometries()[0]);default:return""}}function yA(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ks(n,e,t){const i=mn(n,e,t);return Ji(i)}function Ji(n,e){if(n instanceof en){if(n.type===Si&&typeof n.value=="string"){const i=f_(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case H.Number:case H.String:case H.Coalesce:return fL(n);case H.Get:case H.Var:case H.Has:return dL(n);case H.Id:return i=>i.featureId;case H.GeometryType:return i=>i.geometryType;case H.Concat:{const i=n.args.map(s=>Ji(s));return s=>"".concat(...i.map(a=>a(s).toString()))}case H.Resolution:return i=>i.resolution;case H.Any:case H.All:case H.Between:case H.In:case H.Not:return mL(n);case H.Equal:case H.NotEqual:case H.LessThan:case H.LessThanOrEqualTo:case H.GreaterThan:case H.GreaterThanOrEqualTo:return gL(n);case H.Multiply:case H.Divide:case H.Add:case H.Subtract:case H.Clamp:case H.Mod:case H.Pow:case H.Abs:case H.Floor:case H.Ceil:case H.Round:case H.Sin:case H.Cos:case H.Atan:case H.Sqrt:return pL(n);case H.Case:return yL(n);case H.Match:return _L(n);case H.Interpolate:return EL(n);case H.ToString:return xL(n);default:throw new Error(`Unsupported operator ${t}`)}}function fL(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let a=0;a<i;++a)s[a]=Ji(n.args[a]);switch(t){case H.Coalesce:return a=>{for(let l=0;l<i;++l){const u=s[l](a);if(typeof u<"u"&&u!==null)return u}throw new Error("Expected one of the values to be non-null")};case H.Number:case H.String:return a=>{for(let l=0;l<i;++l){const u=s[l](a);if(typeof u===t)return u}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function dL(n,e){const i=n.args[0].value;switch(n.operator){case H.Get:return s=>{const a=n.args;let l=s.properties[i];for(let u=1,f=a.length;u<f;++u){const g=a[u].value;l=l[g]}return l};case H.Var:return s=>s.variables[i];case H.Has:return s=>{const a=n.args;if(!(i in s.properties))return!1;let l=s.properties[i];for(let u=1,f=a.length;u<f;++u){const g=a[u].value;if(!l||!Object.hasOwn(l,g))return!1;l=l[g]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function gL(n,e){const t=n.operator,i=Ji(n.args[0]),s=Ji(n.args[1]);switch(t){case H.Equal:return a=>i(a)===s(a);case H.NotEqual:return a=>i(a)!==s(a);case H.LessThan:return a=>i(a)<s(a);case H.LessThanOrEqualTo:return a=>i(a)<=s(a);case H.GreaterThan:return a=>i(a)>s(a);case H.GreaterThanOrEqualTo:return a=>i(a)>=s(a);default:throw new Error(`Unsupported comparison operator ${t}`)}}function mL(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let a=0;a<i;++a)s[a]=Ji(n.args[a]);switch(t){case H.Any:return a=>{for(let l=0;l<i;++l)if(s[l](a))return!0;return!1};case H.All:return a=>{for(let l=0;l<i;++l)if(!s[l](a))return!1;return!0};case H.Between:return a=>{const l=s[0](a),u=s[1](a),f=s[2](a);return l>=u&&l<=f};case H.In:return a=>{const l=s[0](a);for(let u=1;u<i;++u)if(l===s[u](a))return!0;return!1};case H.Not:return a=>!s[0](a);default:throw new Error(`Unsupported logical operator ${t}`)}}function pL(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let a=0;a<i;++a)s[a]=Ji(n.args[a]);switch(t){case H.Multiply:return a=>{let l=1;for(let u=0;u<i;++u)l*=s[u](a);return l};case H.Divide:return a=>s[0](a)/s[1](a);case H.Add:return a=>{let l=0;for(let u=0;u<i;++u)l+=s[u](a);return l};case H.Subtract:return a=>s[0](a)-s[1](a);case H.Clamp:return a=>{const l=s[0](a),u=s[1](a);if(l<u)return u;const f=s[2](a);return l>f?f:l};case H.Mod:return a=>s[0](a)%s[1](a);case H.Pow:return a=>Math.pow(s[0](a),s[1](a));case H.Abs:return a=>Math.abs(s[0](a));case H.Floor:return a=>Math.floor(s[0](a));case H.Ceil:return a=>Math.ceil(s[0](a));case H.Round:return a=>Math.round(s[0](a));case H.Sin:return a=>Math.sin(s[0](a));case H.Cos:return a=>Math.cos(s[0](a));case H.Atan:return i===2?a=>Math.atan2(s[0](a),s[1](a)):a=>Math.atan(s[0](a));case H.Sqrt:return a=>Math.sqrt(s[0](a));default:throw new Error(`Unsupported numeric operator ${t}`)}}function yL(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Ji(n.args[s]);return s=>{for(let a=0;a<t-1;a+=2)if(i[a](s))return i[a+1](s);return i[t-1](s)}}function _L(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Ji(n.args[s]);return s=>{const a=i[0](s);for(let l=1;l<t-1;l+=2)if(a===i[l](s))return i[l+1](s);return i[t-1](s)}}function EL(n,e){const t=n.args.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=Ji(n.args[s]);return s=>{const a=i[0](s),l=i[1](s);let u,f;for(let d=2;d<t;d+=2){const g=i[d](s);let p=i[d+1](s);const _=Array.isArray(p);if(_&&(p=Z3(p)),g>=l)return d===2?p:_?SL(a,l,u,f,g,p):Wc(a,l,u,f,g,p);u=g,f=p}return f}}function xL(n,e){const t=n.operator,i=n.args.length,s=new Array(i);for(let a=0;a<i;++a)s[a]=Ji(n.args[a]);switch(t){case H.ToString:return a=>{const l=s[0](a);return n.args[0].type===Si?d_(l):l.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Wc(n,e,t,i,s,a){const l=s-t;if(l===0)return i;const u=e-t,f=n===1?u/l:(Math.pow(n,u)-1)/(Math.pow(n,l)-1);return i+f*(a-i)}function SL(n,e,t,i,s,a){if(s-t===0)return i;const u=ib(i),f=ib(a);let d=f[2]-u[2];d>180?d-=360:d<-180&&(d+=360);const g=[Wc(n,e,t,u[0],s,f[0]),Wc(n,e,t,u[1],s,f[1]),u[2]+Wc(n,e,t,0,s,d),Wc(n,e,t,i[3],s,a[3])];return W3(g)}const Ge={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function TL(n,e,t){const i=n;let s=!0,a=!1,l=!1;const u=[Wf(i,Me.LOAD,function(){l=!0,a||e()})];return i.src&&IR?(a=!0,i.decode().then(function(){s&&e()}).catch(function(f){s&&(l?e():t())})):u.push(Wf(i,Me.ERROR,t)),function(){s=!1,u.forEach(St)}}function bL(n,e){return new Promise((t,i)=>{function s(){l(),t(n)}function a(){l(),i(new Error("Image load error"))}function l(){n.removeEventListener("load",s),n.removeEventListener("error",a)}n.addEventListener("load",s),n.addEventListener("error",a)})}function vL(n,e){return e&&(n.src=e),n.src&&IR?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(s=>n.complete&&n.width?t(n):i(s))):bL(n)}class wL{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];(e++&3)===0&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const s=B0(e,t,i);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,i){const s=B0(e,t,i);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,i,s,a){const l=B0(e,t,i),u=l in this.cache_;this.cache_[l]=s,a&&(s.getImageState()===Ge.IDLE&&s.load(),s.getImageState()===Ge.LOADING?s.ready().then(()=>{this.patternCache_[l]=ad().createPattern(s.getImage(1),"repeat")}):this.patternCache_[l]=ad().createPattern(s.getImage(1),"repeat")),u||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function B0(n,e,t){const i=t?$r(t):"null";return e+":"+n+":"+i}const ki=new wL;let Gc=null;class _A extends Pu{constructor(e,t,i,s,a){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=a,this.imageState_=s===void 0?Ge.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ge.LOADED){Gc||(Gc=Nt(1,1,void 0,{willReadFrequently:!0})),Gc.drawImage(this.image_,0,0);try{Gc.getImageData(0,0,1,1),this.tainted_=!1}catch{Gc=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Me.CHANGE)}handleImageError_(){this.imageState_=Ge.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ge.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Nt(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ge.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ge.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&vL(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ge.LOADED)return;const t=this.image_,i=Nt(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=$3(this.color_),i.fillRect(0,0,s.width/e,s.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ge.LOADED||this.imageState_===Ge.ERROR)e();else{const t=()=>{(this.imageState_===Ge.LOADED||this.imageState_===Ge.ERROR)&&(this.removeEventListener(Me.CHANGE,t),e())};this.addEventListener(Me.CHANGE,t)}})),this.ready_}}function p_(n,e,t,i,s,a){let l=e===void 0?void 0:ki.get(e,t,s);return l||(l=new _A(n,n&&"src"in n?n.src||void 0:e,t,i,s),ki.set(e,t,s,l,a)),a&&l&&!ki.getPattern(e,t,s)&&ki.set(e,t,s,l,a),l}function Es(n){return n?Array.isArray(n)?d_(n):typeof n=="object"&&"src"in n?RL(n):n:null}function RL(n){if(!n.offset||!n.size)return ki.getPattern(n.src,"anonymous",n.color);const e=n.src+":"+n.offset,t=ki.getPattern(e,void 0,n.color);if(t)return t;const i=ki.get(n.src,"anonymous",null);if(i.getImageState()!==Ge.LOADED)return null;const s=Nt(n.size[0],n.size[1]);return s.drawImage(i.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),p_(s.canvas,e,void 0,Ge.LOADED,n.color,!0),ki.getPattern(e,void 0,n.color)}const EA="10px sans-serif",ai="#000",_l="round",js=[],Ys=0,El="round",Eu=10,xu="#000",Su="center",od="middle",Oa=[0,0,0,0],Tu=1,Zo=new Ss;let Hc=null,lb;const cy={},AL=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function CL(n,e,t){return`${n} ${e} 16px "${t}"`}const ML=function(){let e,t;async function i(a){await t.ready;const l=await t.load(a);if(l.length===0)return!1;const u=oy(a),f=u.families[0].toLowerCase(),d=u.weight;return l.some(g=>{const p=g.family.replace(/^['"]|['"]$/g,"").toLowerCase(),_=ay[g.weight]||g.weight;return p===f&&g.style===u.style&&_==d})}async function s(){await t.ready;let a=!0;const l=Zo.getProperties(),u=Object.keys(l).filter(f=>l[f]<100);for(let f=u.length-1;f>=0;--f){const d=u[f];let g=l[d];g<100&&(await i(d)?(Cl(cy),Zo.set(d,100)):(g+=10,Zo.set(d,g,!0),g<100&&(a=!1)))}e=void 0,a||(e=setTimeout(s,100))}return async function(a){t||(t=Rd?self.fonts:document.fonts);const l=oy(a);if(!l)return;const u=l.families;let f=!1;for(const d of u){if(AL.has(d))continue;const g=CL(l.style,l.weight,d);Zo.get(g)===void 0&&(Zo.set(g,0,!0),f=!0)}f&&(clearTimeout(e),e=setTimeout(s,100))}}(),DL=function(){let n;return function(e){let t=cy[e];if(t==null){if(Rd){const i=oy(e),s=xA(e,"g");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);cy[e]=t}return t}}();function xA(n,e){return Hc||(Hc=Nt(1,1)),n!=lb&&(Hc.font=n,lb=Hc.font),Hc.measureText(e)}function SA(n,e){return xA(n,e).width}function cb(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((s,a)=>Math.max(s,SA(n,a)),0);return t[e]=i,i}function IL(n,e){const t=[],i=[],s=[];let a=0,l=0,u=0,f=0;for(let d=0,g=e.length;d<=g;d+=2){const p=e[d];if(p===`
`||d===g){a=Math.max(a,l),s.push(l),l=0,u+=f,f=0;continue}const _=e[d+1]||n.font,E=SA(_,p);t.push(E),l+=E;const x=DL(_);i.push(x),f=Math.max(f,x)}return{width:a,height:u,widths:t,heights:i,lineWidths:s}}function OL(n,e,t,i,s,a,l,u,f,d,g){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=p=>p.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(f,d),n.scale(g[0],g[1]),LL(i,n)):g[0]<0||g[1]<0?(n.translate(f,d),n.scale(g[0],g[1]),n.drawImage(i,s,a,l,u,0,0,l,u)):n.drawImage(i,s,a,l,u,f,d,l*g[0],u*g[1]),n.restore()}function LL(n,e){const t=n.contextInstructions;for(let i=0,s=t.length;i<s;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class kd{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Gt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new kd({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Je()}getImage(e){return Je()}getHitDetectionImage(){return Je()}getPixelRatio(e){return 1}getImageState(){return Je()}getImageSize(){return Je()}getOrigin(){return Je()}getSize(){return Je()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Gt(e)}listenImageChange(e){Je()}load(){Je()}unlistenImageChange(e){Je()}ready(){return Promise.resolve()}}class zd extends kd{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ge.LOADING:Ge.LOADED,this.imageState_===Ge.LOADING&&this.ready().then(()=>this.imageState_=Ge.LOADED),this.render()}clone(){const e=this.getScale(),t=new zd({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const t=this.fill_?.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=ki.get(i,null,null)?.getImage(1);if(!s){const a=this.renderOptions_,l=Math.ceil(a.size*e),u=Nt(l,l);this.draw_(a,u,e),s=u.canvas,ki.set(i,null,null,new _A(s,void 0,null,Ge.LOADED,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius,a=this.radius2_===void 0?s:this.radius2_;if(s<a){const B=s;s=a,a=B}const l=this.radius2_===void 0?this.points_:this.points_*2,u=2*Math.PI/l,f=a*Math.sin(u),d=Math.sqrt(a*a-f*f),g=s-d,p=Math.sqrt(f*f+g*g),_=p/f;if(e==="miter"&&_<=i)return _*t;const E=t/2/_,x=t/2*(g/p),S=Math.sqrt((s+E)*(s+E)+x*x)-s;if(this.radius2_===void 0||e==="bevel")return S*2;const R=s*Math.sin(u),v=Math.sqrt(s*s-R*R),D=a-v,C=Math.sqrt(R*R+D*D)/R;if(C<=i){const B=C*t/2-a-s;return 2*Math.max(S,B)}return S*2}createRenderOptions(){let e=_l,t=El,i=0,s=null,a=0,l,u=0;this.stroke_&&(l=Es(this.stroke_.getColor()??xu),u=this.stroke_.getWidth()??Tu,s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??El,e=this.stroke_.getLineCap()??_l,i=this.stroke_.getMiterLimit()??Eu);const f=this.calculateLineJoinSize_(t,u,i),d=Math.max(this.radius,this.radius2_||0),g=Math.ceil(2*d+f);return{strokeStyle:l,strokeWidth:u,size:g,lineCap:e,lineDash:s,lineDashOffset:a,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=ai),t.fillStyle=Es(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),s=0;typeof i=="string"&&(i=$r(i)),i===null?s=1:Array.isArray(i)&&(s=i.length===4?i[3]:1),s===0&&(t=Nt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const a=this.angle_-Math.PI/2,l=2*Math.PI/t;for(let u=0;u<t;u++){const f=a+u*l,d=u%2===0?i:s;e.lineTo(d*Math.cos(f),d*Math.sin(f))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=ai,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Gd extends zd{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Gd({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Ol{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Ol({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=p_(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ge.IDLE&&t.load(),t.getImageState()===Ge.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?De(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:$r(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ub(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class Hd extends kd{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,a=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:a,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const l=e.img!==void 0?e.img:null;let u=e.src;ot(!(u!==void 0&&l),"`image` and `src` cannot be provided at the same time"),(u===void 0||u.length===0)&&l&&(u=l.src||De(l)),ot(u!==void 0&&u.length>0,"A defined and non-empty `src` or `image` must be provided"),ot(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let f;if(e.src!==void 0?f=Ge.IDLE:l!==void 0&&("complete"in l?l.complete?f=l.src?Ge.LOADED:Ge.IDLE:f=Ge.LOADING:f=Ge.LOADED),this.color_=e.color!==void 0?$r(e.color):null,this.iconImage_=p_(l,u,this.crossOrigin_,f,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let d,g;if(e.size)[d,g]=e.size;else{const p=this.getImage(1);if(p.width&&p.height)d=p.width,g=p.height;else if(p instanceof HTMLImageElement){this.initialOptions_=e;const _=()=>{if(this.unlistenImageChange(_),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(ub(E[0],E[1],e.width,e.height))};this.listenImageChange(_);return}}d!==void 0&&this.setScale(ub(d,g,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Hd({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ge.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ge.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Me.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Me.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Xu{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Xu({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Hr{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=hb,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Hr({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=hb,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function NL(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(ot(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let P0=null;function TA(n,e){if(!P0){const t=new Ol({color:"rgba(255,255,255,0.4)"}),i=new Xu({color:"#3399CC",width:1.25});P0=[new Hr({image:new Gd({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return P0}function hb(n){return n.getGeometry()}const BL="#333";class Xd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Gt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Ol({color:BL}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Xd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Gt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function PL(n){return!0}function FL(n){const e=m_(),t=UL(n,e),i=yA();return function(s,a){if(i.properties=s.getPropertiesInternal(),i.resolution=a,e.featureId){const l=s.getId();l!==void 0?i.featureId=l:i.featureId=null}return e.geometryType&&(i.geometryType=pA(s.getGeometry())),t(i)}}function fb(n){const e=m_(),t=n.length,i=new Array(t);for(let l=0;l<t;++l)i[l]=uy(n[l],e);const s=yA(),a=new Array(t);return function(l,u){if(s.properties=l.getPropertiesInternal(),s.resolution=u,e.featureId){const d=l.getId();d!==void 0?s.featureId=d:s.featureId=null}let f=0;for(let d=0;d<t;++d){const g=i[d](s);g&&(a[f]=g,f+=1)}return a.length=f,a}}function UL(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s){const a=n[s],l="filter"in a?Ks(a.filter,Un,e):PL;let u;if(Array.isArray(a.style)){const f=a.style.length;u=new Array(f);for(let d=0;d<f;++d)u[d]=uy(a.style[d],e)}else u=[uy(a.style,e)];i[s]={filter:l,styles:u}}return function(s){const a=[];let l=!1;for(let u=0;u<t;++u){const f=i[u].filter;if(f(s)&&!(n[u].else&&l)){l=!0;for(const d of i[u].styles){const g=d(s);g&&a.push(g)}}}return a}}function uy(n,e){const t=bu(n,"",e),i=vu(n,"",e),s=kL(n,e),a=zL(n,e),l=li(n,"z-index",e);if(!t&&!i&&!s&&!a&&!ml(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const u=new Hr;return function(f){let d=!0;if(t){const g=t(f);g&&(d=!1),u.setFill(g)}if(i){const g=i(f);g&&(d=!1),u.setStroke(g)}if(s){const g=s(f);g&&(d=!1),u.setText(g)}if(a){const g=a(f);g&&(d=!1),u.setImage(g)}return l&&u.setZIndex(l(f)),d?null:u}}function bu(n,e,t){let i;if(e+"fill-pattern-src"in n)i=jL(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return a=>null;i=y_(n,e+"fill-color",t)}if(!i)return null;const s=new Ol;return function(a){const l=i(a);return l===h_?null:(s.setColor(l),s)}}function vu(n,e,t){const i=li(n,e+"stroke-width",t),s=y_(n,e+"stroke-color",t);if(!i&&!s)return null;const a=Hs(n,e+"stroke-line-cap",t),l=Hs(n,e+"stroke-line-join",t),u=bA(n,e+"stroke-line-dash",t),f=li(n,e+"stroke-line-dash-offset",t),d=li(n,e+"stroke-miter-limit",t),g=new Xu;return function(p){if(s){const _=s(p);if(_===h_)return null;g.setColor(_)}if(i&&g.setWidth(i(p)),a){const _=a(p);if(_!=="butt"&&_!=="round"&&_!=="square")throw new Error("Expected butt, round, or square line cap");g.setLineCap(_)}if(l){const _=l(p);if(_!=="bevel"&&_!=="round"&&_!=="miter")throw new Error("Expected bevel, round, or miter line join");g.setLineJoin(_)}return u&&g.setLineDash(u(p)),f&&g.setLineDashOffset(f(p)),d&&g.setMiterLimit(d(p)),g}}function kL(n,e){const t="text-",i=Hs(n,t+"value",e);if(!i)return null;const s=bu(n,t,e),a=bu(n,t+"background-",e),l=vu(n,t,e),u=vu(n,t+"background-",e),f=Hs(n,t+"font",e),d=li(n,t+"max-angle",e),g=li(n,t+"offset-x",e),p=li(n,t+"offset-y",e),_=ll(n,t+"overflow",e),E=Hs(n,t+"placement",e),x=li(n,t+"repeat",e),b=jd(n,t+"scale",e),S=ll(n,t+"rotate-with-view",e),R=li(n,t+"rotation",e),v=Hs(n,t+"align",e),D=Hs(n,t+"justify",e),A=Hs(n,t+"baseline",e),C=ll(n,t+"keep-upright",e),B=bA(n,t+"padding",e),z=Yd(n,t+"declutter-mode"),U=new Xd({declutterMode:z});return function(Y){if(U.setText(i(Y)),s&&U.setFill(s(Y)),a&&U.setBackgroundFill(a(Y)),l&&U.setStroke(l(Y)),u&&U.setBackgroundStroke(u(Y)),f&&U.setFont(f(Y)),d&&U.setMaxAngle(d(Y)),g&&U.setOffsetX(g(Y)),p&&U.setOffsetY(p(Y)),_&&U.setOverflow(_(Y)),E){const $=E(Y);if($!=="point"&&$!=="line")throw new Error("Expected point or line for text-placement");U.setPlacement($)}if(x&&U.setRepeat(x(Y)),b&&U.setScale(b(Y)),S&&U.setRotateWithView(S(Y)),R&&U.setRotation(R(Y)),v){const $=v(Y);if($!=="left"&&$!=="center"&&$!=="right"&&$!=="end"&&$!=="start")throw new Error("Expected left, right, center, start, or end for text-align");U.setTextAlign($)}if(D){const $=D(Y);if($!=="left"&&$!=="right"&&$!=="center")throw new Error("Expected left, right, or center for text-justify");U.setJustify($)}if(A){const $=A(Y);if($!=="bottom"&&$!=="top"&&$!=="middle"&&$!=="alphabetic"&&$!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");U.setTextBaseline($)}return B&&U.setPadding(B(Y)),C&&U.setKeepUpright(C(Y)),U}}function zL(n,e){return"icon-src"in n?GL(n,e):"shape-points"in n?HL(n,e):"circle-radius"in n?XL(n,e):null}function GL(n,e){const t="icon-",i=t+"src",s=vA(n[i],i),a=ld(n,t+"anchor",e),l=jd(n,t+"scale",e),u=li(n,t+"opacity",e),f=ld(n,t+"displacement",e),d=li(n,t+"rotation",e),g=ll(n,t+"rotate-with-view",e),p=gb(n,t+"anchor-origin"),_=mb(n,t+"anchor-x-units"),E=mb(n,t+"anchor-y-units"),x=$L(n,t+"color"),b=VL(n,t+"cross-origin"),S=qL(n,t+"offset"),R=gb(n,t+"offset-origin"),v=cd(n,t+"width"),D=cd(n,t+"height"),A=YL(n,t+"size"),C=Yd(n,t+"declutter-mode"),B=new Hd({src:s,anchorOrigin:p,anchorXUnits:_,anchorYUnits:E,color:x,crossOrigin:b,offset:S,offsetOrigin:R,height:D,width:v,size:A,declutterMode:C});return function(z){return u&&B.setOpacity(u(z)),f&&B.setDisplacement(f(z)),d&&B.setRotation(d(z)),g&&B.setRotateWithView(g(z)),l&&B.setScale(l(z)),a&&B.setAnchor(a(z)),B}}function HL(n,e){const t="shape-",i=t+"points",s=t+"radius",a=hy(n[i],i),l=hy(n[s],s),u=bu(n,t,e),f=vu(n,t,e),d=jd(n,t+"scale",e),g=ld(n,t+"displacement",e),p=li(n,t+"rotation",e),_=ll(n,t+"rotate-with-view",e),E=cd(n,t+"radius2"),x=cd(n,t+"angle"),b=Yd(n,t+"declutter-mode"),S=new zd({points:a,radius:l,radius2:E,angle:x,declutterMode:b});return function(R){return u&&S.setFill(u(R)),f&&S.setStroke(f(R)),g&&S.setDisplacement(g(R)),p&&S.setRotation(p(R)),_&&S.setRotateWithView(_(R)),d&&S.setScale(d(R)),S}}function XL(n,e){const t="circle-",i=bu(n,t,e),s=vu(n,t,e),a=li(n,t+"radius",e),l=jd(n,t+"scale",e),u=ld(n,t+"displacement",e),f=li(n,t+"rotation",e),d=ll(n,t+"rotate-with-view",e),g=Yd(n,t+"declutter-mode"),p=new Gd({radius:5,declutterMode:g});return function(_){return a&&p.setRadius(a(_)),i&&p.setFill(i(_)),s&&p.setStroke(s(_)),u&&p.setDisplacement(u(_)),f&&p.setRotation(f(_)),d&&p.setRotateWithView(d(_)),l&&p.setScale(l(_)),p}}function li(n,e,t){if(!(e in n))return;const i=Ks(n[e],Ne,t);return function(s){return hy(i(s),e)}}function Hs(n,e,t){if(!(e in n))return null;const i=Ks(n[e],qn,t);return function(s){return vA(i(s),e)}}function jL(n,e,t){const i=Hs(n,e+"pattern-src",t),s=db(n,e+"pattern-offset",t),a=db(n,e+"pattern-size",t),l=y_(n,e+"color",t);return function(u){return{src:i(u),offset:s&&s(u),size:a&&a(u),color:l&&l(u)}}}function ll(n,e,t){if(!(e in n))return null;const i=Ks(n[e],Un,t);return function(s){const a=i(s);if(typeof a!="boolean")throw new Error(`Expected a boolean for ${e}`);return a}}function y_(n,e,t){if(!(e in n))return null;const i=Ks(n[e],Si,t);return function(s){return wA(i(s),e)}}function bA(n,e,t){if(!(e in n))return null;const i=Ks(n[e],Kr,t);return function(s){return ju(i(s),e)}}function ld(n,e,t){if(!(e in n))return null;const i=Ks(n[e],Kr,t);return function(s){const a=ju(i(s),e);if(a.length!==2)throw new Error(`Expected two numbers for ${e}`);return a}}function db(n,e,t){if(!(e in n))return null;const i=Ks(n[e],Kr,t);return function(s){return RA(i(s),e)}}function jd(n,e,t){if(!(e in n))return null;const i=Ks(n[e],Kr|Ne,t);return function(s){return KL(i(s),e)}}function cd(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function YL(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return Gt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function VL(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function gb(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function mb(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function qL(n,e){const t=n[e];if(t!==void 0)return ju(t,e)}function Yd(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function $L(n,e){const t=n[e];if(t!==void 0)return wA(t,e)}function ju(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function vA(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function hy(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function wA(n,e){if(typeof n=="string")return n;const t=ju(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function RA(n,e){const t=ju(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function KL(n,e){return typeof n=="number"?n:RA(n,e)}const pb={RENDER_ORDER:"renderOrder"};class AA extends Ud{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(pb.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new dA(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(pb.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?TA:e;const t=ZL(e);this.styleFunction_=e===null?void 0:NL(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function ZL(n){if(n===void 0)return TA;if(!n)return null;if(typeof n=="function"||n instanceof Hr)return n;if(!Array.isArray(n))return fb([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof Hr){const s=new Array(e);for(let a=0;a<e;++a){const l=n[a];if(!(l instanceof Hr))throw new Error("Expected a list of style instances");s[a]=l}return s}if("style"in t){const s=new Array(e);for(let a=0;a<e;++a){const l=n[a];if(!("style"in l))throw new Error("Expected a list of rules with a style property");s[a]=l}return FL(s)}return fb(n)}class nu extends $s{constructor(e,t,i,s){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=s}}class WL extends Bu{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Je()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;Qi(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Qy(s,i)}forEachFeatureAtCoordinate(e,t,i,s,a,l,u,f){let d;const g=t.viewState;function p(A,C,B,z){return a.call(l,C,A?B:null,z)}const _=g.projection,E=GR(e.slice(),_),x=[[0,0]];if(_.canWrapX()&&s){const A=_.getExtent(),C=tt(A);x.push([-C,0],[C,0])}const b=t.layerStatesArray,S=b.length,R=[],v=[];for(let A=0;A<x.length;A++)for(let C=S-1;C>=0;--C){const B=b[C],z=B.layer;if(z.hasRenderer()&&u_(B,g)&&u.call(f,z)){const U=z.getRenderer(),Y=z.getSource();if(U&&Y){const $=Y.getWrapX()?E:e,le=p.bind(null,B.managed);v[0]=$[0]+x[A][0],v[1]=$[1]+x[A][1],d=U.forEachFeatureAtCoordinate(v,t,i,le,R)}if(d)return d}}if(R.length===0)return;const D=1/R.length;return R.forEach((A,C)=>A.distanceSq+=C*D),R.sort((A,C)=>A.distanceSq-C.distanceSq),R.some(A=>d=A.callback(A.feature,A.layer,A.geometry)),d}hasFeatureAtCoordinate(e,t,i,s,a,l){return this.forEachFeatureAtCoordinate(e,t,i,s,uu,this,a,l)!==void 0}getMap(){return this.map_}renderFrame(e){Je()}scheduleExpireIconCache(e){ki.canExpireCache()&&e.postRenderFunctions.push(QL)}}function QL(n,e){ki.expire()}class JL extends WL{constructor(e){super(e),this.fontChangeListenerKey_=et(Zo,gl.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=zu+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const s=new nu(e,void 0,t);i.dispatchEvent(s)}}disposeInternal(){St(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(dn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((u,f)=>u.zIndex-f.zIndex);t.some(u=>u.layer instanceof AA&&u.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const a=[];let l=null;for(let u=0,f=t.length;u<f;++u){const d=t[u];e.layerIndex=u;const g=d.layer,p=g.getSourceState();if(!u_(d,s)||p!="ready"&&p!="undefined"){g.unrender();continue}const _=g.render(e,l);_&&(_!==l&&(this.children_.push(_),l=_),a.push(d))}this.declutter(e,a),h3(this.element_,this.children_),this.dispatchRenderEvent(dn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const s=t[i],a=s.layer;a.getDeclutter()&&a.renderDeclutter(e,s)}t.forEach(i=>i.layer.renderDeferred(e))}}}function CA(n){if(n instanceof Ud){n.setMapInternal(null);return}n instanceof Il&&n.getLayers().forEach(CA)}function MA(n,e){if(n instanceof Ud){n.setMapInternal(e);return}if(n instanceof Il){const t=n.getLayers().getArray();for(let i=0,s=t.length;i<s;++i)MA(t[i],e)}}let eN=class extends Ss{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=tN(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:II,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=zn(),this.pixelToCoordinateTransform_=zn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||aA(),this.interactions=t.interactions||P3({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new NI(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Pn.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Pn.VIEW,this.handleViewChanged_),this.addChangeListener(Pn.SIZE,this.handleSizeChanged_),this.addChangeListener(Pn.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof ms)&&e.view.then(function(s){i.setView(new ms(s))}),this.controls.addEventListener(ri.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(ri.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(ri.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(ri.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(ri.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(ri.REMOVE,s=>{const a=s.element.getId();a!==void 0&&delete this.overlayIdIndex_[a.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){MA(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const a=i.hitTolerance!==void 0?i.hitTolerance:0,l=i.layerFilter!==void 0?i.layerFilter:uu,u=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,a,u,t,null,l,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(s){s instanceof Il?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:uu,a=t.hitTolerance!==void 0?t.hitTolerance:0,l=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,a,l,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),a=i.width/s[0],l=i.height/s[1],u="changedTouches"in e?e.changedTouches[0]:e;return[(u.clientX-i.left)/a,(u.clientY-i.top)/l]}getTarget(){return this.get(Pn.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return sd(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?$t(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Pn.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof ys){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const s=e[t];if(!s.visible)continue;const a=s.layer.getRenderer();if(a&&!a.ready)return!0;const l=s.layer.getSource();if(l&&l.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Gs(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?$t(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Pn.SIZE)}getView(){return this.get(Pn.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,s){return BI(this.frameState_,e,t,i,s)}handleBrowserEvent(e,t){t=t||e.type;const i=new Lr(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===Qp.POINTERDOWN||i===Me.WHEEL||i===Me.KEYDOWN){const s=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():s,l=t.target,u=a instanceof ShadowRoot?a.host===l?a.host.ownerDocument:a:a===s?s.documentElement:a;if(this.overlayContainerStopEvent_.contains(l)||!u.contains(l))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let a=s.length-1;a>=0;a--){const l=s[a];if(l.getMap()!==this||!l.getActive()||!this.getTargetElement())continue;if(!l.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,a=s;if(e){const l=e.viewHints;if(l[Fn.ANIMATING]||l[Fn.INTERACTING]){const u=Date.now()-e.time>8;s=u?0:8,a=u?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,a))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(dn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(dn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new $o(Nr.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new $o(Nr.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let s=0,a=i.length;s<a;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)St(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Me.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Me.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new JL(this)),this.mapBrowserEventHandler_=new OI(this,this.moveTolerance_);for(const a in Lt)this.mapBrowserEventHandler_.addEventListener(Lt[a],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Me.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Me.WHEEL,this.boundHandleBrowserEvent_,OR?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const a=t.getRootNode();i=a instanceof ShadowRoot?a.host:t}this.targetChangeHandlerKeys_=[et(i,Me.KEYDOWN,this.handleBrowserEvent,this),et(i,Me.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(St(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(St(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=et(e,gl.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=et(e,Me.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(St),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Fr("addlayer",e)),this.layerGroupPropertyListenerKeys_=[et(e,gl.PROPERTYCHANGE,this.render,this),et(e,Me.CHANGE,this.render,this),et(e,"addlayer",this.handleLayerAdd_,this),et(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let t=0,i=e.length;t<i;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){CA(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),s=this.frameState_;let a=null;if(t!==void 0&&sb(t)&&i&&i.isDef()){const l=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=i.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:ny(u.center,u.resolution,u.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{},mapId:De(this),renderTargets:{}},u.nextCenter&&u.nextResolution){const f=isNaN(u.nextRotation)?u.rotation:u.nextRotation;a.nextExtent=ny(u.nextCenter,u.nextResolution,f,t)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!Ml(this.previousExtent_)&&!fu(a.extent,this.previousExtent_))&&(this.dispatchEvent(new $o(Nr.MOVESTART,this,s)),this.previousExtent_=Uu(this.previousExtent_)),this.previousExtent_&&!a.viewHints[Fn.ANIMATING]&&!a.viewHints[Fn.INTERACTING]&&!fu(a.extent,this.previousExtent_)&&(this.dispatchEvent(new $o(Nr.MOVEEND,this,a)),LR(a.extent,this.previousExtent_))),this.dispatchEvent(new $o(Nr.POSTRENDER,this,a)),this.renderComplete_=(this.hasListener(Nr.LOADSTART)||this.hasListener(Nr.LOADEND)||this.hasListener(dn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Fr("removelayer",t)),this.set(Pn.LAYERGROUP,e)}setSize(e){this.set(Pn.SIZE,e)}setTarget(e){this.set(Pn.TARGET,e)}setView(e){if(!e||e instanceof ms){this.set(Pn.VIEW,e);return}this.set(Pn.VIEW,new ms);const t=this;e.then(function(i){t.setView(new ms(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),a=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),l=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(a)&&!isNaN(l)&&(t=[Math.max(0,a),Math.max(0,l)],!sb(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&XR("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!ea(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function tN(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new Il({layers:n.layers});t[Pn.LAYERGROUP]=i,t[Pn.TARGET]=n.target,t[Pn.VIEW]=n.view instanceof ms?n.view:new ms;let s;n.controls!==void 0&&(Array.isArray(n.controls)?s=new ys(n.controls.slice()):(ot(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=n.controls));let a;n.interactions!==void 0&&(Array.isArray(n.interactions)?a=new ys(n.interactions.slice()):(ot(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),a=n.interactions));let l;return n.overlays!==void 0?Array.isArray(n.overlays)?l=new ys(n.overlays.slice()):(ot(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),l=n.overlays):l=new ys,{controls:s,interactions:a,keyboardEventTarget:e,overlays:l,values:t}}function Ll(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function DA(n,e){return n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[12]=e[4],n[13]=e[5],n}function fy(n,e,t,i,s,a,l){l=l??Ll();const u=1/(n-e),f=1/(t-i),d=1/(s-a);return l[0]=-2*u,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*f,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*d,l[11]=0,l[12]=(n+e)*u,l[13]=(i+t)*f,l[14]=(a+s)*d,l[15]=1,l}function yb(n,e,t,i,s){return s=s??Ll(),s[0]=n[0]*e,s[1]=n[1]*e,s[2]=n[2]*e,s[3]=n[3]*e,s[4]=n[4]*t,s[5]=n[5]*t,s[6]=n[6]*t,s[7]=n[7]*t,s[8]=n[8]*i,s[9]=n[9]*i,s[10]=n[10]*i,s[11]=n[11]*i,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s}function nN(n,e,t,i,s){s=s??Ll();let a,l,u,f,d,g,p,_,E,x,b,S;return n===s?(s[12]=n[0]*e+n[4]*t+n[8]*i+n[12],s[13]=n[1]*e+n[5]*t+n[9]*i+n[13],s[14]=n[2]*e+n[6]*t+n[10]*i+n[14],s[15]=n[3]*e+n[7]*t+n[11]*i+n[15]):(a=n[0],l=n[1],u=n[2],f=n[3],d=n[4],g=n[5],p=n[6],_=n[7],E=n[8],x=n[9],b=n[10],S=n[11],s[0]=a,s[1]=l,s[2]=u,s[3]=f,s[4]=d,s[5]=g,s[6]=p,s[7]=_,s[8]=E,s[9]=x,s[10]=b,s[11]=S,s[12]=a*e+d*t+E*i+n[12],s[13]=l*e+g*t+x*i+n[13],s[14]=u*e+p*t+b*i+n[14],s[15]=f*e+_*t+S*i+n[15]),s}function iN(n,e,t,i){return i=i??Ll(),i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=n,i[13]=e,i[14]=t,i[15]=1,i}const __=34962,E_=34963,x_=35044,sN=5121,rN=5123,aN=5125,IA=5126,_b=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function oN(n,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!MI},e);const t=_b.length;for(let i=0;i<t;++i)try{const s=n.getContext(_b[i],e);if(s)return s}catch{}return null}const lN={STATIC_DRAW:x_};class OA{constructor(e,t){this.array_=null,this.type_=e,ot(e===__||e===E_,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:lN.STATIC_DRAW}ofSize(e){return this.array_=new(yf(this.type_))(e),this}fromArray(e){return this.array_=yf(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(yf(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const t=yf(this.type_);if(!(e instanceof t))throw new Error(`Expected ${t}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function yf(n){switch(n){case __:return Float32Array;case E_:return Uint32Array;default:return Float32Array}}const _f={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},cN=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,uN=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class Eb{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertexShader||cN),t.compileShader(i);const s=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,e.fragmentShader||uN),t.compileShader(s),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,i),t.attachShader(this.renderTargetProgram_,s),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const a=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(l=>{this.uniforms_.push({value:e.uniforms[l],location:t.getUniformLocation(this.renderTargetProgram_,l)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const t=this.getGL(),i=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const s=0,a=t.RGBA,l=0,u=t.RGBA,f=t.UNSIGNED_BYTE,d=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,s,a,i[0],i[1],l,u,f,d),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i[0],i[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,i,s){const a=this.getGL(),l=e.size;if(a.bindFramebuffer(a.FRAMEBUFFER,t?t.getFrameBuffer():null),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,this.renderTargetTexture_),!t){const f=De(a.canvas);if(!e.renderTargets[f]){const d=a.getContextAttributes();d&&d.preserveDrawingBuffer&&(a.clearColor(0,0,0,0),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)),e.renderTargets[f]=!0}}a.disable(a.DEPTH_TEST),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.bindBuffer(a.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),a.useProgram(this.renderTargetProgram_),a.enableVertexAttribArray(this.renderTargetAttribLocation_),a.vertexAttribPointer(this.renderTargetAttribLocation_,2,a.FLOAT,!1,0,0),a.uniform2f(this.renderTargetUniformLocation_,l[0],l[1]),a.uniform1i(this.renderTargetTextureLocation_,0);const u=e.layerStatesArray[e.layerIndex].opacity;a.uniform1f(this.renderTargetOpacityLocation_,u),this.applyUniforms(e),i&&i(a,e),a.drawArrays(a.TRIANGLES,0,6),s&&s(a,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let i,s=1;this.uniforms_.forEach(function(a){if(i=typeof a.value=="function"?a.value(e):a.value,i instanceof HTMLCanvasElement||i instanceof ImageData)a.texture||(a.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${s}`]),t.bindTexture(t.TEXTURE_2D,a.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,i.width,i.height,0,t.UNSIGNED_BYTE,new Uint8Array(i.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.uniform1i(a.location,s++);else if(Array.isArray(i))switch(i.length){case 2:t.uniform2f(a.location,i[0],i[1]);return;case 3:t.uniform3f(a.location,i[0],i[1],i[2]);return;case 4:t.uniform4f(a.location,i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(a.location,i)})}}const wr={TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Qc={UNSIGNED_BYTE:sN,UNSIGNED_SHORT:rN,UNSIGNED_INT:aN,FLOAT:IA},ud={};function xb(n){return"shared/"+n}let Sb=0;function hN(){const n="unique/"+Sb;return Sb+=1,n}function fN(n){let e=ud[n];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:oN(t)},ud[n]=e}return e.users+=1,e.context}function dN(n){const e=ud[n];if(!e||(e.users-=1,e.users>0))return;const t=e.context,i=t.getExtension("WEBGL_lose_context");i&&i.loseContext();const s=t.canvas;s.width=1,s.height=1,delete ud[n]}class gN extends Bu{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?xb(e.canvasCacheKey):hN(),this.gl_=fN(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(_f.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(_f.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=zn(),this.offsetScaleMatrix_=zn(),this.tmpMat4_=Ll(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(i=>new Eb({webGlContext:this.gl_,scaleRatio:i.scaleRatio,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniforms:i.uniforms})):[new Eb({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===xb(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,i=De(e);let s=this.bufferCache_[i];if(!s){const a=t.createBuffer();s={buffer:e,webGlBuffer:a},this.bufferCache_[i]=s}t.bindBuffer(e.getType(),s.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=De(e);delete this.bufferCache_[t]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(_f.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(_f.RESTORED,this.boundHandleWebGLContextRestored_),dN(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,i){const s=this.gl_,a=this.getCanvas(),l=e.size,u=e.pixelRatio;(a.width!==l[0]*u||a.height!==l[1]*u)&&(a.width=l[0]*u,a.height=l[1]*u,a.style.width=l[0]+"px",a.style.height=l[1]+"px");for(let f=this.postProcessPasses_.length-1;f>=0;f--)this.postProcessPasses_[f].init(e);s.bindTexture(s.TEXTURE_2D,null),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,t?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}bindFrameBuffer(e,t){const i=this.getGL();i.bindFramebuffer(i.FRAMEBUFFER,e),t&&i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0)}bindInitialFrameBuffer(){const e=this.getGL(),t=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);const i=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0)}bindTexture(e,t,i){const s=this.gl_;s.activeTexture(s.TEXTURE0+t),s.bindTexture(s.TEXTURE_2D,e),s.uniform1i(this.getUniformLocation(i),t)}bindAttribute(e,t,i){const s=this.getGL();this.bindBuffer(e);const a=this.getAttributeLocation(t);s.enableVertexAttribArray(a),s.vertexAttribPointer(a,i,s.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,t,i,s){const a=this.gl_,l=t.getSize();a.bindFramebuffer(a.FRAMEBUFFER,t.getFramebuffer()),a.bindRenderbuffer(a.RENDERBUFFER,t.getDepthbuffer()),a.viewport(0,0,l[0],l[1]),a.bindTexture(a.TEXTURE_2D,t.getTexture()),a.clearColor(0,0,0,0),a.depthRange(0,1),a.clearDepth(1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.enable(a.BLEND),a.blendFunc(a.ONE,i?a.ZERO:a.ONE_MINUS_SRC_ALPHA),s?(a.enable(a.DEPTH_TEST),a.depthFunc(a.LEQUAL)):a.disable(a.DEPTH_TEST)}drawElements(e,t){const i=this.gl_;this.getExtension("OES_element_index_uint");const s=i.UNSIGNED_INT,a=4,l=t-e,u=e*a;i.drawElements(i.TRIANGLES,l,s,u)}finalizeDraw(e,t,i){for(let s=0,a=this.postProcessPasses_.length;s<a;s++)s===a-1?this.postProcessPasses_[s].apply(e,null,t,i):this.postProcessPasses_[s].apply(e,this.postProcessPasses_[s+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,i=e.viewState.rotation,s=e.pixelRatio;this.setUniformFloatValue(wr.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(wr.ZOOM,e.viewState.zoom),this.setUniformFloatValue(wr.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(wr.PIXEL_RATIO,s),this.setUniformFloatVec2(wr.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(wr.ROTATION,i)}applyHitDetectionUniform(e){const t=this.getUniformLocation(wr.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(wr.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let i,s=0;this.uniforms_.forEach(a=>{if(i=typeof a.value=="function"?a.value(e):a.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData||i instanceof WebGLTexture){i instanceof WebGLTexture&&!a.texture?(a.prevValue=void 0,a.texture=i):a.texture||(a.prevValue=void 0,a.texture=t.createTexture()),this.bindTexture(a.texture,s,a.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);const l=!(i instanceof HTMLImageElement)||i.complete;!(i instanceof WebGLTexture)&&l&&a.prevValue!==i&&(a.prevValue=i,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)),s++}else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(a.name,DA(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:t.uniform2f(this.getUniformLocation(a.name),i[0],i[1]);return;case 3:t.uniform3f(this.getUniformLocation(a.name),i[0],i[1],i[2]);return;case 4:t.uniform4f(this.getUniformLocation(a.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(this.getUniformLocation(a.name),i)})}useProgram(e,t){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,t&&(this.applyFrameState(t),this.applyUniforms(t))}compileShader(e,t){const i=this.gl_,s=i.createShader(t);return i.shaderSource(s,e),i.compileShader(s),s}getProgram(e,t){const i=this.gl_,s=this.compileShader(e,i.FRAGMENT_SHADER),a=this.compileShader(t,i.VERTEX_SHADER),l=i.createProgram();if(i.attachShader(l,s),i.attachShader(l,a),i.linkProgram(l),!i.getShaderParameter(s,i.COMPILE_STATUS)){const u=`Fragment shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(u)}if(i.deleteShader(s),!i.getShaderParameter(a,i.COMPILE_STATUS)){const u=`Vertex shader compilation failed: ${i.getShaderInfoLog(a)}`;throw new Error(u)}if(i.deleteShader(a),!i.getProgramParameter(l,i.LINK_STATUS)){const u=`GL program linking failed: ${i.getProgramInfoLog(l)}`;throw new Error(u)}return l}getUniformLocation(e){const t=De(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=De(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const i=e.size,s=e.viewState.rotation,a=e.viewState.resolution,l=e.viewState.center;return Qi(t,0,0,2/(a*i[0]),2/(a*i[1]),-s,-l[0],-l[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,t,i,s,a){const l=this.getAttributeLocation(e);l<0||(this.gl_.enableVertexAttribArray(l),this.gl_.vertexAttribPointer(l,t,i,!1,s,a))}enableAttributes(e){const t=mN(e);let i=0;for(let s=0;s<e.length;s++){const a=e[s];this.enableAttributeArray_(a.name,a.size,a.type||IA,t,i),i+=a.size*LA(a.type)}}handleWebGLContextLost(e){Cl(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,i,s){const a=this.gl_;i=i||a.createTexture();const l=s?a.NEAREST:a.LINEAR;a.bindTexture(a.TEXTURE_2D,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,l),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,l),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);const u=0,f=a.RGBA,d=0,g=a.RGBA,p=a.UNSIGNED_BYTE;return t instanceof Uint8Array?a.texImage2D(a.TEXTURE_2D,u,f,e[0],e[1],d,g,p,t):t?a.texImage2D(a.TEXTURE_2D,u,f,g,p,t):a.texImage2D(a.TEXTURE_2D,u,f,e[0],e[1],d,g,p,null),i}}function mN(n){let e=0;for(let t=0;t<n.length;t++){const i=n[t];e+=i.size*LA(i.type)}return e}function LA(n){switch(n){case Qc.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Qc.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Qc.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Qc.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class S_ extends Pu{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Me.CHANGE)}release(){this.setState(ge.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ge.EMPTY){if(this.state!==ge.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Je()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=t-i+1e3/60;return s>=this.transition_?1:HR(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function xl(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function dy(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}const pN=new Error("disposed");let Uo=null;function yN(n){Uo||(Uo=Nt(n.width,n.height,void 0,{willReadFrequently:!0}));const e=Uo.canvas,t=n.width;e.width!==t&&(e.width=t);const i=n.height;return e.height!==i&&(e.height=i),Uo.clearRect(0,0,t,i),Uo.drawImage(n,0,0),Uo.getImageData(0,0,t,i).data}const _N=[256,256];class wu extends S_{constructor(e){const t=ge.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=xl(this.data_);return e?[e.width,e.height]:_N}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ge.IDLE&&this.state!==ge.ERROR)return;this.state=ge.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=ge.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=ge.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(pN),this.controller_=null),super.disposeInternal()}}class Vd extends S_{constructor(e,t,i,s,a,l){super(e,t,l),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=a}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ge.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ge.ERROR,this.unlistenImage_(),this.image_=EN(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ge.LOADED:this.state=ge.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ge.ERROR&&(this.state=ge.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ge.IDLE&&(this.state=ge.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=TL(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function EN(){const n=Nt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}let F0;const cl=[];function Tb(n,e,t,i,s){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,s),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,s)),n.restore()}function U0(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function xN(){if(F0===void 0){const n=Nt(6,6,cl);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",Tb(n,4,5,4,0),Tb(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;F0=U0(e,0)||U0(e,4)||U0(e,8),Pd(n),cl.push(n.canvas)}return F0}function bb(n,e,t,i){const s=Ld(t,e,n);let a=nd(e,i,t);const l=e.getMetersPerUnit();l!==void 0&&(a*=l);const u=n.getMetersPerUnit();u!==void 0&&(a/=u);const f=n.getExtent();if(!f||Vr(f,s)){const d=nd(n,a,s)/a;isFinite(d)&&d>0&&(a/=d)}return a}function NA(n,e,t,i){const s=qr(t);let a=bb(n,e,s,i);return(!isFinite(a)||a<=0)&&kR(t,function(l){return a=bb(n,e,l,i),isFinite(a)&&a>0}),a}function SN(n,e,t,i,s,a,l,u,f,d,g,p,_,E){const x=Nt(Math.round(t*n),Math.round(t*e),cl);if(p||(x.imageSmoothingEnabled=!1),f.length===0)return x.canvas;x.scale(t,t);function b(C){return Math.round(C*t)/t}x.globalCompositeOperation="lighter";const S=bi();f.forEach(function(C,B,z){FR(S,C.extent)});let R;const v=t/i,D=(p?1:1+Math.pow(2,-24))/v;R=Nt(Math.round(tt(S)*v),Math.round(gn(S)*v),cl),p||(R.imageSmoothingEnabled=!1),f.forEach(function(C,B,z){if(C.image.width>0&&C.image.height>0){if(C.clipExtent){R.save();const ie=(C.clipExtent[0]-S[0])*v,ce=-(C.clipExtent[3]-S[3])*v,fe=tt(C.clipExtent)*v,ue=gn(C.clipExtent)*v;R.rect(p?ie:Math.round(ie),p?ce:Math.round(ce),p?fe:Math.round(ie+fe)-Math.round(ie),p?ue:Math.round(ce+ue)-Math.round(ce)),R.clip()}const U=(C.extent[0]-S[0])*v,Y=-(C.extent[3]-S[3])*v,$=tt(C.extent)*v,le=gn(C.extent)*v;R.drawImage(C.image,d,d,C.image.width-2*d,C.image.height-2*d,p?U:Math.round(U),p?Y:Math.round(Y),p?$:Math.round(U+$)-Math.round(U),p?le:Math.round(Y+le)-Math.round(Y)),C.clipExtent&&R.restore()}});const A=qs(l);return u.getTriangles().forEach(function(C,B,z){const U=C.source,Y=C.target;let $=U[0][0],le=U[0][1],ie=U[1][0],ce=U[1][1],fe=U[2][0],ue=U[2][1];const P=b((Y[0][0]-A[0])/a),W=b(-(Y[0][1]-A[1])/a),te=b((Y[1][0]-A[0])/a),he=b(-(Y[1][1]-A[1])/a),I=b((Y[2][0]-A[0])/a),K=b(-(Y[2][1]-A[1])/a),k=$,re=le;$=0,le=0,ie-=k,ce-=re,fe-=k,ue-=re;const de=[[ie,ce,0,0,te-P],[fe,ue,0,0,I-P],[0,0,ie,ce,he-W],[0,0,fe,ue,K-W]],xe=FI(de);if(!xe)return;if(x.save(),x.beginPath(),xN()||!p){x.moveTo(te,he);const Pe=4,He=P-te,bt=W-he;for(let wt=0;wt<Pe;wt++)x.lineTo(te+b((wt+1)*He/Pe),he+b(wt*bt/(Pe-1))),wt!=Pe-1&&x.lineTo(te+b((wt+1)*He/Pe),he+b((wt+1)*bt/(Pe-1)));x.lineTo(I,K)}else x.moveTo(te,he),x.lineTo(P,W),x.lineTo(I,K);x.clip(),x.transform(xe[0],xe[2],xe[1],xe[3],P,W),x.translate(S[0]-k,S[3]-re);let me;if(R)me=R.canvas,x.scale(D,-D);else{const Pe=f[0],He=Pe.extent;me=Pe.image,x.scale(tt(He)/me.width,-gn(He)/me.height)}x.drawImage(me,0,0),x.restore()}),R&&(Pd(R),cl.push(R.canvas)),g&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,u.getTriangles().forEach(function(C,B,z){const U=C.target,Y=(U[0][0]-A[0])/a,$=-(U[0][1]-A[1])/a,le=(U[1][0]-A[0])/a,ie=-(U[1][1]-A[1])/a,ce=(U[2][0]-A[0])/a,fe=-(U[2][1]-A[1])/a;x.beginPath(),x.moveTo(le,ie),x.lineTo(Y,$),x.lineTo(ce,fe),x.closePath(),x.stroke()}),x.restore()),x.canvas}const TN=10,vb=.25;class BA{constructor(e,t,i,s,a,l,u){this.sourceProj_=e,this.targetProj_=t;let f={};const d=u?ZR(D=>$t(u,Ld(D,this.targetProj_,this.sourceProj_))):id(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){const A=D[0]+"/"+D[1];return f[A]||(f[A]=d(D)),f[A]},this.maxSourceExtent_=s,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&tt(s)>=tt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?tt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?tt(this.targetProj_.getExtent()):null;const g=qs(i),p=Dd(i),_=Md(i),E=Cd(i),x=this.transformInv_(g),b=this.transformInv_(p),S=this.transformInv_(_),R=this.transformInv_(E),v=TN+(l?Math.max(0,Math.ceil(Math.log2(du(i)/(l*l*256*256)))):0);if(this.addQuad_(g,p,_,E,x,b,S,R,v),this.wrapsXInSource_){let D=1/0;this.triangles_.forEach(function(A,C,B){D=Math.min(D,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach(A=>{if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-D>this.sourceWorldWidth_/2){const C=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];C[0][0]-D>this.sourceWorldWidth_/2&&(C[0][0]-=this.sourceWorldWidth_),C[1][0]-D>this.sourceWorldWidth_/2&&(C[1][0]-=this.sourceWorldWidth_),C[2][0]-D>this.sourceWorldWidth_/2&&(C[2][0]-=this.sourceWorldWidth_);const B=Math.min(C[0][0],C[1][0],C[2][0]);Math.max(C[0][0],C[1][0],C[2][0])-B<this.sourceWorldWidth_/2&&(A.source=C)}})}f={}}addTriangle_(e,t,i,s,a,l){this.triangles_.push({source:[s,a,l],target:[e,t,i]})}addQuad_(e,t,i,s,a,l,u,f,d){const g=ey([a,l,u,f]),p=this.sourceWorldWidth_?tt(g)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&p>.5&&p<1;let x=!1;if(d>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const S=ey([e,t,i,s]);x=tt(S)/this.targetWorldWidth_>vb||x}!E&&this.sourceProj_.isGlobal()&&p&&(x=p>vb||x)}if(!x&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!oi(g,this.maxSourceExtent_))return;let b=0;if(!x&&(!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(f[0])||!isFinite(f[1]))){if(d>0)x=!0;else if(b=(!isFinite(a[0])||!isFinite(a[1])?8:0)+(!isFinite(l[0])||!isFinite(l[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(f[0])||!isFinite(f[1])?1:0),b!=1&&b!=2&&b!=4&&b!=8)return}if(d>0){if(!x){const S=[(e[0]+i[0])/2,(e[1]+i[1])/2],R=this.transformInv_(S);let v;E?v=(Pa(a[0],_)+Pa(u[0],_))/2-Pa(R[0],_):v=(a[0]+u[0])/2-R[0];const D=(a[1]+u[1])/2-R[1];x=v*v+D*D>this.errorThresholdSquared_}if(x){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const S=[(t[0]+i[0])/2,(t[1]+i[1])/2],R=this.transformInv_(S),v=[(s[0]+e[0])/2,(s[1]+e[1])/2],D=this.transformInv_(v);this.addQuad_(e,t,S,v,a,l,R,D,d-1),this.addQuad_(v,S,i,s,D,R,u,f,d-1)}else{const S=[(e[0]+t[0])/2,(e[1]+t[1])/2],R=this.transformInv_(S),v=[(i[0]+s[0])/2,(i[1]+s[1])/2],D=this.transformInv_(v);this.addQuad_(e,S,v,s,a,R,D,f,d-1),this.addQuad_(S,t,i,v,R,l,u,D,d-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(b&11)==0&&this.addTriangle_(e,i,s,a,u,f),(b&14)==0&&this.addTriangle_(e,i,t,a,u,l),b&&((b&13)==0&&this.addTriangle_(t,s,e,l,f,a),(b&7)==0&&this.addTriangle_(t,s,i,l,f,u))}calculateSourceExtent(){const e=bi();return this.triangles_.forEach(function(t,i,s){const a=t.source;eu(e,a[0]),eu(e,a[1]),eu(e,a[2])}),e}getTriangles(){return this.triangles_}}const PA=.5;class T_ extends S_{constructor(e,t,i,s,a,l,u,f,d,g,p,_){super(a,ge.IDLE,_),this.renderEdges_=p!==void 0?p:!1,this.pixelRatio_=u,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=l||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const E=s.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let b=this.sourceTileGrid_.getExtent();const S=x?$n(E,x):E;if(du(S)===0){this.state=ge.EMPTY;return}const R=e.getExtent();R&&(b?b=$n(b,R):b=R);const v=s.getResolution(this.wrappedTileCoord_[0]),D=NA(e,i,S,v);if(!isFinite(D)||D<=0){this.state=ge.EMPTY;return}const A=g!==void 0?g:PA;if(this.triangulation_=new BA(e,i,S,b,D*A,v),this.triangulation_.getTriangles().length===0){this.state=ge.EMPTY;return}this.sourceZ_=t.getZForResolution(D);let C=this.triangulation_.calculateSourceExtent();if(b&&(e.canWrapX()?(C[1]=Tt(C[1],b[1],b[3]),C[3]=Tt(C[3],b[1],b[3])):C=$n(C,b)),!du(C))this.state=ge.EMPTY;else{let B=0,z=0;e.canWrapX()&&(B=tt(R),z=Math.floor((C[0]-R[0])/B)),Xy(C.slice(),e,!0).forEach(Y=>{const $=t.getTileRangeForExtentAndZ(Y,this.sourceZ_);for(let le=$.minX;le<=$.maxX;le++)for(let ie=$.minY;ie<=$.maxY;ie++){const ce=d(this.sourceZ_,le,ie,u);if(ce){const fe=z*B;this.sourceTiles_.push({tile:ce,offset:fe})}}++z}),this.sourceTiles_.length===0&&(this.state=ge.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{const i=t.tile;if(i&&i.getState()==ge.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const a=this.clipExtent_?.slice();a&&(a[0]+=t.offset,a[2]+=t.offset),e.push({extent:s,clipExtent:a,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=ge.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),s=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],l=this.targetTileGrid_.getResolution(t),u=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=SN(s,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),l,f,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ge.LOADED}this.changed()}load(){if(this.state==ge.IDLE){this.state=ge.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==ge.IDLE||i==ge.LOADING){e++;const s=et(t,Me.CHANGE,a=>{const l=t.getState();(l==ge.LOADED||l==ge.ERROR||l==ge.EMPTY)&&(St(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,s){t.getState()==ge.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(St),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Pd(this.canvas_.getContext("2d")),cl.push(this.canvas_),this.canvas_=null),super.release()}}class bN extends Pu{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(Me.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===ge.LOADED,this.loaded)this.uploadTile();else{if(e instanceof Vd){const t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(Me.CHANGE,this.handleTileChange_)}}uploadTile(){Je()}setReady(){this.ready=!0,this.dispatchEvent(Me.CHANGE)}handleTileChange_(){this.tile.getState()===ge.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(Me.CHANGE,this.handleTileChange_)}}function FA(n,e,t){const i=t?n.LINEAR:n.NEAREST;n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,i)}function vN(n,e,t,i){FA(n,e,i),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)}function wb(n,e,t,i,s,a){const l=n.getGL();let u,f;t instanceof Float32Array?(u=l.FLOAT,n.getExtension("OES_texture_float"),f=n.getExtension("OES_texture_float_linear")!==null):(u=l.UNSIGNED_BYTE,f=!0),FA(l,e,a&&f);const d=t.byteLength/i[1];let g=1;d%8===0?g=8:d%4===0?g=4:d%2===0&&(g=2);let p;switch(s){case 1:{p=l.LUMINANCE;break}case 2:{p=l.LUMINANCE_ALPHA;break}case 3:{p=l.RGB;break}case 4:{p=l.RGBA;break}default:throw new Error(`Unsupported number of bands: ${s}`)}const _=l.getParameter(l.UNPACK_ALIGNMENT);l.pixelStorei(l.UNPACK_ALIGNMENT,g),l.texImage2D(l.TEXTURE_2D,0,p,i[0],i[1],0,p,u,t),l.pixelStorei(l.UNPACK_ALIGNMENT,_)}let Wo=null;function wN(){Wo=Nt(1,1,void 0,{willReadFrequently:!0})}class RN extends bN{constructor(e){super(e),this.textures=[],this.renderSize_=Gt(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;const t=new OA(__,x_);t.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setHelper(e){const t=this.helper?.getGL();if(t){this.helper.deleteBuffer(this.coords);for(let i=0;i<this.textures.length;++i)t.deleteTexture(this.textures[i])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){const e=this.helper,t=e.getGL(),i=this.tile;this.textures.length=0;let s;i instanceof Vd||i instanceof T_?s=i.getImage():s=i.getData();const a=xl(s);if(a){const v=t.createTexture();this.textures.push(v),this.bandCount=4,vN(t,v,a,i.interpolate),this.setReady();return}s=dy(s);const l=i.getSize(),u=[l[0]+2*this.gutter,l[1]+2*this.gutter],f=s instanceof Float32Array,d=u[0]*u[1],g=f?Float32Array:Uint8Array,p=g.BYTES_PER_ELEMENT,_=s.byteLength/u[1];this.bandCount=Math.floor(_/p/u[0]);const E=Math.ceil(this.bandCount/4);if(E===1){const v=t.createTexture();this.textures.push(v),wb(e,v,s,u,this.bandCount,i.interpolate),this.setReady();return}const x=new Array(E);for(let v=0;v<E;++v){const D=t.createTexture();this.textures.push(D);const A=v<E-1?4:(this.bandCount-1)%4+1;x[v]=new g(d*A)}let b=0,S=0;const R=u[0]*this.bandCount;for(let v=0;v<u[1];++v){for(let D=0;D<R;++D){const A=s[S+D],C=Math.floor(b/this.bandCount),B=D%this.bandCount,z=Math.floor(B/4),U=x[z],Y=U.length/d,$=B%4;U[C*Y+$]=A,++b}S+=_/p}for(let v=0;v<E;++v){const D=this.textures[v],A=x[v],C=A.length/d;wb(e,D,A,u,C,i.interpolate)}this.setReady()}getImagePixelData_(e,t,i){const s=this.gutter,a=this.renderSize_[0],l=this.renderSize_[1];Wo||wN(),Wo.clearRect(0,0,1,1);const u=e.width,f=e.height,d=u-2*s,g=f-2*s,p=s+Math.floor(d*(t/a)),_=s+Math.floor(g*(i/l));let E;try{Wo.drawImage(e,p,_,1,1,0,0,1,1),E=Wo.getImageData(0,0,1,1).data}catch{return Wo=null,null}return E}getArrayPixelData_(e,t,i,s){const a=this.gutter,l=this.renderSize_[0],u=this.renderSize_[1],f=t[0],d=t[1],g=f+2*a,p=d+2*a,_=a+Math.floor(f*(i/l)),E=a+Math.floor(d*(s/u));if(e instanceof DataView){const b=e.byteLength/(g*p),S=b*(E*g+_),R=e.buffer.slice(S,S+b);return new DataView(R)}const x=this.bandCount*(E*g+_);return e.slice(x,x+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof wu){const i=this.tile.getData(),s=dy(i);if(s){const a=this.tile.getSize();return this.getArrayPixelData_(s,a,e,t)}return this.getImagePixelData_(xl(i),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}}class qd{constructor(e,t,i,s){this.minX=e,this.maxX=t,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ko(n,e,t,i,s){return s!==void 0?(s.minX=n,s.maxX=e,s.minY=t,s.maxY=i,s):new qd(n,e,t,i)}class UA{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Bu&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ot(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ot(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ot(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function Sl(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function kA(n,e,t){return n+"/"+e+"/"+t}function Qo(n){return kA(n[0],n[1],n[2])}function AN(n){return CN(n[0],n[1],n[2])}function CN(n,e,t){return(e<<n)+t}function MN(n,e){const t=n[0],i=n[1],s=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const a=e.getFullTileRange(t);return a?a.containsXY(i,s):!0}const DN=5;class zA extends Fu{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=DN}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Je()}getData(e){return null}prepareFrame(e){return Je()}renderFrame(e,t){return Je()}forEachFeatureAtCoordinate(e,t,i,s,a){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ge.LOADED||t.getState()===Ge.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ge.LOADED&&t!=Ge.ERROR&&e.addEventListener(Me.CHANGE,this.boundHandleImageChange_),t==Ge.IDLE&&(e.load(),t=e.getState()),t==Ge.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class b_ extends zA{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=zn(),this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(st.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(dn.PRECOMPOSE)){const s=new nu(dn.PRECOMPOSE,void 0,t,e);i.dispatchEvent(s)}}dispatchPostComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(dn.POSTCOMPOSE)){const s=new nu(dn.POSTCOMPOSE,void 0,t,e);i.dispatchEvent(s)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,i=-1,s;for(let l=0,u=e.layerStatesArray.length;l<u;l++){const f=e.layerStatesArray[l].layer,d=f.getRenderer();if(!(d instanceof b_)){t=!0;continue}const g=f.getClassName();if((t||g!==s)&&(i+=1,t=!1),s=g,d===this)break}const a="map/"+e.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(a)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new gN({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:a}),s&&(this.helper.getCanvas().className=s),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(st.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,t,i){const s=this.getLayer();if(s.hasListener(e)){Qi(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const a=new nu(e,this.inversePixelTransform_,i,t);s.dispatchEvent(a)}}preRender(e,t){this.dispatchRenderEvent_(dn.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(dn.POSTRENDER,e,t)}}const IN={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function Rb(n){return 1/(n+2)}function ON(){return{tileIds:new Set,representationsByZ:{}}}function Ab(n,e){return n.tileIds.has(De(e))}function Cb(n,e,t){const i=n.representationsByZ;t in i||(i[t]=new Set),i[t].add(e),n.tileIds.add(De(e.tile))}function k0(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=$n(e,_s(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const s=i.getTileGridForProjection(n.viewState.projection).getExtent();s&&(e=$n(e,s))}return e}function gy(n,e){return`${De(n)},${n.getKey()},${n.getRevision()},${Qo(e)}`}class LN extends b_{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=zn(),this.tempMat4=Ll(),this.tempTileRange_=new qd(0,0,0,0),this.tempTileCoord_=Sl(0,0,0),this.tempSize_=[0,0];const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new UA(i),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;const i=this.getLayer().getRenderSource();return!i||Ml(k0(e,e.extent))?!1:i.getState()==="ready"}createTileRepresentation(e){return Je()}enqueueTiles(e,t,i,s,a){const l=e.viewState,u=this.getLayer(),f=u.getRenderSource(),d=f.getTileGridForProjection(l.projection),g=f.getGutterForProjection(l.projection),p=De(f);p in e.wantedTiles||(e.wantedTiles[p]={});const _=e.wantedTiles[p],E=this.tileRepresentationCache,x=u.getMapInternal(),b=Math.max(i-a,d.getMinZoom(),d.getZForResolution(Math.min(u.getMaxResolution(),x?x.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):d.getResolution(0)),f.zDirection)),S=l.rotation,R=S?Hy(l.center,l.resolution,S,e.size):void 0;for(let v=i;v>=b;--v){const D=d.getTileRangeForExtentAndZ(t,v,this.tempTileRange_),A=d.getResolution(v);for(let C=D.minX;C<=D.maxX;++C)for(let B=D.minY;B<=D.maxY;++B){if(S&&!d.tileCoordIntersectsViewport([v,C,B],R))continue;const z=Sl(v,C,B,this.tempTileCoord_),U=gy(f,z);let Y,$;if(E.containsKey(U)&&(Y=E.get(U),$=Y.tile),(!Y||Y.tile.key!==f.getKey())&&($=f.getTile(v,C,B,e.pixelRatio,l.projection),!$)||Ab(s,$))continue;Y?Y.setTile($):(Y=this.createTileRepresentation({tile:$,grid:d,helper:this.helper,gutter:g}),E.set(U,Y)),Cb(s,Y,v);const le=$.getKey();_[le]=!0,$.getState()===ge.IDLE&&(e.tileQueue.isKeyQueued(le)||e.tileQueue.enqueue([$,p,d.getTileCoordCenter(z),A]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,i,s,a,l,u,f,d,g,p){}renderTileMask(e,t,i,s){}drawTile_(e,t,i,s,a,l,u){if(!t.ready)return;const d=t.tile.tileCoord,g=Qo(d),p=g in l?l[g]:1,_=u.getResolution(i),E=Gt(u.getTileSize(i),this.tempSize_),x=u.getOrigin(i),b=u.getTileCoordExtent(d),S=p<1?-1:Rb(i);p<1&&(e.animate=!0);const R=e.viewState,v=R.center[0],D=R.center[1],A=E[0]+2*s,C=E[1]+2*s,B=A/C,z=(v-x[0])/(E[0]*_),U=(x[1]-D)/(E[1]*_),Y=R.resolution/_,$=d[1],le=d[2];RO(this.tileTransform_),HT(this.tileTransform_,2/(e.size[0]*Y/A),-2/(e.size[1]*Y/A)),CO(this.tileTransform_,R.rotation),HT(this.tileTransform_,1,1/B),MO(this.tileTransform_,(E[0]*($-z)-s)/A,(E[1]*(le-U)-s)/C),this.renderTile(t,this.tileTransform_,e,a,_,E,x,b,S,s,p)}renderFrame(e){this.frameState=e,this.renderComplete=!0;const t=this.helper.getGL();this.preRender(t,e);const i=e.viewState,s=this.getLayer(),a=s.getRenderSource(),l=a.getTileGridForProjection(i.projection),u=a.getGutterForProjection(i.projection),f=k0(e,e.extent),d=l.getZForResolution(i.resolution,a.zDirection),g=ON(),p=s.getPreload();if(e.nextExtent){const D=l.getZForResolution(i.nextResolution,a.zDirection),A=k0(e,e.nextExtent);this.enqueueTiles(e,A,D,g,p)}this.enqueueTiles(e,f,d,g,0),p>0&&setTimeout(()=>{this.enqueueTiles(e,f,d-1,g,p-1)},0);const _={};let E=!1;const x=g.representationsByZ;if(d in x){const D=De(this),A=e.time;for(const C of x[d]){const B=C.tile;if(B.getState()===ge.EMPTY)continue;const z=B.tileCoord;if(C.ready){const $=B.getAlpha(D,A);if($===1){B.endTransition(D);continue}E=!0;const le=Qo(z);_[le]=$}if(this.renderComplete=!1,this.findAltTiles_(l,z,d+1,g))continue;const Y=l.getMinZoom();for(let $=d-1;$>=Y&&!this.findAltTiles_(l,z,$,g);--$);}}const b=Object.keys(x).map(Number).sort(AR);if(this.beforeTilesMaskRender(e))for(let D=0,A=b.length;D<A;++D){const C=b[D];for(const B of x[C]){const z=B.tile.tileCoord;if(Qo(z)in _)continue;const Y=l.getTileCoordExtent(z);this.renderTileMask(B,C,Y,Rb(C))}}this.beforeTilesRender(e,E);for(let D=0,A=b.length;D<A;++D){const C=b[D];for(const B of x[C]){const z=B.tile.tileCoord;Qo(z)in _||this.drawTile_(e,B,C,u,f,_,l)}}if(d in x)for(const D of x[d]){const A=D.tile.tileCoord;Qo(A)in _&&this.drawTile_(e,D,d,u,f,_,l)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const R=this.helper.getCanvas(),v=this.tileRepresentationCache;for(;v.canExpireCache();)v.pop().dispose();return this.postRender(t,e),R}beforeFinalize(e){}findAltTiles_(e,t,i,s){const a=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!a)return!1;let l=!0;const u=this.tileRepresentationCache,f=this.getLayer().getRenderSource();for(let d=a.minX;d<=a.maxX;++d)for(let g=a.minY;g<=a.maxY;++g){const p=gy(f,[i,d,g]);let _=!1;if(u.containsKey(p)){const E=u.get(p);E.ready&&!Ab(s,E.tile)&&(Cb(s,E,i),_=!0)}_||(l=!1)}return l}clearCache(){super.clearCache();const e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}}const Le={...IN,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},Ff={TEXTURE_COORD:"a_textureCoord"},NN=[{name:Ff.TEXTURE_COORD,size:2,type:Qc.FLOAT}];class BN extends LN{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new OA(E_,x_),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){const t=this.helper.getGL();for(const i of this.paletteTextures_)i.delete(t)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const t=this.helper.getGL();for(const i of this.paletteTextures_)i.getTexture(t)}}afterHelperCreated(){super.afterHelperCreated();const e=this.helper.getGL();for(const t of this.paletteTextures_)t.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const e=this.helper.getGL();for(const t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new RN(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,i,s,a,l,u,f,d,g,p){const _=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(NN);let E=0;for(;E<e.textures.length;){const B=`${Le.TILE_TEXTURE_ARRAY}[${E}]`;this.helper.bindTexture(e.textures[E],E,B),++E}for(let B=0;B<this.paletteTextures_.length;++B){const z=this.paletteTextures_[B],U=z.getTexture(_);this.helper.bindTexture(U,E,z.name),++E}const x=i.viewState,b=l[0]+2*g,S=l[1]+2*g,v=e.tile.tileCoord,D=v[1],A=v[2];this.helper.setUniformMatrixValue(Le.TILE_TRANSFORM,DA(this.tempMat4,t)),this.helper.setUniformFloatValue(Le.TRANSITION_ALPHA,p),this.helper.setUniformFloatValue(Le.DEPTH,d);let C=s;g>0&&(C=f,$n(C,s,C)),this.helper.setUniformFloatVec4(Le.RENDER_EXTENT,C),this.helper.setUniformFloatValue(Le.RESOLUTION,x.resolution),this.helper.setUniformFloatValue(Le.ZOOM,x.zoom),this.helper.setUniformFloatValue(Le.TEXTURE_PIXEL_WIDTH,b),this.helper.setUniformFloatValue(Le.TEXTURE_PIXEL_HEIGHT,S),this.helper.setUniformFloatValue(Le.TEXTURE_RESOLUTION,a),this.helper.setUniformFloatValue(Le.TEXTURE_ORIGIN_X,u[0]+D*l[0]*a-g*a),this.helper.setUniformFloatValue(Le.TEXTURE_ORIGIN_Y,u[1]-A*l[1]*a+g*a),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;const i=this.frameState;if(!i)return null;const s=this.getLayer(),a=$t(i.pixelToCoordinateTransform,e.slice()),l=i.viewState,u=s.getExtent();if(u&&!Vr(_s(u,l.projection),a))return null;const f=s.getSources(ey([a]),l.resolution);let d,g,p;for(d=f.length-1;d>=0;--d)if(g=f[d],g.getState()==="ready"){if(p=g.getTileGridForProjection(l.projection),g.getWrapX())break;const E=p.getExtent();if(!E||Vr(E,a))break}if(d<0)return null;const _=this.tileRepresentationCache;for(let E=p.getZForResolution(l.resolution);E>=p.getMinZoom();--E){const x=p.getTileCoordForCoordAndZ(a,E),b=gy(g,x);if(!_.containsKey(b))continue;const S=_.get(b);if(S.tile.getState()===ge.EMPTY)return null;if(!S.loaded)continue;const v=p.getOrigin(E),D=Gt(p.getTileSize(E)),A=p.getResolution(E),C=(a[0]-v[0])/A-x[1]*D[0],B=(v[1]-a[1])/A-x[2]*D[1];return S.getPixelData(C,B)}return null}disposeInternal(){const e=this.helper;if(e){const t=e.getGL();for(const i of this.paletteTextures_)i.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}class PN{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function FN(n,e){return`operator_${n}_${Object.keys(e.functions).length}`}function Ru(n){const e=n.toString();return e.includes(".")?e:e+".0"}function v_(n){if(n.length<2||n.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${n.length}(${n.map(Ru).join(", ")})`}function UN(n){const e=$r(n),t=e.length>3?e[3]:1;return v_([e[0]/255,e[1]/255,e[2]/255,t])}function kN(n){const e=Gt(n);return v_(e)}const z0={};let zN=0;function GA(n){return n in z0||(z0[n]=zN++),z0[n]}function GN(n){return Ru(GA(n))}function HA(n){return"u_var_"+n}function HN(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const G0="getBandValue",XA="u_paletteTextures",XN="featureId",jN="geometryType",YN=-9999999;function VN(n,e,t,i){const s=mn(n,e,t);return w_(s,e,i)}function it(n){return(e,t,i)=>{const s=t.args.length,a=new Array(s);for(let l=0;l<s;++l)a[l]=w_(t.args[l],i,e);return n(a,e)}}const qN={[H.Get]:(n,e)=>{const i=e.args[0].value;return i in n.properties||(n.properties[i]={name:i,type:e.type}),"a_prop_"+i},[H.Id]:n=>(n.featureId=!0,"a_"+XN),[H.GeometryType]:n=>(n.geometryType=!0,"a_"+jN),[H.LineMetric]:()=>"currentLineMetric",[H.Var]:(n,e)=>{const i=e.args[0].value;return i in n.variables||(n.variables[i]={name:i,type:e.type}),HA(i)},[H.Has]:(n,e)=>{const i=e.args[0].value;return i in n.properties||(n.properties[i]={name:i,type:e.type}),`(a_prop_${i} != ${Ru(YN)})`},[H.Resolution]:()=>"u_resolution",[H.Zoom]:()=>"u_zoom",[H.Time]:()=>"u_time",[H.Any]:it(n=>`(${n.join(" || ")})`),[H.All]:it(n=>`(${n.join(" && ")})`),[H.Not]:it(([n])=>`(!${n})`),[H.Equal]:it(([n,e])=>`(${n} == ${e})`),[H.NotEqual]:it(([n,e])=>`(${n} != ${e})`),[H.GreaterThan]:it(([n,e])=>`(${n} > ${e})`),[H.GreaterThanOrEqualTo]:it(([n,e])=>`(${n} >= ${e})`),[H.LessThan]:it(([n,e])=>`(${n} < ${e})`),[H.LessThanOrEqualTo]:it(([n,e])=>`(${n} <= ${e})`),[H.Multiply]:it(n=>`(${n.join(" * ")})`),[H.Divide]:it(([n,e])=>`(${n} / ${e})`),[H.Add]:it(n=>`(${n.join(" + ")})`),[H.Subtract]:it(([n,e])=>`(${n} - ${e})`),[H.Clamp]:it(([n,e,t])=>`clamp(${n}, ${e}, ${t})`),[H.Mod]:it(([n,e])=>`mod(${n}, ${e})`),[H.Pow]:it(([n,e])=>`pow(${n}, ${e})`),[H.Abs]:it(([n])=>`abs(${n})`),[H.Floor]:it(([n])=>`floor(${n})`),[H.Ceil]:it(([n])=>`ceil(${n})`),[H.Round]:it(([n])=>`floor(${n} + 0.5)`),[H.Sin]:it(([n])=>`sin(${n})`),[H.Cos]:it(([n])=>`cos(${n})`),[H.Atan]:it(([n,e])=>e!==void 0?`atan(${n}, ${e})`:`atan(${n})`),[H.Sqrt]:it(([n])=>`sqrt(${n})`),[H.Match]:it(n=>{const e=n[0],t=n[n.length-1];let i=null;for(let s=n.length-3;s>=1;s-=2){const a=n[s],l=n[s+1];i=`(${e} == ${a} ? ${l} : ${i||t})`}return i}),[H.Between]:it(([n,e,t])=>`(${n} >= ${e} && ${n} <= ${t})`),[H.Interpolate]:it(([n,e,...t])=>{let i="";for(let s=0;s<t.length-2;s+=2){const a=t[s],l=i||t[s+1],u=t[s+2],f=t[s+3];let d;n===Ru(1)?d=`(${e} - ${a}) / (${u} - ${a})`:d=`(pow(${n}, (${e} - ${a})) - 1.0) / (pow(${n}, (${u} - ${a})) - 1.0)`,i=`mix(${l}, ${f}, clamp(${d}, 0.0, 1.0))`}return i}),[H.Case]:it(n=>{const e=n[n.length-1];let t=null;for(let i=n.length-3;i>=0;i-=2){const s=n[i],a=n[i+1];t=`(${s} ? ${a} : ${t||e})`}return t}),[H.In]:it(([n,...e],t)=>{const i=FN("in",t),s=[];for(let a=0;a<e.length;a+=1)s.push(`  if (inputValue == ${e[a]}) { return true; }`);return t.functions[i]=`bool ${i}(float inputValue) {
${s.join(`
`)}
  return false;
}`,`${i}(${n})`}),[H.Array]:it(n=>`vec${n.length}(${n.join(", ")})`),[H.Color]:it(n=>{if(n.length===1)return`vec4(vec3(${n[0]} / 255.0), 1.0)`;if(n.length===2)return`vec4(vec3(${n[0]} / 255.0), ${n[1]})`;const e=n.slice(0,3).map(i=>`${i} / 255.0`);if(n.length===3)return`vec4(${e.join(", ")}, 1.0)`;const t=n[3];return`vec4(${e.join(", ")}, ${t})`}),[H.Band]:it(([n,e,t],i)=>{if(!(G0 in i.functions)){let s="";const a=i.bandCount||1;for(let l=0;l<a;l++){const u=Math.floor(l/4);let f=l%4;l===a-1&&f===1&&(f=3);const d=`${Le.TILE_TEXTURE_ARRAY}[${u}]`;s+=`  if (band == ${l+1}.0) {
    return texture2D(${d}, v_textureCoord + vec2(dx, dy))[${f}];
  }
`}i.functions[G0]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${Le.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${Le.TEXTURE_PIXEL_HEIGHT};
${s}
}`}return`${G0}(${n}, ${e??"0.0"}, ${t??"0.0"})`}),[H.Palette]:(n,e)=>{const[t,...i]=e.args,s=i.length,a=new Uint8Array(s*4);for(let d=0;d<i.length;d++){const g=i[d].value,p=$r(g),_=d*4;a[_]=p[0],a[_+1]=p[1],a[_+2]=p[2],a[_+3]=p[3]*255}n.paletteTextures||(n.paletteTextures=[]);const l=`${XA}[${n.paletteTextures.length}]`,u=new PN(l,a);n.paletteTextures.push(u);const f=w_(t,Ne,n);return`texture2D(${l}, vec2((${f} + 0.5) / ${s}.0, 0.5))`}};function w_(n,e,t){if(n instanceof mA){const i=qN[n.operator];if(i===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(n.operator)}`);return i(t,n,e)}if((n.type&Ne)>0)return Ru(n.value);if((n.type&Un)>0)return n.value.toString();if((n.type&qn)>0)return GN(n.value.toString());if((n.type&Si)>0)return UN(n.value);if((n.type&Kr)>0)return v_(n.value);if((n.type&nl)>0)return kN(n.value);throw new Error(`Unexpected expression ${n.value} (expected type ${il(e)})`)}function zo(n,e,t){const i=m_();return VN(e,t,i,n)}const Ef={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class jA extends Ud{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ef.PRELOAD)}setPreload(e){this.set(Ef.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ef.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ef.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Mb(n,e){const t=`
    attribute vec2 ${Ff.TEXTURE_COORD};
    uniform mat4 ${Le.TILE_TRANSFORM};
    uniform float ${Le.TEXTURE_PIXEL_WIDTH};
    uniform float ${Le.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Le.TEXTURE_RESOLUTION};
    uniform float ${Le.TEXTURE_ORIGIN_X};
    uniform float ${Le.TEXTURE_ORIGIN_Y};
    uniform float ${Le.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Ff.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${Le.TEXTURE_ORIGIN_X} + ${Le.TEXTURE_RESOLUTION} * ${Le.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${Le.TEXTURE_ORIGIN_Y} - ${Le.TEXTURE_RESOLUTION} * ${Le.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${Le.TILE_TRANSFORM} * vec4(${Ff.TEXTURE_COORD}, ${Le.DEPTH}, 1.0);
    }
  `,i={...HN(),bandCount:e},s=[];if(n.color!==void 0){const p=zo(i,n.color,Si);s.push(`color = ${p};`)}if(n.contrast!==void 0){const p=zo(i,n.contrast,Ne);s.push(`color.rgb = clamp((${p} + 1.0) * color.rgb - (${p} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.exposure!==void 0){const p=zo(i,n.exposure,Ne);s.push(`color.rgb = clamp((${p} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.saturation!==void 0){const p=zo(i,n.saturation,Ne);s.push(`
      float saturation = ${p} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(n.gamma!==void 0){const p=zo(i,n.gamma,Ne);s.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${p}));`)}if(n.brightness!==void 0){const p=zo(i,n.brightness,Ne);s.push(`color.rgb = clamp(color.rgb + ${p}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const a={},l=Object.keys(i.variables).length;if(l>1&&!n.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let p=0;p<l;++p){const _=i.variables[Object.keys(i.variables)[p]];if(!(_.name in n.variables))throw new Error(`Missing '${_.name}' in style variables`);const E=HA(_.name);a[E]=function(){let x=n.variables[_.name];return typeof x=="string"&&(x=GA(x)),x!==void 0?x:-9999999}}const u=Object.keys(a).map(function(p){return`uniform float ${p};`}),f=Math.ceil(e/4);u.push(`uniform sampler2D ${Le.TILE_TEXTURE_ARRAY}[${f}];`),i.paletteTextures&&u.push(`uniform sampler2D ${XA}[${i.paletteTextures.length}];`);const d=Object.keys(i.functions).map(function(p){return i.functions[p]}),g=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${Le.RENDER_EXTENT};
    uniform float ${Le.TRANSITION_ALPHA};
    uniform float ${Le.TEXTURE_PIXEL_WIDTH};
    uniform float ${Le.TEXTURE_PIXEL_HEIGHT};
    uniform float ${Le.RESOLUTION};
    uniform float ${Le.ZOOM};

    ${u.join(`
`)}

    ${d.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${Le.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${Le.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${Le.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${Le.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${Le.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${s.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${Le.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:g,uniforms:a,paletteTextures:i.paletteTextures}}class YA extends jA{constructor(e){e=e?Object.assign({},e):{};const t=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(st.SOURCE,this.handleSourceUpdate_)}getSources(e,t){const i=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const e=this.getSource();if(e)if(e.getState()==="loading"){const t=()=>{e.getState()==="ready"&&(e.removeEventListener("change",t),this.setStyle(this.style_))};e.addEventListener("change",t)}else this.setStyle(this.style_)}getSourceBandCount_(){const e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){const e=Mb(this.style_,this.getSourceBandCount_());return new BN(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,t){const i=this.getRenderer();let s;for(let a=0,l=t.length;a<l;++a)this.renderedSource_=t[a],i.prepareFrame(e)&&(s=i.renderFrame(e));return s}render(e,t){this.rendered=!0;const i=e.viewState,s=this.getSources(e.extent,i.resolution);let a=!0;for(let u=0,f=s.length;u<f;++u){const d=s[u],g=d.getState();if(g=="loading"){const p=()=>{d.getState()=="ready"&&(d.removeEventListener("change",p),this.changed())};d.addEventListener("change",p)}a=a&&g=="ready"}const l=this.renderSources(e,s);if(this.getRenderer().renderComplete&&a)return this.renderedResolution_=i.resolution,l;if(this.renderedResolution_>.5*i.resolution){const u=this.getSources(e.extent,this.renderedResolution_).filter(f=>!s.includes(f));if(u.length>0)return this.renderSources(e,u)}return l}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){const t=Mb(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}}YA.prototype.dispose;class VA{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ad(),{get:(e,t)=>{if(typeof ad()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,s=t.length;i<s;++i){const a=t[i];if(typeof a=="function"){a(e);continue}const l=t[++i];if(typeof e[a]=="function")e[a](...l);else{if(typeof l=="function"){e[a]=l(e);continue}e[a]=l}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Db=[];let Jo=null;function $N(){Jo=Nt(1,1,void 0,{willReadFrequently:!0})}class qA extends zA{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=zn(),this.pixelTransform=zn(),this.inversePixelTransform=zn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){Jo||$N(),Jo.clearRect(0,0,1,1);let s;try{Jo.drawImage(e,t,i,1,1,0,0,1,1),s=Jo.getImageData(0,0,1,1).data}catch{return Jo=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const s=this.getLayer().getClassName();let a,l;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&ea($r(e.style.backgroundColor),$r(i)))){const u=e.firstElementChild;u instanceof HTMLCanvasElement&&(l=u.getContext("2d"))}if(l&&LO(l.canvas.style.transform,t)?(this.container=e,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=s;let u=a.style;u.position="absolute",u.width="100%",u.height="100%",l=Nt();const f=l.canvas;a.appendChild(f),u=f.style,u.position="absolute",u.left="0",u.transformOrigin="top left",this.container=a,this.context=l}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const s=qs(i),a=Dd(i),l=Md(i),u=Cd(i);$t(t.coordinateToPixelTransform,s),$t(t.coordinateToPixelTransform,a),$t(t.coordinateToPixelTransform,l),$t(t.coordinateToPixelTransform,u);const f=this.inversePixelTransform;$t(f,s),$t(f,a),$t(f,l),$t(f,u),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.clip()}prepareContainer(e,t){const i=e.extent,s=e.viewState.resolution,a=e.viewState.rotation,l=e.pixelRatio,u=Math.round(tt(i)/s*l),f=Math.round(gn(i)/s*l);Qi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/l,1/l,a,-u/2,-f/2),Qy(this.inversePixelTransform,this.pixelTransform);const d=OO(this.pixelTransform);if(this.useContainer(t,d,this.getBackground(e)),!this.containerReused){const g=this.context.canvas;g.width!=u||g.height!=f?(g.width=u,g.height=f):this.context.clearRect(0,0,u,f),d!==g.style.transform&&(g.style.transform=d)}}dispatchRenderEvent_(e,t,i){const s=this.getLayer();if(s.hasListener(e)){const a=new nu(e,this.inversePixelTransform,i,t);s.dispatchEvent(a)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(dn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(dn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new VA),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(dn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(dn.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,s,a,l,u){const f=a/2,d=l/2,g=s/t,p=-g,_=-e[0]+u,E=-e[1];return Qi(this.tempTransform,f,d,g,p,-i,_,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function H0(n,e,t,i,s){return`${De(n)},${e},${kA(t,i,s)}`}function X0(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;const i=n[t],s=i.has(e);return s||i.add(e),!s}function KN(n,e,t){const i=n[t];return i?i.delete(e):!1}function Ib(n,e){const t=n.layerStatesArray[n.layerIndex];t.extent&&(e=$n(e,_s(t.extent,n.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const s=i.getTileGridForProjection(n.viewState.projection).getExtent();s&&(e=$n(e,s))}return e}class ZN extends qA{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=bi(),this.tempTileRange_=new qd(0,0,0,0),this.tempTileCoord_=Sl(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new UA(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,s){const a=this.tileCache_,u=this.getLayer().getSource(),f=H0(u,u.getKey(),e,t,i);let d;if(a.containsKey(f))d=a.get(f);else{if(d=u.getTile(e,t,i,s.pixelRatio,s.viewState.projection),!d)return null;a.set(f,d)}return d}getTile(e,t,i,s){const a=this.getOrCreateTile(e,t,i,s);return a||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),s=$t(t.pixelToCoordinateTransform,e.slice()),a=i.getExtent();if(a&&!Vr(a,s))return null;const l=t.viewState,u=i.getRenderSource(),f=u.getTileGridForProjection(l.projection),d=u.getTilePixelRatio(t.pixelRatio);for(let g=f.getZForResolution(l.resolution);g>=f.getMinZoom();--g){const p=f.getTileCoordForCoordAndZ(s,g),_=this.getTile(g,p[1],p[2],t);if(!_||_.getState()!==ge.LOADED)continue;const E=f.getOrigin(g),x=Gt(f.getTileSize(g)),b=f.getResolution(g);let S;if(_ instanceof Vd||_ instanceof T_)S=_.getImage();else if(_ instanceof wu){if(S=xl(_.getData()),!S)continue}else continue;const R=Math.floor(d*((s[0]-E[0])/b-p[1]*x[0])),v=Math.floor(d*((E[1]-s[1])/b-p[2]*x[1])),D=Math.round(d*u.getGutterForProjection(l.projection));return this.getImageData(S,R+D,v+D)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==i&&(this.renderedSourceRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedSourceRevision_=i,!0}enqueueTiles(e,t,i,s,a){const l=e.viewState,u=this.getLayer(),f=u.getRenderSource(),d=f.getTileGridForProjection(l.projection),g=De(f);g in e.wantedTiles||(e.wantedTiles[g]={});const p=e.wantedTiles[g],_=u.getMapInternal(),E=Math.max(i-a,d.getMinZoom(),d.getZForResolution(Math.min(u.getMaxResolution(),_?_.getView().getResolutionForZoom(Math.max(u.getMinZoom(),0)):d.getResolution(0)),f.zDirection)),x=l.rotation,b=x?Hy(l.center,l.resolution,x,e.size):void 0;for(let S=i;S>=E;--S){const R=d.getTileRangeForExtentAndZ(t,S,this.tempTileRange_),v=d.getResolution(S);for(let D=R.minX;D<=R.maxX;++D)for(let A=R.minY;A<=R.maxY;++A){if(x&&!d.tileCoordIntersectsViewport([S,D,A],b))continue;const C=this.getTile(S,D,A,e);if(!C||!X0(s,C,S))continue;const z=C.getKey();if(p[z]=!0,C.getState()===ge.IDLE&&!e.tileQueue.isKeyQueued(z)){const U=Sl(S,D,A,this.tempTileCoord_);e.tileQueue.enqueue([C,g,d.getTileCoordCenter(U),v])}}}}findStaleTile_(e,t){const i=this.tileCache_,s=e[0],a=e[1],l=e[2],u=this.getStaleKeys();for(let f=0;f<u.length;++f){const d=H0(this.getLayer().getSource(),u[f],s,a,l);if(i.containsKey(d)){const g=i.peek(d);if(g.getState()===ge.LOADED)return g.endTransition(De(this)),X0(t,g,s),!0}}return!1}findAltTiles_(e,t,i,s){const a=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!a)return!1;let l=!0;const u=this.tileCache_,f=this.getLayer().getRenderSource(),d=f.getKey();for(let g=a.minX;g<=a.maxX;++g)for(let p=a.minY;p<=a.maxY;++p){const _=H0(f,d,i,g,p);let E=!1;if(u.containsKey(_)){const x=u.peek(_);x.getState()===ge.LOADED&&(X0(s,x,i),E=!0)}E||(l=!1)}return l}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],s=e.viewState,a=s.projection,l=s.resolution,u=s.center,f=e.pixelRatio,d=this.getLayer(),g=d.getSource(),p=g.getTileGridForProjection(a),_=p.getZForResolution(l,g.zDirection),E=p.getResolution(_),x=g.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==x&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=x):this.renderedSourceKey_=x;let b=e.extent;const S=g.getTilePixelRatio(f);this.prepareContainer(e,t);const R=this.context.canvas.width,v=this.context.canvas.height,D=i.extent&&_s(i.extent);D&&(b=$n(b,_s(i.extent)));const A=E*R/2/S,C=E*v/2/S,B=[u[0]-A,u[1]-C,u[0]+A,u[1]+C],z={};this.renderedTiles.length=0;const U=d.getPreload();if(e.nextExtent){const te=p.getZForResolution(s.nextResolution,g.zDirection),he=Ib(e,e.nextExtent);this.enqueueTiles(e,he,te,z,U)}const Y=Ib(e,b);if(this.enqueueTiles(e,Y,_,z,0),U>0&&setTimeout(()=>{this.enqueueTiles(e,Y,_-1,z,U-1)},0),!(_ in z))return this.container;const $=De(this),le=e.time;for(const te of z[_]){const he=te.getState();if(he===ge.EMPTY)continue;const I=te.tileCoord;if(he===ge.LOADED&&te.getAlpha($,le)===1){te.endTransition($);continue}if(he!==ge.ERROR&&(this.renderComplete=!1),this.findStaleTile_(I,z)){KN(z,te,_),e.animate=!0;continue}if(this.findAltTiles_(p,I,_+1,z))continue;const re=p.getMinZoom();for(let de=_-1;de>=re&&!this.findAltTiles_(p,I,de,z);--de);}const ie=E/l*f/S,ce=this.getRenderContext(e);Qi(this.tempTransform,R/2,v/2,ie,ie,0,-R/2,-v/2),i.extent&&this.clipUnrotated(ce,e,D),g.getInterpolate()||(ce.imageSmoothingEnabled=!1),this.preRender(ce,e);const fe=Object.keys(z).map(Number);fe.sort(Xs);let ue;const P=[],W=[];for(let te=fe.length-1;te>=0;--te){const he=fe[te],I=g.getTilePixelSize(he,f,a),k=p.getResolution(he)/E,re=I[0]*k*ie,de=I[1]*k*ie,xe=p.getTileCoordForCoordAndZ(qs(B),he),me=p.getTileCoordExtent(xe),Pe=$t(this.tempTransform,[S*(me[0]-B[0])/E,S*(B[3]-me[3])/E]),He=S*g.getGutterForProjection(a);for(const bt of z[he]){if(bt.getState()!==ge.LOADED)continue;const wt=bt.tileCoord,Gi=xe[1]-wt[1],Ts=Math.round(Pe[0]-(Gi-1)*re),Hi=xe[2]-wt[2],hi=Math.round(Pe[1]-(Hi-1)*de),An=Math.round(Pe[0]-Gi*re),Qn=Math.round(Pe[1]-Hi*de),_n=Ts-An,Zs=hi-Qn,Ws=fe.length===1;let es=!1;ue=[An,Qn,An+_n,Qn,An+_n,Qn+Zs,An,Qn+Zs];for(let Xi=0,Qs=P.length;Xi<Qs;++Xi)if(!Ws&&he<W[Xi]){const Bt=P[Xi];oi([An,Qn,An+_n,Qn+Zs],[Bt[0],Bt[3],Bt[4],Bt[7]])&&(es||(ce.save(),es=!0),ce.beginPath(),ce.moveTo(ue[0],ue[1]),ce.lineTo(ue[2],ue[3]),ce.lineTo(ue[4],ue[5]),ce.lineTo(ue[6],ue[7]),ce.moveTo(Bt[6],Bt[7]),ce.lineTo(Bt[4],Bt[5]),ce.lineTo(Bt[2],Bt[3]),ce.lineTo(Bt[0],Bt[1]),ce.clip())}P.push(ue),W.push(he),this.drawTile(bt,e,An,Qn,_n,Zs,He,Ws),es&&ce.restore(),this.renderedTiles.unshift(bt),this.updateUsedTiles(e.usedTiles,g,bt)}}if(this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!fu(this.renderedExtent_,B),this.renderedExtent_=B,this.renderedPixelRatio=f,this.postRender(this.context,e),i.extent&&ce.restore(),ce.imageSmoothingEnabled=!0,this.renderComplete){const te=(he,I)=>{const K=De(g),k=I.wantedTiles[K],re=k?Object.keys(k).length:0;this.updateCacheSize(re),this.tileCache_.expireCache()};e.postRenderFunctions.push(te)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,s,a,l,u,f){let d;if(e instanceof wu){if(d=xl(e.getData()),!d)throw new Error("Rendering array data is not yet supported")}else d=this.getTileImage(e);if(!d)return;const g=this.getRenderContext(t),p=De(this),_=t.layerStatesArray[t.layerIndex],E=_.opacity*(f?e.getAlpha(p,t.time):1),x=E!==g.globalAlpha;x&&(g.save(),g.globalAlpha=E),g.drawImage(d,u,u,d.width-2*u,d.height-2*u,i,s,a,l),x&&g.restore(),E!==_.opacity?t.animate=!0:f&&e.endTransition(p)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const s=De(t);s in e||(e[s]={}),e[s][i.getKey()]=!0}}class Ob extends jA{constructor(e){super(e)}createRenderer(){return new ZN(this,{cacheSize:this.getCacheSize()})}}class $A{drawCustom(e,t,i,s,a){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const ve={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},xf=[ve.FILL],Ur=[ve.STROKE],La=[ve.BEGIN_PATH],Lb=[ve.CLOSE_PATH];class Yu extends $A{constructor(e,t,i,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,a=this.coordinates;let l=a.length;for(let u=0,f=e.length;u<f;u+=t)s[0]=e[u],s[1]=e[u+1],Vr(i,s)&&(a[l++]=s[0],a[l++]=s[1]);return l}appendFlatLineCoordinates(e,t,i,s,a,l){const u=this.coordinates;let f=u.length;const d=this.getBufferedMaxExtent();l&&(t+=s);let g=e[t],p=e[t+1];const _=this.tmpCoordinate_;let E=!0,x,b,S;for(x=t+s;x<i;x+=s)_[0]=e[x],_[1]=e[x+1],S=ty(d,_),S!==b?(E&&(u[f++]=g,u[f++]=p,E=!1),u[f++]=_[0],u[f++]=_[1]):S===fn.INTERSECTING?(u[f++]=_[0],u[f++]=_[1],E=!1):E=!0,g=_[0],p=_[1],b=S;return(a&&E||x===t+s)&&(u[f++]=g,u[f++]=p),f}drawCustomCoordinates_(e,t,i,s,a){for(let l=0,u=i.length;l<u;++l){const f=i[l],d=this.appendFlatLineCoordinates(e,t,f,s,!1,!1);a.push(d),t=f}return t}drawCustom(e,t,i,s,a){this.beginGeometry(e,t,a);const l=e.getType(),u=e.getStride(),f=this.coordinates.length;let d,g,p,_,E;switch(l){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),_=[];const x=e.getEndss();E=0;for(let b=0,S=x.length;b<S;++b){const R=[];E=this.drawCustomCoordinates_(d,E,x[b],u,R),_.push(R)}this.instructions.push([ve.CUSTOM,f,_,e,i,qT,a]),this.hitDetectionInstructions.push([ve.CUSTOM,f,_,e,s||i,qT,a]);break;case"Polygon":case"MultiLineString":p=[],d=l=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),E=this.drawCustomCoordinates_(d,0,e.getEnds(),u,p),this.instructions.push([ve.CUSTOM,f,p,e,i,rd,a]),this.hitDetectionInstructions.push([ve.CUSTOM,f,p,e,s||i,rd,a]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),g=this.appendFlatLineCoordinates(d,0,d.length,u,!1,!1),this.instructions.push([ve.CUSTOM,f,g,e,i,tl,a]),this.hitDetectionInstructions.push([ve.CUSTOM,f,g,e,s||i,tl,a]);break;case"MultiPoint":d=e.getFlatCoordinates(),g=this.appendFlatPointCoordinates(d,u),g>f&&(this.instructions.push([ve.CUSTOM,f,g,e,i,tl,a]),this.hitDetectionInstructions.push([ve.CUSTOM,f,g,e,s||i,tl,a]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),g=this.coordinates.length,this.instructions.push([ve.CUSTOM,f,g,e,i,void 0,a]),this.hitDetectionInstructions.push([ve.CUSTOM,f,g,e,s||i,void 0,a]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[ve.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ve.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let s,a,l=-1;for(t=0;t<i;++t)s=e[t],a=s[0],a==ve.END_GEOMETRY?l=t:a==ve.BEGIN_GEOMETRY&&(s[2]=t,vI(this.hitDetectionInstructions,l,t),l=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Es(i||ai)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Es(i||xu);const s=e.getLineCap();t.lineCap=s!==void 0?s:_l;const a=e.getLineDash();t.lineDash=a?a.slice():js;const l=e.getLineDashOffset();t.lineDashOffset=l||Ys;const u=e.getLineJoin();t.lineJoin=u!==void 0?u:El;const f=e.getWidth();t.lineWidth=f!==void 0?f:Tu;const d=e.getMiterLimit();t.miterLimit=d!==void 0?d:Eu,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[ve.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ve.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,s=e.lineCap,a=e.lineDash,l=e.lineDashOffset,u=e.lineJoin,f=e.lineWidth,d=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||a!=e.currentLineDash&&!ea(e.currentLineDash,a)||e.currentLineDashOffset!=l||e.currentLineJoin!=u||e.currentLineWidth!=f||e.currentMiterLimit!=d)&&(t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=a,e.currentLineDashOffset=l,e.currentLineJoin=u,e.currentLineWidth=f,e.currentMiterLimit=d)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[ve.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=LR(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;zy(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class WN extends Yu{constructor(e,t,i,s){super(e,t,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!Vr(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const s=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length,u=this.appendFlatPointCoordinates(s,a);this.instructions.push([ve.DRAW_IMAGE,l,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ve.DRAW_IMAGE,l,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const s=e.getFlatCoordinates(),a=[];for(let f=0,d=s.length;f<d;f+=e.getStride())(!this.maxExtent||Vr(this.maxExtent,s.slice(f,f+2)))&&a.push(s[f],s[f+1]);const l=this.coordinates.length,u=this.appendFlatPointCoordinates(a,2);this.instructions.push([ve.DRAW_IMAGE,l,u,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ve.DRAW_IMAGE,l,u,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),s=e.getSize(),a=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class QN extends Yu{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinates_(e,t,i,s){const a=this.coordinates.length,l=this.appendFlatLineCoordinates(e,t,i,s,!1,!1),u=[ve.MOVE_TO_LINE_TO,a,l];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i}drawLineString(e,t,i){const s=this.state,a=s.strokeStyle,l=s.lineWidth;if(a===void 0||l===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,js,Ys],La);const u=e.getFlatCoordinates(),f=e.getStride();this.drawFlatCoordinates_(u,0,u.length,f),this.hitDetectionInstructions.push(Ur),this.endGeometry(t)}drawMultiLineString(e,t,i){const s=this.state,a=s.strokeStyle,l=s.lineWidth;if(a===void 0||l===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,js,Ys],La);const u=e.getEnds(),f=e.getFlatCoordinates(),d=e.getStride();let g=0;for(let p=0,_=u.length;p<_;++p)g=this.drawFlatCoordinates_(f,g,u[p],d);this.hitDetectionInstructions.push(Ur),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ur),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ur),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(La)}}class Nb extends Yu{constructor(e,t,i,s){super(e,t,i,s)}drawFlatCoordinatess_(e,t,i,s){const a=this.state,l=a.fillStyle!==void 0,u=a.strokeStyle!==void 0,f=i.length;this.instructions.push(La),this.hitDetectionInstructions.push(La);for(let d=0;d<f;++d){const g=i[d],p=this.coordinates.length,_=this.appendFlatLineCoordinates(e,t,g,s,!0,!u),E=[ve.MOVE_TO_LINE_TO,p,_];this.instructions.push(E),this.hitDetectionInstructions.push(E),u&&(this.instructions.push(Lb),this.hitDetectionInstructions.push(Lb)),t=g}return l&&(this.instructions.push(xf),this.hitDetectionInstructions.push(xf)),u&&(this.instructions.push(Ur),this.hitDetectionInstructions.push(Ur)),t}drawCircle(e,t,i){const s=this.state,a=s.fillStyle,l=s.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ve.SET_FILL_STYLE,ai]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,js,Ys]);const u=e.getFlatCoordinates(),f=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(u,0,u.length,f,!1,!1);const g=[ve.CIRCLE,d];this.instructions.push(La,g),this.hitDetectionInstructions.push(La,g),s.fillStyle!==void 0&&(this.instructions.push(xf),this.hitDetectionInstructions.push(xf)),s.strokeStyle!==void 0&&(this.instructions.push(Ur),this.hitDetectionInstructions.push(Ur)),this.endGeometry(t)}drawPolygon(e,t,i){const s=this.state,a=s.fillStyle,l=s.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ve.SET_FILL_STYLE,ai]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,js,Ys]);const u=e.getEnds(),f=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(f,0,u,d),this.endGeometry(t)}drawMultiPolygon(e,t,i){const s=this.state,a=s.fillStyle,l=s.strokeStyle;if(a===void 0&&l===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([ve.SET_FILL_STYLE,ai]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ve.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,js,Ys]);const u=e.getEndss(),f=e.getOrientedFlatCoordinates(),d=e.getStride();let g=0;for(let p=0,_=u.length;p<_;++p)g=this.drawFlatCoordinatess_(f,g,u[p],d);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,s=t.length;i<s;++i)t[i]=va(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function JN(n,e,t,i,s){const a=[];let l=t,u=0,f=e.slice(t,2);for(;u<n&&l+s<i;){const[d,g]=f.slice(-2),p=e[l+s],_=e[l+s+1],E=Math.sqrt((p-d)*(p-d)+(_-g)*(_-g));if(u+=E,u>=n){const x=(n-u+E)/E,b=Ui(d,p,x),S=Ui(g,_,x);f.push(b,S),a.push(f),f=[b,S],u==n&&(l+=s),u=0}else if(u<n)f.push(e[l+s],e[l+s+1]),l+=s;else{const x=E-u,b=Ui(d,p,x/E),S=Ui(g,_,x/E);f.push(b,S),a.push(f),f=[b,S],u=0,l+=s}}return u>0&&a.push(f),a}function eB(n,e,t,i,s){let a=t,l=t,u=0,f=0,d=t,g,p,_,E,x,b,S,R,v,D;for(p=t;p<i;p+=s){const A=e[p],C=e[p+1];x!==void 0&&(v=A-x,D=C-b,E=Math.sqrt(v*v+D*D),S!==void 0&&(f+=_,g=Math.acos((S*v+R*D)/(_*E)),g>n&&(f>u&&(u=f,a=d,l=p),f=0,d=p-s)),_=E,S=v,R=D),x=A,b=C}return f+=E,f>u?[d,p]:[a,l]}const hd={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class tB extends Yu{constructor(e,t,i,s){super(e,t,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ai]={fillStyle:ai},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const s=this.textFillState_,a=this.textStrokeState_,l=this.textState_;if(this.text_===""||!l||!s&&!a)return;const u=this.coordinates;let f=u.length;const d=e.getType();let g=null,p=e.getStride();if(l.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!oi(this.maxExtent,e.getExtent()))return;let _;if(g=e.getFlatCoordinates(),d=="LineString")_=[g.length];else if(d=="MultiLineString")_=e.getEnds();else if(d=="Polygon")_=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const S=e.getEndss();_=[];for(let R=0,v=S.length;R<v;++R)_.push(S[R][0])}this.beginGeometry(e,t,i);const E=l.repeat,x=E?void 0:l.textAlign;let b=0;for(let S=0,R=_.length;S<R;++S){let v;E?v=JN(E*this.resolution,g,b,_[S],p):v=[g.slice(b,_[S])];for(let D=0,A=v.length;D<A;++D){const C=v[D];let B=0,z=C.length;if(x==null){const Y=eB(l.maxAngle,C,0,C.length,2);B=Y[0],z=Y[1]}for(let Y=B;Y<z;Y+=p)u.push(C[Y],C[Y+1]);const U=u.length;b=_[S],this.drawChars_(f,U),f=U}}this.endGeometry(t)}else{let _=l.overflow?null:[];switch(d){case"Point":case"MultiPoint":g=e.getFlatCoordinates();break;case"LineString":g=e.getFlatMidpoint();break;case"Circle":g=e.getCenter();break;case"MultiLineString":g=e.getFlatMidpoints(),p=2;break;case"Polygon":g=e.getFlatInteriorPoint(),l.overflow||_.push(g[2]/this.resolution),p=3;break;case"MultiPolygon":const A=e.getFlatInteriorPoints();g=[];for(let C=0,B=A.length;C<B;C+=3)l.overflow||_.push(A[C+2]/this.resolution),g.push(A[C],A[C+1]);if(g.length===0)return;p=2;break}const E=this.appendFlatPointCoordinates(g,p);if(E===f)return;if(_&&(E-f)/2!==g.length/p){let A=f/2;_=_.filter((C,B)=>{const z=u[(A+B)*2]===g[B*p]&&u[(A+B)*2+1]===g[B*p+1];return z||--A,z})}this.saveTextStates_();const x=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,b=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(e,t,i);let S=l.padding;if(S!=Oa&&(l.scale[0]<0||l.scale[1]<0)){let A=l.padding[0],C=l.padding[1],B=l.padding[2],z=l.padding[3];l.scale[0]<0&&(C=-C,z=-z),l.scale[1]<0&&(A=-A,B=-B),S=[A,C,B,z]}const R=this.pixelRatio;this.instructions.push([ve.DRAW_IMAGE,f,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,S==Oa?Oa:S.map(function(A){return A*R}),x,b,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]);const v=1/R,D=x?x.slice(0):null;D&&(D[1]=ai),this.hitDetectionInstructions.push([ve.DRAW_IMAGE,f,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[v,v],NaN,this.declutterMode_,this.declutterImageWithText_,S,D,b,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ai:this.fillKey_,this.textOffsetX_,this.textOffsetY_,_]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const a=this.textKey_;a in this.textStates||(this.textStates[a]={font:t.font,textAlign:t.textAlign||Su,justify:t.justify,textBaseline:t.textBaseline||od,scale:t.scale});const l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,s=this.textState_,a=this.strokeKey_,l=this.textKey_,u=this.fillKey_;this.saveTextStates_();const f=this.pixelRatio,d=hd[s.textBaseline],g=this.textOffsetY_*f,p=this.text_,_=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([ve.DRAW_CHARS,e,t,d,s.overflow,u,s.maxAngle,f,g,a,_*f,p,l,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ve.DRAW_CHARS,e,t,d,s.overflow,u&&ai,s.maxAngle,f,g,a,_*f,p,l,1/f,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,s,a;if(!e)this.text_="";else{const l=e.getFill();l?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Es(l.getColor()||ai)):(s=null,this.textFillState_=s);const u=e.getStroke();if(!u)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);const b=u.getLineDash(),S=u.getLineDashOffset(),R=u.getWidth(),v=u.getMiterLimit();a.lineCap=u.getLineCap()||_l,a.lineDash=b?b.slice():js,a.lineDashOffset=S===void 0?Ys:S,a.lineJoin=u.getLineJoin()||El,a.lineWidth=R===void 0?Tu:R,a.miterLimit=v===void 0?Eu:v,a.strokeStyle=Es(u.getColor()||xu)}i=this.textState_;const f=e.getFont()||EA;ML(f);const d=e.getScaleArray();i.overflow=e.getOverflow(),i.font=f,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||od,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Oa,i.scale=d===void 0?[1,1]:d;const g=e.getOffsetX(),p=e.getOffsetY(),_=e.getRotateWithView(),E=e.getKeepUpright(),x=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=p===void 0?0:p,this.textRotateWithView_=_===void 0?!1:_,this.textKeepUpright_=E===void 0?!0:E,this.textRotation_=x===void 0?0:x,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:De(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+De(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const nB={Circle:Nb,Default:Yu,Image:WN,LineString:QN,Polygon:Nb,Text:tB};class iB{constructor(e,t,i,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const s in i){const a=i[s].finish();e[t][s]=a}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let a=s[t];if(a===void 0){const l=nB[t];a=new l(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=a}return a}}function sB(n,e,t,i){let s=n[e],a=n[e+1],l=0;for(let u=e+i;u<t;u+=i){const f=n[u],d=n[u+1];l+=Math.sqrt((f-s)*(f-s)+(d-a)*(d-a)),s=f,a=d}return l}function rB(n,e,t,i,s,a,l,u,f,d,g,p,_=!0){let E=n[e],x=n[e+1],b=0,S=0,R=0,v=0;function D(){b=E,S=x,e+=i,E=n[e],x=n[e+1],v+=R,R=Math.sqrt((E-b)*(E-b)+(x-S)*(x-S))}do D();while(e<t-i&&v+R<a);let A=R===0?0:(a-v)/R;const C=Ui(b,E,A),B=Ui(S,x,A),z=e-i,U=v,Y=a+u*f(d,s,g);for(;e<t-i&&v+R<Y;)D();A=R===0?0:(Y-v)/R;const $=Ui(b,E,A),le=Ui(S,x,A);let ie=!1;if(_)if(p){const W=[C,B,$,le];WR(W,0,4,2,p,W,W),ie=W[0]>W[2]}else ie=C>$;const ce=Math.PI,fe=[],ue=z+i===e;e=z,R=0,v=U,E=n[e],x=n[e+1];let P;if(ue){D(),P=Math.atan2(x-S,E-b),ie&&(P+=P>0?-ce:ce);const W=($+C)/2,te=(le+B)/2;return fe[0]=[W,te,(Y-a)/2,P,s],fe}s=s.replace(/\n/g," ");for(let W=0,te=s.length;W<te;){D();let he=Math.atan2(x-S,E-b);if(ie&&(he+=he>0?-ce:ce),P!==void 0){let xe=he-P;if(xe+=xe>ce?-2*ce:xe<-ce?2*ce:0,Math.abs(xe)>l)return null}P=he;const I=W;let K=0;for(;W<te;++W){const xe=ie?te-W-1:W,me=u*f(d,s[xe],g);if(e+i<t&&v+R<a+K+me/2)break;K+=me}if(W===I)continue;const k=ie?s.substring(te-I,te-W):s.substring(I,W);A=R===0?0:(a+K/2-v)/R;const re=Ui(b,E,A),de=Ui(S,x,A);fe.push([re,de,K/2,he,k]),a+=K}return fe}const Go=bi(),Rr=[],ks=[],zs=[],Ar=[];function Bb(n){return n[3].declutterBox}const Pb=new RegExp("[-----]");function j0(n,e){return e==="start"?e=Pb.test(n)?"right":"left":e==="end"&&(e=Pb.test(n)?"left":"right"),hd[e]}function aB(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function oB(n,e,t){return t%2===0&&(n+=e),n}class lB{constructor(e,t,i,s,a){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=zn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=a?new VA:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,s){const a=e+t+i+s;if(this.labels_[a])return this.labels_[a];const l=s?this.strokeStates[s]:null,u=i?this.fillStates[i]:null,f=this.textStates[t],d=this.pixelRatio,g=[f.scale[0]*d,f.scale[1]*d],p=f.justify?hd[f.justify]:j0(Array.isArray(e)?e[0]:e,f.textAlign||Su),_=s&&l.lineWidth?l.lineWidth:0,E=Array.isArray(e)?e:String(e).split(`
`).reduce(aB,[]),{width:x,height:b,widths:S,heights:R,lineWidths:v}=IL(f,E),D=x+_,A=[],C=(D+2)*g[0],B=(b+_)*g[1],z={width:C<0?Math.floor(C):Math.ceil(C),height:B<0?Math.floor(B):Math.ceil(B),contextInstructions:A};(g[0]!=1||g[1]!=1)&&A.push("scale",g),s&&(A.push("strokeStyle",l.strokeStyle),A.push("lineWidth",_),A.push("lineCap",l.lineCap),A.push("lineJoin",l.lineJoin),A.push("miterLimit",l.miterLimit),A.push("setLineDash",[l.lineDash]),A.push("lineDashOffset",l.lineDashOffset)),i&&A.push("fillStyle",u.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");const U=.5-p;let Y=p*D+U*_;const $=[],le=[];let ie=0,ce=0,fe=0,ue=0,P;for(let W=0,te=E.length;W<te;W+=2){const he=E[W];if(he===`
`){ce+=ie,ie=0,Y=p*D+U*_,++ue;continue}const I=E[W+1]||f.font;I!==P&&(s&&$.push("font",I),i&&le.push("font",I),P=I),ie=Math.max(ie,R[fe]);const K=[he,Y+U*S[fe]+p*(S[fe]-v[ue]),.5*(_+ie)+ce];Y+=S[fe],s&&$.push("strokeText",K),i&&le.push("fillText",K),++fe}return Array.prototype.push.apply(A,$),Array.prototype.push.apply(A,le),this.labels_[a]=z,z}replayTextBackground_(e,t,i,s,a,l,u){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,a),e.lineTo.apply(e,t),l&&(this.alignAndScaleFill_=l[2],e.fillStyle=l[1],this.fill_(e)),u&&(this.setStrokeStyle_(e,u),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,s,a,l,u,f,d,g,p,_,E,x,b,S){u*=_[0],f*=_[1];let R=i-u,v=s-f;const D=a+d>e?e-d:a,A=l+g>t?t-g:l,C=x[3]+D*_[0]+x[1],B=x[0]+A*_[1]+x[2],z=R-x[3],U=v-x[0];(b||p!==0)&&(Rr[0]=z,Ar[0]=z,Rr[1]=U,ks[1]=U,ks[0]=z+C,zs[0]=ks[0],zs[1]=U+B,Ar[1]=zs[1]);let Y;return p!==0?(Y=Qi(zn(),i,s,1,1,p,-i,-s),$t(Y,Rr),$t(Y,ks),$t(Y,zs),$t(Y,Ar),Vs(Math.min(Rr[0],ks[0],zs[0],Ar[0]),Math.min(Rr[1],ks[1],zs[1],Ar[1]),Math.max(Rr[0],ks[0],zs[0],Ar[0]),Math.max(Rr[1],ks[1],zs[1],Ar[1]),Go)):Vs(Math.min(z,z+C),Math.min(U,U+B),Math.max(z,z+C),Math.max(U,U+B),Go),E&&(R=Math.round(R),v=Math.round(v)),{drawImageX:R,drawImageY:v,drawImageW:D,drawImageH:A,originX:d,originY:g,declutterBox:{minX:Go[0],minY:Go[1],maxX:Go[2],maxY:Go[3],value:S},canvasTransform:Y,scale:_}}replayImageOrLabel_(e,t,i,s,a,l,u){const f=!!(l||u),d=s.declutterBox,g=u?u[2]*s.scale[0]/2:0;return d.minX-g<=t[0]&&d.maxX+g>=0&&d.minY-g<=t[1]&&d.maxY+g>=0&&(f&&this.replayTextBackground_(e,Rr,ks,zs,Ar,l,u),OL(e,s.canvasTransform,a,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=$t(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(i[0]%s,i[1]%s),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,i,s){const a=this.textStates[t],l=this.createLabel(e,t,s,i),u=this.strokeStates[i],f=this.pixelRatio,d=j0(Array.isArray(e)?e[0]:e,a.textAlign||Su),g=hd[a.textBaseline||od],p=u&&u.lineWidth?u.lineWidth:0,_=l.width/f-2*a.scale[0],E=d*_+2*(.5-d)*p,x=g*l.height/f+2*(.5-g)*p;return{label:l,anchorX:E,anchorY:x}}execute_(e,t,i,s,a,l,u,f){const d=this.zIndexContext_;let g;this.pixelCoordinates_&&ea(i,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=Gr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),AO(this.renderedTransform_,i));let p=0;const _=s.length;let E=0,x,b,S,R,v,D,A,C,B,z,U,Y,$,le=0,ie=0;const ce=this.coordinateCache_,fe=this.viewRotation_,ue=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,P={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:fe},W=this.instructions!=s||this.overlaps?0:200;let te,he,I,K;for(;p<_;){const k=s[p];switch(k[0]){case ve.BEGIN_GEOMETRY:te=k[1],K=k[3],te.getGeometry()?u!==void 0&&!oi(u,K.getExtent())?p=k[2]+1:++p:p=k[2],d&&(d.zIndex=k[4]);break;case ve.BEGIN_PATH:le>W&&(this.fill_(e),le=0),ie>W&&(e.stroke(),ie=0),!le&&!ie&&(e.beginPath(),v=NaN,D=NaN),++p;break;case ve.CIRCLE:E=k[1];const de=g[E],xe=g[E+1],me=g[E+2],Pe=g[E+3],He=me-de,bt=Pe-xe,wt=Math.sqrt(He*He+bt*bt);e.moveTo(de+wt,xe),e.arc(de,xe,wt,0,2*Math.PI,!0),++p;break;case ve.CLOSE_PATH:e.closePath(),++p;break;case ve.CUSTOM:E=k[1],x=k[2];const Gi=k[3],Ts=k[4],Hi=k[5];P.geometry=Gi,P.feature=te,p in ce||(ce[p]=[]);const hi=ce[p];Hi?Hi(g,E,x,2,hi):(hi[0]=g[E],hi[1]=g[E+1],hi.length=2),d&&(d.zIndex=k[6]),Ts(hi,P),++p;break;case ve.DRAW_IMAGE:E=k[1],x=k[2],B=k[3],b=k[4],S=k[5];let An=k[6];const Qn=k[7],_n=k[8],Zs=k[9],Ws=k[10];let es=k[11];const Xi=k[12];let Qs=k[13];R=k[14]||"declutter";const Bt=k[15];if(!B&&k.length>=20){z=k[19],U=k[20],Y=k[21],$=k[22];const Gn=this.drawLabelWithPointPlacement_(z,U,Y,$);B=Gn.label,k[3]=B;const Yi=k[23];b=(Gn.anchorX-Yi)*this.pixelRatio,k[4]=b;const Mn=k[24];S=(Gn.anchorY-Mn)*this.pixelRatio,k[5]=S,An=B.height,k[6]=An,Qs=B.width,k[13]=Qs}let Ul;k.length>25&&(Ul=k[25]);let kl,ts,nn;k.length>17?(kl=k[16],ts=k[17],nn=k[18]):(kl=Oa,ts=null,nn=null),Ws&&ue?es+=fe:!Ws&&!ue&&(es-=fe);let ns=0;for(;E<x;E+=2){if(Ul&&Ul[ns++]<Qs/this.pixelRatio)continue;const Gn=this.calculateImageOrLabelDimensions_(B.width,B.height,g[E],g[E+1],Qs,An,b,S,_n,Zs,es,Xi,a,kl,!!ts||!!nn,te),Yi=[e,t,B,Gn,Qn,ts,nn];if(f){let Mn,fi,Jn;if(Bt){const Ye=x-E;if(!Bt[Ye]){Bt[Ye]={args:Yi,declutterMode:R};continue}const Dt=Bt[Ye];Mn=Dt.args,fi=Dt.declutterMode,delete Bt[Ye],Jn=Bb(Mn)}let sn,_t;if(Mn&&(fi!=="declutter"||!f.collides(Jn))&&(sn=!0),(R!=="declutter"||!f.collides(Gn.declutterBox))&&(_t=!0),fi==="declutter"&&R==="declutter"){const Ye=sn&&_t;sn=Ye,_t=Ye}sn&&(fi!=="none"&&f.insert(Jn),this.replayImageOrLabel_.apply(this,Mn)),_t&&(R!=="none"&&f.insert(Gn.declutterBox),this.replayImageOrLabel_.apply(this,Yi))}else this.replayImageOrLabel_.apply(this,Yi)}++p;break;case ve.DRAW_CHARS:const Cn=k[1],$u=k[2],zl=k[3],ng=k[4];$=k[5];const qa=k[6],ia=k[7],is=k[8];Y=k[9];const Js=k[10];z=k[11],Array.isArray(z)&&(z=z.reduce(oB,"")),U=k[12];const er=[k[13],k[13]];R=k[14]||"declutter";const ig=k[15],$a=this.textStates[U],tr=$a.font,bs=[$a.scale[0]*ia,$a.scale[1]*ia];let ji;tr in this.widths_?ji=this.widths_[tr]:(ji={},this.widths_[tr]=ji);const Ku=sB(g,Cn,$u,2),Gl=Math.abs(bs[0])*cb(tr,z,ji);if(ng||Gl<=Ku){const Gn=this.textStates[U].textAlign,Yi=(Ku-Gl)*j0(z,Gn),Mn=rB(g,Cn,$u,2,z,Yi,qa,Math.abs(bs[0]),cb,tr,ji,ue?0:this.viewRotation_,ig);e:if(Mn){const fi=[];let Jn,sn,_t,Ye,Dt;if(Y)for(Jn=0,sn=Mn.length;Jn<sn;++Jn){Dt=Mn[Jn],_t=Dt[4],Ye=this.createLabel(_t,U,"",Y),b=Dt[2]+(bs[0]<0?-Js:Js),S=zl*Ye.height+(.5-zl)*2*Js*bs[1]/bs[0]-is;const di=this.calculateImageOrLabelDimensions_(Ye.width,Ye.height,Dt[0],Dt[1],Ye.width,Ye.height,b,S,0,0,Dt[3],er,!1,Oa,!1,te);if(f&&R==="declutter"&&f.collides(di.declutterBox))break e;fi.push([e,t,Ye,di,1,null,null])}if($)for(Jn=0,sn=Mn.length;Jn<sn;++Jn){Dt=Mn[Jn],_t=Dt[4],Ye=this.createLabel(_t,U,$,""),b=Dt[2],S=zl*Ye.height-is;const di=this.calculateImageOrLabelDimensions_(Ye.width,Ye.height,Dt[0],Dt[1],Ye.width,Ye.height,b,S,0,0,Dt[3],er,!1,Oa,!1,te);if(f&&R==="declutter"&&f.collides(di.declutterBox))break e;fi.push([e,t,Ye,di,1,null,null])}f&&R!=="none"&&f.load(fi.map(Bb));for(let di=0,sg=fi.length;di<sg;++di)this.replayImageOrLabel_.apply(this,fi[di])}}++p;break;case ve.END_GEOMETRY:if(l!==void 0){te=k[1];const Gn=l(te,K,R);if(Gn)return Gn}++p;break;case ve.FILL:W?le++:this.fill_(e),++p;break;case ve.MOVE_TO_LINE_TO:for(E=k[1],x=k[2],he=g[E],I=g[E+1],e.moveTo(he,I),v=he+.5|0,D=I+.5|0,E+=2;E<x;E+=2)he=g[E],I=g[E+1],A=he+.5|0,C=I+.5|0,(E==x-2||A!==v||C!==D)&&(e.lineTo(he,I),v=A,D=C);++p;break;case ve.SET_FILL_STYLE:this.alignAndScaleFill_=k[2],le&&(this.fill_(e),le=0,ie&&(e.stroke(),ie=0)),e.fillStyle=k[1],++p;break;case ve.SET_STROKE_STYLE:ie&&(e.stroke(),ie=0),this.setStrokeStyle_(e,k),++p;break;case ve.STROKE:W?ie++:e.stroke(),++p;break;default:++p;break}}le&&this.fill_(e),ie&&e.stroke()}execute(e,t,i,s,a,l){this.viewRotation_=s,this.execute_(e,t,i,this.instructions,a,void 0,void 0,l)}executeHitDetection(e,t,i,s,a){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,a)}}const Ra=["Polygon","Circle","LineString","Image","Text","Default"],KA=["Image","Text"],cB=Ra.filter(n=>!KA.includes(n));class uB{constructor(e,t,i,s,a,l,u){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=l,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=zn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(a,u)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let s=this.executorsByZIndex_[i];s===void 0&&(s={},this.executorsByZIndex_[i]=s);const a=e[i];for(const l in a){const u=a[l];s[l]=new lB(this.resolution_,this.pixelRatio_,this.overlaps_,u,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let s=0,a=e.length;s<a;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,s,a,l){s=Math.round(s);const u=s*2+1,f=Qi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-i,-e[0],-e[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=Nt(u,u));const g=this.hitDetectionContext_;g.canvas.width!==u||g.canvas.height!==u?(g.canvas.width=u,g.canvas.height=u):d||g.clearRect(0,0,u,u);let p;this.renderBuffer_!==void 0&&(p=bi(),eu(p,e),zy(p,t*(this.renderBuffer_+s),p));const _=hB(s);let E;function x(C,B,z){const U=g.getImageData(0,0,u,u).data;for(let Y=0,$=_.length;Y<$;Y++)if(U[_[Y]]>0){if(!l||z==="none"||E!=="Image"&&E!=="Text"||l.includes(C)){const le=(_[Y]-3)/4,ie=s-le%u,ce=s-(le/u|0),fe=a(C,B,ie*ie+ce*ce);if(fe)return fe}g.clearRect(0,0,u,u);break}}const b=Object.keys(this.executorsByZIndex_).map(Number);b.sort(Xs);let S,R,v,D,A;for(S=b.length-1;S>=0;--S){const C=b[S].toString();for(v=this.executorsByZIndex_[C],R=Ra.length-1;R>=0;--R)if(E=Ra[R],D=v[E],D!==void 0&&(A=D.executeHitDetection(g,f,i,x,p),A))return A}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],s=t[1],a=t[2],l=t[3],u=[i,s,i,l,a,l,a,s];return Gr(u,0,8,2,e,u),u}isEmpty(){return ml(this.executorsByZIndex_)}execute(e,t,i,s,a,l,u){const f=Object.keys(this.executorsByZIndex_).map(Number);f.sort(u?AR:Xs),l=l||Ra;const d=Ra.length;for(let g=0,p=f.length;g<p;++g){const _=f[g].toString(),E=this.executorsByZIndex_[_];for(let x=0,b=l.length;x<b;++x){const S=l[x],R=E[S];if(R!==void 0){const v=u===null?void 0:R.getZIndexContext(),D=v?v.getContext():e,A=this.maxExtent_&&S!=="Image"&&S!=="Text";if(A&&(D.save(),this.clip(D,i)),!v||S==="Text"||S==="Image"?R.execute(D,t,i,s,a,u):v.pushFunction(C=>R.execute(C,t,i,s,a,u)),A&&D.restore(),v){v.offset();const C=f[g]*d+Ra.indexOf(S);this.deferredZIndexContexts_[C]||(this.deferredZIndexContexts_[C]=[]),this.deferredZIndexContexts_[C].push(v)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Xs);for(let i=0,s=t.length;i<s;++i)e[t[i]].forEach(a=>{a.draw(this.renderedContext_),a.clear()}),e[t[i]].length=0}}const Y0={};function hB(n){if(Y0[n]!==void 0)return Y0[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let a=0;a<=n;++a)for(let l=0;l<=n;++l){const u=a*a+l*l;if(u>t)break;let f=i[u];f||(f=[],i[u]=f),f.push(((n+a)*e+(n+l))*4+3),a>0&&f.push(((n-a)*e+(n+l))*4+3),l>0&&(f.push(((n+a)*e+(n-l))*4+3),a>0&&f.push(((n-a)*e+(n-l))*4+3))}const s=[];for(let a=0,l=i.length;a<l;++a)i[a]&&s.push(...i[a]);return Y0[n]=s,s}class fB extends $A{constructor(e,t,i,s,a,l,u){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=s,this.transformRotation_=s?Ad(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=a,this.squaredTolerance_=l,this.userTransform_=u,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=zn()}drawImages_(e,t,i,s){if(!this.image_)return;const a=Gr(e,t,i,s,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.tmpLocalTransform_,f=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=f*this.imageOpacity_);let d=this.imageRotation_;this.transformRotation_===0&&(d-=this.viewRotation_),this.imageRotateWithView_&&(d+=this.viewRotation_);for(let g=0,p=a.length;g<p;g+=2){const _=a[g]-this.imageAnchorX_,E=a[g+1]-this.imageAnchorY_;if(d!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const x=_+this.imageAnchorX_,b=E+this.imageAnchorY_;Qi(u,x,b,1,1,d,-x,-b),l.save(),l.transform.apply(l,u),l.translate(x,b),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.restore()}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,_,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=f)}drawText_(e,t,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const a=Gr(e,t,i,s,this.transform_,this.pixelCoordinates_),l=this.context_;let u=this.textRotation_;for(this.transformRotation_===0&&(u-=this.viewRotation_),this.textRotateWithView_&&(u+=this.viewRotation_);t<i;t+=s){const f=a[t]+this.textOffsetX_,d=a[t+1]+this.textOffsetY_;u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(l.save(),l.translate(f-this.textOffsetX_,d-this.textOffsetY_),l.rotate(u),l.translate(this.textOffsetX_,this.textOffsetY_),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.restore()):(this.textStrokeState_&&l.strokeText(this.text_,f,d),this.textFillState_&&l.fillText(this.text_,f,d))}}moveToLineTo_(e,t,i,s,a){const l=this.context_,u=Gr(e,t,i,s,this.transform_,this.pixelCoordinates_);l.moveTo(u[0],u[1]);let f=u.length;a&&(f-=2);for(let d=2;d<f;d+=2)l.lineTo(u[d],u[d+1]);return a&&l.closePath(),i}drawRings_(e,t,i,s){for(let a=0,l=i.length;a<l;++a)t=this.moveToLineTo_(e,t,i[a],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oi(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=kO(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],s=t[3]-t[1],a=Math.sqrt(i*i+s*s),l=this.context_;l.beginPath(),l.arc(t[0],t[1],a,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,s=t.length;i<s;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oi(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(oi(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let a=0;const l=e.getEnds(),u=e.getStride();i.beginPath();for(let f=0,d=l.length;f<d;++f)a=this.moveToLineTo_(s,a,l[f],u,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oi(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const a=e.getEndss(),l=e.getStride();t.beginPath();for(let u=0,f=a.length;u<f;++u){const d=a[u];s=this.drawRings_(i,s,d,l)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),ea(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:Su;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=s&&(i.textAlign=s,t.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Es(i||ai)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),s=t.getLineCap(),a=t.getLineDash(),l=t.getLineDashOffset(),u=t.getLineJoin(),f=t.getWidth(),d=t.getMiterLimit(),g=a||js;this.strokeState_={lineCap:s!==void 0?s:_l,lineDash:this.pixelRatio_===1?g:g.map(p=>p*this.pixelRatio_),lineDashOffset:(l||Ys)*this.pixelRatio_,lineJoin:u!==void 0?u:El,lineWidth:(f!==void 0?f:Tu)*this.pixelRatio_,miterLimit:d!==void 0?d:Eu,strokeStyle:Es(i||xu)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),a=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const l=e.getScaleArray();this.imageScale_=[l[0]*this.pixelRatio_/i,l[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const E=t.getColor();this.textFillState_={fillStyle:Es(E||ai)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const E=i.getColor(),x=i.getLineCap(),b=i.getLineDash(),S=i.getLineDashOffset(),R=i.getLineJoin(),v=i.getWidth(),D=i.getMiterLimit();this.textStrokeState_={lineCap:x!==void 0?x:_l,lineDash:b||js,lineDashOffset:S||Ys,lineJoin:R!==void 0?R:El,lineWidth:v!==void 0?v:Tu,miterLimit:D!==void 0?D:Eu,strokeStyle:Es(E||xu)}}const s=e.getFont(),a=e.getOffsetX(),l=e.getOffsetY(),u=e.getRotateWithView(),f=e.getRotation(),d=e.getScaleArray(),g=e.getText(),p=e.getTextAlign(),_=e.getTextBaseline();this.textState_={font:s!==void 0?s:EA,textAlign:p!==void 0?p:Su,textBaseline:_!==void 0?_:od},this.text_=g!==void 0?Array.isArray(g)?g.reduce((E,x,b)=>E+=b%2?" ":x,""):g:"",this.textOffsetX_=a!==void 0?this.pixelRatio_*a:0,this.textOffsetY_=l!==void 0?this.pixelRatio_*l:0,this.textRotateWithView_=u!==void 0?u:!1,this.textRotation_=f!==void 0?f:0,this.textScale_=[this.pixelRatio_*d[0],this.pixelRatio_*d[1]]}}}const ps=.5;function dB(n,e,t,i,s,a,l,u,f){const d=s,g=n[0]*ps,p=n[1]*ps,_=Nt(g,p);_.imageSmoothingEnabled=!1;const E=_.canvas,x=new fB(_,ps,s,null,l,u,null),b=t.length,S=Math.floor((256*256*256-1)/b),R={};for(let D=1;D<=b;++D){const A=t[D-1],C=A.getStyleFunction()||i;if(!C)continue;let B=C(A,a);if(!B)continue;Array.isArray(B)||(B=[B]);const U=(D*S).toString(16).padStart(7,"#00000");for(let Y=0,$=B.length;Y<$;++Y){const le=B[Y],ie=le.getGeometryFunction()(A);if(!ie||!oi(d,ie.getExtent()))continue;const ce=le.clone(),fe=ce.getFill();fe&&fe.setColor(U);const ue=ce.getStroke();ue&&(ue.setColor(U),ue.setLineDash(null)),ce.setText(void 0);const P=le.getImage();if(P){const I=P.getImageSize();if(!I)continue;const K=Nt(I[0],I[1],void 0,{alpha:!1}),k=K.canvas;K.fillStyle=U,K.fillRect(0,0,k.width,k.height),ce.setImage(new Hd({img:k,anchor:P.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:P.getOrigin(),opacity:1,size:P.getSize(),scale:P.getScale(),rotation:P.getRotation(),rotateWithView:P.getRotateWithView()}))}const W=ce.getZIndex()||0;let te=R[W];te||(te={},R[W]=te,te.Polygon=[],te.Circle=[],te.LineString=[],te.Point=[]);const he=ie.getType();if(he==="GeometryCollection"){const I=ie.getGeometriesArrayRecursive();for(let K=0,k=I.length;K<k;++K){const re=I[K];te[re.getType().replace("Multi","")].push(re,ce)}}else te[he.replace("Multi","")].push(ie,ce)}}const v=Object.keys(R).map(Number).sort(Xs);for(let D=0,A=v.length;D<A;++D){const C=R[v[D]];for(const B in C){const z=C[B];for(let U=0,Y=z.length;U<Y;U+=2){x.setStyle(z[U+1]);for(let $=0,le=e.length;$<le;++$)x.setTransform(e[$]),x.drawGeometry(z[U])}}}return _.getImageData(0,0,E.width,E.height)}function gB(n,e,t){const i=[];if(t){const s=Math.floor(Math.round(n[0])*ps),a=Math.floor(Math.round(n[1])*ps),l=(Tt(s,0,t.width-1)+Tt(a,0,t.height-1)*t.width)*4,u=t.data[l],f=t.data[l+1],g=t.data[l+2]+256*(f+256*u),p=Math.floor((256*256*256-1)/e.length);g&&g%p===0&&i.push(e[g/p-1])}return i}const mB=.5,ZA={Point:bB,LineString:xB,Polygon:wB,MultiPoint:vB,MultiLineString:SB,MultiPolygon:TB,GeometryCollection:EB,Circle:yB};function pB(n,e){return parseInt(De(n),10)-parseInt(De(e),10)}function Fb(n,e){const t=WA(n,e);return t*t}function WA(n,e){return mB*n/e}function yB(n,e,t,i,s){const a=t.getFill(),l=t.getStroke();if(a||l){const f=n.getBuilder(t.getZIndex(),"Circle");f.setFillStrokeStyle(a,l),f.drawCircle(e,i,s)}const u=t.getText();if(u&&u.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(u),f.drawText(e,i)}}function Ub(n,e,t,i,s,a,l,u){const f=[],d=t.getImage();if(d){let _=!0;const E=d.getImageState();E==Ge.LOADED||E==Ge.ERROR?_=!1:E==Ge.IDLE&&d.load(),_&&f.push(d.ready())}const g=t.getFill();g&&g.loading()&&f.push(g.ready());const p=f.length>0;return p&&Promise.all(f).then(()=>s(null)),_B(n,e,t,i,a,l,u),p}function _B(n,e,t,i,s,a,l){const u=t.getGeometryFunction()(e);if(!u)return;const f=u.simplifyTransformed(i,s);if(t.getRenderer())QA(n,f,t,e,l);else{const g=ZA[f.getType()];g(n,f,t,e,l,a)}}function QA(n,e,t,i,s){if(e.getType()=="GeometryCollection"){const l=e.getGeometries();for(let u=0,f=l.length;u<f;++u)QA(n,l[u],t,i,s);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),s)}function EB(n,e,t,i,s,a){const l=e.getGeometriesArray();let u,f;for(u=0,f=l.length;u<f;++u){const d=ZA[l[u].getType()];d(n,l[u],t,i,s,a)}}function xB(n,e,t,i,s){const a=t.getStroke();if(a){const u=n.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,a),u.drawLineString(e,i,s)}const l=t.getText();if(l&&l.getText()){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i,s)}}function SB(n,e,t,i,s){const a=t.getStroke();if(a){const u=n.getBuilder(t.getZIndex(),"LineString");u.setFillStrokeStyle(null,a),u.drawMultiLineString(e,i,s)}const l=t.getText();if(l&&l.getText()){const u=n.getBuilder(t.getZIndex(),"Text");u.setTextStyle(l),u.drawText(e,i,s)}}function TB(n,e,t,i,s){const a=t.getFill(),l=t.getStroke();if(l||a){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(a,l),f.drawMultiPolygon(e,i,s)}const u=t.getText();if(u&&u.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(u),f.drawText(e,i,s)}}function bB(n,e,t,i,s,a){const l=t.getImage(),u=t.getText(),f=u&&u.getText(),d=a&&l&&f?{}:void 0;if(l){if(l.getImageState()!=Ge.LOADED)return;const g=n.getBuilder(t.getZIndex(),"Image");g.setImageStyle(l,d),g.drawPoint(e,i,s)}if(f){const g=n.getBuilder(t.getZIndex(),"Text");g.setTextStyle(u,d),g.drawText(e,i,s)}}function vB(n,e,t,i,s,a){const l=t.getImage(),u=l&&l.getOpacity()!==0,f=t.getText(),d=f&&f.getText(),g=a&&u&&d?{}:void 0;if(u){if(l.getImageState()!=Ge.LOADED)return;const p=n.getBuilder(t.getZIndex(),"Image");p.setImageStyle(l,g),p.drawMultiPoint(e,i,s)}if(d){const p=n.getBuilder(t.getZIndex(),"Text");p.setTextStyle(f,g),p.drawText(e,i,s)}}function wB(n,e,t,i,s){const a=t.getFill(),l=t.getStroke();if(a||l){const f=n.getBuilder(t.getZIndex(),"Polygon");f.setFillStrokeStyle(a,l),f.drawPolygon(e,i,s)}const u=t.getText();if(u&&u.getText()){const f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(u),f.drawText(e,i,s)}}class RB extends qA{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=bi(),this.wrappedRenderedExtent_=bi(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const s=t.extent,a=t.viewState,l=a.center,u=a.resolution,f=a.projection,d=a.rotation,g=f.getExtent(),p=this.getLayer().getSource(),_=this.getLayer().getDeclutter(),E=t.pixelRatio,x=t.viewHints,b=!(x[Fn.ANIMATING]||x[Fn.INTERACTING]),S=this.context,R=Math.round(tt(s)/u*E),v=Math.round(gn(s)/u*E),D=p.getWrapX()&&f.canWrapX(),A=D?tt(g):null,C=D?Math.ceil((s[2]-g[2])/A)+1:1;let B=D?Math.floor((s[0]-g[0])/A):0;do{let z=this.getRenderTransform(l,u,0,E,R,v,B*A);t.declutter&&(z=z.slice(0)),e.execute(S,[S.canvas.width,S.canvas.height],z,d,b,i===void 0?Ra:i?KA:cB,i?_&&t.declutter[_]:void 0)}while(++B<C)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Nt(this.context.canvas.width,this.context.canvas.height,Db))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Pd(this.context),Db.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const s=e.viewState;this.prepareContainer(e,t);const a=this.context,l=this.replayGroup_;let u=l&&!l.isEmpty();if(!u&&!(this.getLayer().hasListener(dn.PRERENDER)||this.getLayer().hasListener(dn.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(a,e),s.projection,this.clipped_=!1,u&&i.extent&&this.clipping){const f=_s(i.extent);u=oi(f,e.extent),this.clipped_=u&&!qc(f,e.extent),this.clipped_&&this.clipUnrotated(a,e,f)}return u&&this.renderWorlds(l,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&a.restore(),this.postRender(a,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),s=this.renderedCenter_,a=this.renderedResolution_,l=this.renderedRotation_,u=this.renderedProjection_,f=this.wrappedRenderedExtent_,d=this.getLayer(),g=[],p=i[0]*ps,_=i[1]*ps;g.push(this.getRenderTransform(s,a,l,ps,p,_,0).slice());const E=d.getSource(),x=u.getExtent();if(E.getWrapX()&&u.canWrapX()&&!qc(x,f)){let b=f[0];const S=tt(x);let R=0,v;for(;b<x[0];)--R,v=S*R,g.push(this.getRenderTransform(s,a,l,ps,p,_,v).slice()),b+=S;for(R=0,b=f[2];b>x[2];)++R,v=S*R,g.push(this.getRenderTransform(s,a,l,ps,p,_,v).slice()),b-=S}this.hitDetectionImageData_=dB(i,g,this.renderedFeatures_,d.getStyleFunction(),f,a,l,Fb(a,this.renderedPixelRatio_))}t(gB(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,s,a){if(!this.replayGroup_)return;const l=t.viewState.resolution,u=t.viewState.rotation,f=this.getLayer(),d={},g=function(_,E,x){const b=De(_),S=d[b];if(S){if(S!==!0&&x<S.distanceSq){if(x===0)return d[b]=!0,a.splice(a.lastIndexOf(S),1),s(_,f,E);S.geometry=E,S.distanceSq=x}}else{if(x===0)return d[b]=!0,s(_,f,E);a.push(d[b]={feature:_,layer:f,geometry:E,distanceSq:x,callback:s})}},p=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,l,u,i,g,p?t.declutter?.[p]?.all().map(_=>_.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const s=e.viewHints[Fn.ANIMATING],a=e.viewHints[Fn.INTERACTING],l=t.getUpdateWhileAnimating(),u=t.getUpdateWhileInteracting();if(this.ready&&!l&&s||!u&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=e.extent,d=e.viewState,g=d.projection,p=d.resolution,_=e.pixelRatio,E=t.getRevision(),x=t.getRenderBuffer();let b=t.getRenderOrder();b===void 0&&(b=pB);const S=d.center.slice(),R=zy(f,x*p),v=R.slice(),D=[R.slice()],A=g.getExtent();if(i.getWrapX()&&g.canWrapX()&&!qc(A,e.extent)){const fe=tt(A),ue=Math.max(tt(R)/2,fe);R[0]=A[0]-ue,R[2]=A[2]+ue,GR(S,g);const P=zR(D[0],g);P[0]<A[0]&&P[2]<A[2]?D.push([P[0]+fe,P[1],P[2]+fe,P[3]]):P[0]>A[0]&&P[2]>A[2]&&D.push([P[0]-fe,P[1],P[2]-fe,P[3]])}if(this.ready&&this.renderedResolution_==p&&this.renderedRevision_==E&&this.renderedRenderOrder_==b&&this.renderedFrameDeclutter_===!!e.declutter&&qc(this.wrappedRenderedExtent_,R))return ea(this.renderedExtent_,v)||(this.hitDetectionImageData_=null,this.renderedExtent_=v),this.renderedCenter_=S,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const C=new iB(WA(p,_),R,p,_);let B;for(let fe=0,ue=D.length;fe<ue;++fe)i.loadFeatures(D[fe],p,g);const z=Fb(p,_);let U=!0;const Y=(fe,ue)=>{let P;const W=fe.getStyleFunction()||t.getStyleFunction();if(W&&(P=W(fe,p)),P){const te=this.renderFeature(fe,z,P,C,B,this.getLayer().getDeclutter(),ue);U=U&&!te}},$=Zy(R),le=i.getFeaturesInExtent($);b&&le.sort(b);for(let fe=0,ue=le.length;fe<ue;++fe)Y(le[fe],fe);this.renderedFeatures_=le,this.ready=U;const ie=C.finish(),ce=new uB(R,p,_,i.getOverlaps(),ie,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=p,this.renderedRevision_=E,this.renderedRenderOrder_=b,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=v,this.wrappedRenderedExtent_=R,this.renderedCenter_=S,this.renderedProjection_=g,this.renderedPixelRatio_=_,this.replayGroup_=ce,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,s,a,l,u){if(!i)return!1;let f=!1;if(Array.isArray(i))for(let d=0,g=i.length;d<g;++d)f=Ub(s,e,i[d],t,this.boundHandleStyleImageChange_,a,l,u)||f;else f=Ub(s,e,i,t,this.boundHandleStyleImageChange_,a,l,u);return f}}class AB extends AA{constructor(e){super(e)}createRenderer(){return new RB(this)}}function vn(n){return(e,...t)=>CB(n,e,t)}function Nl(n,e){return vn(JA(n,e).get)}const{apply:CB,getOwnPropertyDescriptor:JA,getPrototypeOf:R_,ownKeys:MB}=Reflect,{iterator:Vu,toStringTag:DB}=Symbol,IB=Object,{create:A_,defineProperty:OB}=IB,LB=Array,NB=LB.prototype,eC=NB[Vu],BB=vn(eC),tC=ArrayBuffer,PB=tC.prototype;Nl(PB,"byteLength");const kb=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;kb&&Nl(kb.prototype,"byteLength");const nC=R_(Uint8Array);nC.from;const Zn=nC.prototype;Zn[Vu];vn(Zn.keys);vn(Zn.values);vn(Zn.entries);vn(Zn.set);vn(Zn.reverse);vn(Zn.fill);vn(Zn.copyWithin);vn(Zn.sort);vn(Zn.slice);vn(Zn.subarray);Nl(Zn,"buffer");Nl(Zn,"byteOffset");Nl(Zn,"length");Nl(Zn,DB);const FB=Uint8Array,iC=Uint16Array,C_=Uint32Array,UB=Float32Array,Au=R_([][Vu]()),sC=vn(Au.next),kB=vn(function*(){}().next),zB=R_(Au),GB=DataView.prototype,HB=vn(GB.getUint16),M_=WeakMap,rC=M_.prototype,aC=vn(rC.get),XB=vn(rC.set),oC=new M_,jB=A_(null,{next:{value:function(){const e=aC(oC,this);return sC(e)}},[Vu]:{value:function(){return this}}});function YB(n){if(n[Vu]===eC&&Au.next===sC)return n;const e=A_(jB);return XB(oC,e,BB(n)),e}const VB=new M_,qB=A_(zB,{next:{value:function(){const e=aC(VB,this);return kB(e)},writable:!0,configurable:!0}});for(const n of MB(Au))n!=="next"&&OB(qB,n,JA(Au,n));const lC=new tC(4),$B=new UB(lC),KB=new C_(lC),cs=new iC(512),us=new FB(512);for(let n=0;n<256;++n){const e=n-127;e<-24?(cs[n]=0,cs[n|256]=32768,us[n]=24,us[n|256]=24):e<-14?(cs[n]=1024>>-e-14,cs[n|256]=1024>>-e-14|32768,us[n]=-e-1,us[n|256]=-e-1):e<=15?(cs[n]=e+15<<10,cs[n|256]=e+15<<10|32768,us[n]=13,us[n|256]=13):e<128?(cs[n]=31744,cs[n|256]=64512,us[n]=24,us[n|256]=24):(cs[n]=31744,cs[n|256]=64512,us[n]=13,us[n|256]=13)}const D_=new C_(2048);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,D_[n]=e|t}for(let n=1024;n<2048;++n)D_[n]=939524096+(n-1024<<13);const Bl=new C_(64);for(let n=1;n<31;++n)Bl[n]=n<<23;Bl[31]=1199570944;Bl[32]=2147483648;for(let n=33;n<63;++n)Bl[n]=2147483648+(n-32<<23);Bl[63]=3347054592;const cC=new iC(64);for(let n=1;n<64;++n)n!==32&&(cC[n]=1024);function ZB(n){const e=n>>10;return KB[0]=D_[cC[e]+(n&1023)]+Bl[e],$B[0]}function uC(n,e,...t){return ZB(HB(n,e,...YB(t)))}var Sf={exports:{}},zb;function WB(){if(zb)return Sf.exports;zb=1;function n(e,t,i){const s=i&&i.debug||!1;s&&console.log("[xml-utils] getting "+t+" in "+e);const a=typeof e=="object"?e.outer:e,l=a.slice(0,a.indexOf(">")+1),u=['"',"'"];for(let f=0;f<u.length;f++){const d=u[f],g=t+"\\="+d+"([^"+d+"]*)"+d;s&&console.log("[xml-utils] pattern:",g);const _=new RegExp(g).exec(l);if(s&&console.log("[xml-utils] match:",_),_)return _[1]}}return Sf.exports=n,Sf.exports.default=n,Sf.exports}var QB=WB();const V0=RR(QB);var Tf={exports:{}},bf={exports:{}},vf={exports:{}},Gb;function JB(){if(Gb)return vf.exports;Gb=1;function n(e,t,i){const a=new RegExp(t).exec(e.slice(i));return a?i+a.index:-1}return vf.exports=n,vf.exports.default=n,vf.exports}var wf={exports:{}},Hb;function eP(){if(Hb)return wf.exports;Hb=1;function n(e,t,i){const a=new RegExp(t).exec(e.slice(i));return a?i+a.index+a[0].length-1:-1}return wf.exports=n,wf.exports.default=n,wf.exports}var Rf={exports:{}},Xb;function tP(){if(Xb)return Rf.exports;Xb=1;function n(e,t){const i=new RegExp(t,"g"),s=e.match(i);return s?s.length:0}return Rf.exports=n,Rf.exports.default=n,Rf.exports}var jb;function nP(){if(jb)return bf.exports;jb=1;const n=JB(),e=eP(),t=tP();function i(s,a,l){const u=l&&l.debug||!1,f=!(l&&typeof l.nested===!1),d=l&&l.startIndex||0;u&&console.log("[xml-utils] starting findTagByName with",a," and ",l);const g=n(s,`<${a}[ 
>/]`,d);if(u&&console.log("[xml-utils] start:",g),g===-1)return;const p=s.slice(g+a.length);let _=e(p,"^[^<]*[ /]>",0);const E=_!==-1&&p[_-1]==="/";if(u&&console.log("[xml-utils] selfClosing:",E),E===!1)if(f){let R=0,v=1,D=0;for(;(_=e(p,"[ /]"+a+">",R))!==-1;){const A=p.substring(R,_+1);if(v+=t(A,"<"+a+`[ 
	>]`),D+=t(A,"</"+a+">"),D>=v)break;R=_}}else _=e(p,"[ /]"+a+">",0);const x=g+a.length+_+1;if(u&&console.log("[xml-utils] end:",x),x===-1)return;const b=s.slice(g,x);let S;return E?S=null:S=b.slice(b.indexOf(">")+1,b.lastIndexOf("<")),{inner:S,outer:b,start:g,end:x}}return bf.exports=i,bf.exports.default=i,bf.exports}var Yb;function iP(){if(Yb)return Tf.exports;Yb=1;const n=nP();function e(t,i,s){const a=[],l=s&&s.debug||!1,u=s&&typeof s.nested=="boolean"?s.nested:!0;let f=s&&s.startIndex||0,d;for(;d=n(t,i,{debug:l,startIndex:f});)u?f=d.start+1+i.length:f=d.end,a.push(d);return l&&console.log("findTagsByName found",a.length,"tags"),a}return Tf.exports=e,Tf.exports.default=e,Tf.exports}var sP=iP();const rP=RR(sP),iu={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},gs={};for(const n in iu)iu.hasOwnProperty(n)&&(gs[iu[n]]=parseInt(n,10));const aP=[gs.BitsPerSample,gs.ExtraSamples,gs.SampleFormat,gs.StripByteCounts,gs.StripOffsets,gs.StripRowCounts,gs.TileByteCounts,gs.TileOffsets,gs.SubIFDs],q0={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},ke={};for(const n in q0)q0.hasOwnProperty(n)&&(ke[q0[n]]=parseInt(n,10));const si={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},oP={Unspecified:0},T9={AddCompression:1},b9={None:0,Deflate:1,Zstandard:2},lP={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function cP(n,e){const{width:t,height:i}=n,s=new Uint8Array(t*i*3);let a;for(let l=0,u=0;l<n.length;++l,u+=3)a=256-n[l]/e*256,s[u]=a,s[u+1]=a,s[u+2]=a;return s}function uP(n,e){const{width:t,height:i}=n,s=new Uint8Array(t*i*3);let a;for(let l=0,u=0;l<n.length;++l,u+=3)a=n[l]/e*256,s[u]=a,s[u+1]=a,s[u+2]=a;return s}function hP(n,e){const{width:t,height:i}=n,s=new Uint8Array(t*i*3),a=e.length/3,l=e.length/3*2;for(let u=0,f=0;u<n.length;++u,f+=3){const d=n[u];s[f]=e[d]/65536*256,s[f+1]=e[d+a]/65536*256,s[f+2]=e[d+l]/65536*256}return s}function fP(n){const{width:e,height:t}=n,i=new Uint8Array(e*t*3);for(let s=0,a=0;s<n.length;s+=4,a+=3){const l=n[s],u=n[s+1],f=n[s+2],d=n[s+3];i[a]=255*((255-l)/256)*((255-d)/256),i[a+1]=255*((255-u)/256)*((255-d)/256),i[a+2]=255*((255-f)/256)*((255-d)/256)}return i}function dP(n){const{width:e,height:t}=n,i=new Uint8ClampedArray(e*t*3);for(let s=0,a=0;s<n.length;s+=3,a+=3){const l=n[s],u=n[s+1],f=n[s+2];i[a]=l+1.402*(f-128),i[a+1]=l-.34414*(u-128)-.71414*(f-128),i[a+2]=l+1.772*(u-128)}return i}const gP=.95047,mP=1,pP=1.08883;function yP(n){const{width:e,height:t}=n,i=new Uint8Array(e*t*3);for(let s=0,a=0;s<n.length;s+=3,a+=3){const l=n[s+0],u=n[s+1]<<24>>24,f=n[s+2]<<24>>24;let d=(l+16)/116,g=u/500+d,p=d-f/200,_,E,x;g=gP*(g*g*g>.008856?g*g*g:(g-16/116)/7.787),d=mP*(d*d*d>.008856?d*d*d:(d-16/116)/7.787),p=pP*(p*p*p>.008856?p*p*p:(p-16/116)/7.787),_=g*3.2406+d*-1.5372+p*-.4986,E=g*-.9689+d*1.8758+p*.0415,x=g*.0557+d*-.204+p*1.057,_=_>.0031308?1.055*_**(1/2.4)-.055:12.92*_,E=E>.0031308?1.055*E**(1/2.4)-.055:12.92*E,x=x>.0031308?1.055*x**(1/2.4)-.055:12.92*x,i[a]=Math.max(0,Math.min(1,_))*255,i[a+1]=Math.max(0,Math.min(1,E))*255,i[a+2]=Math.max(0,Math.min(1,x))*255}return i}const _P="modulepreload",EP=function(n){return"/dinamap-les/"+n},Vb={},ta=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let f=function(d){return Promise.all(d.map(g=>Promise.resolve(g).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");s=f(t.map(d=>{if(d=EP(d),d in Vb)return;Vb[d]=!0;const g=d.endsWith(".css"),p=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const _=document.createElement("link");if(_.rel=g?"stylesheet":_P,g||(_.as="script"),_.crossOrigin="",_.href=d,u&&_.setAttribute("nonce",u),document.head.appendChild(_),g)return new Promise((E,x)=>{_.addEventListener("load",E),_.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})},hC=new Map;function na(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>hC.set(t,e))}async function fC(n){const e=hC.get(n.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${n.Compression}`);const t=await e();return new t(n)}na([void 0,1],()=>ta(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([0,1])).then(n=>n.default));na(5,()=>ta(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([2,1])).then(n=>n.default));na(6,()=>{throw new Error("old style JPEG compression is not supported.")});na(7,()=>ta(()=>import("./jpeg-CKYXsxFN.js"),__vite__mapDeps([3,1])).then(n=>n.default));na([8,32946],()=>ta(()=>import("./deflate-B9JhHpvg.js"),__vite__mapDeps([4,5,1])).then(n=>n.default));na(32773,()=>ta(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([6,1])).then(n=>n.default));na(34887,()=>ta(()=>import("./lerc-BoF60oRA.js"),__vite__mapDeps([7,5,1])).then(async n=>(await n.zstd.init(),n)).then(n=>n.default));na(50001,()=>ta(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([8,1])).then(n=>n.default));function $d(n,e,t,i=1){return new(Object.getPrototypeOf(n)).constructor(e*t*i)}function xP(n,e,t,i,s){const a=e/i,l=t/s;return n.map(u=>{const f=$d(u,i,s);for(let d=0;d<s;++d){const g=Math.min(Math.round(l*d),t-1);for(let p=0;p<i;++p){const _=Math.min(Math.round(a*p),e-1),E=u[g*e+_];f[d*i+p]=E}}return f})}function ul(n,e,t){return(1-t)*n+t*e}function SP(n,e,t,i,s){const a=e/i,l=t/s;return n.map(u=>{const f=$d(u,i,s);for(let d=0;d<s;++d){const g=l*d,p=Math.floor(g),_=Math.min(Math.ceil(g),t-1);for(let E=0;E<i;++E){const x=a*E,b=x%1,S=Math.floor(x),R=Math.min(Math.ceil(x),e-1),v=u[p*e+S],D=u[p*e+R],A=u[_*e+S],C=u[_*e+R],B=ul(ul(v,D,b),ul(A,C,b),g%1);f[d*i+E]=B}}return f})}function TP(n,e,t,i,s,a="nearest"){switch(a.toLowerCase()){case"nearest":return xP(n,e,t,i,s);case"bilinear":case"linear":return SP(n,e,t,i,s);default:throw new Error(`Unsupported resampling method: '${a}'`)}}function bP(n,e,t,i,s,a){const l=e/i,u=t/s,f=$d(n,i,s,a);for(let d=0;d<s;++d){const g=Math.min(Math.round(u*d),t-1);for(let p=0;p<i;++p){const _=Math.min(Math.round(l*p),e-1);for(let E=0;E<a;++E){const x=n[g*e*a+_*a+E];f[d*i*a+p*a+E]=x}}}return f}function vP(n,e,t,i,s,a){const l=e/i,u=t/s,f=$d(n,i,s,a);for(let d=0;d<s;++d){const g=u*d,p=Math.floor(g),_=Math.min(Math.ceil(g),t-1);for(let E=0;E<i;++E){const x=l*E,b=x%1,S=Math.floor(x),R=Math.min(Math.ceil(x),e-1);for(let v=0;v<a;++v){const D=n[p*e*a+S*a+v],A=n[p*e*a+R*a+v],C=n[_*e*a+S*a+v],B=n[_*e*a+R*a+v],z=ul(ul(D,A,b),ul(C,B,b),g%1);f[d*i*a+E*a+v]=z}}}return f}function wP(n,e,t,i,s,a,l="nearest"){switch(l.toLowerCase()){case"nearest":return bP(n,e,t,i,s,a);case"bilinear":case"linear":return vP(n,e,t,i,s,a);default:throw new Error(`Unsupported resampling method: '${l}'`)}}function RP(n,e,t){let i=0;for(let s=e;s<t;++s)i+=n[s];return i}function my(n,e,t){switch(n){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t)}break}throw Error("Unsupported data format/bitsPerSample")}function AP(n,e){return(n===1||n===2)&&e<=32&&e%8===0?!1:!(n===3&&(e===16||e===32||e===64))}function CP(n,e,t,i,s,a,l){const u=new DataView(n),f=t===2?l*a:l*a*i,d=t===2?1:i,g=my(e,s,f),p=parseInt("1".repeat(s),2);if(e===1){let _;t===1?_=i*s:_=s;let E=a*_;(E&7)!==0&&(E=E+7&-8);for(let x=0;x<l;++x){const b=x*E;for(let S=0;S<a;++S){const R=b+S*d*s;for(let v=0;v<d;++v){const D=R+v*s,A=(x*a+S)*d+v,C=Math.floor(D/8),B=D%8;if(B+s<=8)g[A]=u.getUint8(C)>>8-s-B&p;else if(B+s<=16)g[A]=u.getUint16(C)>>16-s-B&p;else if(B+s<=24){const z=u.getUint16(C)<<8|u.getUint8(C+2);g[A]=z>>24-s-B&p}else g[A]=u.getUint32(C)>>32-s-B&p}}}}return g.buffer}class dC{constructor(e,t,i,s,a,l){this.fileDirectory=e,this.geoKeys=t,this.dataView=i,this.littleEndian=s,this.tiles=a?{}:null,this.isTiled=!e.StripOffsets;const u=e.PlanarConfiguration;if(this.planarConfiguration=typeof u>"u"?1:u,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=l}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){const t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,i=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(s,a){return uC(this,s,a)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){const i=this.getSampleFormat(e),s=this.getBitsPerSample(e);return my(i,s,t)}async getTileOrStrip(e,t,i,s,a){const l=Math.ceil(this.getWidth()/this.getTileWidth()),u=Math.ceil(this.getHeight()/this.getTileHeight());let f;const{tiles:d}=this;this.planarConfiguration===1?f=t*l+e:this.planarConfiguration===2&&(f=i*l*u+t*l+e);let g,p;this.isTiled?(g=this.fileDirectory.TileOffsets[f],p=this.fileDirectory.TileByteCounts[f]):(g=this.fileDirectory.StripOffsets[f],p=this.fileDirectory.StripByteCounts[f]);const _=(await this.source.fetch([{offset:g,length:p}],a))[0];let E;return d===null||!d[f]?(E=(async()=>{let x=await s.decode(this.fileDirectory,_);const b=this.getSampleFormat(),S=this.getBitsPerSample();return AP(b,S)&&(x=CP(x,b,this.planarConfiguration,this.getSamplesPerPixel(),S,this.getTileWidth(),this.getBlockHeight(t))),x})(),d!==null&&(d[f]=E)):E=d[f],{x:e,y:t,sample:i,data:await E}}async _readRaster(e,t,i,s,a,l,u,f,d){const g=this.getTileWidth(),p=this.getTileHeight(),_=this.getWidth(),E=this.getHeight(),x=Math.max(Math.floor(e[0]/g),0),b=Math.min(Math.ceil(e[2]/g),Math.ceil(_/g)),S=Math.max(Math.floor(e[1]/p),0),R=Math.min(Math.ceil(e[3]/p),Math.ceil(E/p)),v=e[2]-e[0];let D=this.getBytesPerPixel();const A=[],C=[];for(let U=0;U<t.length;++U)this.planarConfiguration===1?A.push(RP(this.fileDirectory.BitsPerSample,0,t[U])/8):A.push(0),C.push(this.getReaderForSample(t[U]));const B=[],{littleEndian:z}=this;for(let U=S;U<R;++U)for(let Y=x;Y<b;++Y){let $;this.planarConfiguration===1&&($=this.getTileOrStrip(Y,U,0,a,d));for(let le=0;le<t.length;++le){const ie=le,ce=t[le];this.planarConfiguration===2&&(D=this.getSampleByteSize(ce),$=this.getTileOrStrip(Y,U,ce,a,d));const fe=$.then(ue=>{const P=ue.data,W=new DataView(P),te=this.getBlockHeight(ue.y),he=ue.y*p,I=ue.x*g,K=he+te,k=(ue.x+1)*g,re=C[ie],de=Math.min(te,te-(K-e[3]),E-he),xe=Math.min(g,g-(k-e[2]),_-I);for(let me=Math.max(0,e[1]-he);me<de;++me)for(let Pe=Math.max(0,e[0]-I);Pe<xe;++Pe){const He=(me*g+Pe)*D,bt=re.call(W,He+A[ie],z);let wt;s?(wt=(me+he-e[1])*v*t.length+(Pe+I-e[0])*t.length+ie,i[wt]=bt):(wt=(me+he-e[1])*v+Pe+I-e[0],i[ie][wt]=bt)}});B.push(fe)}}if(await Promise.all(B),l&&e[2]-e[0]!==l||u&&e[3]-e[1]!==u){let U;return s?U=wP(i,e[2]-e[0],e[3]-e[1],l,u,t.length,f):U=TP(i,e[2]-e[0],e[3]-e[1],l,u,f),U.width=l,U.height=u,U}return i.width=l||e[2]-e[0],i.height=u||e[3]-e[1],i}async readRasters({window:e,samples:t=[],interleave:i,pool:s=null,width:a,height:l,resampleMethod:u,fillValue:f,signal:d}={}){const g=e||[0,0,this.getWidth(),this.getHeight()];if(g[0]>g[2]||g[1]>g[3])throw new Error("Invalid subsets");const p=g[2]-g[0],_=g[3]-g[1],E=p*_,x=this.getSamplesPerPixel();if(!t||!t.length)for(let v=0;v<x;++v)t.push(v);else for(let v=0;v<t.length;++v)if(t[v]>=x)return Promise.reject(new RangeError(`Invalid sample index '${t[v]}'.`));let b;if(i){const v=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,D=Math.max.apply(null,this.fileDirectory.BitsPerSample);b=my(v,D,E*t.length),f&&b.fill(f)}else{b=[];for(let v=0;v<t.length;++v){const D=this.getArrayForSample(t[v],E);Array.isArray(f)&&v<f.length?D.fill(f[v]):f&&!Array.isArray(f)&&D.fill(f),b.push(D)}}const S=s||await fC(this.fileDirectory);return await this._readRaster(g,t,b,i,S,a,l,u,d)}async readRGB({window:e,interleave:t=!0,pool:i=null,width:s,height:a,resampleMethod:l,enableAlpha:u=!1,signal:f}={}){const d=e||[0,0,this.getWidth(),this.getHeight()];if(d[0]>d[2]||d[1]>d[3])throw new Error("Invalid subsets");const g=this.fileDirectory.PhotometricInterpretation;if(g===si.RGB){let R=[0,1,2];if(this.fileDirectory.ExtraSamples!==oP.Unspecified&&u){R=[];for(let v=0;v<this.fileDirectory.BitsPerSample.length;v+=1)R.push(v)}return this.readRasters({window:e,interleave:t,samples:R,pool:i,width:s,height:a,resampleMethod:l,signal:f})}let p;switch(g){case si.WhiteIsZero:case si.BlackIsZero:case si.Palette:p=[0];break;case si.CMYK:p=[0,1,2,3];break;case si.YCbCr:case si.CIELab:p=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const _={window:d,interleave:!0,samples:p,pool:i,width:s,height:a,resampleMethod:l,signal:f},{fileDirectory:E}=this,x=await this.readRasters(_),b=2**this.fileDirectory.BitsPerSample[0];let S;switch(g){case si.WhiteIsZero:S=cP(x,b);break;case si.BlackIsZero:S=uP(x,b);break;case si.Palette:S=hP(x,E.ColorMap);break;case si.CMYK:S=fP(x);break;case si.YCbCr:S=dP(x);break;case si.CIELab:S=yP(x);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){const R=new Uint8Array(S.length/3),v=new Uint8Array(S.length/3),D=new Uint8Array(S.length/3);for(let A=0,C=0;A<S.length;A+=3,++C)R[C]=S[A],v[C]=S[A+1],D[C]=S[A+2];S=[R,v,D]}return S.width=x.width,S.height=x.height,S}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){const t={};if(!this.fileDirectory.GDAL_METADATA)return null;const i=this.fileDirectory.GDAL_METADATA;let s=rP(i,"Item");e===null?s=s.filter(a=>V0(a,"sample")===void 0):s=s.filter(a=>Number(V0(a,"sample"))===e);for(let a=0;a<s.length;++a){const l=s[a];t[V0(l,"name")]=l.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){const e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){const t=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(i)return i[1]===0&&i[4]===0?[i[0],-i[5],i[10]]:[Math.sqrt(i[0]*i[0]+i[4]*i[4]),-Math.sqrt(i[1]*i[1]+i[5]*i[5]),i[10]];if(e){const[s,a,l]=e.getResolution();return[s*e.getWidth()/this.getWidth(),a*e.getHeight()/this.getHeight(),l*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){const t=this.getHeight(),i=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){const[s,a,l,u,f,d,g,p]=this.fileDirectory.ModelTransformation,E=[[0,0],[0,t],[i,0],[i,t]].map(([S,R])=>[u+s*S+a*R,p+f*S+d*R]),x=E.map(S=>S[0]),b=E.map(S=>S[1]);return[Math.min(...x),Math.min(...b),Math.max(...x),Math.max(...b)]}else{const s=this.getOrigin(),a=this.getResolution(),l=s[0],u=s[1],f=l+a[0]*i,d=u+a[1]*t;return[Math.min(l,f),Math.min(u,d),Math.max(l,f),Math.max(u,d)]}}}class MP{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){const i=this.getUint32(e,t),s=this.getUint32(e+4,t);let a;if(t){if(a=i+2**32*s,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}if(a=2**32*i+s,!Number.isSafeInteger(a))throw new Error(`${a} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return a}getInt64(e,t){let i=0;const s=(this._dataView.getUint8(e+(t?7:0))&128)>0;let a=!0;for(let l=0;l<8;l++){let u=this._dataView.getUint8(e+(t?l:7-l));s&&(a?u!==0&&(u=~(u-1)&255,a=!1):u=~u&255),i+=u*256**l}return s&&(i=-i),i}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return uC(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}}class DP{constructor(e,t,i,s){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=i,this._bigTiff=s}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){const t=this.readUint32(e),i=this.readUint32(e+4);let s;if(this._littleEndian){if(s=t+2**32*i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}if(s=2**32*t+i,!Number.isSafeInteger(s))throw new Error(`${s} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return s}readInt64(e){let t=0;const i=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0;let s=!0;for(let a=0;a<8;a++){let l=this._dataView.getUint8(e+(this._littleEndian?a:7-a));i&&(s?l!==0&&(l=~(l-1)&255,s=!1):l=~l&255),t+=l*256**a}return i&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}}const IP=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class OP{constructor(e=IP,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(i=>{ta(()=>import("./decoder-tqM1uIvc.js"),[]).then(s=>{i(s.create)})}),this._awaitingDecoder.then(i=>{this._awaitingDecoder=null,this.workers=[];for(let s=0;s<e;s++)this.workers.push({worker:i(),idle:!0})}))}async decode(e,t){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?fC(e).then(i=>i.decode(e,t)):new Promise(i=>{const s=this.workers.find(u=>u.idle)||this.workers[Math.floor(Math.random()*this.size)];s.idle=!1;const a=this.messageId++,l=u=>{u.data.id===a&&(s.idle=!0,i(u.data.decoded),s.worker.removeEventListener("message",l))};s.worker.addEventListener("message",l),s.worker.postMessage({fileDirectory:e,buffer:t,id:a},[t])})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}}const qb=`\r
\r
`;function gC(n){if(typeof Object.fromEntries<"u")return Object.fromEntries(n);const e={};for(const[t,i]of n)e[t.toLowerCase()]=i;return e}function LP(n){const e=n.split(`\r
`).map(t=>{const i=t.split(":").map(s=>s.trim());return i[0]=i[0].toLowerCase(),i});return gC(e)}function NP(n){const[e,...t]=n.split(";").map(s=>s.trim()),i=t.map(s=>s.split("="));return{type:e,params:gC(i)}}function py(n){let e,t,i;return n&&([,e,t,i]=n.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),i=parseInt(i,10)),{start:e,end:t,total:i}}function BP(n,e){let t=null;const i=new TextDecoder("ascii"),s=[],a=`--${e}`,l=`${a}--`;for(let u=0;u<10;++u)i.decode(new Uint8Array(n,u,a.length))===a&&(t=u);if(t===null)throw new Error("Could not find initial boundary");for(;t<n.byteLength;){const u=i.decode(new Uint8Array(n,t,Math.min(a.length+1024,n.byteLength-t)));if(u.length===0||u.startsWith(l))break;if(!u.startsWith(a))throw new Error("Part does not start with boundary");const f=u.substr(a.length+2);if(f.length===0)break;const d=f.indexOf(qb),g=LP(f.substr(0,d)),{start:p,end:_,total:E}=py(g["content-range"]),x=t+a.length+d+qb.length,b=parseInt(_,10)+1-parseInt(p,10);s.push({headers:g,data:n.slice(x,x+b),offset:p,length:b,fileSize:E}),t=x+b+4}return s}class I_{async fetch(e,t=void 0){return Promise.all(e.map(i=>this.fetchSlice(i,t)))}async fetchSlice(e){throw new Error(`fetching of slice ${e} not possible, not implemented`)}get fileSize(){return null}async close(){}}class PP extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[t,i]of e)this.onEviction(t,i.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const i=t.get(e);return this._getItemValue(e,i)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,i]=e;this.cache.has(t)||this._deleteIfExpired(t,i)===!1&&(yield e)}for(const e of this.cache){const[t,i]=e;this._deleteIfExpired(t,i)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:i=this.maxAge}={}){const s=typeof i=="number"&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:s}):this._set(e,{value:t,expiry:s}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],i=t.length-e;i<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(i>0&&this._emitEvictions(t.slice(0,i)),this.oldCache=new Map(t.slice(i)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,i]=e;this._deleteIfExpired(t,i)===!1&&(yield[t,i.value])}for(const e of this.oldCache){const[t,i]=e;this.cache.has(t)||this._deleteIfExpired(t,i)===!1&&(yield[t,i.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const i=e[t],[s,a]=i;this._deleteIfExpired(s,a)===!1&&(yield[s,a.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const i=e[t],[s,a]=i;this.cache.has(s)||this._deleteIfExpired(s,a)===!1&&(yield[s,a.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[i,s]of this.entriesAscending())e.call(t,s,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function FP(n){return new Promise(e=>setTimeout(e,n))}function UP(n,e){const t=Array.isArray(n)?n:Array.from(n),i=Array.isArray(e)?e:Array.from(e);return t.map((s,a)=>[s,i[a]])}class Tl extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,Tl),this.name="AbortError"}}class kP extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}}const zP=kP;class GP{constructor(e,t,i=null){this.offset=e,this.length=t,this.data=i}get top(){return this.offset+this.length}}class $b{constructor(e,t,i){this.offset=e,this.length=t,this.blockIds=i}}class HP extends I_{constructor(e,{blockSize:t=65536,cacheSize:i=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new PP({maxSize:i,onEviction:(s,a)=>{this.evictedBlocks.set(s,a)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(e,t){const i=[],s=[],a=[];this.evictedBlocks.clear();for(const{offset:_,length:E}of e){let x=_+E;const{fileSize:b}=this;b!==null&&(x=Math.min(x,b));const S=Math.floor(_/this.blockSize)*this.blockSize;for(let R=S;R<x;R+=this.blockSize){const v=Math.floor(R/this.blockSize);!this.blockCache.has(v)&&!this.blockRequests.has(v)&&(this.blockIdsToFetch.add(v),s.push(v)),this.blockRequests.has(v)&&i.push(this.blockRequests.get(v)),a.push(v)}}await FP(),this.fetchBlocks(t);const l=[];for(const _ of s)this.blockRequests.has(_)&&l.push(this.blockRequests.get(_));await Promise.allSettled(i),await Promise.allSettled(l);const u=[],f=a.filter(_=>this.abortedBlockIds.has(_)||!this.blockCache.has(_));if(f.forEach(_=>this.blockIdsToFetch.add(_)),f.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(const _ of f){const E=this.blockRequests.get(_);if(!E)throw new Error(`Block ${_} is not in the block requests`);u.push(E)}await Promise.allSettled(u)}if(t&&t.aborted)throw new Tl("Request was aborted");const d=a.map(_=>this.blockCache.get(_)||this.evictedBlocks.get(_)),g=d.filter(_=>!_);if(g.length)throw new zP(g,"Request failed");const p=new Map(UP(a,d));return this.readSliceData(e,p)}fetchBlocks(e){if(this.blockIdsToFetch.size>0){const t=this.groupBlocks(this.blockIdsToFetch),i=this.source.fetch(t,e);for(let s=0;s<t.length;++s){const a=t[s];for(const l of a.blockIds)this.blockRequests.set(l,(async()=>{try{const u=(await i)[s],f=l*this.blockSize,d=f-u.offset,g=Math.min(d+this.blockSize,u.data.byteLength),p=u.data.slice(d,g),_=new GP(f,p.byteLength,p,l);this.blockCache.set(l,_),this.abortedBlockIds.delete(l)}catch(u){if(u.name==="AbortError")u.signal=e,this.blockCache.delete(l),this.abortedBlockIds.add(l);else throw u}finally{this.blockRequests.delete(l)}})())}this.blockIdsToFetch.clear()}}groupBlocks(e){const t=Array.from(e).sort((l,u)=>l-u);if(t.length===0)return[];let i=[],s=null;const a=[];for(const l of t)s===null||s+1===l?(i.push(l),s=l):(a.push(new $b(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[l],s=l);return a.push(new $b(i[0]*this.blockSize,i.length*this.blockSize,i)),a}readSliceData(e,t){return e.map(i=>{let s=i.offset+i.length;this.fileSize!==null&&(s=Math.min(this.fileSize,s));const a=Math.floor(i.offset/this.blockSize),l=Math.floor(s/this.blockSize),u=new ArrayBuffer(i.length),f=new Uint8Array(u);for(let d=a;d<=l;++d){const g=t.get(d),p=g.offset-i.offset,_=g.top-s;let E=0,x=0,b;p<0?E=-p:p>0&&(x=p),_<0?b=g.length-E:b=s-g.offset-E;const S=new Uint8Array(g.data,E,b);f.set(S,x)}return u})}}class O_{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class L_{constructor(e){this.url=e}async request({headers:e,signal:t}={}){throw new Error("request is not implemented")}}class XP extends O_{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class jP extends L_{constructor(e,t){super(e),this.credentials=t}async request({headers:e,signal:t}={}){const i=await fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new XP(i)}}class YP extends O_{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}async getData(){return this.data}}class VP extends L_{constructRequest(e,t){return new Promise((i,s)=>{const a=new XMLHttpRequest;a.open("GET",this.url),a.responseType="arraybuffer";for(const[l,u]of Object.entries(e))a.setRequestHeader(l,u);a.onload=()=>{const l=a.response;i(new YP(a,l))},a.onerror=s,a.onabort=()=>s(new Tl("Request aborted")),a.send(),t&&(t.aborted&&a.abort(),t.addEventListener("abort",()=>a.abort()))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}const $0={};let qP=class extends O_{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}async getData(){return await this.dataPromise}};class $P extends L_{constructor(e){super(e),this.parsedUrl=$0.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",$0)}constructRequest(e,t){return new Promise((i,s)=>{const a=this.httpApi.get({...this.parsedUrl,headers:e},l=>{const u=new Promise(f=>{const d=[];l.on("data",g=>{d.push(g)}),l.on("end",()=>{const g=Buffer.concat(d).buffer;f(g)}),l.on("error",s)});i(new qP(l,u))});a.on("error",s),t&&(t.aborted&&a.destroy(new Tl("Request aborted")),t.addEventListener("abort",()=>a.destroy(new Tl("Request aborted"))))})}async request({headers:e,signal:t}={}){return await this.constructRequest(e,t)}}class N_ extends I_{constructor(e,t,i,s){super(),this.client=e,this.headers=t,this.maxRanges=i,this.allowFullFile=s,this._fileSize=null}async fetch(e,t){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(i=>this.fetchSlice(i,t))))}async fetchSlices(e,t){const i=await this.client.request({headers:{...this.headers,Range:`bytes=${e.map(({offset:s,length:a})=>`${s}-${s+a}`).join(",")}`},signal:t});if(i.ok)if(i.status===206){const{type:s,params:a}=NP(i.getHeader("content-type"));if(s==="multipart/byteranges"){const p=BP(await i.getData(),a.boundary);return this._fileSize=p[0].fileSize||null,p}const l=await i.getData(),{start:u,end:f,total:d}=py(i.getHeader("content-range"));this._fileSize=d||null;const g=[{data:l,offset:u,length:f-u}];if(e.length>1){const p=await Promise.all(e.slice(1).map(_=>this.fetchSlice(_,t)));return g.concat(p)}return g}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const s=await i.getData();return this._fileSize=s.byteLength,[{data:s,offset:0,length:s.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(e,t){const{offset:i,length:s}=e,a=await this.client.request({headers:{...this.headers,Range:`bytes=${i}-${i+s}`},signal:t});if(a.ok)if(a.status===206){const l=await a.getData(),{total:u}=py(a.getHeader("content-range"));return this._fileSize=u||null,{data:l,offset:i,length:s}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const l=await a.getData();return this._fileSize=l.byteLength,{data:l,offset:0,length:l.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function B_(n,{blockSize:e,cacheSize:t}){return e===null?n:new HP(n,{blockSize:e,cacheSize:t})}function KP(n,{headers:e={},credentials:t,maxRanges:i=0,allowFullFile:s=!1,...a}={}){const l=new jP(n,t),u=new N_(l,e,i,s);return B_(u,a)}function ZP(n,{headers:e={},maxRanges:t=0,allowFullFile:i=!1,...s}={}){const a=new VP(n),l=new N_(a,e,t,i);return B_(l,s)}function WP(n,{headers:e={},maxRanges:t=0,allowFullFile:i=!1,...s}={}){const a=new $P(n),l=new N_(a,e,t,i);return B_(l,s)}function yy(n,{forceXHR:e=!1,...t}={}){return typeof fetch=="function"&&!e?KP(n,t):typeof XMLHttpRequest<"u"?ZP(n,t):WP(n,t)}class QP extends I_{constructor(e){super(),this.file=e}async fetchSlice(e,t){return new Promise((i,s)=>{const a=this.file.slice(e.offset,e.offset+e.length),l=new FileReader;l.onload=u=>i(u.target.result),l.onerror=s,l.onabort=s,l.readAsArrayBuffer(a),t&&t.addEventListener("abort",()=>l.abort())})}}function JP(n){return new QP(n)}function _y(n){switch(n){case ke.BYTE:case ke.ASCII:case ke.SBYTE:case ke.UNDEFINED:return 1;case ke.SHORT:case ke.SSHORT:return 2;case ke.LONG:case ke.SLONG:case ke.FLOAT:case ke.IFD:return 4;case ke.RATIONAL:case ke.SRATIONAL:case ke.DOUBLE:case ke.LONG8:case ke.SLONG8:case ke.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${n}`)}}function eF(n){const e=n.GeoKeyDirectory;if(!e)return null;const t={};for(let i=4;i<=e[3]*4;i+=4){const s=lP[e[i]],a=e[i+1]?iu[e[i+1]]:null,l=e[i+2],u=e[i+3];let f=null;if(!a)f=u;else{if(f=n[a],typeof f>"u"||f===null)throw new Error(`Could not get value of geoKey '${s}'.`);typeof f=="string"?f=f.substring(u,u+l-1):f.subarray&&(f=f.subarray(u,u+l),l===1&&(f=f[0]))}t[s]=f}return t}function Ho(n,e,t,i){let s=null,a=null;const l=_y(e);switch(e){case ke.BYTE:case ke.ASCII:case ke.UNDEFINED:s=new Uint8Array(t),a=n.readUint8;break;case ke.SBYTE:s=new Int8Array(t),a=n.readInt8;break;case ke.SHORT:s=new Uint16Array(t),a=n.readUint16;break;case ke.SSHORT:s=new Int16Array(t),a=n.readInt16;break;case ke.LONG:case ke.IFD:s=new Uint32Array(t),a=n.readUint32;break;case ke.SLONG:s=new Int32Array(t),a=n.readInt32;break;case ke.LONG8:case ke.IFD8:s=new Array(t),a=n.readUint64;break;case ke.SLONG8:s=new Array(t),a=n.readInt64;break;case ke.RATIONAL:s=new Uint32Array(t*2),a=n.readUint32;break;case ke.SRATIONAL:s=new Int32Array(t*2),a=n.readInt32;break;case ke.FLOAT:s=new Float32Array(t),a=n.readFloat32;break;case ke.DOUBLE:s=new Float64Array(t),a=n.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===ke.RATIONAL||e===ke.SRATIONAL)for(let u=0;u<t;u+=2)s[u]=a.call(n,i+u*l),s[u+1]=a.call(n,i+(u*l+4));else for(let u=0;u<t;++u)s[u]=a.call(n,i+u*l);return e===ke.ASCII?new TextDecoder("utf-8").decode(s):s}class tF{constructor(e,t,i){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=i}}class Af extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}}class mC{async readRasters(e={}){const{window:t,width:i,height:s}=e;let{resX:a,resY:l,bbox:u}=e;const f=await this.getImage();let d=f;const g=await this.getImageCount(),p=f.getBoundingBox();if(t&&u)throw new Error('Both "bbox" and "window" passed.');if(i||s){if(t){const[x,b]=f.getOrigin(),[S,R]=f.getResolution();u=[x+t[0]*S,b+t[1]*R,x+t[2]*S,b+t[3]*R]}const E=u||p;if(i){if(a)throw new Error("Both width and resX passed");a=(E[2]-E[0])/i}if(s){if(l)throw new Error("Both width and resY passed");l=(E[3]-E[1])/s}}if(a||l){const E=[];for(let x=0;x<g;++x){const b=await this.getImage(x),{SubfileType:S,NewSubfileType:R}=b.fileDirectory;(x===0||S===2||R&1)&&E.push(b)}E.sort((x,b)=>x.getWidth()-b.getWidth());for(let x=0;x<E.length;++x){const b=E[x],S=(p[2]-p[0])/b.getWidth(),R=(p[3]-p[1])/b.getHeight();if(d=b,a&&a>S||l&&l>R)break}}let _=t;if(u){const[E,x]=f.getOrigin(),[b,S]=d.getResolution(f);_=[Math.round((u[0]-E)/b),Math.round((u[1]-x)/S),Math.round((u[2]-E)/b),Math.round((u[3]-x)/S)],_=[Math.min(_[0],_[2]),Math.min(_[1],_[3]),Math.max(_[0],_[2]),Math.max(_[1],_[3])]}return d.readRasters({...e,window:_})}}class bl extends mC{constructor(e,t,i,s,a={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=i,this.firstIFDOffset=s,this.cache=a.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(e,t){const i=this.bigTiff?4048:1024;return new DP((await this.source.fetch([{offset:e,length:typeof t<"u"?t:i}]))[0],e,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(e){const t=this.bigTiff?20:12,i=this.bigTiff?8:2;let s=await this.getSlice(e);const a=this.bigTiff?s.readUint64(e):s.readUint16(e),l=a*t+(this.bigTiff?16:6);s.covers(e,l)||(s=await this.getSlice(e,l));const u={};let f=e+(this.bigTiff?8:2);for(let p=0;p<a;f+=t,++p){const _=s.readUint16(f),E=s.readUint16(f+2),x=this.bigTiff?s.readUint64(f+4):s.readUint32(f+4);let b,S;const R=_y(E),v=f+(this.bigTiff?12:8);if(R*x<=(this.bigTiff?8:4))b=Ho(s,E,x,v);else{const D=s.readOffset(v),A=_y(E)*x;if(s.covers(D,A))b=Ho(s,E,x,D);else{const C=await this.getSlice(D,A);b=Ho(C,E,x,D)}}x===1&&aP.indexOf(_)===-1&&!(E===ke.RATIONAL||E===ke.SRATIONAL)?S=b[0]:S=b,u[iu[_]]=S}const d=eF(u),g=s.readOffset(e+i+t*a);return new tF(u,d,g)}async requestIFD(e){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof Af?new Af(e):t}return this.ifdRequests[e]=(async()=>{const t=await this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new Af(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)})(),this.ifdRequests[e]}async getImage(e=0){const t=await this.requestIFD(e);return new dC(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let e=0,t=!0;for(;t;)try{await this.requestIFD(e),++e}catch(i){if(i instanceof Af)t=!1;else throw i}return e}async getGhostValues(){const e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const t="GDAL_STRUCTURAL_METADATA_SIZE=",i=t.length+100;let s=await this.getSlice(e,i);if(t===Ho(s,ke.ASCII,t.length,e)){const l=Ho(s,ke.ASCII,i,e).split(`
`)[0],u=Number(l.split("=")[1].split(" ")[0])+l.length;u>i&&(s=await this.getSlice(e,u));const f=Ho(s,ke.ASCII,u,e);this.ghostValues={},f.split(`
`).filter(d=>d.length>0).map(d=>d.split("=")).forEach(([d,g])=>{this.ghostValues[d]=g})}return this.ghostValues}static async fromSource(e,t,i){const s=(await e.fetch([{offset:0,length:1024}],i))[0],a=new MP(s),l=a.getUint16(0,0);let u;if(l===18761)u=!0;else if(l===19789)u=!1;else throw new TypeError("Invalid byte order value.");const f=a.getUint16(2,u);let d;if(f===42)d=!1;else if(f===43){if(d=!0,a.getUint16(4,u)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const g=d?a.getUint64(8,u):a.getUint32(4,u);return new bl(e,u,d,g,t)}close(){return typeof this.source.close=="function"?this.source.close():!1}}class nF extends mC{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=await Promise.all(e),this.fileDirectoriesPerFile}async getImage(e=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let t=0,i=0;for(let s=0;s<this.imageFiles.length;s++){const a=this.imageFiles[s];for(let l=0;l<this.imageCounts[s];l++){if(e===t){const u=await a.requestIFD(i);return new dC(u.fileDirectory,u.geoKeyDirectory,a.dataView,a.littleEndian,a.cache,a.source)}t++,i++}i=0}throw new RangeError("Invalid image index")}async getImageCount(){if(this.imageCount!==null)return this.imageCount;const e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=await Promise.all(e),this.imageCount=this.imageCounts.reduce((t,i)=>t+i,0),this.imageCount}}async function iF(n,e={},t){return bl.fromSource(yy(n,e),t)}async function sF(n,e){return bl.fromSource(JP(n),e)}async function rF(n,e=[],t={},i){const s=await bl.fromSource(yy(n,t),i),a=await Promise.all(e.map(l=>bl.fromSource(yy(l,t))));return new nF(s,a)}const Xo=[0,0,0],Cr=5;class P_{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ot(wI(this.resolutions_,(s,a)=>a-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,a=this.resolutions_.length-1;s<a;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ot(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=qs(i)),ot(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ot(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:a_,ot(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,a)=>{const l=new qd(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const u=this.getTileRangeForExtentAndZ(i,a);l.minX=Math.max(u.minX,l.minX),l.maxX=Math.min(u.maxX,l.maxX),l.minY=Math.max(u.minY,l.minY),l.maxY=Math.min(u.maxY,l.maxY)}return l}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const s=this.getTileRangeForExtentAndZ(e,t);for(let a=s.minX,l=s.maxX;a<=l;++a)for(let u=s.minY,f=s.maxY;u<=f;++u)i([t,a,u])}forEachTileCoordParentTileRange(e,t,i,s){let a,l,u,f=null,d=e[0]-1;for(this.zoomFactor_===2?(l=e[1],u=e[2]):f=this.getTileCoordExtent(e,s);d>=this.minZoom;){if(l!==void 0&&u!==void 0?(l=Math.floor(l/2),u=Math.floor(u/2),a=ko(l,l,u,u,i)):a=this.getTileRangeForExtentAndZ(f,d,i),t(d,a))return!0;--d}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const a=e[1]*2,l=e[2]*2;return ko(a,a+1,l,l+1,t)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],a=e[1],l=e[2];if(t===s)return ko(a,l,a,l,i);if(this.zoomFactor_){const f=Math.pow(this.zoomFactor_,t-s),d=Math.floor(a*f),g=Math.floor(l*f);if(t<s)return ko(d,d,g,g,i);const p=Math.floor(f*(a+1))-1,_=Math.floor(f*(l+1))-1;return ko(d,p,g,_,i)}const u=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Xo);const s=Xo[1],a=Xo[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Xo);const l=Xo[1],u=Xo[2];return ko(s,l,a,u,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=Gt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*i,t[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),a=Gt(this.getTileSize(e[0]),this.tmpSize_),l=i[0]+e[1]*a[0]*s,u=i[1]-(e[2]+1)*a[1]*s,f=l+a[0]*s,d=u+a[1]*s;return Vs(l,u,f,d,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,s,a){const l=this.getZForResolution(i),u=i/this.getResolution(l),f=this.getOrigin(l),d=Gt(this.getTileSize(l),this.tmpSize_);let g=u*(e-f[0])/i/d[0],p=u*(f[1]-t)/i/d[1];return s?(g=cf(g,Cr)-1,p=cf(p,Cr)-1):(g=lf(g,Cr),p=lf(p,Cr)),Sl(l,g,p,a)}getTileCoordForXYAndZ_(e,t,i,s,a){const l=this.getOrigin(i),u=this.getResolution(i),f=Gt(this.getTileSize(i),this.tmpSize_);let d=(e-l[0])/u/f[0],g=(l[1]-t)/u/f[1];return s?(d=cf(d,Cr)-1,g=cf(g,Cr)-1):(d=lf(d,Cr),g=lf(g,Cr)),Sl(i,d,g,a)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Uy(this.resolutions_,e,t||0);return Tt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return rA(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let s=this.minZoom;s<t;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}const aF=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,oF=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class lF{constructor(e){this.gl_=e,this.program_=Ey(e,oF,aF),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,i,s,a,l,u,f,d,g,p,_,E){const x=this.gl_;f===void 0&&(f=s),d===void 0&&(d=a),l===void 0&&(l=t),u===void 0&&(u=i),g===void 0&&(g=l),p===void 0&&(p=u),_===void 0&&(_=x.canvas.width),E===void 0&&(E=x.canvas.height),x.bindTexture(x.TEXTURE_2D,e),x.useProgram(this.program_),x.bindBuffer(x.ARRAY_BUFFER,this.positionBuffer),x.enableVertexAttribArray(this.positionLocation),x.vertexAttribPointer(this.positionLocation,2,x.FLOAT,!1,0,0),x.bindBuffer(x.ARRAY_BUFFER,this.texcoordBuffer),x.enableVertexAttribArray(this.texcoordLocation),x.vertexAttribPointer(this.texcoordLocation,2,x.FLOAT,!1,0,0);let b=fy(0,_,0,E,-1,1);b=nN(b,f,d,0),b=yb(b,g,p,1),x.uniformMatrix4fv(this.matrixLocation,!1,b);let S=iN(s/t,a/i,0);S=yb(S,l/t,u/i,1),x.uniformMatrix4fv(this.textureMatrixLocation,!1,S),x.uniform1i(this.textureLocation,0),x.drawArrays(x.TRIANGLES,0,this.positions.length/2)}}function Kb(n,e,t){const i=n.createShader(e);if(i===null)throw new Error("Shader compilation failed");if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS)){const s=n.getShaderInfoLog(i);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return i}function Ey(n,e,t){const i=n.createProgram(),s=Kb(n,n.VERTEX_SHADER,t),a=Kb(n,n.FRAGMENT_SHADER,e);if(i===null)throw new Error("Program creation failed");if(n.attachShader(i,s),n.attachShader(i,a),n.linkProgram(i),!n.getProgramParameter(i,n.LINK_STATUS))throw n.getProgramInfoLog(i)===null?new Error("Program info log creation failed"):new Error;return i}const cF=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,uF=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,hF=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,fF=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function dF(n,e,t,i){let s;return t&&t.length?s=t.shift():Rd?s=new OffscreenCanvas(n||300,e||300):s=document.createElement("canvas"),n&&(s.width=n),e&&(s.height=e),s.getContext("webgl",i)}function gF(n){const e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}const Zb=[];function mF(n,e,t,i,s,a,l,u,f,d,g,p,_,E){const x=Math.round(i*e),b=Math.round(i*t);n.canvas.width=x,n.canvas.height=b;let S,R;if(R=n.createTexture(),n.bindTexture(n.TEXTURE_2D,R),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),_?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,x,b,0,n.RGBA,g,null),S=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,S),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,R,0),S===null)throw new Error("Could not create framebuffer");if(R===null)throw new Error("Could not create texture");if(f.length===0)return{width:x,height:b,framebuffer:S,texture:R};const v=bi();f.forEach(function($,le,ie){FR(v,$.extent)});let D,A,C;const B=1/s;{if(D=n.createTexture(),R===null)throw new Error("Could not create texture");A=Math.round(tt(v)*B),C=Math.round(gn(v)*B);const $=n.getParameter(n.MAX_TEXTURE_SIZE),le=Math.max(A,C),ie=le>$?$/le:1,ce=Math.round(A*ie),fe=Math.round(C*ie);n.bindTexture(n.TEXTURE_2D,D),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),_?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,ce,fe,0,n.RGBA,g,null);const ue=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,ue),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,D,0);const P=new lF(n);f.forEach(function(W,te,he){const I=(W.extent[0]-v[0])*B*ie,K=-(W.extent[3]-v[3])*B*ie,k=tt(W.extent)*B*ie,re=gn(W.extent)*B*ie;if(n.bindFramebuffer(n.FRAMEBUFFER,ue),n.viewport(0,0,ce,fe),W.clipExtent){const de=(W.clipExtent[0]-v[0])*B*ie,xe=-(W.clipExtent[3]-v[3])*B*ie,me=tt(W.clipExtent)*B*ie,Pe=gn(W.clipExtent)*B*ie;n.enable(n.SCISSOR_TEST),n.scissor(_?de:Math.round(de),_?xe:Math.round(xe),_?me:Math.round(de+me)-Math.round(de),_?Pe:Math.round(xe+Pe)-Math.round(xe))}P.drawImage(W.texture,W.width,W.height,d,d,W.width-2*d,W.height-2*d,_?I:Math.round(I),_?K:Math.round(K),_?k:Math.round(I+k)-Math.round(I),_?re:Math.round(K+re)-Math.round(K),ce,fe),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(ue)}const z=qs(l),U=qs(v),Y=$=>{const le=($[0][0]-z[0])/a*i,ie=-($[0][1]-z[1])/a*i,ce=($[1][0]-z[0])/a*i,fe=-($[1][1]-z[1])/a*i,ue=($[2][0]-z[0])/a*i,P=-($[2][1]-z[1])/a*i;return{u1:ce,v1:fe,u0:le,v0:ie,u2:ue,v2:P}};n.bindFramebuffer(n.FRAMEBUFFER,S),n.viewport(0,0,x,b);{const $=[],le=[],ie=Ey(n,fF,hF);n.useProgram(ie);const ce=n.getUniformLocation(ie,"u_texture");n.bindTexture(n.TEXTURE_2D,D),n.uniform1i(ce,0),u.getTriangles().forEach(function(I,K,k){const re=I.source,de=I.target,{u1:xe,v1:me,u0:Pe,v0:He,u2:bt,v2:wt}=Y(de),Gi=(re[0][0]-U[0])/s/A,Ts=-(re[0][1]-U[1])/s/C,Hi=(re[1][0]-U[0])/s/A,hi=-(re[1][1]-U[1])/s/C,An=(re[2][0]-U[0])/s/A,Qn=-(re[2][1]-U[1])/s/C;$.push(xe,me,Pe,He,bt,wt),le.push(Hi,hi,Gi,Ts,An,Qn)});const fe=fy(0,x,b,0,-1,1),ue=n.getUniformLocation(ie,"u_matrix");n.uniformMatrix4fv(ue,!1,fe);const P=n.getAttribLocation(ie,"a_position"),W=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,W),n.bufferData(n.ARRAY_BUFFER,new Float32Array($),n.STATIC_DRAW),n.vertexAttribPointer(P,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(P);const te=n.getAttribLocation(ie,"a_texcoord"),he=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,he),n.bufferData(n.ARRAY_BUFFER,new Float32Array(le),n.STATIC_DRAW),n.vertexAttribPointer(te,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(te),n.drawArrays(n.TRIANGLES,0,$.length/2)}if(p){const $=Ey(n,uF,cF);n.useProgram($);const le=fy(0,x,b,0,-1,1),ie=n.getUniformLocation($,"u_matrix");n.uniformMatrix4fv(ie,!1,le);const ce=Array.isArray(p)?p:[0,0,0,255],fe=n.getUniformLocation($,"u_val");n.uniform4fv(fe,ce);const ue=n.getAttribLocation($,"a_position"),P=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,P),n.vertexAttribPointer(ue,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(ue);const W=u.getTriangles().reduce(function(te,he){const I=he.target,{u1:K,v1:k,u0:re,v0:de,u2:xe,v2:me}=Y(I);return te.concat([K,k,re,de,re,de,xe,me,xe,me,K,k])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(W),n.STATIC_DRAW),n.drawArrays(n.LINES,0,W.length/2)}return{width:x,height:b,framebuffer:S,texture:R}}class pF extends wu{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,i=t.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?s?$n(i,s):i:s;const a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),l=this.targetTileGrid_.getExtent();let u=this.sourceTileGrid_.getExtent();const f=l?$n(a,l):a;if(du(f)===0){this.state=ge.EMPTY;return}i&&(u?u=$n(u,i):u=i);const d=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),g=e.targetProj,p=NA(t,g,f,d);if(!isFinite(p)||p<=0){this.state=ge.EMPTY;return}const _=e.errorThreshold!==void 0?e.errorThreshold:PA;if(this.triangulation_=new BA(t,g,f,u,p*_,d,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=ge.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(p);let E=this.triangulation_.calculateSourceExtent();if(u&&(t.canWrapX()?(E[1]=Tt(E[1],u[1],u[3]),E[3]=Tt(E[3],u[1],u[3])):E=$n(E,u)),!du(E))this.state=ge.EMPTY;else{let x=0,b=0;t.canWrapX()&&(x=tt(i),b=Math.floor((E[0]-i[0])/x)),Xy(E.slice(),t,!0).forEach(R=>{const v=this.sourceTileGrid_.getTileRangeForExtentAndZ(R,this.sourceZ_),D=e.getTileFunction;for(let A=v.minX;A<=v.maxX;A++)for(let C=v.minY;C<=v.maxY;C++){const B=D(this.sourceZ_,A,C,this.pixelRatio_);if(B){const z=b*x;this.sourceTiles_.push({tile:B,offset:z})}}++b}),this.sourceTiles_.length===0&&(this.state=ge.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(A=>{const C=A.tile;if(!C||C.getState()!==ge.LOADED)return;const B=C.getSize(),z=this.gutter_;let U;const Y=dy(C.getData());Y?U=Y:(t=!0,U=yN(xl(C.getData())));const $=[B[0]+2*z,B[1]+2*z],le=U instanceof Float32Array,ie=$[0]*$[1],ce=le?Float32Array:Uint8ClampedArray,fe=new ce(U.buffer),ue=ce.BYTES_PER_ELEMENT,P=ue*fe.length/ie,W=fe.byteLength/$[1],te=Math.floor(W/ue/$[0]),he=this.sourceTileGrid_.getTileCoordExtent(C.tileCoord);he[0]+=A.offset,he[2]+=A.offset;const I=this.clipExtent_?.slice();I&&(I[0]+=A.offset,I[2]+=A.offset),e.push({extent:he,clipExtent:I,data:fe,dataType:ce,bytesPerPixel:P,pixelSize:$,bandCount:te})}),this.sourceTiles_.length=0,e.length===0){this.state=ge.ERROR,this.changed();return}const i=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(i),a=typeof s=="number"?s:s[0],l=typeof s=="number"?s:s[1],u=a*this.pixelRatio_,f=l*this.pixelRatio_,d=this.targetTileGrid_.getResolution(i),g=this.sourceTileGrid_.getResolution(this.sourceZ_),p=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),_=e[0].bandCount,E=new e[0].dataType(_*u*f),x=dF(u,f,Zb,{premultipliedAlpha:!1,antialias:!1});let b;const S=x.RGBA;let R;e[0].dataType==Float32Array?(R=x.FLOAT,x.getExtension("WEBGL_color_buffer_float"),x.getExtension("OES_texture_float"),x.getExtension("EXT_float_blend"),b=x.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(R=x.UNSIGNED_BYTE,b=this.interpolate);const v=4,D=Math.ceil(_/v);for(let A=D-1;A>=0;--A){const C=[];for(let ce=0,fe=e.length;ce<fe;++ce){const ue=e[ce],P=ue.pixelSize,W=P[0],te=P[1],he=new ue.dataType(v*W*te),I=ue.data;let K=A*v;for(let re=0,de=he.length;re<de;re+=v)he[re]=I[K],he[re+1]=I[K+1],he[re+2]=I[K+2],he[re+3]=I[K+3],K+=_;const k=x.createTexture();x.bindTexture(x.TEXTURE_2D,k),b?(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR)):(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST)),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.texImage2D(x.TEXTURE_2D,0,S,W,te,0,S,R,he),C.push({extent:ue.extent,clipExtent:ue.clipExtent,texture:k,width:W,height:te})}const{framebuffer:B,width:z,height:U}=mF(x,a,l,this.pixelRatio_,g,d,p,this.triangulation_,C,this.gutter_,R,this.renderEdges_,b),Y=z,$=U*v,le=new e[0].dataType(Y*$);x.bindFramebuffer(x.FRAMEBUFFER,B),x.readPixels(0,0,z,U,x.RGBA,R,le);let ie=A*v;for(let ce=0,fe=le.length;ce<fe;ce+=v){const ue=(Y-1-(ce/$|0))*$+ce%$;E[ie]=le[ue],E[ie+1]=le[ue+1],E[ie+2]=le[ue+2],E[ie+3]=le[ue+3],ie+=_}}if(gF(x),Zb.push(x.canvas),t){const A=Nt(a,l),C=new ImageData(E,a);A.putImageData(C,0,0),this.reprojData_=A.canvas}else this.reprojData_=E;this.reprojSize_=[Math.round(u),Math.round(f)],this.state=ge.LOADED,this.changed()}load(){if(this.state!==ge.IDLE&&this.state!==ge.ERROR)return;this.state=ge.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i!==ge.IDLE&&i!==ge.LOADING)return;e++;const s=et(t,Me.CHANGE,()=>{const a=t.getState();(a==ge.LOADED||a==ge.ERROR||a==ge.EMPTY)&&(St(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==ge.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(St),this.sourcesListenerKeys_=null}}function F_(n){let e=n.getDefaultTileGrid();return e||(e=EF(n),n.setDefaultTileGrid(e)),e}function yF(n,e,t){const i=e[0],s=n.getTileCoordCenter(e),a=Kd(t);if(!Vr(a,s)){const l=tt(a),u=Math.ceil((a[0]-s[0])/l);return s[0]+=l*u,n.getTileCoordForCoordAndZ(s,i)}return e}function _F(n,e,t,i){i=i!==void 0?i:"top-left";const s=yC(n,e,t);return new P_({extent:n,origin:GI(n,i),resolutions:s,tileSize:t})}function pC(n){const e=n||{},t=e.extent||bn("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:yC(t,e.maxZoom,e.tileSize,e.maxResolution)};return new P_(i)}function yC(n,e,t,i){e=e!==void 0?e:s3,t=Gt(t!==void 0?t:a_);const s=gn(n),a=tt(n);i=i>0?i:Math.max(a/t[0],s/t[1]);const l=e+1,u=new Array(l);for(let f=0;f<l;++f)u[f]=i/Math.pow(2,f);return u}function EF(n,e,t,i){const s=Kd(n);return _F(s,e,t,i)}function Kd(n){n=bn(n);let e=n.getExtent();if(!e){const t=180*pl.degrees/n.getMetersPerUnit();e=Vs(-t,-t,t,t)}return e}class _C extends Ss{constructor(e){super(),this.projection=bn(e.projection),this.attributions_=Wb(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,s){t.viewResolver=i,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Wb(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Wb(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}class EC extends _C{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Gt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||De(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,s,a){return Je()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:F_(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const s=this.getTileGridForProjection(i),a=this.getTilePixelRatio(t),l=Gt(s.getTileSize(e),this.tmpSize);return a==1?l:Q3(l,a,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=yF(s,e,i)),MN(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class xC extends $s{constructor(e,t){super(e),this.tile=t}}const hl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class xF extends EC{constructor(e){const t=e.projection===void 0?"EPSG:3857":e.projection;let i=e.tileGrid;i===void 0&&t&&(i=pC({extent:Kd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:i,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Gt(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;const t=this.getTileGrid();return t?Gt(t.getTileSize(e)):[256,256]}getGutterForProjection(e){const t=this.getProjection();return(!t||ol(t,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,i,s,a){const l=this.tileGrid||this.getTileGridForProjection(a||s),u=Math.max.apply(null,l.getResolutions().map((E,x)=>{const b=Gt(l.getTileSize(x)),S=this.getTileSize(x);return Math.max(S[0]/b[0],S[1]/b[1])})),f=this.getTileGridForProjection(s),d=[e,t,i],g=this.getTileCoordForTileUrlFunction(d,s),p=Object.assign({sourceProj:a||s,sourceTileGrid:l,targetProj:s,targetTileGrid:f,tileCoord:d,wrappedTileCoord:g,pixelRatio:u,gutter:this.gutter_,getTileFunction:(E,x,b,S)=>this.getTile(E,x,b,S),transformMatrix:this.transformMatrix},this.tileOptions),_=new pF(p);return _.key=this.getKey(),_}getTile(e,t,i,s,a){const l=this.getProjection();if(a&&(l&&!ol(l,a)||this.transformMatrix))return this.getReprojTile_(e,t,i,a,l);const u=this.getTileSize(e),f=this.loader_,d=new AbortController,g={signal:d.signal,crossOrigin:this.crossOrigin_},p=this.getTileCoordForTileUrlFunction([e,t,i]);if(!p)return null;const _=p[0],E=p[1],x=p[2],b=this.getTileGrid()?.getFullTileRange(_);b&&(g.maxY=b.getHeight()-1);function S(){return MR(function(){return f(_,E,x,g)})}const R=Object.assign({tileCoord:[e,t,i],loader:S,size:u,controller:d},this.tileOptions),v=new wu(R);return v.key=this.getKey(),v.addEventListener(Me.CHANGE,this.handleTileChange_),v}handleTileChange_(e){const t=e.target,i=De(t),s=t.getState();let a;s==ge.LOADING?(this.tileLoadingKeys_[i]=!0,a=hl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=s==ge.ERROR?hl.TILELOADERROR:s==ge.LOADED?hl.TILELOADEND:void 0),a&&this.dispatchEvent(new xC(a,t))}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ol(t,e))&&!this.transformMatrix)return this.tileGrid;const i=De(e);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=F_(e)),this.tileGridForProjection_[i]}setTileGridForProjection(e,t){const i=bn(e);if(i){const s=De(i);s in this.tileGridForProjection_||(this.tileGridForProjection_[s]=t)}}}function SF(n){return((n.fileDirectory.NewSubfileType||0)&4)===4}function TF(n,e){if(!n)return!1;if(n===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;const t=e.fileDirectory.PhotometricInterpretation,i=si;return t===i.CMYK||t===i.YCbCr||t===i.CIELab||t===i.ICCLab}const Qb="STATISTICS_MAXIMUM",Jb="STATISTICS_MINIMUM",K0=256;let Z0;function bF(){return Z0||(Z0=new OP),Z0}function vF(n){try{return n.getBoundingBox(!0)}catch{return[0,0,n.getWidth(),n.getHeight()]}}function wF(n){try{return n.getOrigin().slice(0,2)}catch{return[0,n.getHeight()]}}function RF(n,e){try{return n.getResolution(e)}catch{return[e.getWidth()/n.getWidth(),e.getHeight()/n.getHeight()]}}function AF(n){const e=n.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&e.ProjectedCSTypeGeoKey!==32767){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let i=bn(t);if(!i){const s=LT(e.ProjLinearUnitsGeoKey);s&&(i=new gu({code:t,units:s}))}return i}if(e.GeographicTypeGeoKey&&e.GeographicTypeGeoKey!==32767){const t="EPSG:"+e.GeographicTypeGeoKey;let i=bn(t);if(!i){const s=LT(e.GeogAngularUnitsGeoKey);s&&(i=new gu({code:t,units:s}))}return i}return null}function CF(n){return n.getImageCount().then(function(e){const t=new Array(e);for(let i=0;i<e;++i)t[i]=n.getImage(i);return Promise.all(t)})}function MF(n,e){let t;return n.blob?t=sF(n.blob):n.overviews?t=rF(n.url,n.overviews,e):t=iF(n.url,e),t.then(CF)}function Jc(n,e,t,i,s){if(Array.isArray(n)){const a=n.length;if(!Array.isArray(e)||a!=e.length){const l=new Error(i);throw s(l),l}for(let l=0;l<a;++l)Jc(n[l],e[l],t,i,s);return}if(e=e,Math.abs(n-e)>t*n)throw new Error(i)}function DF(n){return n instanceof Int8Array?-128:n instanceof Int16Array?-32768:n instanceof Int32Array?-2147483648:n instanceof Float32Array?12e-39:0}function IF(n){return n instanceof Int8Array?127:n instanceof Uint8Array||n instanceof Uint8ClampedArray?255:n instanceof Int16Array?32767:n instanceof Uint16Array?65535:n instanceof Int32Array?2147483647:n instanceof Uint32Array?4294967295:n instanceof Float32Array?34e37:255}class OF extends xF{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;const t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.setKey(this.sourceInfo_.map(a=>a.url).join(","));const i=this,s=new Array(t);for(let a=0;a<t;++a)s[a]=MF(this.sourceInfo_[a],this.sourceOptions_);Promise.all(s).then(function(a){i.configure_(a)}).catch(function(a){OT(a),i.error_=a,i.setState("error")})}getError(){return this.error_}determineProjection(e){const t=e[0];for(let i=t.length-1;i>=0;--i){const s=t[i],a=AF(s);if(a){this.projection=a;break}}}determineTransformMatrix(e){const t=e[0];for(let i=t.length-1;i>=0;--i){const a=t[i].fileDirectory.ModelTransformation;if(a){const[l,u,f,d,g,p,_,E]=a,x=pu(pu([1/Math.sqrt(l*l+g*g),0,0,-1/Math.sqrt(u*u+p*p),d,E],[l,g,u,p,0,0]),[1,0,0,1,-d,-E]);this.transformMatrix=x,this.addAlpha_=!0;break}}}configure_(e){let t,i,s,a,l;const u=new Array(e.length),f=new Array(e.length),d=new Array(e.length);let g=0;const p=e.length;for(let S=0;S<p;++S){const R=[],v=[];e[S].forEach(Y=>{SF(Y)?v.push(Y):R.push(Y)});const D=R.length;if(v.length>0&&v.length!==D)throw new Error(`Expected one mask per image found ${v.length} masks and ${D} images`);let A,C;const B=new Array(D),z=new Array(D),U=new Array(D);f[S]=new Array(D),d[S]=new Array(D);for(let Y=0;Y<D;++Y){const $=R[Y],le=$.getGDALNoData();d[S][Y]=$.getGDALMetadata(0),f[S][Y]=le;const ie=this.sourceInfo_[S].bands;u[S]=ie?ie.length:$.getSamplesPerPixel();const ce=D-(Y+1);A||(A=vF($)),C||(C=wF($));const fe=RF($,R[0]);U[ce]=fe[0];const ue=[$.getTileWidth(),$.getTileHeight()];ue[0]!==ue[1]&&ue[1]<K0&&(ue[0]=K0,ue[1]=K0),B[ce]=ue;const P=fe[0]/Math.abs(fe[1]);z[ce]=[ue[0],ue[1]/P]}if(t?$n(t,A,t):t=A,!i)i=C;else{const Y=`Origin mismatch for source ${S}, got [${C}] but expected [${i}]`;Jc(i,C,0,Y,this.viewRejector)}if(!l)l=U,this.resolutionFactors_[S]=1;else{l.length-g>U.length&&(g=l.length-U.length);const Y=l[l.length-1]/U[U.length-1];this.resolutionFactors_[S]=Y;const $=U.map(ie=>ie*=Y),le=`Resolution mismatch for source ${S}, got [${$}] but expected [${l}]`;Jc(l.slice(g,l.length),$,.02,le,this.viewRejector)}s?Jc(s.slice(g,s.length),z,.01,`Tile size mismatch for source ${S}`,this.viewRejector):s=z,a?Jc(a.slice(g,a.length),B,0,`Tile size mismatch for source ${S}`,this.viewRejector):a=B,this.sourceImagery_[S]=R.reverse(),this.sourceMasks_[S]=v.reverse()}for(let S=0,R=this.sourceImagery_.length;S<R;++S){const v=this.sourceImagery_[S];for(;v.length<l.length;)v.unshift(void 0)}this.getProjection()||this.determineProjection(e),this.determineTransformMatrix(e),this.samplesPerPixel_=u,this.nodataValues_=f,this.metadata_=d;e:for(let S=0;S<p;++S){if(this.sourceInfo_[S].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[S].length){this.addAlpha_=!0;break}const R=f[S],v=this.sourceInfo_[S].bands;if(v){for(let D=0;D<v.length;++D)if(R[v[D]-1]!==null){this.addAlpha_=!0;break e}continue}for(let D=0;D<R.length;++D)if(R[D]!==null){this.addAlpha_=!0;break e}}let _=this.addAlpha_?1:0;for(let S=0;S<p;++S)_+=u[S];this.bandCount=_;const E=new P_({extent:t,minZoom:g,origin:i,resolutions:l,tileSizes:s});this.tileGrid=E,this.setTileSizes(a),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const x=1;l.length===2?l=[l[0],l[1],l[1]/2]:l.length===1&&(l=[l[0]*2,l[0],l[0]/2]);let b=t;if(this.transformMatrix){const S=Qy(zn(),this.transformMatrix.slice()),R=ZR(v=>$t(S,v));b=jI(t,R)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:l,center:sd(qr(b),this.projection),extent:Zy(b,this.projection),zoom:x})}loadTile_(e,t,i,s){const a=this.getTileSize(e),l=this.sourceImagery_.length,u=new Array(l*2),f=this.nodataValues_,d=this.sourceInfo_,g=bF();for(let p=0;p<l;++p){const _=d[p],E=this.resolutionFactors_[p],x=[Math.round(t*(a[0]*E)),Math.round(i*(a[1]*E)),Math.round((t+1)*(a[0]*E)),Math.round((i+1)*(a[1]*E))],b=this.sourceImagery_[p][e];let S;_.bands&&(S=_.bands.map(function(C){return C-1}));let R;"nodata"in _&&_.nodata!==null?R=_.nodata:S?R=S.map(function(C){return f[p][C]}):R=f[p];const v={window:x,width:a[0],height:a[1],samples:S,fillValue:R,pool:g,interleave:!1,signal:s.signal};TF(this.convertToRGB_,b)?u[p]=b.readRGB(v):u[p]=b.readRasters(v);const D=l+p,A=this.sourceMasks_[p][e];if(!A){u[D]=Promise.resolve(null);continue}u[D]=A.readRasters({window:x,width:a[0],height:a[1],samples:[0],pool:g,interleave:!1})}return Promise.all(u).then(this.composeTile_.bind(this,a)).catch(function(p){throw OT(p),p})}composeTile_(e,t){const i=this.metadata_,s=this.sourceInfo_,a=this.sourceImagery_.length,l=this.bandCount,u=this.samplesPerPixel_,f=this.nodataValues_,d=this.normalize_,g=this.addAlpha_,p=e[0]*e[1],_=p*l;let E;d?E=new Uint8Array(_):E=new Float32Array(_);let x=0;for(let b=0;b<p;++b){let S=g;for(let R=0;R<a;++R){const v=s[R];let D=v.min,A=v.max,C,B;if(d){const z=i[R][0];D===void 0&&(z&&Jb in z?D=parseFloat(z[Jb]):D=DF(t[R][0])),A===void 0&&(z&&Qb in z?A=parseFloat(z[Qb]):A=IF(t[R][0])),C=255/(A-D),B=-D*C}for(let z=0;z<u[R];++z){const U=t[R][z][b];let Y;if(d?Y=Tt(C*U+B,0,255):Y=U,!g)E[x]=Y;else{let $=v.nodata;if($===void 0){let ie;v.bands?ie=v.bands[z]-1:ie=z,$=f[R][ie]}const le=isNaN($);(!le&&U!==$||le&&!isNaN(U))&&(S=!1,E[x]=Y)}x++}if(!S){const z=a+R,U=t[z];U&&!U[0][b]&&(S=!0)}}g&&(S||(E[x]=255),x++)}return E}}const LF=/\{z\}/g,NF=/\{x\}/g,BF=/\{y\}/g,PF=/\{-y\}/g;function FF(n,e,t,i,s){return n.replace(LF,e.toString()).replace(NF,t.toString()).replace(BF,i.toString()).replace(PF,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-i).toString()})}function UF(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let a;for(a=i;a<=s;++a)e.push(n.replace(t[0],String.fromCharCode(a)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=i;s++)e.push(n.replace(t[0],s.toString()));return e}return e.push(n),e}function kF(n,e){return function(t,i,s){if(!t)return;let a;const l=t[0];if(e){const u=e.getFullTileRange(l);u&&(a=u.getHeight()-1)}return FF(n,l,t[1],t[2],a)}}function zF(n,e){const t=n.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=kF(n[s],e);return GF(i)}function GF(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const s=AN(e),a=Pa(s,n.length);return n[a](e,t,i)}}class U_ extends EC{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===U_.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=De(t),s=t.getState();let a;s==ge.LOADING?(this.tileLoadingKeys_[i]=!0,a=hl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=s==ge.ERROR?hl.TILELOADERROR:s==ge.LOADED?hl.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new xC(a,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=UF(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(zF(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}class HF extends U_{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:XF,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Vd,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!ol(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ol(t,e)))return this.tileGrid;const i=De(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=F_(e)),this.tileGridForProjection[i]}createTile_(e,t,i,s,a,l){const u=[e,t,i],f=this.getTileCoordForTileUrlFunction(u,a),d=f?this.tileUrlFunction(f,s,a):void 0,g=new this.tileClass(u,d!==void 0?ge.IDLE:ge.EMPTY,d!==void 0?d:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return g.key=l,g.addEventListener(Me.CHANGE,this.handleTileChange.bind(this)),g}getTile(e,t,i,s,a){const l=this.getProjection();if(!l||!a||ol(l,a))return this.getTileInternal(e,t,i,s,l||a);const u=[e,t,i],f=this.getKey(),d=this.getTileGridForProjection(l),g=this.getTileGridForProjection(a),p=this.getTileCoordForTileUrlFunction(u,a),_=new T_(l,d,a,g,u,p,this.getTilePixelRatio(s),this.getGutter(),(E,x,b,S)=>this.getTileInternal(E,x,b,S,l),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return _.key=f,_}getTileInternal(e,t,i,s,a){const l=this.getKey();return this.createTile_(e,t,i,s,a,l)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=bn(e);if(i){const s=De(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function XF(n,e){n.getImage().src=e}class SC extends HF{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:pC({extent:Kd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const jF='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class YF extends SC{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[jF];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}let VF=!1;function qF(n,e,t,i,s,a,l){const u=new XMLHttpRequest;u.open("GET",typeof n=="function"?n(t,i,s):n,!0),e.getType()=="arraybuffer"&&(u.responseType="arraybuffer"),u.withCredentials=VF,u.onload=function(f){if(!u.status||u.status>=200&&u.status<300){const d=e.getType();try{let g;d=="text"||d=="json"?g=u.responseText:d=="xml"?g=u.responseXML||u.responseText:d=="arraybuffer"&&(g=u.response),g?a(e.readFeatures(g,{extent:t,featureProjection:s}),e.readProjection(g)):l()}catch{l()}}else l()},u.onerror=l,u.send()}function ev(n,e){return function(t,i,s,a,l){qF(n,e,t,i,s,(u,f)=>{this.addFeatures(u),a!==void 0&&a(u)},()=>{this.changed(),l!==void 0&&l()})}}function $F(n,e){return[[-1/0,-1/0,1/0,1/0]]}class k_ extends Ss{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new k_(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(St(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=et(e,Me.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?KF(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function KF(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(ot(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}function ZF(n,e,t,i){const s=[];let a=bi();for(let l=0,u=t.length;l<u;++l){const f=t[l];a=Gy(n,e,f[0],i),s.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=f[f.length-1]}return s}function tv(n,e,t,i,s,a,l){let u,f;const d=(t-e)/i;if(d===1)u=e;else if(d===2)u=e,f=s;else if(d!==0){let g=n[e],p=n[e+1],_=0;const E=[0];for(let S=e+i;S<t;S+=i){const R=n[S],v=n[S+1];_+=Math.sqrt((R-g)*(R-g)+(v-p)*(v-p)),E.push(_),g=R,p=v}const x=s*_,b=bI(E,x);b<0?(f=(x-E[-b-2])/(E[-b-1]-E[-b-2]),u=e+(-b-2)*i):u=e+b*i}l=l>1?l:2,a=a||new Array(l);for(let g=0;g<l;++g)a[g]=u===void 0?NaN:f===void 0?n[u+g]:Ui(n[u+g],n[u+i+g],f);return a}const nv=zn();class Zi{constructor(e,t,i,s,a,l){this.styleFunction,this.extent_,this.id_=l,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=a,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?PR(this.flatCoordinates_):Gy(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=qr(this.getExtent());this.flatInteriorPoints_=t_(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=JO(this.flatCoordinates_,this.ends_),t=ZF(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=$O(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=tv(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let s=0,a=i.length;s<a;++s){const l=i[s],u=tv(e,t,l,2,.5);ky(this.flatMidpoints_,u),t=l}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=bn(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const s=gn(i)/gn(t);Qi(nv,i[0],i[3],s,-s,0,0,0),Gr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,nv,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new Zi(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=CR((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=e_(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=YO(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,s);break;case"Polygon":s=[],i.length=nA(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,s);break}return s&&(this.simplifiedGeometry_=new Zi(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Zi.prototype.getFlatCoordinates=Zi.prototype.getOrientedFlatCoordinates;class iv{constructor(e){this.rbush_=new dA(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[De(t)]=i}load(e,t){const i=new Array(t.length);for(let s=0,a=t.length;s<a;s++){const l=e[s],u=t[s],f={minX:l[0],minY:l[1],maxX:l[2],maxY:l[3],value:u};i[s]=f,this.items_[De(u)]=f}this.rbush_.load(i)}remove(e){const t=De(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[De(t)],s=[i.minX,i.minY,i.maxX,i.maxY];fu(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let s=0,a=e.length;s<a;s++)if(i=t(e[s]),i)return i;return i}isEmpty(){return ml(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Vs(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const Ni={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Mr extends $s{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class WF extends _C{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=hu,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ot(this.format_,"`format` must be set when `url` is set"),this.loader_=ev(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:$F;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new iv:null,this.loadedExtentsRtree_=new iv,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!t&&i===void 0&&(i=new ys(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=De(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Mr(Ni.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Zi||(this.featureChangeKeys_[e]=[et(t,Me.CHANGE,this.handleFeatureChange_,this),et(t,gl.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const s=String(t.getId());if(!(s in this.idIndex_))this.idIndex_[s]=t;else if(t instanceof Zi){const a=this.idIndex_[s];a instanceof Zi?Array.isArray(a)?a.push(t):this.idIndex_[s]=[a,t]:i=!1}else i=!1}return i&&(ot(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a],f=De(u);this.addToIndex_(f,u)&&i.push(u)}for(let a=0,l=i.length;a<l;a++){const u=i[a],f=De(u);this.setupChangeEvents_(f,u);const d=u.getGeometry();if(d){const g=d.getExtent();t.push(g),s.push(u)}else this.nullGeometryFeatures_[f]=u}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(Ni.ADDFEATURE))for(let a=0,l=i.length;a<l;a++)this.dispatchEvent(new Mr(Ni.ADDFEATURE,i[a]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(Ni.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(Ni.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(ri.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(ri.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(St);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Mr(Ni.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(s){const a=s.getGeometry();if(a instanceof Zi||a.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const s=i.getGeometry();if(s instanceof Zi||s.intersectsExtent(e)){const a=t(i);if(a)return a}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ml(this.nullGeometryFeatures_)||ky(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=Xy(e,t);return[].concat(...s.map(a=>this.featuresRtree_.getInExtent(a)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],s=e[1];let a=null;const l=[NaN,NaN];let u=1/0;const f=[-1/0,-1/0,1/0,1/0];return t=t||uu,this.featuresRtree_.forEachInExtent(f,function(d){if(t(d)){const g=d.getGeometry(),p=u;if(u=g instanceof Zi?0:g.closestPointXY(i,s,l,u),u<p){a=d;const _=Math.sqrt(u);f[0]=i-_,f[1]=s-_,f[2]=i+_,f[3]=s+_}}}),a}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=De(t),s=t.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const l=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(l,t)):this.featuresRtree_&&this.featuresRtree_.update(l,t)}const a=t.getId();if(a!==void 0){const l=a.toString();this.idIndex_[l]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[l]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new Mr(Ni.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:De(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ml(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const s=this.loadedExtentsRtree_,a=this.strategy_(e,t,i);for(let l=0,u=a.length;l<u;++l){const f=a[l];s.forEachInExtent(f,function(g){return qc(g.extent,f)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Mr(Ni.FEATURESLOADSTART)),this.loader_.call(this,f,t,i,g=>{--this.loadingExtentsCount_,this.dispatchEvent(new Mr(Ni.FEATURESLOADEND,void 0,g))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Mr(Ni.FEATURESLOADERROR))}),s.insert(f,{extent:f.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(s){if(fu(s.extent,e))return s});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,s=e.length;i<s;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=De(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(St),delete this.featureChangeKeys_[t];const s=e.getId();if(s!==void 0){const a=s.toString(),l=this.idIndex_[a];l===e?delete this.idIndex_[a]:Array.isArray(l)&&(l.splice(l.indexOf(e),1),l.length===1&&(this.idIndex_[a]=l[0]))}return delete this.uidIndex_[t],this.hasListener(Ni.REMOVEFEATURE)&&this.dispatchEvent(new Mr(Ni.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ot(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(ev(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const W0="units",QF=[1,2,5],Xc=25.4/.28;class JF extends Fd{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+zu,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(W0,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(W0)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(W0,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,s=this.getUnits(),a=s=="degrees"?"degrees":"m";let l=nd(i,e.resolution,t,a);const u=this.minWidth_*(this.dpi_||Xc)/Xc,f=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Xc)/Xc:void 0;let d=u*l,g="";if(s=="degrees"){const D=pl.degrees;d*=D,d<D/60?(g="",l*=3600):d<D?(g="",l*=60):g=""}else if(s=="imperial")d<.9144?(g="in",l/=.0254):d<1609.344?(g="ft",l/=.3048):(g="mi",l/=1609.344);else if(s=="nautical")l/=1852,g="NM";else if(s=="metric")d<1e-6?(g="nm",l*=1e9):d<.001?(g="m",l*=1e6):d<1?(g="mm",l*=1e3):d<1e3?g="m":(g="km",l/=1e3);else if(s=="us")d<.9144?(g="in",l*=39.37):d<1609.344?(g="ft",l/=.30480061):(g="mi",l/=1609.3472);else throw new Error("Invalid units");let p=3*Math.floor(Math.log(u*l)/Math.log(10)),_,E,x,b=0,S,R;for(;;){x=Math.floor(p/3);const D=Math.pow(10,x);if(_=QF[(p%3+3)%3]*D,E=Math.round(_/l),isNaN(E)){this.element.style.display="none",this.renderedVisible_=!1;return}if(f!==void 0&&E>=f){_=b,E=S,x=R;break}else if(E>=u)break;b=_,S=E,R=x,++p}const v=this.scaleBar_?this.createScaleBar(E,_,g):_.toFixed(x<0?-x:0)+" "+g;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=E&&(this.innerElement_.style.width=E+"px",this.renderedWidth_=E),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const s=this.getScaleForResolution(),a=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),l=this.scaleBarSteps_,u=e/l,f=[this.createMarker("absolute")];for(let g=0;g<l;++g){const p=g%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";f.push(`<div><div class="ol-scale-singlebar ${p}" style="width: ${u}px;"></div>`+this.createMarker("relative")+(g%2===0||l===2?this.createStepText(g,e,!1,t,i):"")+"</div>")}return f.push(this.createStepText(l,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+a+"</div>":"")+f.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,s,a){const u=(e===0?0:Math.round(s/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+a),f=e===0?-3:t/this.scaleBarSteps_*-1,d=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${f}px;text-align: ${e===0?"left":"center"};min-width: ${d}px;left: ${i?t+"px":"unset"};">`+u+"</div>"}getScaleForResolution(){const e=nd(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Xc,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const eU=[115.367526,-8.129998],tU=18,nU="osm",iU="satellite",sU="geotiff",rU=new Hr({text:new Xd({text:"",font:"bold 28px sans-serif",fill:new Ol({color:"#ffffff"}),stroke:new Xu({color:"#000000",width:3}),offsetY:0})}),aU=({homeLatLng:n,homeZoom:e,layers:t,onCoordinateClick:i,clickCoordinates:s,searchCoordinates:a})=>{const l=Vn.useRef(),[u,f]=Vn.useState(null),[d,g]=Vn.useState(null);return Vn.useEffect(()=>{const p=t.map(b=>{const{id:S,url:R,type:v,visible:D,attributionText:A,attributionUrl:C,maxZoom:B}=b;if(v===nU)return new Ob({source:new YF,visible:D});if(v===iU)return new Ob({source:new SC({url:R,attributions:`Tiles  <a href=${C}>${A}</a>`,maxZoom:B}),visible:D});if(v===sU)return new YA({visible:D,source:new OF({sources:[{url:R}],attributions:`Tiles  <a href=${C}>${A}</a>`})});throw`Unknown layer config type: ${v} (id: ${S})`}),_=new WF,E=new AB({source:_,style:rU}),x=new eN({target:l.current,layers:[...p,E],view:new ms({center:E0(n),zoom:e,maxZoom:void 0}),controls:aA().extend([new JF({units:"metric",bar:!0,steps:6,minWidth:180})])});return x.on("singleclick",b=>{const S=vO(b.coordinate),[R,v]=S;i&&i({lat:v,lng:R})}),f(x),g(E),()=>x.setTarget(void 0)},[]),Vn.useEffect(()=>{u&&t.forEach(({id:p,visible:_},E)=>{u.getLayers().getArray()[E].setVisible(_)})},[t,u]),Vn.useEffect(()=>{if(!u||!d)return;const p=d.getSource();if(p.clear(),s){const _=new k_({geometry:new Bd(E0([s.lng,s.lat]))});p.addFeature(_)}},[s,u,d]),Vn.useEffect(()=>{u&&a&&u.getView().animate({zoom:7,duration:8e3/4},{center:E0([a.lng,a.lat]),duration:8e3/2},{zoom:13,duration:8e3/4})},[a,u]),vt.jsx("div",{style:{height:"100vh",width:"100%"},ref:l})},oU=({layers:n,setLayers:e})=>{const[t,i]=Vn.useState(!1),s=a=>{e(n.map((l,u)=>u===a?{...l,visible:!l.visible}:l))};return vt.jsxs("div",{className:"layer-toggle",children:[vt.jsxs("div",{className:"layer-toggle-header",onClick:()=>i(!t),children:[vt.jsx("span",{children:"Layers"}),vt.jsx("span",{className:`caret ${t?"open":""}`,children:""})]}),t&&vt.jsx("div",{className:"layer-toggle-content",children:n.map(({id:a,label:l,visible:u},f)=>vt.jsxs("div",{onClick:()=>s(f),children:[vt.jsx("input",{type:"checkbox",checked:u,readOnly:!0}),vt.jsx("label",{children:l})]},`layer-label-${a}`))})]})},lU=({clickCoordinates:n,onClear:e})=>{if(!n)return null;const{lat:t,lng:i}=n;return vt.jsx("div",{className:"coordinate-display",children:vt.jsxs("div",{className:"coordinate-content",children:[vt.jsxs("div",{className:"coordinate-text",children:[vt.jsxs("div",{children:["Lat: ",t.toFixed(6)]}),vt.jsxs("div",{children:["Lng: ",i.toFixed(6)]})]}),vt.jsx("button",{className:"coordinate-close",onClick:e,"aria-label":"Clear click coordinates",children:""})]})})},cU=({onSearch:n,initialQuery:e=""})=>{const[t,i]=Vn.useState(e),s=l=>{i(l.target.value)},a=l=>{l.key==="Enter"&&n(t)};return vt.jsx("div",{className:"search-container",children:vt.jsx("input",{type:"text",placeholder:"Fly to...",value:t,onChange:s,onKeyDown:a})})},uU=n=>({setHttpHandler(e){n.httpHandler=e},httpHandler(){return n.httpHandler},updateHttpClientConfig(e,t){n.httpHandler?.updateHttpClientConfig(e,t)},httpHandlerConfigs(){return n.httpHandler.httpHandlerConfigs()}}),hU=n=>({httpHandler:n.httpHandler()});var sv;(function(n){n.HEADER="header",n.QUERY="query"})(sv||(sv={}));var rv;(function(n){n.HEADER="header",n.QUERY="query"})(rv||(rv={}));var Cu;(function(n){n.HTTP="http",n.HTTPS="https"})(Cu||(Cu={}));var fd;(function(n){n.MD5="md5",n.CRC32="crc32",n.CRC32C="crc32c",n.SHA1="sha1",n.SHA256="sha256"})(fd||(fd={}));var av;(function(n){n[n.HEADER=0]="HEADER",n[n.TRAILER=1]="TRAILER"})(av||(av={}));const xy="__smithy_context";var ov;(function(n){n.PROFILE="profile",n.SSO_SESSION="sso-session",n.SERVICES="services"})(ov||(ov={}));var lv;(function(n){n.HTTP_0_9="http/0.9",n.HTTP_1_0="http/1.0",n.TDS_8_0="tds/8.0"})(lv||(lv={}));class tn{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new tn({...e,headers:{...e.headers}});return t.query&&(t.query=fU(t.query)),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"}clone(){return tn.clone(this)}}function fU(n){return Object.keys(n).reduce((e,t)=>{const i=n[t];return{...e,[t]:Array.isArray(i)?[...i]:i}},{})}class Xa{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const t=e;return typeof t.statusCode=="number"&&typeof t.headers=="object"}}function dU(n){return e=>async t=>{const{request:i}=t;return tn.isInstance(i)&&i.body&&n.runtime==="node"&&n.requestHandler?.constructor?.name!=="FetchHttpHandler"&&(i.headers={...i.headers,Expect:"100-continue"}),e({...t,request:i})}}const gU={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},mU=n=>({applyToStack:e=>{e.add(dU(n),gU)}}),vl={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},pU=vl.WHEN_SUPPORTED,Q0={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},yU=vl.WHEN_SUPPORTED;var yt;(function(n){n.MD5="MD5",n.CRC32="CRC32",n.CRC32C="CRC32C",n.CRC64NVME="CRC64NVME",n.SHA1="SHA1",n.SHA256="SHA256"})(yt||(yt={}));var cv;(function(n){n.HEADER="header",n.TRAILER="trailer"})(cv||(cv={}));const Sy=yt.CRC32;var uv;(function(n){n.ENV="env",n.CONFIG="shared config entry"})(uv||(uv={}));function _U(n,e,t){return n.$source||(n.$source={}),n.$source[e]=t,n}function qt(n,e,t){n.__aws_sdk_context?n.__aws_sdk_context.features||(n.__aws_sdk_context.features={}):n.__aws_sdk_context={features:{}},n.__aws_sdk_context.features[e]=t}const hv=n=>Xa.isInstance(n)?n.headers?.date??n.headers?.Date:void 0,z_=n=>new Date(Date.now()+n),EU=(n,e)=>Math.abs(z_(e).getTime()-n)>=3e5,fv=(n,e)=>{const t=Date.parse(n);return EU(t,e)?t-Date.now():e},su=(n,e)=>{if(!e)throw new Error(`Property \`${n}\` is not resolved for AWS SDK SigV4Auth`);return e},TC=async n=>{const e=su("context",n.context),t=su("config",n.config),i=e.endpointV2?.properties?.authSchemes?.[0],a=await su("signer",t.signer)(i),l=n?.signingRegion,u=n?.signingRegionSet,f=n?.signingName;return{config:t,signer:a,signingRegion:l,signingRegionSet:u,signingName:f}};class bC{async sign(e,t,i){if(!tn.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await TC(i),{config:a,signer:l}=s;let{signingRegion:u,signingName:f}=s;const d=i.context;if(d?.authSchemes?.length??!1){const[p,_]=d.authSchemes;p?.name==="sigv4a"&&_?.name==="sigv4"&&(u=_?.signingRegion??u,f=_?.signingName??f)}return await l.sign(e,{signingDate:z_(a.systemClockOffset),signingRegion:u,signingService:f})}errorHandler(e){return t=>{const i=t.ServerTime??hv(t.$response);if(i){const s=su("config",e.config),a=s.systemClockOffset;s.systemClockOffset=fv(i,s.systemClockOffset),s.systemClockOffset!==a&&t.$metadata&&(t.$metadata.clockSkewCorrected=!0)}throw t}}successHandler(e,t){const i=hv(e);if(i){const s=su("config",t.config);s.systemClockOffset=fv(i,s.systemClockOffset)}}}class xU extends bC{async sign(e,t,i){if(!tn.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:s,signer:a,signingRegion:l,signingRegionSet:u,signingName:f}=await TC(i),g=(await s.sigv4aSigningRegionSet?.()??u??[l]).join(",");return await a.sign(e,{signingDate:z_(s.systemClockOffset),signingRegion:g,signingService:f})}}const Pl=n=>n[xy]||(n[xy]={}),Wi=n=>{if(typeof n=="function")return n;const e=Promise.resolve(n);return()=>e},SU=(n,e)=>{if(!e||e.length===0)return n;const t=[];for(const i of e)for(const s of n)s.schemeId.split("#")[1]===i&&t.push(s);for(const i of n)t.find(({schemeId:s})=>s===i.schemeId)||t.push(i);return t};function TU(n){const e=new Map;for(const t of n)e.set(t.schemeId,t);return e}const bU=(n,e)=>(t,i)=>async s=>{const a=n.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(n,i,s.input)),l=n.authSchemePreference?await n.authSchemePreference():[],u=SU(a,l),f=TU(n.httpAuthSchemes),d=Pl(i),g=[];for(const p of u){const _=f.get(p.schemeId);if(!_){g.push(`HttpAuthScheme \`${p.schemeId}\` was not enabled for this service.`);continue}const E=_.identityProvider(await e.identityProviderConfigProvider(n));if(!E){g.push(`HttpAuthScheme \`${p.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:x={},signingProperties:b={}}=p.propertiesExtractor?.(n,i)||{};p.identityProperties=Object.assign(p.identityProperties||{},x),p.signingProperties=Object.assign(p.signingProperties||{},b),d.selectedHttpAuthScheme={httpAuthOption:p,identity:await E(p.identityProperties),signer:_.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(g.join(`
`));return t(s)},vU={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},wU=(n,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:t})=>({applyToStack:i=>{i.addRelativeTo(bU(n,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:t}),vU)}}),RU=(n,e)=>(t,i)=>async s=>{const{response:a}=await t(s);try{const l=await e(a,n);return{response:a,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:a}),!("$metadata"in l)){const u="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+u}catch{!i.logger||i.logger?.constructor?.name==="NoOpLogger"?console.warn(u):i.logger?.warn?.(u)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(Xa.isInstance(a)){const{headers:f={}}=a,d=Object.entries(f);l.$metadata={httpStatusCode:a.statusCode,requestId:J0(/^x-[\w-]+-request-?id$/,d),extendedRequestId:J0(/^x-[\w-]+-id-2$/,d),cfId:J0(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw l}},J0=(n,e)=>(e.find(([t])=>t.match(n))||[void 0,void 0])[1],AU=(n,e)=>(t,i)=>async s=>{const a=n,l=i.endpointV2?.url&&a.urlParser?async()=>a.urlParser(i.endpointV2.url):a.endpoint;if(!l)throw new Error("No valid endpoint provider available.");const u=await e(s.input,{...n,endpoint:l});return t({...s,request:u})},CU={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},vC={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function G_(n,e,t){return{applyToStack:i=>{i.add(RU(n,t),CU),i.add(AU(n,e),vC)}}}const MU=n=>e=>{throw e},DU=(n,e)=>{},IU=n=>(e,t)=>async i=>{if(!tn.isInstance(i.request))return e(i);const a=Pl(t).selectedHttpAuthScheme;if(!a)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:l={}},identity:u,signer:f}=a,d=await e({...i,request:await f.sign(i.request,u,l)}).catch((f.errorHandler||MU)(l));return(f.successHandler||DU)(d.response,l),d},wC={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},OU=n=>({applyToStack:e=>{e.addRelativeTo(IU(),wC)}}),fl=n=>{if(typeof n=="function")return n;const e=Promise.resolve(n);return()=>e},Zr={},Fl=new Array(64);for(let n=0,e=65,t=90;n+e<=t;n++){const i=String.fromCharCode(n+e);Zr[i]=n,Fl[n]=i}for(let n=0,e=97,t=122;n+e<=t;n++){const i=String.fromCharCode(n+e),s=n+26;Zr[i]=s,Fl[s]=i}for(let n=0;n<10;n++){Zr[n.toString(10)]=n+52;const e=n.toString(10),t=n+52;Zr[e]=t,Fl[t]=e}Zr["+"]=62;Fl[62]="+";Zr["/"]=63;Fl[63]="/";const dl=6,ru=8,LU=63,H_=n=>{let e=n.length/4*3;n.slice(-2)==="=="?e-=2:n.slice(-1)==="="&&e--;const t=new ArrayBuffer(e),i=new DataView(t);for(let s=0;s<n.length;s+=4){let a=0,l=0;for(let d=s,g=s+3;d<=g;d++)if(n[d]!=="="){if(!(n[d]in Zr))throw new TypeError(`Invalid character ${n[d]} in base64 string.`);a|=Zr[n[d]]<<(g-d)*dl,l+=dl}else a>>=dl;const u=s/4*3;a>>=l%ru;const f=Math.floor(l/ru);for(let d=0;d<f;d++){const g=(f-d-1)*ru;i.setUint8(u+d,(a&255<<g)>>g)}}return new Uint8Array(t)},ja=n=>new TextEncoder().encode(n),wl=n=>typeof n=="string"?ja(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n),X_=n=>{if(typeof n=="string")return n;if(typeof n!="object"||typeof n.byteOffset!="number"||typeof n.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(n)};function Zd(n){let e;typeof n=="string"?e=ja(n):e=n;const t=typeof e=="object"&&typeof e.length=="number",i=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!t&&!i)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let a=0;a<e.length;a+=3){let l=0,u=0;for(let d=a,g=Math.min(a+3,e.length);d<g;d++)l|=e[d]<<(g-d-1)*ru,u+=ru;const f=Math.ceil(u/dl);l<<=f*dl-u;for(let d=1;d<=f;d++){const g=(f-d)*dl;s+=Fl[(l&LU<<g)>>g]}s+="==".slice(0,4-f)}return s}function NU(n,e="utf-8"){return e==="base64"?Zd(n):X_(n)}function BU(n,e){return e==="base64"?Fa.mutate(H_(n)):Fa.mutate(ja(n))}class Fa extends Uint8Array{static fromString(e,t="utf-8"){switch(typeof e){case"string":return BU(e,t);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,Fa.prototype),e}transformToString(e="utf-8"){return NU(this,e)}}const PU=typeof ReadableStream=="function"?ReadableStream:function(){};class FU extends PU{}const Ty=n=>typeof ReadableStream=="function"&&(n?.constructor?.name===ReadableStream.name||n instanceof ReadableStream),UU=({expectedChecksum:n,checksum:e,source:t,checksumSourceLocation:i,base64Encoder:s})=>{if(!Ty(t))throw new Error(`@smithy/util-stream: unsupported source type ${t?.constructor?.name??t} in ChecksumStream.`);const a=s??Zd;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const l=new TransformStream({start(){},async transform(f,d){e.update(f),d.enqueue(f)},async flush(f){const d=await e.digest(),g=a(d);if(n!==g){const p=new Error(`Checksum mismatch: expected "${n}" but received "${g}" in response header "${i}".`);f.error(p)}else f.terminate()}});t.pipeThrough(l);const u=l.readable;return Object.setPrototypeOf(u,FU.prototype),u};class kU{constructor(e){this.allocByteArray=e,this.byteLength=0,this.byteArrays=[]}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const i=this.byteArrays[0];return this.reset(),i}const e=this.allocByteArray(this.byteLength);let t=0;for(let i=0;i<this.byteArrays.length;++i){const s=this.byteArrays[i];e.set(s,t),t+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function zU(n,e,t){const i=n.getReader();let s=!1,a=0;const l=["",new kU(d=>new Uint8Array(d))];let u=-1;const f=async d=>{const{value:g,done:p}=await i.read(),_=g;if(p){if(u!==-1){const E=ep(l,u);au(E)>0&&d.enqueue(E)}d.close()}else{const E=XU(_,!1);if(u!==E&&(u>=0&&d.enqueue(ep(l,u)),u=E),u===-1){d.enqueue(_);return}const x=au(_);a+=x;const b=au(l[u]);if(x>=e&&b===0)d.enqueue(_);else{const S=HU(l,u,_);!s&&a>e*2&&(s=!0,t?.warn(`@smithy/util-stream - stream chunk size ${x} is below threshold of ${e}, automatically buffering.`)),S>=e?d.enqueue(ep(l,u)):await f(d)}}};return new ReadableStream({pull:f})}const GU=zU;function HU(n,e,t){switch(e){case 0:return n[0]+=t,au(n[0]);case 1:case 2:return n[e].push(t),au(n[e])}}function ep(n,e){switch(e){case 0:const t=n[0];return n[0]="",t;case 1:case 2:return n[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function au(n){return n?.byteLength??n?.length??0}function XU(n,e=!0){return e&&typeof Buffer<"u"&&n instanceof Buffer?2:n instanceof Uint8Array?1:typeof n=="string"?0:-1}const jU=(n,e)=>{const{base64Encoder:t,bodyLengthChecker:i,checksumAlgorithmFn:s,checksumLocationName:a,streamHasher:l}=e,u=t!==void 0&&i!==void 0&&s!==void 0&&a!==void 0&&l!==void 0,f=u?l(s,n):void 0,d=n.getReader();return new ReadableStream({async pull(g){const{value:p,done:_}=await d.read();if(_){if(g.enqueue(`0\r
`),u){const E=t(await f);g.enqueue(`${a}:${E}\r
`),g.enqueue(`\r
`)}g.close()}else g.enqueue(`${(i(p)||0).toString(16)}\r
${p}\r
`)}})};async function YU(n,e){let t=0;const i=[],s=n.getReader();let a=!1;for(;!a;){const{done:f,value:d}=await s.read();if(d&&(i.push(d),t+=d?.byteLength??0),t>=e)break;a=f}s.releaseLock();const l=new Uint8Array(Math.min(e,t));let u=0;for(const f of i){if(f.byteLength>l.byteLength-u){l.set(f.subarray(0,l.byteLength-u),u);break}else l.set(f,u);u+=f.length}return l}const Ua=n=>encodeURIComponent(n).replace(/[!'()*]/g,VU),VU=n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`;function qU(n){const e=[];for(let t of Object.keys(n).sort()){const i=n[t];if(t=Ua(t),Array.isArray(i))for(let s=0,a=i.length;s<a;s++)e.push(`${t}=${Ua(i[s])}`);else{let s=t;(i||typeof i=="string")&&(s+=`=${Ua(i)}`),e.push(s)}}return e.join("&")}function dv(n,e){return new Request(n,e)}function $U(n=0){return new Promise((e,t)=>{n&&setTimeout(()=>{const i=new Error(`Request did not complete within ${n} ms`);i.name="TimeoutError",t(i)},n)})}const tp={supported:void 0};class j_{static create(e){return typeof e?.handle=="function"?e:new j_(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(t=>t||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),tp.supported===void 0&&(tp.supported=typeof Request<"u"&&"keepalive"in dv("https://[::1]"))}destroy(){}async handle(e,{abortSignal:t,requestTimeout:i}={}){this.config||(this.config=await this.configProvider);const s=i??this.config.requestTimeout,a=this.config.keepAlive===!0,l=this.config.credentials;if(t?.aborted){const v=new Error("Request aborted");return v.name="AbortError",Promise.reject(v)}let u=e.path;const f=qU(e.query||{});f&&(u+=`?${f}`),e.fragment&&(u+=`#${e.fragment}`);let d="";if(e.username!=null||e.password!=null){const v=e.username??"",D=e.password??"";d=`${v}:${D}@`}const{port:g,method:p}=e,_=`${e.protocol}//${d}${e.hostname}${g?`:${g}`:""}${u}`,E=p==="GET"||p==="HEAD"?void 0:e.body,x={body:E,headers:new Headers(e.headers),method:p,credentials:l};this.config?.cache&&(x.cache=this.config.cache),E&&(x.duplex="half"),typeof AbortController<"u"&&(x.signal=t),tp.supported&&(x.keepalive=a),typeof this.config.requestInit=="function"&&Object.assign(x,this.config.requestInit(e));let b=()=>{};const S=dv(_,x),R=[fetch(S).then(v=>{const D=v.headers,A={};for(const B of D.entries())A[B[0]]=B[1];return v.body!=null?{response:new Xa({headers:A,reason:v.statusText,statusCode:v.status,body:v.body})}:v.blob().then(B=>({response:new Xa({headers:A,reason:v.statusText,statusCode:v.status,body:B})}))}),$U(s)];return t&&R.push(new Promise((v,D)=>{const A=()=>{const C=new Error("Request aborted");C.name="AbortError",D(C)};if(typeof t.addEventListener=="function"){const C=t;C.addEventListener("abort",A,{once:!0}),b=()=>C.removeEventListener("abort",A)}else t.onabort=A})),Promise.race(R).finally(b)}updateHttpClientConfig(e,t){this.config=void 0,this.configProvider=this.configProvider.then(i=>(i[e]=t,i))}httpHandlerConfigs(){return this.config??{}}}const RC=async n=>typeof Blob=="function"&&n instanceof Blob||n.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await n.arrayBuffer()):KU(n):ZU(n);async function KU(n){const e=await WU(n),t=H_(e);return new Uint8Array(t)}async function ZU(n){const e=[],t=n.getReader();let i=!1,s=0;for(;!i;){const{done:u,value:f}=await t.read();f&&(e.push(f),s+=f.length),i=u}const a=new Uint8Array(s);let l=0;for(const u of e)a.set(u,l),l+=u.length;return a}function WU(n){return new Promise((e,t)=>{const i=new FileReader;i.onloadend=()=>{if(i.readyState!==2)return t(new Error("Reader aborted too early"));const s=i.result??"",a=s.indexOf(","),l=a>-1?a+1:s.length;e(s.substring(l))},i.onabort=()=>t(new Error("Read aborted")),i.onerror=()=>t(i.error),i.readAsDataURL(n)})}const AC={},by={};for(let n=0;n<256;n++){let e=n.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),AC[n]=e,by[e]=n}function CC(n){if(n.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(n.length/2);for(let t=0;t<n.length;t+=2){const i=n.slice(t,t+2).toLowerCase();if(i in by)e[t/2]=by[i];else throw new Error(`Cannot decode unrecognized sequence ${i} as hexadecimal`)}return e}function ci(n){let e="";for(let t=0;t<n.byteLength;t++)e+=AC[n[t]];return e}const gv="The stream has already been transformed.",QU=n=>{if(!mv(n)&&!Ty(n)){const s=n?.__proto__?.constructor?.name||n;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1;const t=async()=>{if(e)throw new Error(gv);return e=!0,await RC(n)},i=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(n,{transformToByteArray:t,transformToString:async s=>{const a=await t();if(s==="base64")return Zd(a);if(s==="hex")return ci(a);if(s===void 0||s==="utf8"||s==="utf-8")return X_(a);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(gv);if(e=!0,mv(n))return i(n);if(Ty(n))return n;throw new Error(`Cannot transform payload to web stream, got ${n}`)}})},mv=n=>typeof Blob=="function"&&n instanceof Blob;async function JU(n){return typeof n.stream=="function"&&(n=n.stream()),n.tee()}const e4=async(n=new Uint8Array,e)=>{if(n instanceof Uint8Array)return Fa.mutate(n);if(!n)return Fa.mutate(new Uint8Array);const t=e.streamCollector(n);return Fa.mutate(await t)};function pv(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Mu=n=>{switch(n){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${n}"`)}},t4=n=>{if(n!=null){if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return String(e)!==String(n)&&OC.warn(IC(`Expected number but observed string: ${n}`)),e}if(typeof n=="number")return n;throw new TypeError(`Expected number, got ${typeof n}: ${n}`)}},n4=Math.ceil(2**127*(2-2**-23)),yv=n=>{const e=t4(n);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>n4)throw new TypeError(`Expected 32-bit float, got ${n}`);return e},vy=n=>{if(n!=null){if(Number.isInteger(n)&&!Number.isNaN(n))return n;throw new TypeError(`Expected integer, got ${typeof n}: ${n}`)}},_v=n=>Y_(n,32),Ev=n=>Y_(n,16),xv=n=>Y_(n,8),Y_=(n,e)=>{const t=vy(n);if(t!==void 0&&i4(t,e)!==t)throw new TypeError(`Expected ${e}-bit integer, got ${n}`);return t},i4=(n,e)=>{switch(e){case 32:return Int32Array.of(n)[0];case 16:return Int16Array.of(n)[0];case 8:return Int8Array.of(n)[0]}},Xr=(n,e)=>{if(n==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return n},MC=n=>{if(n==null)return;if(typeof n=="object"&&!Array.isArray(n))return n;const e=Array.isArray(n)?"array":typeof n;throw new TypeError(`Expected object, got ${e}: ${n}`)},Kt=n=>{if(n!=null){if(typeof n=="string")return n;if(["boolean","number","bigint"].includes(typeof n))return OC.warn(IC(`Expected string, got ${typeof n}: ${n}`)),String(n);throw new TypeError(`Expected string, got ${typeof n}: ${n}`)}},s4=n=>yv(typeof n=="string"?qu(n):n),r4=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,qu=n=>{const e=n.match(r4);if(e===null||e[0].length!==n.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(n)},DC=n=>vy(typeof n=="string"?qu(n):n),ou=n=>_v(typeof n=="string"?qu(n):n),dd=n=>Ev(typeof n=="string"?qu(n):n),a4=n=>xv(typeof n=="string"?qu(n):n),IC=n=>String(new TypeError(n).stack||n).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),OC={warn:console.warn},o4=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],V_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function np(n){const e=n.getUTCFullYear(),t=n.getUTCMonth(),i=n.getUTCDay(),s=n.getUTCDate(),a=n.getUTCHours(),l=n.getUTCMinutes(),u=n.getUTCSeconds(),f=s<10?`0${s}`:`${s}`,d=a<10?`0${a}`:`${a}`,g=l<10?`0${l}`:`${l}`,p=u<10?`0${u}`:`${u}`;return`${o4[i]}, ${f} ${V_[t]} ${e} ${d}:${g}:${p} GMT`}const l4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Wd=n=>{if(n==null)return;if(typeof n!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=l4.exec(n);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[t,i,s,a,l,u,f,d,g]=e,p=dd(Du(i)),_=jr(s,"month",1,12),E=jr(a,"day",1,31),x=Uf(p,_,E,{hours:l,minutes:u,seconds:f,fractionalMilliseconds:d});return g.toUpperCase()!="Z"&&x.setTime(x.getTime()-E4(g)),x},c4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),u4=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),h4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),wy=n=>{if(n==null)return;if(typeof n!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=c4.exec(n);if(e){const[t,i,s,a,l,u,f,d]=e;return Uf(dd(Du(a)),ip(s),jr(i,"day",1,31),{hours:l,minutes:u,seconds:f,fractionalMilliseconds:d})}if(e=u4.exec(n),e){const[t,i,s,a,l,u,f,d]=e;return g4(Uf(f4(a),ip(s),jr(i,"day",1,31),{hours:l,minutes:u,seconds:f,fractionalMilliseconds:d}))}if(e=h4.exec(n),e){const[t,i,s,a,l,u,f,d]=e;return Uf(dd(Du(d)),ip(i),jr(s.trimLeft(),"day",1,31),{hours:a,minutes:l,seconds:u,fractionalMilliseconds:f})}throw new TypeError("Invalid RFC-7231 date-time value")},Uf=(n,e,t,i)=>{const s=e-1;return p4(n,s,t),new Date(Date.UTC(n,s,t,jr(i.hours,"hour",0,23),jr(i.minutes,"minute",0,59),jr(i.seconds,"seconds",0,60),_4(i.fractionalMilliseconds)))},f4=n=>{const e=new Date().getUTCFullYear(),t=Math.floor(e/100)*100+dd(Du(n));return t<e?t+100:t},d4=50*365*24*60*60*1e3,g4=n=>n.getTime()-new Date().getTime()>d4?new Date(Date.UTC(n.getUTCFullYear()-100,n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds())):n,ip=n=>{const e=V_.indexOf(n);if(e<0)throw new TypeError(`Invalid month: ${n}`);return e+1},m4=[31,28,31,30,31,30,31,31,30,31,30,31],p4=(n,e,t)=>{let i=m4[e];if(e===1&&y4(n)&&(i=29),t>i)throw new TypeError(`Invalid day for ${V_[e]} in ${n}: ${t}`)},y4=n=>n%4===0&&(n%100!==0||n%400===0),jr=(n,e,t,i)=>{const s=a4(Du(n));if(s<t||s>i)throw new TypeError(`${e} must be between ${t} and ${i}, inclusive`);return s},_4=n=>n==null?0:s4("0."+n)*1e3,E4=n=>{const e=n[0];let t=1;if(e=="+")t=1;else if(e=="-")t=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const i=Number(n.substring(1,3)),s=Number(n.substring(4,6));return t*(i*60+s)*60*1e3},Du=n=>{let e=0;for(;e<n.length-1&&n.charAt(e)==="0";)e++;return e===0?n:n.slice(e)};function x4(n){return(n.includes(",")||n.includes('"'))&&(n=`"${n.replace(/"/g,'\\"')}"`),n}const S4=(n,e,t,i,s,a)=>{if(e!=null&&e[t]!==void 0){const l=i();if(l.length<=0)throw new Error("Empty value provided for input HTTP label: "+t+".");n=n.replace(s,a?l.split("/").map(u=>pv(u)).join("/"):pv(l))}else throw new Error("No value provided for input HTTP label: "+t+".");return n};function q_(n,e){return new T4(n,e)}class T4{constructor(e,t){this.input=e,this.context=t,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:t="https",port:i,path:s}=await this.context.endpoint();this.path=s;for(const a of this.resolvePathStack)a(this.path);return new tn({protocol:t,hostname:this.hostname||e,port:i,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(t=>{this.path=`${t?.endsWith("/")?t.slice(0,-1):t||""}`+e}),this}p(e,t,i,s){return this.resolvePathStack.push(a=>{this.path=S4(a,this.input,e,t,i,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}function b4(n,e,t){n.__smithy_context?n.__smithy_context.features||(n.__smithy_context.features={}):n.__smithy_context={features:{}},n.__smithy_context.features[e]=t}class v4{constructor(e){this.authSchemes=new Map;for(const[t,i]of Object.entries(e))i!==void 0&&this.authSchemes.set(t,i)}getIdentityProvider(e){return this.authSchemes.get(e)}}const w4=n=>e=>LC(e)&&e.expiration.getTime()-Date.now()<n,R4=3e5,A4=w4(R4),LC=n=>n.expiration!==void 0,C4=(n,e,t)=>{if(n===void 0)return;const i=typeof n!="function"?async()=>Promise.resolve(n):n;let s,a,l,u=!1;const f=async d=>{a||(a=i(d));try{s=await a,l=!0,u=!1}finally{a=void 0}return s};return e===void 0?async d=>((!l||d?.forceRefresh)&&(s=await f(d)),s):async d=>((!l||d?.forceRefresh)&&(s=await f(d)),u?s:t(s)?(e(s)&&await f(d),s):(u=!0,s))},M4=(n,e,t)=>{let i,s,a,l=!1;const u=async()=>{s||(s=n());try{i=await s,a=!0,l=!1}finally{s=void 0}return i};return async f=>((!a||f?.forceRefresh)&&(i=await u()),i)},D4=n=>(n.sigv4aSigningRegionSet=fl(n.sigv4aSigningRegionSet),n),I4="X-Amz-Algorithm",O4="X-Amz-Credential",NC="X-Amz-Date",L4="X-Amz-SignedHeaders",N4="X-Amz-Expires",BC="X-Amz-Signature",PC="X-Amz-Security-Token",FC="authorization",UC=NC.toLowerCase(),B4="date",P4=[FC,UC,B4],F4=BC.toLowerCase(),Ry="x-amz-content-sha256",U4=PC.toLowerCase(),k4={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},z4=/^proxy-/,G4=/^sec-/,sp="AWS4-HMAC-SHA256",H4="AWS4-HMAC-SHA256-PAYLOAD",X4="UNSIGNED-PAYLOAD",j4=50,kC="aws4_request",Y4=60*60*24*7,Cf={},rp=[],ap=(n,e,t)=>`${n}/${e}/${t}/${kC}`,V4=async(n,e,t,i,s)=>{const a=await Sv(n,e.secretAccessKey,e.accessKeyId),l=`${t}:${i}:${s}:${ci(a)}:${e.sessionToken}`;if(l in Cf)return Cf[l];for(rp.push(l);rp.length>j4;)delete Cf[rp.shift()];let u=`AWS4${e.secretAccessKey}`;for(const f of[t,i,s,kC])u=await Sv(n,u,f);return Cf[l]=u},Sv=(n,e,t)=>{const i=new n(e);return i.update(wl(t)),i.digest()},Tv=({headers:n},e,t)=>{const i={};for(const s of Object.keys(n).sort()){if(n[s]==null)continue;const a=s.toLowerCase();(a in k4||e?.has(a)||z4.test(a)||G4.test(a))&&(!t||t&&!t.has(a))||(i[a]=n[s].trim().replace(/\s+/g," "))}return i},zC=n=>typeof ArrayBuffer=="function"&&n instanceof ArrayBuffer||Object.prototype.toString.call(n)==="[object ArrayBuffer]",op=async({headers:n,body:e},t)=>{for(const i of Object.keys(n))if(i.toLowerCase()===Ry)return n[i];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||zC(e)){const i=new t;return i.update(wl(e)),ci(await i.digest())}return X4};class q4{format(e){const t=[];for(const a of Object.keys(e)){const l=ja(a);t.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[a]))}const i=new Uint8Array(t.reduce((a,l)=>a+l.byteLength,0));let s=0;for(const a of t)i.set(a,s),s+=a.byteLength;return i}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const i=new DataView(new ArrayBuffer(5));return i.setUint8(0,4),i.setInt32(1,e.value,!1),new Uint8Array(i.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);const l=new Uint8Array(a.buffer);return l.set(e.value,3),l;case"string":const u=ja(e.value),f=new DataView(new ArrayBuffer(3+u.byteLength));f.setUint8(0,7),f.setUint16(1,u.byteLength,!1);const d=new Uint8Array(f.buffer);return d.set(u,3),d;case"timestamp":const g=new Uint8Array(9);return g[0]=8,g.set(K4.fromNumber(e.value.valueOf()).bytes,1),g;case"uuid":if(!$4.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const p=new Uint8Array(17);return p[0]=9,p.set(CC(e.value.replace(/\-/g,"")),1),p}}}var bv;(function(n){n[n.boolTrue=0]="boolTrue",n[n.boolFalse=1]="boolFalse",n[n.byte=2]="byte",n[n.short=3]="short",n[n.integer=4]="integer",n[n.long=5]="long",n[n.byteArray=6]="byteArray",n[n.string=7]="string",n[n.timestamp=8]="timestamp",n[n.uuid=9]="uuid"})(bv||(bv={}));const $4=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let K4=class GC{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let i=7,s=Math.abs(Math.round(e));i>-1&&s>0;i--,s/=256)t[i]=s;return e<0&&vv(t),new GC(t)}valueOf(){const e=this.bytes.slice(0),t=e[0]&128;return t&&vv(e),parseInt(ci(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}};function vv(n){for(let e=0;e<8;e++)n[e]^=255;for(let e=7;e>-1&&(n[e]++,n[e]===0);e--);}const Z4=(n,e)=>{n=n.toLowerCase();for(const t of Object.keys(e))if(n===t.toLowerCase())return!0;return!1},W4=(n,e={})=>{const{headers:t,query:i={}}=tn.clone(n);for(const s of Object.keys(t)){const a=s.toLowerCase();(a.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(a)||e.hoistableHeaders?.has(a))&&(i[s]=t[s],delete t[s])}return{...n,headers:t,query:i}},wv=n=>{n=tn.clone(n);for(const e of Object.keys(n.headers))P4.indexOf(e.toLowerCase())>-1&&delete n.headers[e];return n},Q4=({query:n={}})=>{const e=[],t={};for(const i of Object.keys(n)){if(i.toLowerCase()===F4)continue;const s=Ua(i);e.push(s);const a=n[i];typeof a=="string"?t[s]=`${s}=${Ua(a)}`:Array.isArray(a)&&(t[s]=a.slice(0).reduce((l,u)=>l.concat([`${s}=${Ua(u)}`]),[]).sort().join("&"))}return e.sort().map(i=>t[i]).filter(i=>i).join("&")},J4=n=>ek(n).toISOString().replace(/\.\d{3}Z$/,"Z"),ek=n=>typeof n=="number"?new Date(n*1e3):typeof n=="string"?Number(n)?new Date(Number(n)*1e3):new Date(n):n;class tk{constructor({applyChecksum:e,credentials:t,region:i,service:s,sha256:a,uriEscapePath:l=!0}){this.service=s,this.sha256=a,this.uriEscapePath=l,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Wi(i),this.credentialProvider=Wi(t)}createCanonicalRequest(e,t,i){const s=Object.keys(t).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Q4(e)}
${s.map(a=>`${a}:${t[a]}`).join(`
`)}

${s.join(";")}
${i}`}async createStringToSign(e,t,i,s){const a=new this.sha256;a.update(wl(i));const l=await a.digest();return`${s}
${e}
${t}
${ci(l)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const a of e.split("/"))a?.length!==0&&a!=="."&&(a===".."?t.pop():t.push(a));const i=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return Ua(i).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const t=J4(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Ay extends tk{constructor({applyChecksum:e,credentials:t,region:i,service:s,sha256:a,uriEscapePath:l=!0}){super({applyChecksum:e,credentials:t,region:i,service:s,sha256:a,uriEscapePath:l}),this.headerFormatter=new q4}async presign(e,t={}){const{signingDate:i=new Date,expiresIn:s=3600,unsignableHeaders:a,unhoistableHeaders:l,signableHeaders:u,hoistableHeaders:f,signingRegion:d,signingService:g}=t,p=await this.credentialProvider();this.validateResolvedCredentials(p);const _=d??await this.regionProvider(),{longDate:E,shortDate:x}=this.formatDate(i);if(s>Y4)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const b=ap(x,_,g??this.service),S=W4(wv(e),{unhoistableHeaders:l,hoistableHeaders:f});p.sessionToken&&(S.query[PC]=p.sessionToken),S.query[I4]=sp,S.query[O4]=`${p.accessKeyId}/${b}`,S.query[NC]=E,S.query[N4]=s.toString(10);const R=Tv(S,a,u);return S.query[L4]=this.getCanonicalHeaderList(R),S.query[BC]=await this.getSignature(E,b,this.getSigningKey(p,_,x,g),this.createCanonicalRequest(S,R,await op(e,this.sha256))),S}async sign(e,t){return typeof e=="string"?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:i=new Date,priorSignature:s,signingRegion:a,signingService:l}){const u=a??await this.regionProvider(),{shortDate:f,longDate:d}=this.formatDate(i),g=ap(f,u,l??this.service),p=await op({headers:{},body:t},this.sha256),_=new this.sha256;_.update(e);const E=ci(await _.digest()),x=[H4,d,g,s,E,p].join(`
`);return this.signString(x,{signingDate:i,signingRegion:u,signingService:l})}async signMessage(e,{signingDate:t=new Date,signingRegion:i,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:i,signingService:s,priorSignature:e.priorSignature}).then(l=>({message:e.message,signature:l}))}async signString(e,{signingDate:t=new Date,signingRegion:i,signingService:s}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const l=i??await this.regionProvider(),{shortDate:u}=this.formatDate(t),f=new this.sha256(await this.getSigningKey(a,l,u,s));return f.update(wl(e)),ci(await f.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:i,unsignableHeaders:s,signingRegion:a,signingService:l}={}){const u=await this.credentialProvider();this.validateResolvedCredentials(u);const f=a??await this.regionProvider(),d=wv(e),{longDate:g,shortDate:p}=this.formatDate(t),_=ap(p,f,l??this.service);d.headers[UC]=g,u.sessionToken&&(d.headers[U4]=u.sessionToken);const E=await op(d,this.sha256);!Z4(Ry,d.headers)&&this.applyChecksum&&(d.headers[Ry]=E);const x=Tv(d,s,i),b=await this.getSignature(g,_,this.getSigningKey(u,f,p,l),this.createCanonicalRequest(d,x,E));return d.headers[FC]=`${sp} Credential=${u.accessKeyId}/${_}, SignedHeaders=${this.getCanonicalHeaderList(x)}, Signature=${b}`,d}async getSignature(e,t,i,s){const a=await this.createStringToSign(e,t,s,sp),l=new this.sha256(await i);return l.update(wl(a)),ci(await l.digest())}getSigningKey(e,t,i,s){return V4(this.sha256,e,i,t,s||this.service)}}const nk=n=>{let e=n.credentials,t=!!n.credentials,i;Object.defineProperty(n,"credentials",{set(d){d&&d!==e&&d!==i&&(t=!0),e=d;const g=ik(n,{credentials:e,credentialDefaultProvider:n.credentialDefaultProvider}),p=sk(n,g);t&&!p.attributed?(i=async _=>p(_).then(E=>_U(E,"CREDENTIALS_CODE","e")),i.memoized=p.memoized,i.configBound=p.configBound,i.attributed=!0):i=p},get(){return i},enumerable:!0,configurable:!0}),n.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:a=n.systemClockOffset||0,sha256:l}=n;let u;return n.signer?u=fl(n.signer):n.regionInfoProvider?u=()=>fl(n.region)().then(async d=>[await n.regionInfoProvider(d,{useFipsEndpoint:await n.useFipsEndpoint(),useDualstackEndpoint:await n.useDualstackEndpoint()})||{},d]).then(([d,g])=>{const{signingRegion:p,signingService:_}=d;n.signingRegion=n.signingRegion||p||g,n.signingName=n.signingName||_||n.serviceId;const E={...n,credentials:n.credentials,region:n.signingRegion,service:n.signingName,sha256:l,uriEscapePath:s},x=n.signerConstructor||Ay;return new x(E)}):u=async d=>{d=Object.assign({},{name:"sigv4",signingName:n.signingName||n.defaultSigningName,signingRegion:await fl(n.region)(),properties:{}},d);const g=d.signingRegion,p=d.signingName;n.signingRegion=n.signingRegion||g,n.signingName=n.signingName||p||n.serviceId;const _={...n,credentials:n.credentials,region:n.signingRegion,service:n.signingName,sha256:l,uriEscapePath:s},E=n.signerConstructor||Ay;return new E(_)},Object.assign(n,{systemClockOffset:a,signingEscapePath:s,signer:u})};function ik(n,{credentials:e,credentialDefaultProvider:t}){let i;return e?e?.memoized?i=e:i=C4(e,A4,LC):t?i=fl(t(Object.assign({},n,{parentClientConfig:n}))):i=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},i.memoized=!0,i}function sk(n,e){if(e.configBound)return e;const t=async i=>e({...i,callerClientConfig:n});return t.memoized=e.memoized,t.configBound=!0,t}const Rv=typeof TextEncoder=="function"?new TextEncoder:null,rk=n=>{if(typeof n=="string"){if(Rv)return Rv.encode(n).byteLength;let e=n.length;for(let t=e-1;t>=0;t--){const i=n.charCodeAt(t);i>127&&i<=2047?e++:i>2047&&i<=65535&&(e+=2),i>=56320&&i<=57343&&t--}return e}else{if(typeof n.byteLength=="number")return n.byteLength;if(typeof n.size=="number")return n.size}throw new Error(`Body Length computation failed for ${n}`)},ba=(n,e)=>{const t=[];if(n&&t.push(n),e)for(const i of e)t.push(i);return t},Dr=(n,e)=>`${n||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,gd=()=>{let n=[],e=[],t=!1;const i=new Set,s=p=>p.sort((_,E)=>Av[E.step]-Av[_.step]||Cv[E.priority||"normal"]-Cv[_.priority||"normal"]),a=p=>{let _=!1;const E=x=>{const b=ba(x.name,x.aliases);if(b.includes(p)){_=!0;for(const S of b)i.delete(S);return!1}return!0};return n=n.filter(E),e=e.filter(E),_},l=p=>{let _=!1;const E=x=>{if(x.middleware===p){_=!0;for(const b of ba(x.name,x.aliases))i.delete(b);return!1}return!0};return n=n.filter(E),e=e.filter(E),_},u=p=>(n.forEach(_=>{p.add(_.middleware,{..._})}),e.forEach(_=>{p.addRelativeTo(_.middleware,{..._})}),p.identifyOnResolve?.(g.identifyOnResolve()),p),f=p=>{const _=[];return p.before.forEach(E=>{E.before.length===0&&E.after.length===0?_.push(E):_.push(...f(E))}),_.push(p),p.after.reverse().forEach(E=>{E.before.length===0&&E.after.length===0?_.push(E):_.push(...f(E))}),_},d=(p=!1)=>{const _=[],E=[],x={};return n.forEach(S=>{const R={...S,before:[],after:[]};for(const v of ba(R.name,R.aliases))x[v]=R;_.push(R)}),e.forEach(S=>{const R={...S,before:[],after:[]};for(const v of ba(R.name,R.aliases))x[v]=R;E.push(R)}),E.forEach(S=>{if(S.toMiddleware){const R=x[S.toMiddleware];if(R===void 0){if(p)return;throw new Error(`${S.toMiddleware} is not found when adding ${Dr(S.name,S.aliases)} middleware ${S.relation} ${S.toMiddleware}`)}S.relation==="after"&&R.after.push(S),S.relation==="before"&&R.before.push(S)}}),s(_).map(f).reduce((S,R)=>(S.push(...R),S),[])},g={add:(p,_={})=>{const{name:E,override:x,aliases:b}=_,S={step:"initialize",priority:"normal",middleware:p,..._},R=ba(E,b);if(R.length>0){if(R.some(v=>i.has(v))){if(!x)throw new Error(`Duplicate middleware name '${Dr(E,b)}'`);for(const v of R){const D=n.findIndex(C=>C.name===v||C.aliases?.some(B=>B===v));if(D===-1)continue;const A=n[D];if(A.step!==S.step||S.priority!==A.priority)throw new Error(`"${Dr(A.name,A.aliases)}" middleware with ${A.priority} priority in ${A.step} step cannot be overridden by "${Dr(E,b)}" middleware with ${S.priority} priority in ${S.step} step.`);n.splice(D,1)}}for(const v of R)i.add(v)}n.push(S)},addRelativeTo:(p,_)=>{const{name:E,override:x,aliases:b}=_,S={middleware:p,..._},R=ba(E,b);if(R.length>0){if(R.some(v=>i.has(v))){if(!x)throw new Error(`Duplicate middleware name '${Dr(E,b)}'`);for(const v of R){const D=e.findIndex(C=>C.name===v||C.aliases?.some(B=>B===v));if(D===-1)continue;const A=e[D];if(A.toMiddleware!==S.toMiddleware||A.relation!==S.relation)throw new Error(`"${Dr(A.name,A.aliases)}" middleware ${A.relation} "${A.toMiddleware}" middleware cannot be overridden by "${Dr(E,b)}" middleware ${S.relation} "${S.toMiddleware}" middleware.`);e.splice(D,1)}}for(const v of R)i.add(v)}e.push(S)},clone:()=>u(gd()),use:p=>{p.applyToStack(g)},remove:p=>typeof p=="string"?a(p):l(p),removeByTag:p=>{let _=!1;const E=x=>{const{tags:b,name:S,aliases:R}=x;if(b&&b.includes(p)){const v=ba(S,R);for(const D of v)i.delete(D);return _=!0,!1}return!0};return n=n.filter(E),e=e.filter(E),_},concat:p=>{const _=u(gd());return _.use(p),_.identifyOnResolve(t||_.identifyOnResolve()||(p.identifyOnResolve?.()??!1)),_},applyToStack:u,identify:()=>d(!0).map(p=>{const _=p.step??p.relation+" "+p.toMiddleware;return Dr(p.name,p.aliases)+" - "+_}),identifyOnResolve(p){return typeof p=="boolean"&&(t=p),t},resolve:(p,_)=>{for(const E of d().map(x=>x.middleware).reverse())p=E(p,_);return t&&console.log(g.identify()),p}};return g},Av={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Cv={high:3,normal:2,low:1};class ak{constructor(e){this.config=e,this.middlewareStack=gd()}send(e,t,i){const s=typeof t!="function"?t:void 0,a=typeof t=="function"?t:i,l=s===void 0&&this.config.cacheMiddleware===!0;let u;if(l){this.handlers||(this.handlers=new WeakMap);const f=this.handlers;f.has(e.constructor)?u=f.get(e.constructor):(u=e.resolveMiddleware(this.middlewareStack,this.config,s),f.set(e.constructor,u))}else delete this.handlers,u=e.resolveMiddleware(this.middlewareStack,this.config,s);if(a)u(e).then(f=>a(null,f.output),f=>a(f)).catch(()=>{});else return u(e).then(f=>f.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}class Qd{constructor(){this.middlewareStack=gd()}static classBuilder(){return new ok}resolveMiddlewareWithContext(e,t,i,{middlewareFn:s,clientName:a,commandName:l,inputFilterSensitiveLog:u,outputFilterSensitiveLog:f,smithyContext:d,additionalContext:g,CommandCtor:p}){for(const S of s.bind(this)(p,e,t,i))this.middlewareStack.use(S);const _=e.concat(this.middlewareStack),{logger:E}=t,x={logger:E,clientName:a,commandName:l,inputFilterSensitiveLog:u,outputFilterSensitiveLog:f,[xy]:{commandInstance:this,...d},...g},{requestHandler:b}=t;return _.resolve(S=>b.handle(S.request,i||{}),x)}}class ok{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,i={}){return this._smithyContext={service:e,operation:t,...i},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=i=>i,t=i=>i){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let t;return t=class extends Qd{static getEndpointParameterInstructions(){return e._ep}constructor(...[i]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=i??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(i,s,a){return this.resolveMiddlewareWithContext(i,s,a,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const Wr="***SensitiveInformation***";class sl extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const t=e;return sl.prototype.isPrototypeOf(t)||!!t.$fault&&!!t.$metadata&&(t.$fault==="client"||t.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const t=e;return this===sl?sl.isInstance(e):sl.isInstance(e)?t.name&&this.name?this.prototype.isPrototypeOf(e)||t.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Wn=(n,e={})=>{Object.entries(e).filter(([,i])=>i!==void 0).forEach(([i,s])=>{(n[i]==null||n[i]==="")&&(n[i]=s)});const t=n.message||n.Message||"UnknownError";return n.message=t,delete n.Message,n},lk=({output:n,parsedBody:e,exceptionCtor:t,errorCode:i})=>{const s=uk(n),a=s.httpStatusCode?s.httpStatusCode+"":void 0,l=new t({name:e?.code||e?.Code||i||a||"UnknownError",$fault:"client",$metadata:s});throw Wn(l,e)},ck=n=>({output:e,parsedBody:t,errorCode:i})=>{lk({output:e,parsedBody:t,exceptionCtor:n,errorCode:i})},uk=n=>({httpStatusCode:n.statusCode,requestId:n.headers["x-amzn-requestid"]??n.headers["x-amzn-request-id"]??n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}),hk=n=>{switch(n){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},fk=n=>{const e=[];for(const t in fd){const i=fd[t];n[i]!==void 0&&e.push({algorithmId:()=>i,checksumConstructor:()=>n[i]})}return{addChecksumAlgorithm(t){e.push(t)},checksumAlgorithms(){return e}}},dk=n=>{const e={};return n.checksumAlgorithms().forEach(t=>{e[t.algorithmId()]=t.checksumConstructor()}),e},gk=n=>({setRetryStrategy(e){n.retryStrategy=e},retryStrategy(){return n.retryStrategy}}),mk=n=>{const e={};return e.retryStrategy=n.retryStrategy(),e},pk=n=>Object.assign(fk(n),gk(n)),yk=n=>Object.assign(dk(n),mk(n)),Cy=n=>Array.isArray(n)?n:[n],HC=n=>{const e="#text";for(const t in n)n.hasOwnProperty(t)&&n[t][e]!==void 0?n[t]=n[t][e]:typeof n[t]=="object"&&n[t]!==null&&(n[t]=HC(n[t]));return n},ka=n=>n!=null;class XC{trace(){}debug(){}info(){}warn(){}error(){}}function At(n,e,t){let i,s,a;if(typeof e>"u"&&typeof t>"u")i={},a=n;else{if(i=n,typeof e=="function")return s=e,a=t,_k(i,s,a);a=e}for(const l of Object.keys(a)){if(!Array.isArray(a[l])){i[l]=a[l];continue}Ek(i,null,a,l)}return i}const _k=(n,e,t)=>At(n,Object.entries(t).reduce((i,[s,a])=>(Array.isArray(a)?i[s]=a:typeof a=="function"?i[s]=[e,a()]:i[s]=[e,a],i),{})),Ek=(n,e,t,i)=>{let[s,a]=t[i];if(typeof a=="function"){let l;const u=s===void 0&&(l=a())!=null,f=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;u?n[i]=l:f&&(n[i]=a())}else{const l=s===void 0&&a!=null,u=typeof s=="function"&&!!s(a)||typeof s!="function"&&!!s;(l||u)&&(n[i]=a)}},xk=(n,e)=>e4(n,e).then(t=>e.utf8Encoder(t)),jC=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Sk=jC+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Tk="["+jC+"]["+Sk+"]*",bk=new RegExp("^"+Tk+"$");function YC(n,e){const t=[];let i=e.exec(n);for(;i;){const s=[];s.startIndex=e.lastIndex-i[0].length;const a=i.length;for(let l=0;l<a;l++)s.push(i[l]);t.push(s),i=e.exec(n)}return t}const $_=function(n){const e=bk.exec(n);return!(e===null||typeof e>"u")};function vk(n){return typeof n<"u"}const wk={allowBooleanAttributes:!1,unpairedTags:[]};function Rk(n,e){e=Object.assign({},wk,e);const t=[];let i=!1,s=!1;n[0]==="\uFEFF"&&(n=n.substr(1));for(let a=0;a<n.length;a++)if(n[a]==="<"&&n[a+1]==="?"){if(a+=2,a=Dv(n,a),a.err)return a}else if(n[a]==="<"){let l=a;if(a++,n[a]==="!"){a=Iv(n,a);continue}else{let u=!1;n[a]==="/"&&(u=!0,a++);let f="";for(;a<n.length&&n[a]!==">"&&n[a]!==" "&&n[a]!=="	"&&n[a]!==`
`&&n[a]!=="\r";a++)f+=n[a];if(f=f.trim(),f[f.length-1]==="/"&&(f=f.substring(0,f.length-1),a--),!Nk(f)){let p;return f.trim().length===0?p="Invalid space after '<'.":p="Tag '"+f+"' is an invalid name.",zt("InvalidTag",p,Xn(n,a))}const d=Mk(n,a);if(d===!1)return zt("InvalidAttr","Attributes for '"+f+"' have open quote.",Xn(n,a));let g=d.value;if(a=d.index,g[g.length-1]==="/"){const p=a-g.length;g=g.substring(0,g.length-1);const _=Ov(g,e);if(_===!0)i=!0;else return zt(_.err.code,_.err.msg,Xn(n,p+_.err.line))}else if(u)if(d.tagClosed){if(g.trim().length>0)return zt("InvalidTag","Closing tag '"+f+"' can't have attributes or invalid starting.",Xn(n,l));if(t.length===0)return zt("InvalidTag","Closing tag '"+f+"' has not been opened.",Xn(n,l));{const p=t.pop();if(f!==p.tagName){let _=Xn(n,p.tagStartPos);return zt("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+_.line+", col "+_.col+") instead of closing tag '"+f+"'.",Xn(n,l))}t.length==0&&(s=!0)}}else return zt("InvalidTag","Closing tag '"+f+"' doesn't have proper closing.",Xn(n,a));else{const p=Ov(g,e);if(p!==!0)return zt(p.err.code,p.err.msg,Xn(n,a-g.length+p.err.line));if(s===!0)return zt("InvalidXml","Multiple possible root nodes found.",Xn(n,a));e.unpairedTags.indexOf(f)!==-1||t.push({tagName:f,tagStartPos:l}),i=!0}for(a++;a<n.length;a++)if(n[a]==="<")if(n[a+1]==="!"){a++,a=Iv(n,a);continue}else if(n[a+1]==="?"){if(a=Dv(n,++a),a.err)return a}else break;else if(n[a]==="&"){const p=Ok(n,a);if(p==-1)return zt("InvalidChar","char '&' is not expected.",Xn(n,a));a=p}else if(s===!0&&!Mv(n[a]))return zt("InvalidXml","Extra text at the end",Xn(n,a));n[a]==="<"&&a--}}else{if(Mv(n[a]))continue;return zt("InvalidChar","char '"+n[a]+"' is not expected.",Xn(n,a))}if(i){if(t.length==1)return zt("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",Xn(n,t[0].tagStartPos));if(t.length>0)return zt("InvalidXml","Invalid '"+JSON.stringify(t.map(a=>a.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return zt("InvalidXml","Start tag expected.",1);return!0}function Mv(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Dv(n,e){const t=e;for(;e<n.length;e++)if(n[e]=="?"||n[e]==" "){const i=n.substr(t,e-t);if(e>5&&i==="xml")return zt("InvalidXml","XML declaration allowed only at the start of the document.",Xn(n,e));if(n[e]=="?"&&n[e+1]==">"){e++;break}else continue}return e}function Iv(n,e){if(n.length>e+5&&n[e+1]==="-"&&n[e+2]==="-"){for(e+=3;e<n.length;e++)if(n[e]==="-"&&n[e+1]==="-"&&n[e+2]===">"){e+=2;break}}else if(n.length>e+8&&n[e+1]==="D"&&n[e+2]==="O"&&n[e+3]==="C"&&n[e+4]==="T"&&n[e+5]==="Y"&&n[e+6]==="P"&&n[e+7]==="E"){let t=1;for(e+=8;e<n.length;e++)if(n[e]==="<")t++;else if(n[e]===">"&&(t--,t===0))break}else if(n.length>e+9&&n[e+1]==="["&&n[e+2]==="C"&&n[e+3]==="D"&&n[e+4]==="A"&&n[e+5]==="T"&&n[e+6]==="A"&&n[e+7]==="["){for(e+=8;e<n.length;e++)if(n[e]==="]"&&n[e+1]==="]"&&n[e+2]===">"){e+=2;break}}return e}const Ak='"',Ck="'";function Mk(n,e){let t="",i="",s=!1;for(;e<n.length;e++){if(n[e]===Ak||n[e]===Ck)i===""?i=n[e]:i!==n[e]||(i="");else if(n[e]===">"&&i===""){s=!0;break}t+=n[e]}return i!==""?!1:{value:t,index:e,tagClosed:s}}const Dk=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Ov(n,e){const t=YC(n,Dk),i={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return zt("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",jc(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return zt("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",jc(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return zt("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",jc(t[s]));const a=t[s][2];if(!Lk(a))return zt("InvalidAttr","Attribute '"+a+"' is an invalid name.",jc(t[s]));if(!i.hasOwnProperty(a))i[a]=1;else return zt("InvalidAttr","Attribute '"+a+"' is repeated.",jc(t[s]))}return!0}function Ik(n,e){let t=/\d/;for(n[e]==="x"&&(e++,t=/[\da-fA-F]/);e<n.length;e++){if(n[e]===";")return e;if(!n[e].match(t))break}return-1}function Ok(n,e){if(e++,n[e]===";")return-1;if(n[e]==="#")return e++,Ik(n,e);let t=0;for(;e<n.length;e++,t++)if(!(n[e].match(/\w/)&&t<20)){if(n[e]===";")break;return-1}return e}function zt(n,e,t){return{err:{code:n,msg:e,line:t.line||t,col:t.col}}}function Lk(n){return $_(n)}function Nk(n){return $_(n)}function Xn(n,e){const t=n.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function jc(n){return n.startIndex+n[1].length}const Bk={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(n,e){return e},attributeValueProcessor:function(n,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(n,e,t){return n},captureMetaData:!1},Pk=function(n){return Object.assign({},Bk,n)};let md;typeof Symbol!="function"?md="@@xmlMetadata":md=Symbol("XML Node Metadata");class Aa{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][md]={startIndex:t})}static getMetaDataSymbol(){return md}}function Fk(n,e){const t={};if(n[e+3]==="O"&&n[e+4]==="C"&&n[e+5]==="T"&&n[e+6]==="Y"&&n[e+7]==="P"&&n[e+8]==="E"){e=e+9;let i=1,s=!1,a=!1,l="";for(;e<n.length;e++)if(n[e]==="<"&&!a){if(s&&Ca(n,"!ENTITY",e)){e+=7;let u,f;[u,f,e]=Uk(n,e+1),f.indexOf("&")===-1&&(t[u]={regx:RegExp(`&${u};`,"g"),val:f})}else if(s&&Ca(n,"!ELEMENT",e)){e+=8;const{index:u}=zk(n,e+1);e=u}else if(s&&Ca(n,"!ATTLIST",e))e+=8;else if(s&&Ca(n,"!NOTATION",e)){e+=9;const{index:u}=kk(n,e+1);e=u}else if(Ca(n,"!--",e))a=!0;else throw new Error("Invalid DOCTYPE");i++,l=""}else if(n[e]===">"){if(a?n[e-1]==="-"&&n[e-2]==="-"&&(a=!1,i--):i--,i===0)break}else n[e]==="["?s=!0:l+=n[e];if(i!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:t,i:e}}const kr=(n,e)=>{for(;e<n.length&&/\s/.test(n[e]);)e++;return e};function Uk(n,e){e=kr(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e])&&n[e]!=='"'&&n[e]!=="'";)t+=n[e],e++;if(K_(t),e=kr(n,e),n.substring(e,e+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(n[e]==="%")throw new Error("Parameter entities are not supported");let i="";return[e,i]=kf(n,e,"entity"),e--,[t,i,e]}function kk(n,e){e=kr(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;K_(t),e=kr(n,e);const i=n.substring(e,e+6).toUpperCase();if(i!=="SYSTEM"&&i!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${i}"`);e+=i.length,e=kr(n,e);let s=null,a=null;if(i==="PUBLIC")[e,s]=kf(n,e,"publicIdentifier"),e=kr(n,e),(n[e]==='"'||n[e]==="'")&&([e,a]=kf(n,e,"systemIdentifier"));else if(i==="SYSTEM"&&([e,a]=kf(n,e,"systemIdentifier"),!a))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:t,publicIdentifier:s,systemIdentifier:a,index:--e}}function kf(n,e,t){let i="";const s=n[e];if(s!=='"'&&s!=="'")throw new Error(`Expected quoted string, found "${s}"`);for(e++;e<n.length&&n[e]!==s;)i+=n[e],e++;if(n[e]!==s)throw new Error(`Unterminated ${t} value`);return e++,[e,i]}function zk(n,e){e=kr(n,e);let t="";for(;e<n.length&&!/\s/.test(n[e]);)t+=n[e],e++;if(!K_(t))throw new Error(`Invalid element name: "${t}"`);e=kr(n,e);let i="";if(n[e]==="E"&&Ca(n,"MPTY",e))e+=4;else if(n[e]==="A"&&Ca(n,"NY",e))e+=2;else if(n[e]==="("){for(e++;e<n.length&&n[e]!==")";)i+=n[e],e++;if(n[e]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${n[e]}"`);return{elementName:t,contentModel:i.trim(),index:e}}function Ca(n,e,t){for(let i=0;i<e.length;i++)if(e[i]!==n[t+i+1])return!1;return!0}function K_(n){if($_(n))return n;throw new Error(`Invalid entity name ${n}`)}const Gk=/^[-+]?0x[a-fA-F0-9]+$/,Hk=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Xk={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function jk(n,e={}){if(e=Object.assign({},Xk,e),!n||typeof n!="string")return n;let t=n.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return n;if(n==="0")return 0;if(e.hex&&Gk.test(t))return $k(t,16);if(t.search(/.+[eE].+/)!==-1)return Vk(n,t,e);{const i=Hk.exec(t);if(i){const s=i[1]||"",a=i[2];let l=qk(i[3]);const u=s?n[a.length+1]===".":n[a.length]===".";if(!e.leadingZeros&&(a.length>1||a.length===1&&!u))return n;{const f=Number(t),d=String(f);if(f===0)return f;if(d.search(/[eE]/)!==-1)return e.eNotation?f:n;if(t.indexOf(".")!==-1)return d==="0"||d===l||d===`${s}${l}`?f:n;let g=a?l:t;return a?g===d||s+g===d?f:n:g===d||g===s+d?f:n}}else return n}}const Yk=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Vk(n,e,t){if(!t.eNotation)return n;const i=e.match(Yk);if(i){let s=i[1]||"";const a=i[3].indexOf("e")===-1?"E":"e",l=i[2],u=s?n[l.length+1]===a:n[l.length]===a;return l.length>1&&u?n:l.length===1&&(i[3].startsWith(`.${a}`)||i[3][0]===a)?Number(e):t.leadingZeros&&!u?(e=(i[1]||"")+i[3],Number(e)):n}else return n}function qk(n){return n&&n.indexOf(".")!==-1&&(n=n.replace(/0+$/,""),n==="."?n="0":n[0]==="."?n="0"+n:n[n.length-1]==="."&&(n=n.substring(0,n.length-1))),n}function $k(n,e){if(parseInt)return parseInt(n,e);if(Number.parseInt)return Number.parseInt(n,e);if(window&&window.parseInt)return window.parseInt(n,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function Kk(n){return typeof n=="function"?n:Array.isArray(n)?e=>{for(const t of n)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class Zk{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,i)=>String.fromCodePoint(Number.parseInt(i,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,i)=>String.fromCodePoint(Number.parseInt(i,16))}},this.addExternalEntities=Wk,this.parseXml=n6,this.parseTextData=Qk,this.resolveNameSpace=Jk,this.buildAttributesMap=t6,this.isItStopNode=a6,this.replaceEntitiesValue=s6,this.readStopNodeData=l6,this.saveTextToParentTag=r6,this.addChild=i6,this.ignoreAttributesFn=Kk(this.options.ignoreAttributes)}}function Wk(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:n[i]}}}function Qk(n,e,t,i,s,a,l){if(n!==void 0&&(this.options.trimValues&&!i&&(n=n.trim()),n.length>0)){l||(n=this.replaceEntitiesValue(n));const u=this.options.tagValueProcessor(e,n,t,s,a);return u==null?n:typeof u!=typeof n||u!==n?u:this.options.trimValues?Dy(n,this.options.parseTagValue,this.options.numberParseOptions):n.trim()===n?Dy(n,this.options.parseTagValue,this.options.numberParseOptions):n}}function Jk(n){if(this.options.removeNSPrefix){const e=n.split(":"),t=n.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(n=t+e[1])}return n}const e6=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function t6(n,e,t){if(this.options.ignoreAttributes!==!0&&typeof n=="string"){const i=YC(n,e6),s=i.length,a={};for(let l=0;l<s;l++){const u=this.resolveNameSpace(i[l][1]);if(this.ignoreAttributesFn(u,e))continue;let f=i[l][4],d=this.options.attributeNamePrefix+u;if(u.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),f!==void 0){this.options.trimValues&&(f=f.trim()),f=this.replaceEntitiesValue(f);const g=this.options.attributeValueProcessor(u,f,e);g==null?a[d]=f:typeof g!=typeof f||g!==f?a[d]=g:a[d]=Dy(f,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(a[d]=!0)}if(!Object.keys(a).length)return;if(this.options.attributesGroupName){const l={};return l[this.options.attributesGroupName]=a,l}return a}}const n6=function(n){n=n.replace(/\r\n?/g,`
`);const e=new Aa("!xml");let t=e,i="",s="";for(let a=0;a<n.length;a++)if(n[a]==="<")if(n[a+1]==="/"){const u=Na(n,">",a,"Closing Tag is not closed.");let f=n.substring(a+2,u).trim();if(this.options.removeNSPrefix){const p=f.indexOf(":");p!==-1&&(f=f.substr(p+1))}this.options.transformTagName&&(f=this.options.transformTagName(f)),t&&(i=this.saveTextToParentTag(i,t,s));const d=s.substring(s.lastIndexOf(".")+1);if(f&&this.options.unpairedTags.indexOf(f)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${f}>`);let g=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(g=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):g=s.lastIndexOf("."),s=s.substring(0,g),t=this.tagsNodeStack.pop(),i="",a=u}else if(n[a+1]==="?"){let u=My(n,a,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,t,s),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){const f=new Aa(u.tagName);f.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(f[":@"]=this.buildAttributesMap(u.tagExp,s,u.tagName)),this.addChild(t,f,s,a)}a=u.closeIndex+1}else if(n.substr(a+1,3)==="!--"){const u=Na(n,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){const f=n.substring(a+4,u-2);i=this.saveTextToParentTag(i,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:f}])}a=u}else if(n.substr(a+1,2)==="!D"){const u=Fk(n,a);this.docTypeEntities=u.entities,a=u.i}else if(n.substr(a+1,2)==="!["){const u=Na(n,"]]>",a,"CDATA is not closed.")-2,f=n.substring(a+9,u);i=this.saveTextToParentTag(i,t,s);let d=this.parseTextData(f,t.tagname,s,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:f}]):t.add(this.options.textNodeName,d),a=u+2}else{let u=My(n,a,this.options.removeNSPrefix),f=u.tagName;const d=u.rawTagName;let g=u.tagExp,p=u.attrExpPresent,_=u.closeIndex;this.options.transformTagName&&(f=this.options.transformTagName(f)),t&&i&&t.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,t,s,!1));const E=t;E&&this.options.unpairedTags.indexOf(E.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),f!==e.tagname&&(s+=s?"."+f:f);const x=a;if(this.isItStopNode(this.options.stopNodes,s,f)){let b="";if(g.length>0&&g.lastIndexOf("/")===g.length-1)f[f.length-1]==="/"?(f=f.substr(0,f.length-1),s=s.substr(0,s.length-1),g=f):g=g.substr(0,g.length-1),a=u.closeIndex;else if(this.options.unpairedTags.indexOf(f)!==-1)a=u.closeIndex;else{const R=this.readStopNodeData(n,d,_+1);if(!R)throw new Error(`Unexpected end of ${d}`);a=R.i,b=R.tagContent}const S=new Aa(f);f!==g&&p&&(S[":@"]=this.buildAttributesMap(g,s,f)),b&&(b=this.parseTextData(b,f,s,!0,p,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),S.add(this.options.textNodeName,b),this.addChild(t,S,s,x)}else{if(g.length>0&&g.lastIndexOf("/")===g.length-1){f[f.length-1]==="/"?(f=f.substr(0,f.length-1),s=s.substr(0,s.length-1),g=f):g=g.substr(0,g.length-1),this.options.transformTagName&&(f=this.options.transformTagName(f));const b=new Aa(f);f!==g&&p&&(b[":@"]=this.buildAttributesMap(g,s,f)),this.addChild(t,b,s,x),s=s.substr(0,s.lastIndexOf("."))}else{const b=new Aa(f);this.tagsNodeStack.push(t),f!==g&&p&&(b[":@"]=this.buildAttributesMap(g,s,f)),this.addChild(t,b,s,x),t=b}i="",a=_}}else i+=n[a];return e.child};function i6(n,e,t,i){this.options.captureMetaData||(i=void 0);const s=this.options.updateTag(e.tagname,t,e[":@"]);s===!1||(typeof s=="string"&&(e.tagname=s),n.addChild(e,i))}const s6=function(n){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];n=n.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];n=n.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];n=n.replace(t.regex,t.val)}n=n.replace(this.ampEntity.regex,this.ampEntity.val)}return n};function r6(n,e,t,i){return n&&(i===void 0&&(i=e.child.length===0),n=this.parseTextData(n,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),n!==void 0&&n!==""&&e.add(this.options.textNodeName,n),n=""),n}function a6(n,e,t){const i="*."+t;for(const s in n){const a=n[s];if(i===a||e===a)return!0}return!1}function o6(n,e,t=">"){let i,s="";for(let a=e;a<n.length;a++){let l=n[a];if(i)l===i&&(i="");else if(l==='"'||l==="'")i=l;else if(l===t[0])if(t[1]){if(n[a+1]===t[1])return{data:s,index:a}}else return{data:s,index:a};else l==="	"&&(l=" ");s+=l}}function Na(n,e,t,i){const s=n.indexOf(e,t);if(s===-1)throw new Error(i);return s+e.length-1}function My(n,e,t,i=">"){const s=o6(n,e+1,i);if(!s)return;let a=s.data;const l=s.index,u=a.search(/\s/);let f=a,d=!0;u!==-1&&(f=a.substring(0,u),a=a.substring(u+1).trimStart());const g=f;if(t){const p=f.indexOf(":");p!==-1&&(f=f.substr(p+1),d=f!==s.data.substr(p+1))}return{tagName:f,tagExp:a,closeIndex:l,attrExpPresent:d,rawTagName:g}}function l6(n,e,t){const i=t;let s=1;for(;t<n.length;t++)if(n[t]==="<")if(n[t+1]==="/"){const a=Na(n,">",t,`${e} is not closed`);if(n.substring(t+2,a).trim()===e&&(s--,s===0))return{tagContent:n.substring(i,t),i:a};t=a}else if(n[t+1]==="?")t=Na(n,"?>",t+1,"StopNode is not closed.");else if(n.substr(t+1,3)==="!--")t=Na(n,"-->",t+3,"StopNode is not closed.");else if(n.substr(t+1,2)==="![")t=Na(n,"]]>",t,"StopNode is not closed.")-2;else{const a=My(n,t,">");a&&((a&&a.tagName)===e&&a.tagExp[a.tagExp.length-1]!=="/"&&s++,t=a.closeIndex)}}function Dy(n,e,t){if(e&&typeof n=="string"){const i=n.trim();return i==="true"?!0:i==="false"?!1:jk(n,t)}else return vk(n)?n:""}const lp=Aa.getMetaDataSymbol();function c6(n,e){return VC(n,e)}function VC(n,e,t){let i;const s={};for(let a=0;a<n.length;a++){const l=n[a],u=u6(l);let f="";if(t===void 0?f=u:f=t+"."+u,u===e.textNodeName)i===void 0?i=l[u]:i+=""+l[u];else{if(u===void 0)continue;if(l[u]){let d=VC(l[u],e,f);const g=f6(d,e);l[lp]!==void 0&&(d[lp]=l[lp]),l[":@"]?h6(d,l[":@"],f,e):Object.keys(d).length===1&&d[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?d=d[e.textNodeName]:Object.keys(d).length===0&&(e.alwaysCreateTextNode?d[e.textNodeName]="":d=""),s[u]!==void 0&&s.hasOwnProperty(u)?(Array.isArray(s[u])||(s[u]=[s[u]]),s[u].push(d)):e.isArray(u,f,g)?s[u]=[d]:s[u]=d}}}return typeof i=="string"?i.length>0&&(s[e.textNodeName]=i):i!==void 0&&(s[e.textNodeName]=i),s}function u6(n){const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t];if(i!==":@")return i}}function h6(n,e,t,i){if(e){const s=Object.keys(e),a=s.length;for(let l=0;l<a;l++){const u=s[l];i.isArray(u,t+"."+u,!0,!0)?n[u]=[e[u]]:n[u]=e[u]}}}function f6(n,e){const{textNodeName:t}=e,i=Object.keys(n).length;return!!(i===0||i===1&&(n[t]||typeof n[t]=="boolean"||n[t]===0))}class d6{constructor(e){this.externalEntities={},this.options=Pk(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const a=Rk(e,t);if(a!==!0)throw Error(`${a.err.msg}:${a.err.line}:${a.err.col}`)}const i=new Zk(this.options);i.addExternalEntities(this.externalEntities);const s=i.parseXml(e);return this.options.preserveOrder||s===void 0?s:c6(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return Aa.getMetaDataSymbol()}}const Z_=(n,e)=>xk(n,e).then(t=>{if(t.length){const i=new d6({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(f,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});i.addEntity("#xD","\r"),i.addEntity("#10",`
`);let s;try{s=i.parse(t,!0)}catch(f){throw f&&typeof f=="object"&&Object.defineProperty(f,"$responseBodyText",{value:t}),f}const a="#text",l=Object.keys(s)[0],u=s[l];return u[a]&&(u[l]=u[a],delete u[a]),HC(u)}return{}}),g6=async(n,e)=>{const t=await Z_(n,e);return t.Error&&(t.Error.message=t.Error.message??t.Error.Message),t},m6=(n,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(n.statusCode==404)return"NotFound"},Iy=[yt.CRC32,yt.CRC32C,yt.CRC64NVME,yt.SHA1,yt.SHA256],p6=[yt.SHA256,yt.SHA1,yt.CRC32,yt.CRC32C,yt.CRC64NVME],y6=(n,{requestChecksumRequired:e,requestAlgorithmMember:t,requestChecksumCalculation:i})=>{if(!t)return i===vl.WHEN_SUPPORTED||e?Sy:void 0;if(!n[t])return;const s=n[t];if(!Iy.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${Iy}.`);return s},W_=n=>n===yt.MD5?"content-md5":`x-amz-checksum-${n.toLowerCase()}`,_6=(n,e)=>{const t=n.toLowerCase();for(const i of Object.keys(e))if(t===i.toLowerCase())return!0;return!1},E6=(n,e)=>{const t=n.toLowerCase();for(const i of Object.keys(e))if(i.toLowerCase().startsWith(t))return!0;return!1},qC=n=>n!==void 0&&typeof n!="string"&&!ArrayBuffer.isView(n)&&!zC(n);function Q_(n,e,t,i){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{d(i.next(g))}catch(p){l(p)}}function f(g){try{d(i.throw(g))}catch(p){l(p)}}function d(g){g.done?a(g.value):s(g.value).then(u,f)}d((i=i.apply(n,e||[])).next())})}function J_(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(d){return function(g){return f([d,g])}}function f(d){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(t=0)),t;)try{if(i=1,s&&(a=d[0]&2?s.return:d[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,d[1])).done)return a;switch(s=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,s=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(n,t)}catch(g){d=[6,g],s=0}finally{i=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function $C(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}const x6=n=>new TextEncoder().encode(n);var S6=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:x6;function Qr(n){return n instanceof Uint8Array?n:typeof n=="string"?S6(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}function Iu(n){return typeof n=="string"?n.length===0:n.byteLength===0}function KC(n){return new Uint8Array([(n&4278190080)>>24,(n&16711680)>>16,(n&65280)>>8,n&255])}function ZC(n){if(!Uint32Array.from){for(var e=new Uint32Array(n.length),t=0;t<n.length;)e[t]=n[t],t+=1;return e}return Uint32Array.from(n)}var T6=function(){function n(){this.crc32c=new Lv}return n.prototype.update=function(e){Iu(e)||this.crc32c.update(Qr(e))},n.prototype.digest=function(){return Q_(this,void 0,void 0,function(){return J_(this,function(e){return[2,KC(this.crc32c.digest())]})})},n.prototype.reset=function(){this.crc32c=new Lv},n}(),Lv=function(){function n(){this.checksum=4294967295}return n.prototype.update=function(e){var t,i;try{for(var s=$C(e),a=s.next();!a.done;a=s.next()){var l=a.value;this.checksum=this.checksum>>>8^v6[(this.checksum^l)&255]}}catch(u){t={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return this},n.prototype.digest=function(){return(this.checksum^4294967295)>>>0},n}(),b6=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],v6=ZC(b6),w6=function(){function n(){this.crc32=new pd}return n.prototype.update=function(e){Iu(e)||this.crc32.update(Qr(e))},n.prototype.digest=function(){return Q_(this,void 0,void 0,function(){return J_(this,function(e){return[2,KC(this.crc32.digest())]})})},n.prototype.reset=function(){this.crc32=new pd},n}(),pd=function(){function n(){this.checksum=4294967295}return n.prototype.update=function(e){var t,i;try{for(var s=$C(e),a=s.next();!a.done;a=s.next()){var l=a.value;this.checksum=this.checksum>>>8^A6[(this.checksum^l)&255]}}catch(u){t={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return this},n.prototype.digest=function(){return(this.checksum^4294967295)>>>0},n}(),R6=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],A6=ZC(R6);const C6=()=>w6,WC=(n,e)=>{switch(n){case yt.MD5:return e.md5;case yt.CRC32:return C6();case yt.CRC32C:return T6;case yt.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case yt.SHA1:return e.sha1;case yt.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${n}`)}},QC=(n,e)=>{const t=new n;return t.update(wl(e||"")),t.digest()},M6={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},D6=(n,e)=>(t,i)=>async s=>{if(!tn.isInstance(s.request)||E6("x-amz-checksum-",s.request.headers))return t(s);const{request:a,input:l}=s,{body:u,headers:f}=a,{base64Encoder:d,streamHasher:g}=n,{requestChecksumRequired:p,requestAlgorithmMember:_}=e,E=await n.requestChecksumCalculation(),x=_?.name,b=_?.httpHeader;x&&!l[x]&&(E===vl.WHEN_SUPPORTED||p)&&(l[x]=Sy,b&&(f[b]=Sy));const S=y6(l,{requestChecksumRequired:p,requestAlgorithmMember:_?.name,requestChecksumCalculation:E});let R=u,v=f;if(S){switch(S){case yt.CRC32:qt(i,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case yt.CRC32C:qt(i,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case yt.CRC64NVME:qt(i,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case yt.SHA1:qt(i,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case yt.SHA256:qt(i,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const A=W_(S),C=WC(S,n);if(qC(u)){const{getAwsChunkedEncodingStream:B,bodyLengthChecker:z}=n;R=B(typeof n.requestStreamBufferSize=="number"&&n.requestStreamBufferSize>=8*1024?GU(u,n.requestStreamBufferSize,i.logger):u,{base64Encoder:d,bodyLengthChecker:z,checksumLocationName:A,checksumAlgorithmFn:C,streamHasher:g}),v={...f,"content-encoding":f["content-encoding"]?`${f["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":f["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":A},delete v["content-length"]}else if(!_6(A,f)){const B=await QC(C,u);v={...f,[A]:d(B)}}}return await t({...s,request:{...a,headers:v,body:R}})},I6={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},O6=(n,e)=>(t,i)=>async s=>{const a=s.input,{requestValidationModeMember:l}=e,u=await n.requestChecksumCalculation(),f=await n.responseChecksumValidation();switch(u){case vl.WHEN_REQUIRED:qt(i,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case vl.WHEN_SUPPORTED:qt(i,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(f){case Q0.WHEN_REQUIRED:qt(i,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case Q0.WHEN_SUPPORTED:qt(i,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return a[l]||f===Q0.WHEN_SUPPORTED&&(a[l]="ENABLED"),t(s)},JC=(n=[])=>{const e=[];for(const t of p6)!n.includes(t)||!Iy.includes(t)||e.push(t);return e},L6=n=>{const e=n.lastIndexOf("-");if(e!==-1){const t=n.slice(e+1);if(!t.startsWith("0")){const i=parseInt(t,10);if(!isNaN(i)&&i>=1&&i<=1e4)return!0}}return!1},N6=async(n,{checksumAlgorithmFn:e,base64Encoder:t})=>t(await QC(e,n)),B6=async(n,{config:e,responseAlgorithms:t,logger:i})=>{const s=JC(t),{body:a,headers:l}=n;for(const u of s){const f=W_(u),d=l[f];if(d){let g;try{g=WC(u,e)}catch(E){if(u===yt.CRC64NVME){i?.warn(`Skipping ${yt.CRC64NVME} checksum validation: ${E.message}`);continue}throw E}const{base64Encoder:p}=e;if(qC(a)){n.body=UU({expectedChecksum:d,checksumSourceLocation:f,checksum:new g,source:a,base64Encoder:p});return}const _=await N6(a,{checksumAlgorithmFn:g,base64Encoder:p});if(_===d)break;throw new Error(`Checksum mismatch: expected "${_}" but received "${d}" in response header "${f}".`)}}},P6={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},F6=(n,e)=>(t,i)=>async s=>{if(!tn.isInstance(s.request))return t(s);const a=s.input,l=await t(s),u=l.response,{requestValidationModeMember:f,responseAlgorithms:d}=e;if(a[f]==="ENABLED"){const{clientName:g,commandName:p}=i;if(g==="S3Client"&&p==="GetObjectCommand"&&JC(d).every(E=>{const x=W_(E),b=u.headers[x];return!b||L6(b)}))return l;await B6(u,{config:n,responseAlgorithms:d,logger:i.logger})}return l},U6=(n,e)=>({applyToStack:t=>{t.add(D6(n,e),M6),t.addRelativeTo(O6(n,e),I6),t.addRelativeTo(F6(n,e),P6)}}),k6=n=>{const{requestChecksumCalculation:e,responseChecksumValidation:t,requestStreamBufferSize:i}=n;return Object.assign(n,{requestChecksumCalculation:Wi(e??pU),responseChecksumValidation:Wi(t??yU),requestStreamBufferSize:Number(i??0)})};const z6=n=>e=>async t=>{if(!tn.isInstance(t.request))return e(t);const{request:i}=t,{handlerProtocol:s=""}=n.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!i.headers[":authority"])delete i.headers.host,i.headers[":authority"]=i.hostname+(i.port?":"+i.port:"");else if(!i.headers.host){let a=i.hostname;i.port!=null&&(a+=`:${i.port}`),i.headers.host=a}return e(t)},G6={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},H6=n=>({applyToStack:e=>{e.add(z6(n),G6)}}),X6=()=>(n,e)=>async t=>{try{const i=await n(t),{clientName:s,commandName:a,logger:l,dynamoDbDocumentClientOptions:u={}}=e,{overrideInputFilterSensitiveLog:f,overrideOutputFilterSensitiveLog:d}=u,g=f??e.inputFilterSensitiveLog,p=d??e.outputFilterSensitiveLog,{$metadata:_,...E}=i.output;return l?.info?.({clientName:s,commandName:a,input:g(t.input),output:p(E),metadata:_}),i}catch(i){const{clientName:s,commandName:a,logger:l,dynamoDbDocumentClientOptions:u={}}=e,{overrideInputFilterSensitiveLog:f}=u,d=f??e.inputFilterSensitiveLog;throw l?.error?.({clientName:s,commandName:a,input:d(t.input),error:i,metadata:i.$metadata}),i}},j6={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Y6=n=>({applyToStack:e=>{e.add(X6(),j6)}});var Nv={};const cp="X-Amzn-Trace-Id",V6="AWS_LAMBDA_FUNCTION_NAME",q6="_X_AMZN_TRACE_ID",$6=n=>e=>async t=>{const{request:i}=t;if(!tn.isInstance(i)||n.runtime!=="node")return e(t);const s=Object.keys(i.headers??{}).find(f=>f.toLowerCase()===cp.toLowerCase())??cp;if(i.headers.hasOwnProperty(s))return e(t);const a=Nv[V6],l=Nv[q6],u=f=>typeof f=="string"&&f.length>0;return u(a)&&u(l)&&(i.headers[cp]=l),e({...t,request:i})},K6={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Z6=n=>({applyToStack:e=>{e.add($6(n),K6)}}),W6=n=>(e,t)=>async i=>{const s=await n.region(),a=n.region;let l=()=>{};t.__s3RegionRedirect&&(Object.defineProperty(n,"region",{writable:!1,value:async()=>t.__s3RegionRedirect}),l=()=>Object.defineProperty(n,"region",{writable:!0,value:a}));try{const u=await e(i);if(t.__s3RegionRedirect){l();const f=await n.region();if(s!==f)throw new Error("Region was not restored following S3 region redirect.")}return u}catch(u){throw l(),u}},Q6={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function J6(n){return(e,t)=>async i=>{try{return await e(i)}catch(s){if(n.followRegionRedirects&&(s?.$metadata?.httpStatusCode===301||s?.$metadata?.httpStatusCode===400&&s?.name==="IllegalLocationConstraintException")){try{const a=s.$response.headers["x-amz-bucket-region"];t.logger?.debug(`Redirecting from ${await n.region()} to ${a}`),t.__s3RegionRedirect=a}catch(a){throw new Error("Region redirect failed: "+a)}return e(i)}throw s}}}const e8={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},t8=n=>({applyToStack:e=>{e.add(J6(n),e8),e.addRelativeTo(W6(n),Q6)}}),n8=n=>(e,t)=>async i=>{const s=await e(i),{response:a}=s;if(Xa.isInstance(a)&&a.headers.expires){a.headers.expiresstring=a.headers.expires;try{wy(a.headers.expires)}catch(l){t.logger?.warn(`AWS SDK Warning for ${t.clientName}::${t.commandName} response parsing (${a.headers.expires}): ${l}`),delete a.headers.expires}}return s},i8={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},s8=n=>({applyToStack:e=>{e.addRelativeTo(n8(),i8)}});class eE{data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;constructor(e={}){this.data=e}get(e){const t=this.data[e];if(t)return t}set(e,t){return this.data[e]=t,t}delete(e){delete this.data[e]}async purgeExpired(){const e=Date.now();if(!(this.lastPurgeTime+eE.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const t in this.data){const i=this.data[t];if(!i.isRefreshing){const s=await i.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[t]}}}}class up{_identity;isRefreshing;accessed;constructor(e,t=!1,i=Date.now()){this._identity=e,this.isRefreshing=t,this.accessed=i}get identity(){return this.accessed=Date.now(),this._identity}}class tE{createSessionFn;cache;static REFRESH_WINDOW_MS=6e4;constructor(e,t=new eE){this.createSessionFn=e,this.cache=t}async getS3ExpressIdentity(e,t){const i=t.Bucket,{cache:s}=this,a=s.get(i);return a?a.identity.then(l=>(l.expiration?.getTime()??0)<Date.now()?s.set(i,new up(this.getIdentity(i))).identity:((l.expiration?.getTime()??0)<Date.now()+tE.REFRESH_WINDOW_MS&&!a.isRefreshing&&(a.isRefreshing=!0,this.getIdentity(i).then(d=>{s.set(i,new up(Promise.resolve(d)))})),l)):s.set(i,new up(this.getIdentity(i))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(s=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+s)});const t=await this.createSessionFn(e);if(!t.Credentials?.AccessKeyId||!t.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:t.Credentials.AccessKeyId,secretAccessKey:t.Credentials.SecretAccessKey,sessionToken:t.Credentials.SessionToken,expiration:t.Credentials.Expiration?new Date(t.Credentials.Expiration):void 0}}}var Bv;(function(n){n.ENV="env",n.CONFIG="shared config entry"})(Bv||(Bv={}));const r8="Directory",a8="S3Express",o8="sigv4-s3express",Oy="X-Amz-S3session-Token",Ly=Oy.toLowerCase();class l8 extends Ay{async signWithCredentials(e,t,i){const s=Pv(t);e.headers[Ly]=t.sessionToken;const a=this;return Fv(a,s),a.signRequest(e,i??{})}async presignWithCredentials(e,t,i){const s=Pv(t);return delete e.headers[Ly],e.headers[Oy]=t.sessionToken,e.query=e.query??{},e.query[Oy]=t.sessionToken,Fv(this,s),this.presign(e,i)}}function Pv(n){return{accessKeyId:n.accessKeyId,secretAccessKey:n.secretAccessKey,expiration:n.expiration}}function Fv(n,e){const t=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),i=n.credentialProvider,s=()=>(clearTimeout(t),n.credentialProvider=i,Promise.resolve(e));n.credentialProvider=s}const c8=n=>(e,t)=>async i=>{if(t.endpointV2){const s=t.endpointV2,a=s.properties?.authSchemes?.[0]?.name===o8;if((s.properties?.backend===a8||s.properties?.bucketType===r8)&&(qt(t,"S3_EXPRESS_BUCKET","J"),t.isS3ExpressBucket=!0),a){const u=i.input.Bucket;if(u){const f=await n.s3ExpressIdentityProvider.getS3ExpressIdentity(await n.credentials(),{Bucket:u});t.s3ExpressIdentity=f,tn.isInstance(i.request)&&f.sessionToken&&(i.request.headers[Ly]=f.sessionToken)}}}return e(i)},u8={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},h8=n=>({applyToStack:e=>{e.add(c8(n),u8)}}),f8=async(n,e,t,i)=>{const s=await i.signWithCredentials(t,n,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},d8=n=>e=>{throw e},g8=(n,e)=>{},m8=n=>(e,t)=>async i=>{if(!tn.isInstance(i.request))return e(i);const a=Pl(t).selectedHttpAuthScheme;if(!a)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:l={}},identity:u,signer:f}=a;let d;t.s3ExpressIdentity?d=await f8(t.s3ExpressIdentity,l,i.request,await n.signer()):d=await f.sign(i.request,u,l);const g=await e({...i,request:d}).catch((f.errorHandler||d8)(l));return(f.successHandler||g8)(g.response,l),g},p8=n=>({applyToStack:e=>{e.addRelativeTo(m8(n),wC)}}),y8=(n,{session:e})=>{const[t,i]=e,{forcePathStyle:s,useAccelerateEndpoint:a,disableMultiregionAccessPoints:l,followRegionRedirects:u,s3ExpressIdentityProvider:f,bucketEndpoint:d}=n;return Object.assign(n,{forcePathStyle:s??!1,useAccelerateEndpoint:a??!1,disableMultiregionAccessPoints:l??!1,followRegionRedirects:u??!1,s3ExpressIdentityProvider:f??new tE(async g=>t().send(new i({Bucket:g}))),bucketEndpoint:d??!1})},_8={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},E8=3e3,x8=n=>(e,t)=>async i=>{const s=await e(i),{response:a}=s;if(!Xa.isInstance(a))return s;const{statusCode:l,body:u}=a;if(l<200||l>=300||!(typeof u?.stream=="function"||typeof u?.pipe=="function"||typeof u?.tee=="function"))return s;let d=u,g=u;u&&typeof u=="object"&&!(u instanceof Uint8Array)&&([d,g]=await JU(u)),a.body=g;const p=await S8(d,{streamCollector:async E=>YU(E,E8)});typeof d?.destroy=="function"&&d.destroy();const _=n.utf8Encoder(p.subarray(p.length-16));if(p.length===0&&_8[t.commandName]){const E=new Error("S3 aborted request");throw E.name="InternalError",E}return _&&_.endsWith("</Error>")&&(a.statusCode=400),s},S8=(n=new Uint8Array,e)=>n instanceof Uint8Array?Promise.resolve(n):e.streamCollector(n)||Promise.resolve(new Uint8Array),T8={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},e2=n=>({applyToStack:e=>{e.addRelativeTo(x8(n),T8)}}),b8=n=>typeof n=="string"&&n.indexOf("arn:")===0&&n.split(":").length>=6;function v8(n){return(e,t)=>async i=>{if(n.bucketEndpoint){const s=t.endpointV2;if(s){const a=i.input.Bucket;if(typeof a=="string")try{const l=new URL(a);t.endpointV2={...s,url:l}}catch(l){const u=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${a} could not be parsed as URL.`;throw t.logger?.constructor?.name==="NoOpLogger"?console.warn(u):t.logger?.warn?.(u),l}}}return e(i)}}const w8={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function R8({bucketEndpoint:n}){return e=>async t=>{const{input:{Bucket:i}}=t;if(!n&&typeof i=="string"&&!b8(i)&&i.indexOf("/")>=0){const s=new Error(`Bucket name shouldn't contain '/', received '${i}'`);throw s.name="InvalidBucketName",s}return e({...t})}}const A8={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},C8=n=>({applyToStack:e=>{e.add(R8(n),A8),e.addRelativeTo(v8(n),w8)}}),M8=void 0;function D8(n){return n===void 0?!0:typeof n=="string"&&n.length<=50}function I8(n){const e=fl(n.userAgentAppId??M8),{customUserAgent:t}=n;return Object.assign(n,{customUserAgent:typeof t=="string"?[[t]]:t,userAgentAppId:async()=>{const i=await e();if(!D8(i)){const s=n.logger?.constructor?.name==="NoOpLogger"||!n.logger?console:n.logger;typeof i!="string"?s?.warn("userAgentAppId must be a string or undefined."):i.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return i}})}class O8{constructor({size:e,params:t}){this.data=new Map,this.parameters=[],this.capacity=e??50,t&&(this.parameters=t)}get(e,t){const i=this.hash(e);if(i===!1)return t();if(!this.data.has(i)){if(this.data.size>this.capacity+10){const s=this.data.keys();let a=0;for(;;){const{value:l,done:u}=s.next();if(this.data.delete(l),u||++a>10)break}}this.data.set(i,t())}return this.data.get(i)}size(){return this.data.size}hash(e){let t="";const{parameters:i}=this;if(i.length===0)return!1;for(const s of i){const a=String(e[s]??"");if(a.includes("|;"))return!1;t+=a+"|;"}return t}}const L8=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),t2=n=>L8.test(n)||n.startsWith("[")&&n.endsWith("]"),N8=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),nE=(n,e=!1)=>{if(!e)return N8.test(n);const t=n.split(".");for(const i of t)if(!nE(i))return!1;return!0},yd={},Ou="endpoints";function Jr(n){return typeof n!="object"||n==null?n:"ref"in n?`$${Jr(n.ref)}`:"fn"in n?`${n.fn}(${(n.argv||[]).map(Jr).join(", ")})`:JSON.stringify(n,null,2)}class vi extends Error{constructor(e){super(e),this.name="EndpointError"}}const B8=(n,e)=>n===e,P8=n=>{const e=n.split("."),t=[];for(const i of e){const s=i.indexOf("[");if(s!==-1){if(i.indexOf("]")!==i.length-1)throw new vi(`Path: '${n}' does not end with ']'`);const a=i.slice(s+1,-1);if(Number.isNaN(parseInt(a)))throw new vi(`Invalid array index: '${a}' in path: '${n}'`);s!==0&&t.push(i.slice(0,s)),t.push(a)}else t.push(i)}return t},n2=(n,e)=>P8(e).reduce((t,i)=>{if(typeof t!="object")throw new vi(`Index '${i}' in '${e}' not found in '${JSON.stringify(n)}'`);return Array.isArray(t)?t[parseInt(i)]:t[i]},n),F8=n=>n!=null,U8=n=>!n,hp={[Cu.HTTP]:80,[Cu.HTTPS]:443},k8=n=>{const e=(()=>{try{if(n instanceof URL)return n;if(typeof n=="object"&&"hostname"in n){const{hostname:_,port:E,protocol:x="",path:b="",query:S={}}=n,R=new URL(`${x}//${_}${E?`:${E}`:""}${b}`);return R.search=Object.entries(S).map(([v,D])=>`${v}=${D}`).join("&"),R}return new URL(n)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(n)} as a whatwg URL.`),null;const t=e.href,{host:i,hostname:s,pathname:a,protocol:l,search:u}=e;if(u)return null;const f=l.slice(0,-1);if(!Object.values(Cu).includes(f))return null;const d=t2(s),g=t.includes(`${i}:${hp[f]}`)||typeof n=="string"&&n.includes(`${i}:${hp[f]}`),p=`${i}${g?`:${hp[f]}`:""}`;return{scheme:f,authority:p,path:a,normalizedPath:a.endsWith("/")?a:`${a}/`,isIp:d}},z8=(n,e)=>n===e,G8=(n,e,t,i)=>e>=t||n.length<t?null:i?n.substring(n.length-t,n.length-e):n.substring(e,t),H8=n=>encodeURIComponent(n).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),X8={booleanEquals:B8,getAttr:n2,isSet:F8,isValidHostLabel:nE,not:U8,parseURL:k8,stringEquals:z8,substring:G8,uriEncode:H8},i2=(n,e)=>{const t=[],i={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<n.length;){const a=n.indexOf("{",s);if(a===-1){t.push(n.slice(s));break}t.push(n.slice(s,a));const l=n.indexOf("}",a);if(l===-1){t.push(n.slice(a));break}n[a+1]==="{"&&n[l+1]==="}"&&(t.push(n.slice(a+1,l)),s=l+2);const u=n.substring(a+1,l);if(u.includes("#")){const[f,d]=u.split("#");t.push(n2(i[f],d))}else t.push(i[u]);s=l+1}return t.join("")},j8=({ref:n},e)=>({...e.endpointParams,...e.referenceRecord})[n],Jd=(n,e,t)=>{if(typeof n=="string")return i2(n,t);if(n.fn)return s2(n,t);if(n.ref)return j8(n,t);throw new vi(`'${e}': ${String(n)} is not a string, function or reference.`)},s2=({fn:n,argv:e},t)=>{const i=e.map(a=>["boolean","number"].includes(typeof a)?a:Jd(a,"arg",t)),s=n.split(".");return s[0]in yd&&s[1]!=null?yd[s[0]][s[1]](...i):X8[n](...i)},Y8=({assign:n,...e},t)=>{if(n&&n in t.referenceRecord)throw new vi(`'${n}' is already defined in Reference Record.`);const i=s2(e,t);return t.logger?.debug?.(`${Ou} evaluateCondition: ${Jr(e)} = ${Jr(i)}`),{result:i===""?!0:!!i,...n!=null&&{toAssign:{name:n,value:i}}}},iE=(n=[],e)=>{const t={};for(const i of n){const{result:s,toAssign:a}=Y8(i,{...e,referenceRecord:{...e.referenceRecord,...t}});if(!s)return{result:s};a&&(t[a.name]=a.value,e.logger?.debug?.(`${Ou} assign: ${a.name} := ${Jr(a.value)}`))}return{result:!0,referenceRecord:t}},V8=(n,e)=>Object.entries(n).reduce((t,[i,s])=>({...t,[i]:s.map(a=>{const l=Jd(a,"Header value entry",e);if(typeof l!="string")throw new vi(`Header '${i}' value '${l}' is not a string`);return l})}),{}),r2=(n,e)=>{if(Array.isArray(n))return n.map(t=>r2(t,e));switch(typeof n){case"string":return i2(n,e);case"object":if(n===null)throw new vi(`Unexpected endpoint property: ${n}`);return a2(n,e);case"boolean":return n;default:throw new vi(`Unexpected endpoint property type: ${typeof n}`)}},a2=(n,e)=>Object.entries(n).reduce((t,[i,s])=>({...t,[i]:r2(s,e)}),{}),q8=(n,e)=>{const t=Jd(n,"Endpoint URL",e);if(typeof t=="string")try{return new URL(t)}catch(i){throw console.error(`Failed to construct URL with ${t}`,i),i}throw new vi(`Endpoint URL must be a string, got ${typeof t}`)},$8=(n,e)=>{const{conditions:t,endpoint:i}=n,{result:s,referenceRecord:a}=iE(t,e);if(!s)return;const l={...e,referenceRecord:{...e.referenceRecord,...a}},{url:u,properties:f,headers:d}=i;return e.logger?.debug?.(`${Ou} Resolving endpoint from template: ${Jr(i)}`),{...d!=null&&{headers:V8(d,l)},...f!=null&&{properties:a2(f,l)},url:q8(u,l)}},K8=(n,e)=>{const{conditions:t,error:i}=n,{result:s,referenceRecord:a}=iE(t,e);if(s)throw new vi(Jd(i,"Error",{...e,referenceRecord:{...e.referenceRecord,...a}}))},Z8=(n,e)=>{const{conditions:t,rules:i}=n,{result:s,referenceRecord:a}=iE(t,e);if(s)return o2(i,{...e,referenceRecord:{...e.referenceRecord,...a}})},o2=(n,e)=>{for(const t of n)if(t.type==="endpoint"){const i=$8(t,e);if(i)return i}else if(t.type==="error")K8(t,e);else if(t.type==="tree"){const i=Z8(t,e);if(i)return i}else throw new vi(`Unknown endpoint rule: ${t}`);throw new vi("Rules evaluation failed")},W8=(n,e)=>{const{endpointParams:t,logger:i}=e,{parameters:s,rules:a}=n;e.logger?.debug?.(`${Ou} Initial EndpointParams: ${Jr(t)}`);const l=Object.entries(s).filter(([,d])=>d.default!=null).map(([d,g])=>[d,g.default]);if(l.length>0)for(const[d,g]of l)t[d]=t[d]??g;const u=Object.entries(s).filter(([,d])=>d.required).map(([d])=>d);for(const d of u)if(t[d]==null)throw new vi(`Missing required parameter: '${d}'`);const f=o2(a,{endpointParams:t,logger:i,referenceRecord:{}});return e.logger?.debug?.(`${Ou} Resolved endpoint: ${Jr(f)}`),f},l2=(n,e=!1)=>{if(e){for(const t of n.split("."))if(!l2(t))return!1;return!0}return!(!nE(n)||n.length<3||n.length>63||n!==n.toLowerCase()||t2(n))},Uv=":",Q8="/",J8=n=>{const e=n.split(Uv);if(e.length<6)return null;const[t,i,s,a,l,...u]=e;if(t!=="arn"||i===""||s===""||u.join(Uv)==="")return null;const f=u.map(d=>d.split(Q8)).flat();return{partition:i,service:s,region:a,accountId:l,resourceId:f}},e5=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],t5={partitions:e5};let n5=t5;const i5=n=>{const{partitions:e}=n5;for(const i of e){const{regions:s,outputs:a}=i;for(const[l,u]of Object.entries(s))if(l===n)return{...a,...u}}for(const i of e){const{regionRegex:s,outputs:a}=i;if(new RegExp(s).test(n))return{...a}}const t=e.find(i=>i.id==="aws");if(!t)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...t.outputs}},c2={isVirtualHostableS3Bucket:l2,parseArn:J8,partition:i5};yd.aws=c2;function s5(n){const e={};if(n=n.replace(/^\?/,""),n)for(const t of n.split("&")){let[i,s=null]=t.split("=");i=decodeURIComponent(i),s&&(s=decodeURIComponent(s)),i in e?Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]:e[i]=s}return e}const _d=n=>{if(typeof n=="string")return _d(new URL(n));const{hostname:e,pathname:t,port:i,protocol:s,search:a}=n;let l;return a&&(l=s5(a)),{hostname:e,port:i?parseInt(i):void 0,protocol:s,path:t,query:l}},r5=/\d{12}\.ddb/;async function a5(n,e,t){if(t.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&qt(n,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const a=await e.retryStrategy();typeof a.acquireInitialRetryToken=="function"?a.constructor?.name?.includes("Adaptive")?qt(n,"RETRY_MODE_ADAPTIVE","F"):qt(n,"RETRY_MODE_STANDARD","E"):qt(n,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const a=n.endpointV2;switch(String(a?.url?.hostname).match(r5)&&qt(n,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":qt(n,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":qt(n,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":qt(n,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=n.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){const a=s;a.accountId&&qt(n,"RESOLVED_ACCOUNT_ID","T");for(const[l,u]of Object.entries(a.$source??{}))qt(n,l,u)}}const kv="user-agent",fp="x-amz-user-agent",zv=" ",dp="/",o5=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,l5=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Gv="-",c5=1024;function u5(n){let e="";for(const t in n){const i=n[t];if(e.length+i.length+1<=c5){e.length?e+=","+i:e+=i;continue}break}return e}const h5=n=>(e,t)=>async i=>{const{request:s}=i;if(!tn.isInstance(s))return e(i);const{headers:a}=s,l=t?.userAgent?.map(Mf)||[],u=(await n.defaultUserAgentProvider()).map(Mf);await a5(t,n,i);const f=t;u.push(`m/${u5(Object.assign({},t.__smithy_context?.features,f.__aws_sdk_context?.features))}`);const d=n?.customUserAgent?.map(Mf)||[],g=await n.userAgentAppId();g&&u.push(Mf([`app/${g}`]));const p=[].concat([...u,...l,...d]).join(zv),_=[...u.filter(E=>E.startsWith("aws-sdk-")),...d].join(zv);return n.runtime!=="browser"?(_&&(a[fp]=a[fp]?`${a[kv]} ${_}`:_),a[kv]=p):a[fp]=p,e({...i,request:s})},Mf=n=>{const e=n[0].split(dp).map(l=>l.replace(o5,Gv)).join(dp),t=n[1]?.replace(l5,Gv),i=e.indexOf(dp),s=e.substring(0,i);let a=e.substring(i+1);return s==="api"&&(a=a.toLowerCase()),[s,a,t].filter(l=>l&&l.length>0).reduce((l,u,f)=>{switch(f){case 0:return u;case 1:return`${l}/${u}`;default:return`${l}#${u}`}},"")},f5={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},d5=n=>({applyToStack:e=>{e.add(h5(n),f5)}}),g5=!1,m5=!1,u2=n=>typeof n=="string"&&(n.startsWith("fips-")||n.endsWith("-fips")),Hv=n=>u2(n)?["fips-aws-global","aws-fips"].includes(n)?"us-east-1":n.replace(/fips-(dkr-|prod-)?|-fips/,""):n,p5=n=>{const{region:e,useFipsEndpoint:t}=n;if(!e)throw new Error("Region is missing");return Object.assign(n,{region:async()=>{if(typeof e=="string")return Hv(e);const i=await e();return Hv(i)},useFipsEndpoint:async()=>{const i=typeof e=="string"?e:await e();return u2(i)?!0:typeof t!="function"?Promise.resolve(!!t):t()}})},y5=n=>Object.assign(n,{eventStreamMarshaller:n.eventStreamSerdeProvider(n)}),Xv="content-length";function _5(n){return e=>async t=>{const i=t.request;if(tn.isInstance(i)){const{body:s,headers:a}=i;if(s&&Object.keys(a).map(l=>l.toLowerCase()).indexOf(Xv)===-1)try{const l=n(s);i.headers={...i.headers,[Xv]:String(l)}}catch{}}return e({...t,request:i})}}const E5={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},x5=n=>({applyToStack:e=>{e.add(_5(n.bodyLengthChecker),E5)}}),S5=async n=>{const e=n?.Bucket||"";if(typeof n.Bucket=="string"&&(n.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),R5(e)){if(n.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!w5(e)||e.indexOf(".")!==-1&&!String(n.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(n.ForcePathStyle=!0);return n.DisableMultiRegionAccessPoints&&(n.disableMultiRegionAccessPoints=!0,n.DisableMRAP=!0),n},T5=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,b5=/(\d+\.){3}\d+/,v5=/\.\./,w5=n=>T5.test(n)&&!b5.test(n)&&!v5.test(n),R5=n=>{const[e,t,i,,,s]=n.split(":"),a=e==="arn"&&n.split(":").length>=6,l=!!(a&&t&&i&&s);if(a&&!l)throw new Error(`Invalid ARN: ${n} was an invalid ARN.`);return l},A5=(n,e,t)=>{const i=async()=>{const s=t[n]??t[e];return typeof s=="function"?s():s};return n==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof t.credentials=="function"?await t.credentials():t.credentials;return s?.credentialScope??s?.CredentialScope}:n==="accountId"||e==="AccountId"?async()=>{const s=typeof t.credentials=="function"?await t.credentials():t.credentials;return s?.accountId??s?.AccountId}:n==="endpoint"||e==="endpoint"?async()=>{if(t.isCustomEndpoint===!1)return;const s=await i();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:a,hostname:l,port:u,path:f}=s;return`${a}//${l}${u?":"+u:""}${f}`}}return s}:i},h2=async n=>{},f2=n=>typeof n=="object"?"url"in n?_d(n.url):n:_d(n),C5=async(n,e,t,i)=>{if(!t.isCustomEndpoint){let l;t.serviceConfiguredEndpoint?l=await t.serviceConfiguredEndpoint():l=await h2(t.serviceId),l&&(t.endpoint=()=>Promise.resolve(f2(l)),t.isCustomEndpoint=!0)}const s=await d2(n,e,t);if(typeof t.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return t.endpointProvider(s,i)},d2=async(n,e,t)=>{const i={},s=e?.getEndpointParameterInstructions?.()||{};for(const[a,l]of Object.entries(s))switch(l.type){case"staticContextParams":i[a]=l.value;break;case"contextParams":i[a]=n[l.name];break;case"clientContextParams":case"builtInParams":i[a]=await A5(l.name,a,t)();break;case"operationContextParams":i[a]=l.get(n);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(l))}return Object.keys(s).length===0&&Object.assign(i,t),String(t.serviceId).toLowerCase()==="s3"&&await S5(i),i},M5=({config:n,instructions:e})=>(t,i)=>async s=>{n.isCustomEndpoint&&b4(i,"ENDPOINT_OVERRIDE","N");const a=await C5(s.input,{getEndpointParameterInstructions(){return e}},{...n},i);i.endpointV2=a,i.authSchemes=a.properties?.authSchemes;const l=i.authSchemes?.[0];if(l){i.signing_region=l.signingRegion,i.signing_service=l.signingName;const f=Pl(i)?.selectedHttpAuthScheme?.httpAuthOption;f&&(f.signingProperties=Object.assign(f.signingProperties||{},{signing_region:l.signingRegion,signingRegion:l.signingRegion,signing_service:l.signingName,signingName:l.signingName,signingRegionSet:l.signingRegionSet},l.properties))}return t({...s})},D5={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:vC.name},sE=(n,e)=>({applyToStack:t=>{t.addRelativeTo(M5({config:n,instructions:e}),D5)}}),I5=n=>{const e=n.tls??!0,{endpoint:t,useDualstackEndpoint:i,useFipsEndpoint:s}=n,a=t!=null?async()=>f2(await Wi(t)()):void 0,u=Object.assign(n,{endpoint:a,tls:e,isCustomEndpoint:!!t,useDualstackEndpoint:Wi(i??!1),useFipsEndpoint:Wi(s??!1)});let f;return u.serviceConfiguredEndpoint=async()=>(n.serviceId&&!f&&(f=h2(n.serviceId)),f),u};var Rl;(function(n){n.STANDARD="standard",n.ADAPTIVE="adaptive"})(Rl||(Rl={}));const Ed=3,O5=Rl.STANDARD,L5=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],N5=["TimeoutError","RequestTimeout","RequestTimeoutException"],B5=[500,502,503,504],P5=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],F5=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],U5=n=>n.$metadata?.clockSkewCorrected,k5=n=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return n&&n instanceof TypeError?e.has(n.message):!1},g2=n=>n.$metadata?.httpStatusCode===429||L5.includes(n.name)||n.$retryable?.throttling==!0,rE=(n,e=0)=>U5(n)||N5.includes(n.name)||P5.includes(n?.code||"")||F5.includes(n?.code||"")||B5.includes(n.$metadata?.httpStatusCode||0)||k5(n)||n.cause!==void 0&&e<=10&&rE(n.cause,e+1),z5=n=>{if(n.$metadata?.httpStatusCode!==void 0){const e=n.$metadata.httpStatusCode;return 500<=e&&e<=599&&!rE(n)}return!1};class eg{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const t=this.getCurrentTimeInSeconds();this.lastThrottleTime=t,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const t=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(i=>eg.setTimeoutFn(i,t))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const t=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+t),this.lastTimestamp=e}updateClientSendingRate(e){let t;if(this.updateMeasuredRate(),g2(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());const i=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(i)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),t=Math.floor(e*2)/2;if(this.requestCount++,t>this.lastTxRateBucket){const i=this.requestCount/(t-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(i*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t}}getPrecise(e){return parseFloat(e.toFixed(8))}}eg.setTimeoutFn=setTimeout;const Ny=100,m2=20*1e3,G5=500,jv=500,H5=5,X5=10,j5=1,Y5="amz-sdk-invocation-id",V5="amz-sdk-request",q5=()=>{let n=Ny;return{computeNextBackoffDelay:i=>Math.floor(Math.min(m2,Math.random()*2**i*n)),setDelayBase:i=>{n=i}}},Yv=({retryDelay:n,retryCount:e,retryCost:t})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(m2,n),getRetryCost:()=>t});class p2{constructor(e){this.maxAttempts=e,this.mode=Rl.STANDARD,this.capacity=jv,this.retryBackoffStrategy=q5(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return Yv({retryDelay:Ny,retryCount:0})}async refreshRetryTokenForRetry(e,t){const i=await this.getMaxAttempts();if(this.shouldRetry(e,t,i)){const s=t.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?G5:Ny);const a=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),l=t.retryAfterHint?Math.max(t.retryAfterHint.getTime()-Date.now()||0,a):a,u=this.getCapacityCost(s);return this.capacity-=u,Yv({retryDelay:l,retryCount:e.getRetryCount()+1,retryCost:u})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(jv,this.capacity+(e.getRetryCost()??j5))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ed}`),Ed}}shouldRetry(e,t,i){return e.getRetryCount()+1<i&&this.capacity>=this.getCapacityCost(t.errorType)&&this.isRetryableError(t.errorType)}getCapacityCost(e){return e==="TRANSIENT"?X5:H5}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class $5{constructor(e,t){this.maxAttemptsProvider=e,this.mode=Rl.ADAPTIVE;const{rateLimiter:i}=t??{};this.rateLimiter=i??new eg,this.standardRetryStrategy=new p2(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,t){return this.rateLimiter.updateClientSendingRate(t),this.standardRetryStrategy.refreshRetryTokenForRetry(e,t)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let Df;const K5=new Uint8Array(16);function Z5(){if(!Df&&(Df=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Df))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Df(K5)}const Tn=[];for(let n=0;n<256;++n)Tn.push((n+256).toString(16).slice(1));function W5(n,e=0){return Tn[n[e+0]]+Tn[n[e+1]]+Tn[n[e+2]]+Tn[n[e+3]]+"-"+Tn[n[e+4]]+Tn[n[e+5]]+"-"+Tn[n[e+6]]+Tn[n[e+7]]+"-"+Tn[n[e+8]]+Tn[n[e+9]]+"-"+Tn[n[e+10]]+Tn[n[e+11]]+Tn[n[e+12]]+Tn[n[e+13]]+Tn[n[e+14]]+Tn[n[e+15]]}const Q5=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vv={randomUUID:Q5};function J5(n,e,t){if(Vv.randomUUID&&!n)return Vv.randomUUID();n=n||{};const i=n.random||(n.rng||Z5)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,W5(i)}const ez=n=>n instanceof Error?n:n instanceof Object?Object.assign(new Error,n):typeof n=="string"?new Error(n):new Error(`AWS SDK error wrapper for ${n}`),tz=n=>{const{retryStrategy:e,retryMode:t,maxAttempts:i}=n,s=Wi(i??Ed);return Object.assign(n,{maxAttempts:s,retryStrategy:async()=>e||(await Wi(t)()===Rl.ADAPTIVE?new $5(s):new p2(s))})},nz=n=>n?.body instanceof ReadableStream,iz=n=>(e,t)=>async i=>{let s=await n.retryStrategy();const a=await n.maxAttempts();if(sz(s)){s=s;let l=await s.acquireInitialRetryToken(t.partition_id),u=new Error,f=0,d=0;const{request:g}=i,p=tn.isInstance(g);for(p&&(g.headers[Y5]=J5());;)try{p&&(g.headers[V5]=`attempt=${f+1}; max=${a}`);const{response:_,output:E}=await e(i);return s.recordSuccess(l),E.$metadata.attempts=f+1,E.$metadata.totalRetryDelay=d,{response:_,output:E}}catch(_){const E=rz(_);if(u=ez(_),p&&nz(g))throw(t.logger instanceof XC?console:t.logger)?.warn("An error was encountered in a non-retryable streaming request."),u;try{l=await s.refreshRetryTokenForRetry(l,E)}catch{throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=f+1,u.$metadata.totalRetryDelay=d,u}f=l.getRetryCount();const x=l.getRetryDelay();d+=x,await new Promise(b=>setTimeout(b,x))}}else return s=s,s?.mode&&(t.userAgent=[...t.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,i)},sz=n=>typeof n.acquireInitialRetryToken<"u"&&typeof n.refreshRetryTokenForRetry<"u"&&typeof n.recordSuccess<"u",rz=n=>{const e={error:n,errorType:az(n)},t=cz(n.$response);return t&&(e.retryAfterHint=t),e},az=n=>g2(n)?"THROTTLING":rE(n)?"TRANSIENT":z5(n)?"SERVER_ERROR":"CLIENT_ERROR",oz={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},lz=n=>({applyToStack:e=>{e.add(iz(n),oz)}}),cz=n=>{if(!Xa.isInstance(n))return;const e=Object.keys(n.headers).find(a=>a.toLowerCase()==="retry-after");if(!e)return;const t=n.headers[e],i=Number(t);return Number.isNaN(i)?new Date(t):new Date(i*1e3)};class y2{sigv4aSigner;sigv4Signer;signerOptions;static sigv4aDependency(){return"none"}constructor(e){this.sigv4Signer=new l8(e),this.signerOptions=e}async sign(e,t={}){return t.signingRegion==="*"?this.getSigv4aSigner().sign(e,t):this.sigv4Signer.sign(e,t)}async signWithCredentials(e,t,i={}){if(i.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,t,i)}async presign(e,t={}){if(t.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,t)}async presignWithCredentials(e,t,i={}){if(i.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,t,i)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const aE="required",M="type",Q="rules",L="conditions",V="fn",q="argv",Te="ref",Be="assign",ye="url",_e="properties",Ba="backend",kn="authSchemes",pn="disableDoubleEncoding",yn="signingName",Kn="signingRegion",Ee="headers",oE="signingRegionSet",uz=6,hz=!1,hs=!0,Ti="isSet",Xt="booleanEquals",pe="error",xd="aws.partition",Qe="stringEquals",Mt="getAttr",Ht="name",pt="substring",qv="bucketSuffix",lE="parseURL",oe="endpoint",ee="tree",Sd="aws.isVirtualHostableS3Bucket",Td="{url#scheme}://{Bucket}.{url#authority}{url#path}",xs="not",$v="accessPointSuffix",zf="{url#scheme}://{url#authority}{url#path}",_2="hardwareType",E2="regionPrefix",Kv="bucketAliasSuffix",By="outpostId",Va="isValidHostLabel",cE="sigv4a",Lu="s3-outposts",Al="s3",x2="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",S2="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Zv="https://{Bucket}.s3.{partitionResult#dnsSuffix}",T2="aws.parseArn",b2="bucketArn",v2="arnType",bd="",uE="s3-object-lambda",w2="accesspoint",hE="accessPointName",Wv="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Qv="mrapPartition",Jv="outpostType",ew="arnPrefix",R2="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",tw="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",nw="https://s3.{partitionResult#dnsSuffix}",jo={[aE]:!1,[M]:"String"},Yo={[aE]:!0,default:!1,[M]:"Boolean"},Yc={[aE]:!1,[M]:"Boolean"},Pi={[V]:Xt,[q]:[{[Te]:"Accelerate"},!0]},xt={[V]:Xt,[q]:[{[Te]:"UseFIPS"},!0]},mt={[V]:Xt,[q]:[{[Te]:"UseDualStack"},!0]},kt={[V]:Ti,[q]:[{[Te]:"Endpoint"}]},A2={[V]:xd,[q]:[{[Te]:"Region"}],[Be]:"partitionResult"},iw={[V]:Qe,[q]:[{[V]:Mt,[q]:[{[Te]:"partitionResult"},Ht]},"aws-cn"]},lu={[V]:Ti,[q]:[{[Te]:"Bucket"}]},Ze={[Te]:"Bucket"},sw={[L]:[mt],[pe]:"S3Express does not support Dual-stack.",[M]:pe},rw={[L]:[Pi],[pe]:"S3Express does not support S3 Accelerate.",[M]:pe},aw={[L]:[kt,{[V]:lE,[q]:[{[Te]:"Endpoint"}],[Be]:"url"}],[Q]:[{[L]:[{[V]:Ti,[q]:[{[Te]:"DisableS3ExpressSessionAuth"}]},{[V]:Xt,[q]:[{[Te]:"DisableS3ExpressSessionAuth"},!0]}],[Q]:[{[L]:[{[V]:Xt,[q]:[{[V]:Mt,[q]:[{[Te]:"url"},"isIp"]},!0]}],[Q]:[{[L]:[{[V]:"uriEncode",[q]:[Ze],[Be]:"uri_encoded_bucket"}],[Q]:[{[oe]:{[ye]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[_e]:{[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:"s3express",[Kn]:"{Region}"}]},[Ee]:{}},[M]:oe}],[M]:ee}],[M]:ee},{[L]:[{[V]:Sd,[q]:[Ze,!1]}],[Q]:[{[oe]:{[ye]:Td,[_e]:{[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:"s3express",[Kn]:"{Region}"}]},[Ee]:{}},[M]:oe}],[M]:ee},{[pe]:"S3Express bucket name is not a valid virtual hostable name.",[M]:pe}],[M]:ee},{[L]:[{[V]:Xt,[q]:[{[V]:Mt,[q]:[{[Te]:"url"},"isIp"]},!0]}],[Q]:[{[L]:[{[V]:"uriEncode",[q]:[Ze],[Be]:"uri_encoded_bucket"}],[Q]:[{[oe]:{[ye]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[_e]:{[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4-s3express",[yn]:"s3express",[Kn]:"{Region}"}]},[Ee]:{}},[M]:oe}],[M]:ee}],[M]:ee},{[L]:[{[V]:Sd,[q]:[Ze,!1]}],[Q]:[{[oe]:{[ye]:Td,[_e]:{[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4-s3express",[yn]:"s3express",[Kn]:"{Region}"}]},[Ee]:{}},[M]:oe}],[M]:ee},{[pe]:"S3Express bucket name is not a valid virtual hostable name.",[M]:pe}],[M]:ee},jn={[V]:lE,[q]:[{[Te]:"Endpoint"}],[Be]:"url"},gp={[V]:Xt,[q]:[{[V]:Mt,[q]:[{[Te]:"url"},"isIp"]},!0]},C2={[Te]:"url"},M2={[V]:"uriEncode",[q]:[Ze],[Be]:"uri_encoded_bucket"},Ma={[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:"s3express",[Kn]:"{Region}"}]},Ie={},D2={[V]:Sd,[q]:[Ze,!1]},ow={[pe]:"S3Express bucket name is not a valid virtual hostable name.",[M]:pe},lw={[V]:Ti,[q]:[{[Te]:"UseS3ExpressControlEndpoint"}]},cw={[V]:Xt,[q]:[{[Te]:"UseS3ExpressControlEndpoint"},!0]},Oe={[V]:xs,[q]:[kt]},If={[pe]:"Unrecognized S3Express bucket name format.",[M]:pe},uw={[V]:xs,[q]:[lu]},hw={[Te]:_2},fw={[L]:[Oe],[pe]:"Expected a endpoint to be specified but no endpoint was found",[M]:pe},Of={[kn]:[{[pn]:!0,[Ht]:cE,[yn]:Lu,[oE]:["*"]},{[pn]:!0,[Ht]:"sigv4",[yn]:Lu,[Kn]:"{Region}"}]},mp={[V]:Xt,[q]:[{[Te]:"ForcePathStyle"},!1]},fz={[Te]:"ForcePathStyle"},Vt={[V]:Xt,[q]:[{[Te]:"Accelerate"},!1]},Jt={[V]:Qe,[q]:[{[Te]:"Region"},"aws-global"]},cn={[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:Al,[Kn]:"us-east-1"}]},Ke={[V]:xs,[q]:[Jt]},un={[V]:Xt,[q]:[{[Te]:"UseGlobalEndpoint"},!0]},dw={[ye]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_e]:{[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:Al,[Kn]:"{Region}"}]},[Ee]:{}},Zt={[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:Al,[Kn]:"{Region}"}]},hn={[V]:Xt,[q]:[{[Te]:"UseGlobalEndpoint"},!1]},$e={[V]:Xt,[q]:[{[Te]:"UseDualStack"},!1]},gw={[ye]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},ze={[V]:Xt,[q]:[{[Te]:"UseFIPS"},!1]},mw={[ye]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},pw={[ye]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},pp={[V]:Xt,[q]:[{[V]:Mt,[q]:[C2,"isIp"]},!1]},yp={[ye]:x2,[_e]:Zt,[Ee]:{}},Py={[ye]:Td,[_e]:Zt,[Ee]:{}},yw={[oe]:Py,[M]:oe},_p={[ye]:S2,[_e]:Zt,[Ee]:{}},_w={[ye]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},Lf={[pe]:"Invalid region: region was not a valid DNS name.",[M]:pe},ui={[Te]:b2},I2={[Te]:v2},Ep={[V]:Mt,[q]:[ui,"service"]},fE={[Te]:hE},Ew={[L]:[mt],[pe]:"S3 Object Lambda does not support Dual-stack",[M]:pe},xw={[L]:[Pi],[pe]:"S3 Object Lambda does not support S3 Accelerate",[M]:pe},Sw={[L]:[{[V]:Ti,[q]:[{[Te]:"DisableAccessPoints"}]},{[V]:Xt,[q]:[{[Te]:"DisableAccessPoints"},!0]}],[pe]:"Access points are not supported for this operation",[M]:pe},xp={[L]:[{[V]:Ti,[q]:[{[Te]:"UseArnRegion"}]},{[V]:Xt,[q]:[{[Te]:"UseArnRegion"},!1]},{[V]:xs,[q]:[{[V]:Qe,[q]:[{[V]:Mt,[q]:[ui,"region"]},"{Region}"]}]}],[pe]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[M]:pe},O2={[V]:Mt,[q]:[{[Te]:"bucketPartition"},Ht]},L2={[V]:Mt,[q]:[ui,"accountId"]},Sp={[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:uE,[Kn]:"{bucketArn#region}"}]},Tw={[pe]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[M]:pe},Tp={[pe]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[M]:pe},bp={[pe]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[M]:pe},vp={[pe]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[M]:pe},bw={[pe]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[M]:pe},vw={[pe]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[M]:pe},Vc={[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:Al,[Kn]:"{bucketArn#region}"}]},ww={[kn]:[{[pn]:!0,[Ht]:cE,[yn]:Lu,[oE]:["*"]},{[pn]:!0,[Ht]:"sigv4",[yn]:Lu,[Kn]:"{bucketArn#region}"}]},Rw={[V]:T2,[q]:[Ze]},Aw={[ye]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:Zt,[Ee]:{}},Cw={[ye]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:Zt,[Ee]:{}},Mw={[ye]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:Zt,[Ee]:{}},wp={[ye]:R2,[_e]:Zt,[Ee]:{}},Dw={[ye]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:Zt,[Ee]:{}},Iw={[Te]:"UseObjectLambdaEndpoint"},Rp={[kn]:[{[pn]:!0,[Ht]:"sigv4",[yn]:uE,[Kn]:"{Region}"}]},Ow={[ye]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},Lw={[ye]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},Nw={[ye]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},Ap={[ye]:zf,[_e]:Zt,[Ee]:{}},Bw={[ye]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[_e]:Zt,[Ee]:{}},Cp=[{[Te]:"Region"}],dz=[{[Te]:"Endpoint"}],gz=[Ze],Pw=[mt],Mp=[Pi],Vo=[kt,jn],Fw=[{[V]:Ti,[q]:[{[Te]:"DisableS3ExpressSessionAuth"}]},{[V]:Xt,[q]:[{[Te]:"DisableS3ExpressSessionAuth"},!0]}],mz=[M2],Uw=[D2],Bi=[A2],qo=[xt],kw=[{[V]:pt,[q]:[Ze,6,14,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,14,16,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],fs=[{[L]:[xt],[oe]:{[ye]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_e]:Ma,[Ee]:{}},[M]:oe},{[oe]:{[ye]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_e]:Ma,[Ee]:{}},[M]:oe}],zw=[{[V]:pt,[q]:[Ze,6,15,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,15,17,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],Gw=[{[V]:pt,[q]:[Ze,6,19,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,19,21,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],Hw=[{[V]:pt,[q]:[Ze,6,20,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,20,22,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],Xw=[{[V]:pt,[q]:[Ze,6,26,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,26,28,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],ds=[{[L]:[xt],[oe]:{[ye]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_e]:{[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4-s3express",[yn]:"s3express",[Kn]:"{Region}"}]},[Ee]:{}},[M]:oe},{[oe]:{[ye]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[_e]:{[Ba]:"S3Express",[kn]:[{[pn]:!0,[Ht]:"sigv4-s3express",[yn]:"s3express",[Kn]:"{Region}"}]},[Ee]:{}},[M]:oe}],jw=[Ze,0,7,!0],Yw=[{[V]:pt,[q]:[Ze,7,15,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,15,17,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],Vw=[{[V]:pt,[q]:[Ze,7,16,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,16,18,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],qw=[{[V]:pt,[q]:[Ze,7,20,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,20,22,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],$w=[{[V]:pt,[q]:[Ze,7,21,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,21,23,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],Kw=[{[V]:pt,[q]:[Ze,7,27,!0],[Be]:"s3expressAvailabilityZoneId"},{[V]:pt,[q]:[Ze,27,29,!0],[Be]:"s3expressAvailabilityZoneDelim"},{[V]:Qe,[q]:[{[Te]:"s3expressAvailabilityZoneDelim"},"--"]}],pz=[lu],Zw=[{[V]:Va,[q]:[{[Te]:By},!1]}],Ww=[{[V]:Qe,[q]:[{[Te]:E2},"beta"]}],yz=["*"],Qw=[{[V]:Va,[q]:[{[Te]:"Region"},!1]}],Ir=[{[V]:Qe,[q]:[{[Te]:"Region"},"us-east-1"]}],Dp=[{[V]:Qe,[q]:[I2,w2]}],Jw=[{[V]:Mt,[q]:[ui,"resourceId[1]"],[Be]:hE},{[V]:xs,[q]:[{[V]:Qe,[q]:[fE,bd]}]}],_z=[ui,"resourceId[1]"],Ip=[{[V]:xs,[q]:[{[V]:Qe,[q]:[{[V]:Mt,[q]:[ui,"region"]},bd]}]}],eR=[{[V]:xs,[q]:[{[V]:Ti,[q]:[{[V]:Mt,[q]:[ui,"resourceId[2]"]}]}]}],Ez=[ui,"resourceId[2]"],Op=[{[V]:xd,[q]:[{[V]:Mt,[q]:[ui,"region"]}],[Be]:"bucketPartition"}],tR=[{[V]:Qe,[q]:[O2,{[V]:Mt,[q]:[{[Te]:"partitionResult"},Ht]}]}],Lp=[{[V]:Va,[q]:[{[V]:Mt,[q]:[ui,"region"]},!0]}],Np=[{[V]:Va,[q]:[L2,!1]}],nR=[{[V]:Va,[q]:[fE,!1]}],iR=[{[V]:Va,[q]:[{[Te]:"Region"},!0]}],xz={parameters:{Bucket:jo,Region:jo,UseFIPS:Yo,UseDualStack:Yo,Endpoint:jo,ForcePathStyle:Yo,Accelerate:Yo,UseGlobalEndpoint:Yo,UseObjectLambdaEndpoint:Yc,Key:jo,Prefix:jo,CopySource:jo,DisableAccessPoints:Yc,DisableMultiRegionAccessPoints:Yo,UseArnRegion:Yc,UseS3ExpressControlEndpoint:Yc,DisableS3ExpressSessionAuth:Yc},[Q]:[{[L]:[{[V]:Ti,[q]:Cp}],[Q]:[{[L]:[Pi,xt],error:"Accelerate cannot be used with FIPS",[M]:pe},{[L]:[mt,kt],error:"Cannot set dual-stack in combination with a custom endpoint.",[M]:pe},{[L]:[kt,xt],error:"A custom endpoint cannot be combined with FIPS",[M]:pe},{[L]:[kt,Pi],error:"A custom endpoint cannot be combined with S3 Accelerate",[M]:pe},{[L]:[xt,A2,iw],error:"Partition does not support FIPS",[M]:pe},{[L]:[lu,{[V]:pt,[q]:[Ze,0,uz,hs],[Be]:qv},{[V]:Qe,[q]:[{[Te]:qv},"--x-s3"]}],[Q]:[sw,rw,aw,{[L]:[lw,cw],[Q]:[{[L]:Bi,[Q]:[{[L]:[M2,Oe],[Q]:[{[L]:qo,endpoint:{[ye]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:Ma,[Ee]:Ie},[M]:oe},{endpoint:{[ye]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:Ma,[Ee]:Ie},[M]:oe}],[M]:ee}],[M]:ee}],[M]:ee},{[L]:Uw,[Q]:[{[L]:Bi,[Q]:[{[L]:Fw,[Q]:[{[L]:kw,[Q]:fs,[M]:ee},{[L]:zw,[Q]:fs,[M]:ee},{[L]:Gw,[Q]:fs,[M]:ee},{[L]:Hw,[Q]:fs,[M]:ee},{[L]:Xw,[Q]:fs,[M]:ee},If],[M]:ee},{[L]:kw,[Q]:ds,[M]:ee},{[L]:zw,[Q]:ds,[M]:ee},{[L]:Gw,[Q]:ds,[M]:ee},{[L]:Hw,[Q]:ds,[M]:ee},{[L]:Xw,[Q]:ds,[M]:ee},If],[M]:ee}],[M]:ee},ow],[M]:ee},{[L]:[lu,{[V]:pt,[q]:jw,[Be]:$v},{[V]:Qe,[q]:[{[Te]:$v},"--xa-s3"]}],[Q]:[sw,rw,aw,{[L]:Uw,[Q]:[{[L]:Bi,[Q]:[{[L]:Fw,[Q]:[{[L]:Yw,[Q]:fs,[M]:ee},{[L]:Vw,[Q]:fs,[M]:ee},{[L]:qw,[Q]:fs,[M]:ee},{[L]:$w,[Q]:fs,[M]:ee},{[L]:Kw,[Q]:fs,[M]:ee},If],[M]:ee},{[L]:Yw,[Q]:ds,[M]:ee},{[L]:Vw,[Q]:ds,[M]:ee},{[L]:qw,[Q]:ds,[M]:ee},{[L]:$w,[Q]:ds,[M]:ee},{[L]:Kw,[Q]:ds,[M]:ee},If],[M]:ee}],[M]:ee},ow],[M]:ee},{[L]:[uw,lw,cw],[Q]:[{[L]:Bi,[Q]:[{[L]:Vo,endpoint:{[ye]:zf,[_e]:Ma,[Ee]:Ie},[M]:oe},{[L]:qo,endpoint:{[ye]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[_e]:Ma,[Ee]:Ie},[M]:oe},{endpoint:{[ye]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[_e]:Ma,[Ee]:Ie},[M]:oe}],[M]:ee}],[M]:ee},{[L]:[lu,{[V]:pt,[q]:[Ze,49,50,hs],[Be]:_2},{[V]:pt,[q]:[Ze,8,12,hs],[Be]:E2},{[V]:pt,[q]:jw,[Be]:Kv},{[V]:pt,[q]:[Ze,32,49,hs],[Be]:By},{[V]:xd,[q]:Cp,[Be]:"regionPartition"},{[V]:Qe,[q]:[{[Te]:Kv},"--op-s3"]}],[Q]:[{[L]:Zw,[Q]:[{[L]:[{[V]:Qe,[q]:[hw,"e"]}],[Q]:[{[L]:Ww,[Q]:[fw,{[L]:Vo,endpoint:{[ye]:"https://{Bucket}.ec2.{url#authority}",[_e]:Of,[Ee]:Ie},[M]:oe}],[M]:ee},{endpoint:{[ye]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[_e]:Of,[Ee]:Ie},[M]:oe}],[M]:ee},{[L]:[{[V]:Qe,[q]:[hw,"o"]}],[Q]:[{[L]:Ww,[Q]:[fw,{[L]:Vo,endpoint:{[ye]:"https://{Bucket}.op-{outpostId}.{url#authority}",[_e]:Of,[Ee]:Ie},[M]:oe}],[M]:ee},{endpoint:{[ye]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[_e]:Of,[Ee]:Ie},[M]:oe}],[M]:ee},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[M]:pe}],[M]:ee},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[M]:pe}],[M]:ee},{[L]:pz,[Q]:[{[L]:[kt,{[V]:xs,[q]:[{[V]:Ti,[q]:[{[V]:lE,[q]:dz}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[M]:pe},{[L]:[mp,D2],[Q]:[{[L]:Bi,[Q]:[{[L]:Qw,[Q]:[{[L]:[Pi,iw],error:"S3 Accelerate cannot be used in this region",[M]:pe},{[L]:[mt,xt,Vt,Oe,Jt],endpoint:{[ye]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[mt,xt,Vt,Oe,Ke,un],[Q]:[{endpoint:dw,[M]:oe}],[M]:ee},{[L]:[mt,xt,Vt,Oe,Ke,hn],endpoint:dw,[M]:oe},{[L]:[$e,xt,Vt,Oe,Jt],endpoint:{[ye]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,xt,Vt,Oe,Ke,un],[Q]:[{endpoint:gw,[M]:oe}],[M]:ee},{[L]:[$e,xt,Vt,Oe,Ke,hn],endpoint:gw,[M]:oe},{[L]:[mt,ze,Pi,Oe,Jt],endpoint:{[ye]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[mt,ze,Pi,Oe,Ke,un],[Q]:[{endpoint:mw,[M]:oe}],[M]:ee},{[L]:[mt,ze,Pi,Oe,Ke,hn],endpoint:mw,[M]:oe},{[L]:[mt,ze,Vt,Oe,Jt],endpoint:{[ye]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[mt,ze,Vt,Oe,Ke,un],[Q]:[{endpoint:pw,[M]:oe}],[M]:ee},{[L]:[mt,ze,Vt,Oe,Ke,hn],endpoint:pw,[M]:oe},{[L]:[$e,ze,Vt,kt,jn,gp,Jt],endpoint:{[ye]:x2,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,ze,Vt,kt,jn,pp,Jt],endpoint:{[ye]:Td,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,ze,Vt,kt,jn,gp,Ke,un],[Q]:[{[L]:Ir,endpoint:yp,[M]:oe},{endpoint:yp,[M]:oe}],[M]:ee},{[L]:[$e,ze,Vt,kt,jn,pp,Ke,un],[Q]:[{[L]:Ir,endpoint:Py,[M]:oe},yw],[M]:ee},{[L]:[$e,ze,Vt,kt,jn,gp,Ke,hn],endpoint:yp,[M]:oe},{[L]:[$e,ze,Vt,kt,jn,pp,Ke,hn],endpoint:Py,[M]:oe},{[L]:[$e,ze,Pi,Oe,Jt],endpoint:{[ye]:S2,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,ze,Pi,Oe,Ke,un],[Q]:[{[L]:Ir,endpoint:_p,[M]:oe},{endpoint:_p,[M]:oe}],[M]:ee},{[L]:[$e,ze,Pi,Oe,Ke,hn],endpoint:_p,[M]:oe},{[L]:[$e,ze,Vt,Oe,Jt],endpoint:{[ye]:Zv,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,ze,Vt,Oe,Ke,un],[Q]:[{[L]:Ir,endpoint:{[ye]:Zv,[_e]:Zt,[Ee]:Ie},[M]:oe},{endpoint:_w,[M]:oe}],[M]:ee},{[L]:[$e,ze,Vt,Oe,Ke,hn],endpoint:_w,[M]:oe}],[M]:ee},Lf],[M]:ee}],[M]:ee},{[L]:[kt,jn,{[V]:Qe,[q]:[{[V]:Mt,[q]:[C2,"scheme"]},"http"]},{[V]:Sd,[q]:[Ze,hs]},mp,ze,$e,Vt],[Q]:[{[L]:Bi,[Q]:[{[L]:Qw,[Q]:[yw],[M]:ee},Lf],[M]:ee}],[M]:ee},{[L]:[mp,{[V]:T2,[q]:gz,[Be]:b2}],[Q]:[{[L]:[{[V]:Mt,[q]:[ui,"resourceId[0]"],[Be]:v2},{[V]:xs,[q]:[{[V]:Qe,[q]:[I2,bd]}]}],[Q]:[{[L]:[{[V]:Qe,[q]:[Ep,uE]}],[Q]:[{[L]:Dp,[Q]:[{[L]:Jw,[Q]:[Ew,xw,{[L]:Ip,[Q]:[Sw,{[L]:eR,[Q]:[xp,{[L]:Op,[Q]:[{[L]:Bi,[Q]:[{[L]:tR,[Q]:[{[L]:Lp,[Q]:[{[L]:[{[V]:Qe,[q]:[L2,bd]}],error:"Invalid ARN: Missing account id",[M]:pe},{[L]:Np,[Q]:[{[L]:nR,[Q]:[{[L]:Vo,endpoint:{[ye]:Wv,[_e]:Sp,[Ee]:Ie},[M]:oe},{[L]:qo,endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:Sp,[Ee]:Ie},[M]:oe},{endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:Sp,[Ee]:Ie},[M]:oe}],[M]:ee},Tw],[M]:ee},Tp],[M]:ee},bp],[M]:ee},vp],[M]:ee}],[M]:ee}],[M]:ee},bw],[M]:ee},{error:"Invalid ARN: bucket ARN is missing a region",[M]:pe}],[M]:ee},vw],[M]:ee},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[M]:pe}],[M]:ee},{[L]:Dp,[Q]:[{[L]:Jw,[Q]:[{[L]:Ip,[Q]:[{[L]:Dp,[Q]:[{[L]:Ip,[Q]:[Sw,{[L]:eR,[Q]:[xp,{[L]:Op,[Q]:[{[L]:Bi,[Q]:[{[L]:[{[V]:Qe,[q]:[O2,"{partitionResult#name}"]}],[Q]:[{[L]:Lp,[Q]:[{[L]:[{[V]:Qe,[q]:[Ep,Al]}],[Q]:[{[L]:Np,[Q]:[{[L]:nR,[Q]:[{[L]:Mp,error:"Access Points do not support S3 Accelerate",[M]:pe},{[L]:[xt,mt],endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:Vc,[Ee]:Ie},[M]:oe},{[L]:[xt,$e],endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:Vc,[Ee]:Ie},[M]:oe},{[L]:[ze,mt],endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:Vc,[Ee]:Ie},[M]:oe},{[L]:[ze,$e,kt,jn],endpoint:{[ye]:Wv,[_e]:Vc,[Ee]:Ie},[M]:oe},{[L]:[ze,$e],endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:Vc,[Ee]:Ie},[M]:oe}],[M]:ee},Tw],[M]:ee},Tp],[M]:ee},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[M]:pe}],[M]:ee},bp],[M]:ee},vp],[M]:ee}],[M]:ee}],[M]:ee},bw],[M]:ee}],[M]:ee}],[M]:ee},{[L]:[{[V]:Va,[q]:[fE,hs]}],[Q]:[{[L]:Pw,error:"S3 MRAP does not support dual-stack",[M]:pe},{[L]:qo,error:"S3 MRAP does not support FIPS",[M]:pe},{[L]:Mp,error:"S3 MRAP does not support S3 Accelerate",[M]:pe},{[L]:[{[V]:Xt,[q]:[{[Te]:"DisableMultiRegionAccessPoints"},hs]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[M]:pe},{[L]:[{[V]:xd,[q]:Cp,[Be]:Qv}],[Q]:[{[L]:[{[V]:Qe,[q]:[{[V]:Mt,[q]:[{[Te]:Qv},Ht]},{[V]:Mt,[q]:[ui,"partition"]}]}],[Q]:[{endpoint:{[ye]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[_e]:{[kn]:[{[pn]:hs,name:cE,[yn]:Al,[oE]:yz}]},[Ee]:Ie},[M]:oe}],[M]:ee},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[M]:pe}],[M]:ee}],[M]:ee},{error:"Invalid Access Point Name",[M]:pe}],[M]:ee},vw],[M]:ee},{[L]:[{[V]:Qe,[q]:[Ep,Lu]}],[Q]:[{[L]:Pw,error:"S3 Outposts does not support Dual-stack",[M]:pe},{[L]:qo,error:"S3 Outposts does not support FIPS",[M]:pe},{[L]:Mp,error:"S3 Outposts does not support S3 Accelerate",[M]:pe},{[L]:[{[V]:Ti,[q]:[{[V]:Mt,[q]:[ui,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[M]:pe},{[L]:[{[V]:Mt,[q]:_z,[Be]:By}],[Q]:[{[L]:Zw,[Q]:[xp,{[L]:Op,[Q]:[{[L]:Bi,[Q]:[{[L]:tR,[Q]:[{[L]:Lp,[Q]:[{[L]:Np,[Q]:[{[L]:[{[V]:Mt,[q]:Ez,[Be]:Jv}],[Q]:[{[L]:[{[V]:Mt,[q]:[ui,"resourceId[3]"],[Be]:hE}],[Q]:[{[L]:[{[V]:Qe,[q]:[{[Te]:Jv},w2]}],[Q]:[{[L]:Vo,endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[_e]:ww,[Ee]:Ie},[M]:oe},{endpoint:{[ye]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[_e]:ww,[Ee]:Ie},[M]:oe}],[M]:ee},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[M]:pe}],[M]:ee},{error:"Invalid ARN: expected an access point name",[M]:pe}],[M]:ee},{error:"Invalid ARN: Expected a 4-component resource",[M]:pe}],[M]:ee},Tp],[M]:ee},bp],[M]:ee},vp],[M]:ee}],[M]:ee}],[M]:ee},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[M]:pe}],[M]:ee},{error:"Invalid ARN: The Outpost Id was not set",[M]:pe}],[M]:ee},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[M]:pe}],[M]:ee},{error:"Invalid ARN: No ARN type specified",[M]:pe}],[M]:ee},{[L]:[{[V]:pt,[q]:[Ze,0,4,hz],[Be]:ew},{[V]:Qe,[q]:[{[Te]:ew},"arn:"]},{[V]:xs,[q]:[{[V]:Ti,[q]:[Rw]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[M]:pe},{[L]:[{[V]:Xt,[q]:[fz,hs]},Rw],error:"Path-style addressing cannot be used with ARN buckets",[M]:pe},{[L]:mz,[Q]:[{[L]:Bi,[Q]:[{[L]:[Vt],[Q]:[{[L]:[mt,Oe,xt,Jt],endpoint:{[ye]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[mt,Oe,xt,Ke,un],[Q]:[{endpoint:Aw,[M]:oe}],[M]:ee},{[L]:[mt,Oe,xt,Ke,hn],endpoint:Aw,[M]:oe},{[L]:[$e,Oe,xt,Jt],endpoint:{[ye]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,Oe,xt,Ke,un],[Q]:[{endpoint:Cw,[M]:oe}],[M]:ee},{[L]:[$e,Oe,xt,Ke,hn],endpoint:Cw,[M]:oe},{[L]:[mt,Oe,ze,Jt],endpoint:{[ye]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[mt,Oe,ze,Ke,un],[Q]:[{endpoint:Mw,[M]:oe}],[M]:ee},{[L]:[mt,Oe,ze,Ke,hn],endpoint:Mw,[M]:oe},{[L]:[$e,kt,jn,ze,Jt],endpoint:{[ye]:R2,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,kt,jn,ze,Ke,un],[Q]:[{[L]:Ir,endpoint:wp,[M]:oe},{endpoint:wp,[M]:oe}],[M]:ee},{[L]:[$e,kt,jn,ze,Ke,hn],endpoint:wp,[M]:oe},{[L]:[$e,Oe,ze,Jt],endpoint:{[ye]:tw,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[$e,Oe,ze,Ke,un],[Q]:[{[L]:Ir,endpoint:{[ye]:tw,[_e]:Zt,[Ee]:Ie},[M]:oe},{endpoint:Dw,[M]:oe}],[M]:ee},{[L]:[$e,Oe,ze,Ke,hn],endpoint:Dw,[M]:oe}],[M]:ee},{error:"Path-style addressing cannot be used with S3 Accelerate",[M]:pe}],[M]:ee}],[M]:ee}],[M]:ee},{[L]:[{[V]:Ti,[q]:[Iw]},{[V]:Xt,[q]:[Iw,hs]}],[Q]:[{[L]:Bi,[Q]:[{[L]:iR,[Q]:[Ew,xw,{[L]:Vo,endpoint:{[ye]:zf,[_e]:Rp,[Ee]:Ie},[M]:oe},{[L]:qo,endpoint:{[ye]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[_e]:Rp,[Ee]:Ie},[M]:oe},{endpoint:{[ye]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[_e]:Rp,[Ee]:Ie},[M]:oe}],[M]:ee},Lf],[M]:ee}],[M]:ee},{[L]:[uw],[Q]:[{[L]:Bi,[Q]:[{[L]:iR,[Q]:[{[L]:[xt,mt,Oe,Jt],endpoint:{[ye]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[xt,mt,Oe,Ke,un],[Q]:[{endpoint:Ow,[M]:oe}],[M]:ee},{[L]:[xt,mt,Oe,Ke,hn],endpoint:Ow,[M]:oe},{[L]:[xt,$e,Oe,Jt],endpoint:{[ye]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[xt,$e,Oe,Ke,un],[Q]:[{endpoint:Lw,[M]:oe}],[M]:ee},{[L]:[xt,$e,Oe,Ke,hn],endpoint:Lw,[M]:oe},{[L]:[ze,mt,Oe,Jt],endpoint:{[ye]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[ze,mt,Oe,Ke,un],[Q]:[{endpoint:Nw,[M]:oe}],[M]:ee},{[L]:[ze,mt,Oe,Ke,hn],endpoint:Nw,[M]:oe},{[L]:[ze,$e,kt,jn,Jt],endpoint:{[ye]:zf,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[ze,$e,kt,jn,Ke,un],[Q]:[{[L]:Ir,endpoint:Ap,[M]:oe},{endpoint:Ap,[M]:oe}],[M]:ee},{[L]:[ze,$e,kt,jn,Ke,hn],endpoint:Ap,[M]:oe},{[L]:[ze,$e,Oe,Jt],endpoint:{[ye]:nw,[_e]:cn,[Ee]:Ie},[M]:oe},{[L]:[ze,$e,Oe,Ke,un],[Q]:[{[L]:Ir,endpoint:{[ye]:nw,[_e]:Zt,[Ee]:Ie},[M]:oe},{endpoint:Bw,[M]:oe}],[M]:ee},{[L]:[ze,$e,Oe,Ke,hn],endpoint:Bw,[M]:oe}],[M]:ee},Lf],[M]:ee}],[M]:ee}],[M]:ee},{error:"A region must be set when sending requests to S3.",[M]:pe}]},Sz=xz,Tz=new O8({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),N2=(n,e={})=>Tz.get(n,()=>W8(Sz,{endpointParams:n,logger:e.logger}));yd.aws=c2;const bz=n=>async(e,t,i)=>{if(!i)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const s=await n(e,t,i),a=Pl(t)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!a)throw new Error(`getEndpointParameterInstructions() is not defined on \`${t.commandName}\``);const l=await d2(i,{getEndpointParameterInstructions:a},e);return Object.assign(s,l)},vz=async(n,e,t)=>({operation:Pl(e).operation,region:await Wi(n.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),wz=bz(vz);function B2(n){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:n.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}function P2(n){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:n.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}}const Rz=(n,e,t)=>s=>{const l=n(s).properties?.authSchemes;if(!l)return e(s);const u=[];for(const f of l){const{name:d,properties:g={},...p}=f,_=d.toLowerCase();d!==_&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${_}\``);let E;if(_==="sigv4a"){E="aws.auth#sigv4a";const S=l.find(R=>{const v=R.name.toLowerCase();return v!=="sigv4a"&&v.startsWith("sigv4")});if(y2.sigv4aDependency()==="none"&&S)continue}else if(_.startsWith("sigv4"))E="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${_}\``);const x=t[E];if(!x)throw new Error(`Could not find HttpAuthOption create function for \`${E}\``);const b=x(s);b.schemeId=E,b.signingProperties={...b.signingProperties||{},...p,...g},u.push(b)}return u},Az=n=>{const e=[];switch(n.operation){default:e.push(B2(n)),e.push(P2(n))}return e},Cz=Rz(N2,Az,{"aws.auth#sigv4":B2,"aws.auth#sigv4a":P2}),Mz=n=>{const e=nk(n),t=D4(e);return Object.assign(t,{authSchemePreference:Wi(n.authSchemePreference??[])})},Dz=n=>Object.assign(n,{useFipsEndpoint:n.useFipsEndpoint??!1,useDualstackEndpoint:n.useDualstackEndpoint??!1,forcePathStyle:n.forcePathStyle??!1,useAccelerateEndpoint:n.useAccelerateEndpoint??!1,useGlobalEndpoint:n.useGlobalEndpoint??!1,disableMultiregionAccessPoints:n.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),dE={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class wn extends sl{constructor(e){super(e),Object.setPrototypeOf(this,wn.prototype)}}class gE extends wn{name="NoSuchUpload";$fault="client";constructor(e){super({name:"NoSuchUpload",$fault:"client",...e}),Object.setPrototypeOf(this,gE.prototype)}}class mE extends wn{name="ObjectNotInActiveTierError";$fault="client";constructor(e){super({name:"ObjectNotInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,mE.prototype)}}class pE extends wn{name="BucketAlreadyExists";$fault="client";constructor(e){super({name:"BucketAlreadyExists",$fault:"client",...e}),Object.setPrototypeOf(this,pE.prototype)}}class yE extends wn{name="BucketAlreadyOwnedByYou";$fault="client";constructor(e){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...e}),Object.setPrototypeOf(this,yE.prototype)}}class _E extends wn{name="NoSuchBucket";$fault="client";constructor(e){super({name:"NoSuchBucket",$fault:"client",...e}),Object.setPrototypeOf(this,_E.prototype)}}var sR;(function(n){n.visit=(e,t)=>e.Prefix!==void 0?t.Prefix(e.Prefix):e.Tag!==void 0?t.Tag(e.Tag):e.And!==void 0?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])})(sR||(sR={}));var rR;(function(n){n.visit=(e,t)=>e.Prefix!==void 0?t.Prefix(e.Prefix):e.Tag!==void 0?t.Tag(e.Tag):e.AccessPointArn!==void 0?t.AccessPointArn(e.AccessPointArn):e.And!==void 0?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])})(rR||(rR={}));class EE extends wn{name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),Object.setPrototypeOf(this,EE.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}}class xE extends wn{name="NoSuchKey";$fault="client";constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),Object.setPrototypeOf(this,xE.prototype)}}class SE extends wn{name="NotFound";$fault="client";constructor(e){super({name:"NotFound",$fault:"client",...e}),Object.setPrototypeOf(this,SE.prototype)}}const Iz=n=>({...n,...n.SecretAccessKey&&{SecretAccessKey:Wr},...n.SessionToken&&{SessionToken:Wr}}),Oz=n=>({...n,...n.SSEKMSKeyId&&{SSEKMSKeyId:Wr},...n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wr},...n.Credentials&&{Credentials:Iz(n.Credentials)}}),Lz=n=>({...n,...n.SSEKMSKeyId&&{SSEKMSKeyId:Wr},...n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wr}}),Nz=n=>({...n,...n.SSEKMSKeyId&&{SSEKMSKeyId:Wr}}),Bz=n=>({...n,...n.SSECustomerKey&&{SSECustomerKey:Wr}});class TE extends wn{name="EncryptionTypeMismatch";$fault="client";constructor(e){super({name:"EncryptionTypeMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,TE.prototype)}}class bE extends wn{name="InvalidRequest";$fault="client";constructor(e){super({name:"InvalidRequest",$fault:"client",...e}),Object.setPrototypeOf(this,bE.prototype)}}class vE extends wn{name="InvalidWriteOffset";$fault="client";constructor(e){super({name:"InvalidWriteOffset",$fault:"client",...e}),Object.setPrototypeOf(this,vE.prototype)}}class wE extends wn{name="TooManyParts";$fault="client";constructor(e){super({name:"TooManyParts",$fault:"client",...e}),Object.setPrototypeOf(this,wE.prototype)}}class RE extends wn{name="IdempotencyParameterMismatch";$fault="client";constructor(e){super({name:"IdempotencyParameterMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,RE.prototype)}}class AE extends wn{name="ObjectAlreadyInActiveTierError";$fault="client";constructor(e){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,AE.prototype)}}var aR;(function(n){n.visit=(e,t)=>e.Records!==void 0?t.Records(e.Records):e.Stats!==void 0?t.Stats(e.Stats):e.Progress!==void 0?t.Progress(e.Progress):e.Cont!==void 0?t.Cont(e.Cont):e.End!==void 0?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])})(aR||(aR={}));const Pz=async(n,e)=>{const t=q_(n,e),i=At({},ka,{[LH]:n[VG],[IE]:n[ME],[OE]:n[DE],[q2]:n[H2],[Nu]:[()=>ka(n[vd]),()=>n[vd].toString()]});t.bp("/"),t.p("Bucket",()=>n.Bucket,"{Bucket}",!1);const s=At({[vH]:[,""]});return t.m("GET").h(i).q(s).b(void 0),t.build()},Fz=async(n,e)=>{const t=q_(n,e),i=At({},ka,{[cH]:n[MG],[uH]:[()=>ka(n[oR]),()=>np(n[oR]).toString()],[hH]:n[DG],[fH]:[()=>ka(n[lR]),()=>np(n[lR]).toString()],[yH]:n[FG],[$2]:n[z2],[HH]:n[qG],[K2]:n[G2],[V2]:n[k2],[j2]:n[F2],[DH]:n[xG]});t.bp("/{Key+}"),t.p("Bucket",()=>n.Bucket,"{Bucket}",!1),t.p("Key",()=>n.Key,"{Key+}",!0);const s=At({[YH]:[,"GetObject"],[_H]:[,n[UG]],[EH]:[,n[kG]],[xH]:[,n[zG]],[SH]:[,n[GG]],[TH]:[,n[HG]],[bH]:[()=>n.ResponseExpires!==void 0,()=>np(n[XG]).toString()],[RH]:[,n[X2]],[mH]:[()=>n.PartNumber!==void 0,()=>n[PG].toString()]});return t.m("GET").h(i).q(s).b(void 0),t.build()},Uz=async(n,e)=>{const t=q_(n,e),i=At({},ka,{[V2]:n[k2],[j2]:n[F2],[UH]:[()=>ka(n[cR]),()=>(n[cR]||[]).map(x4).join(", ")]});t.bp("/"),t.p("Bucket",()=>n.Bucket,"{Bucket}",!1);const s=At({[dH]:[,"2"],[sH]:[,n[Xf]],[rH]:[,n[jf]],[gH]:[()=>n.MaxKeys!==void 0,()=>n[$f].toString()],[pH]:[,n[za]],[iH]:[,n[Hf]],[lH]:[()=>n.FetchOwner!==void 0,()=>n[CG].toString()],[wH]:[,n[Kf]]});return t.m("GET").h(i).q(s).b(void 0),t.build()},kz=async(n,e)=>{if(n.statusCode!==200&&n.statusCode>=300)return CE(n,e);const t=At({$metadata:Rn(n),[ME]:[,n.headers[IE]],[DE]:[,n.headers[OE]],[H2]:[,n.headers[q2]],[vd]:[()=>n.headers[Nu]!==void 0,()=>Mu(n.headers[Nu])]}),i=Xr(MC(await Z_(n.body,e)),"body");return i[Fp]!=null&&(t[Fp]=uG(i[Fp])),t},zz=async(n,e)=>{if(n.statusCode!==200&&n.statusCode>=300)return CE(n,e);const t=At({$metadata:Rn(n),[wG]:[()=>n.headers[dR]!==void 0,()=>Mu(n.headers[dR])],[hG]:[,n.headers[ZG]],[Vf]:[,n.headers[BH]],[YG]:[,n.headers[kH]],[qf]:[()=>n.headers[fR]!==void 0,()=>Xr(wy(n.headers[fR]))],[EG]:[()=>n.headers[uR]!==void 0,()=>DC(n.headers[uR])],[Yf]:[,n.headers[aH]],[dG]:[,n.headers[AH]],[gG]:[,n.headers[CH]],[mG]:[,n.headers[MH]],[TG]:[,n.headers[IH]],[bG]:[,n.headers[OH]],[Gf]:[,n.headers[NH]],[IG]:[()=>n.headers[gR]!==void 0,()=>ou(n.headers[gR])],[X2]:[,n.headers[XH]],[fG]:[,n.headers[WG]],[pG]:[,n.headers[QG]],[yG]:[,n.headers[JG]],[_G]:[,n.headers[eH]],[SG]:[,n.headers[tH]],[vG]:[,n.headers[nH]],[RG]:[()=>n.headers[hR]!==void 0,()=>Xr(wy(n.headers[hR]))],[AG]:[,n.headers[oH]],[KG]:[,n.headers[jH]],[ME]:[,n.headers[IE]],[z2]:[,n.headers[$2]],[G2]:[,n.headers[K2]],[DE]:[,n.headers[OE]],[vd]:[()=>n.headers[Nu]!==void 0,()=>Mu(n.headers[Nu])],[Ga]:[,n.headers[GH]],[U2]:[,n.headers[Y2]],[jG]:[,n.headers[zH]],[BG]:[()=>n.headers[mR]!==void 0,()=>ou(n.headers[mR])],[$G]:[()=>n.headers[yR]!==void 0,()=>ou(n.headers[yR])],[LG]:[,n.headers[FH]],[NG]:[()=>n.headers[pR]!==void 0,()=>Xr(Wd(n.headers[pR]))],[OG]:[,n.headers[PH]],Metadata:[,Object.keys(n.headers).filter(s=>s.startsWith("x-amz-meta-")).reduce((s,a)=>(s[a.substring(11)]=n.headers[a],s),{})]}),i=n.body;return e.sdkStreamMixin(i),t.Body=i,t},Gz=async(n,e)=>{if(n.statusCode!==200&&n.statusCode>=300)return CE(n,e);const t=At({$metadata:Rn(n),[U2]:[,n.headers[Y2]]}),i=Xr(MC(await Z_(n.body,e)),"body");return i.CommonPrefixes===""?t[Bf]=[]:i[Bf]!=null&&(t[Bf]=rG(Cy(i[Bf]))),i.Contents===""?t[Pf]=[]:i[Pf]!=null&&(t[Pf]=oG(Cy(i[Pf]))),i[Hf]!=null&&(t[Hf]=Kt(i[Hf])),i[Xf]!=null&&(t[Xf]=Kt(i[Xf])),i[jf]!=null&&(t[jf]=Kt(i[jf])),i[Gp]!=null&&(t[Gp]=Mu(i[Gp])),i[Xp]!=null&&(t[Xp]=ou(i[Xp])),i[$f]!=null&&(t[$f]=ou(i[$f])),i[jp]!=null&&(t[jp]=Kt(i[jp])),i[Yp]!=null&&(t[Yp]=Kt(i[Yp])),i[za]!=null&&(t[za]=Kt(i[za])),i[Kf]!=null&&(t[Kf]=Kt(i[Kf])),t},CE=async(n,e)=>{const t={...n,body:await g6(n.body,e)},i=m6(n,t.body);switch(i){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await Qz(t);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await tG(t);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await Xz(t);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await jz(t);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Zz(t);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await qz(t);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Wz(t);case"NotFound":case"com.amazonaws.s3#NotFound":throw await Jz(t);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await Yz(t);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await $z(t);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await Kz(t);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await nG(t);case"IdempotencyParameterMismatch":case"com.amazonaws.s3#IdempotencyParameterMismatch":throw await Vz(t);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await eG(t);default:const s=t.body;return Hz({output:n,parsedBody:s,errorCode:i})}},Hz=ck(wn),Xz=async(n,e)=>{const t=At({});n.body;const i=new pE({$metadata:Rn(n),...t});return Wn(i,n.body)},jz=async(n,e)=>{const t=At({});n.body;const i=new yE({$metadata:Rn(n),...t});return Wn(i,n.body)},Yz=async(n,e)=>{const t=At({});n.body;const i=new TE({$metadata:Rn(n),...t});return Wn(i,n.body)},Vz=async(n,e)=>{const t=At({});n.body;const i=new RE({$metadata:Rn(n),...t});return Wn(i,n.body)},qz=async(n,e)=>{const t=At({}),i=n.body;i[Pp]!=null&&(t[Pp]=Kt(i[Pp])),i[Ga]!=null&&(t[Ga]=Kt(i[Ga]));const s=new EE({$metadata:Rn(n),...t});return Wn(s,n.body)},$z=async(n,e)=>{const t=At({});n.body;const i=new bE({$metadata:Rn(n),...t});return Wn(i,n.body)},Kz=async(n,e)=>{const t=At({});n.body;const i=new vE({$metadata:Rn(n),...t});return Wn(i,n.body)},Zz=async(n,e)=>{const t=At({});n.body;const i=new _E({$metadata:Rn(n),...t});return Wn(i,n.body)},Wz=async(n,e)=>{const t=At({});n.body;const i=new xE({$metadata:Rn(n),...t});return Wn(i,n.body)},Qz=async(n,e)=>{const t=At({});n.body;const i=new gE({$metadata:Rn(n),...t});return Wn(i,n.body)},Jz=async(n,e)=>{const t=At({});n.body;const i=new SE({$metadata:Rn(n),...t});return Wn(i,n.body)},eG=async(n,e)=>{const t=At({});n.body;const i=new AE({$metadata:Rn(n),...t});return Wn(i,n.body)},tG=async(n,e)=>{const t=At({});n.body;const i=new mE({$metadata:Rn(n),...t});return Wn(i,n.body)},nG=async(n,e)=>{const t=At({});n.body;const i=new wE({$metadata:Rn(n),...t});return Wn(i,n.body)},iG=(n,e)=>(n||[]).filter(t=>t!=null).map(t=>Kt(t)),sG=(n,e)=>{const t={};return n[za]!=null&&(t[za]=Kt(n[za])),t},rG=(n,e)=>(n||[]).filter(t=>t!=null).map(t=>sG(t)),aG=(n,e)=>{const t={};return n[Hp]!=null&&(t[Hp]=Kt(n[Hp])),n[qf]!=null&&(t[qf]=Xr(Wd(n[qf]))),n[Yf]!=null&&(t[Yf]=Kt(n[Yf])),n.ChecksumAlgorithm===""?t[Nf]=[]:n[Nf]!=null&&(t[Nf]=iG(Cy(n[Nf]))),n[Gf]!=null&&(t[Gf]=Kt(n[Gf])),n[Wp]!=null&&(t[Wp]=DC(n[Wp])),n[Ga]!=null&&(t[Ga]=Kt(n[Ga])),n[Vp]!=null&&(t[Vp]=lG(n[Vp])),n[$p]!=null&&(t[$p]=cG(n[$p])),t},oG=(n,e)=>(n||[]).filter(t=>t!=null).map(t=>aG(t)),lG=(n,e)=>{const t={};return n[Up]!=null&&(t[Up]=Kt(n[Up])),n[kp]!=null&&(t[kp]=Kt(n[kp])),t},cG=(n,e)=>{const t={};return n[zp]!=null&&(t[zp]=Mu(n[zp])),n[qp]!=null&&(t[qp]=Xr(Wd(n[qp]))),t},uG=(n,e)=>{const t={};return n[Bp]!=null&&(t[Bp]=Kt(n[Bp])),n[Kp]!=null&&(t[Kp]=Kt(n[Kp])),n[Zp]!=null&&(t[Zp]=Kt(n[Zp])),n[Vf]!=null&&(t[Vf]=Xr(Wd(n[Vf]))),t},Rn=n=>({httpStatusCode:n.statusCode,requestId:n.headers["x-amzn-requestid"]??n.headers["x-amzn-request-id"]??n.headers["x-amz-request-id"],extendedRequestId:n.headers["x-amz-id-2"],cfId:n.headers["x-amz-cf-id"]}),Bp="AccessKeyId",hG="AcceptRanges",Pp="AccessTier",vd="BucketKeyEnabled",Fp="Credentials",Nf="ChecksumAlgorithm",fG="CacheControl",dG="ChecksumCRC32",gG="ChecksumCRC32C",mG="ChecksumCRC64NVME",pG="ContentDisposition",yG="ContentEncoding",_G="ContentLanguage",EG="ContentLength",xG="ChecksumMode",Bf="CommonPrefixes",SG="ContentRange",TG="ChecksumSHA1",bG="ChecksumSHA256",Gf="ChecksumType",vG="ContentType",Hf="ContinuationToken",Pf="Contents",Xf="Delimiter",wG="DeleteMarker",Up="DisplayName",RG="Expires",F2="ExpectedBucketOwner",AG="ExpiresString",jf="EncodingType",Yf="ETag",Vf="Expiration",CG="FetchOwner",kp="ID",MG="IfMatch",oR="IfModifiedSince",DG="IfNoneMatch",zp="IsRestoreInProgress",Gp="IsTruncated",lR="IfUnmodifiedSince",Hp="Key",Xp="KeyCount",qf="LastModified",$f="MaxKeys",IG="MissingMeta",jp="Name",Yp="NextContinuationToken",Vp="Owner",OG="ObjectLockLegalHoldStatus",LG="ObjectLockMode",NG="ObjectLockRetainUntilDate",cR="OptionalObjectAttributes",za="Prefix",BG="PartsCount",PG="PartNumber",FG="Range",U2="RequestCharged",UG="ResponseCacheControl",kG="ResponseContentDisposition",zG="ResponseContentEncoding",GG="ResponseContentLanguage",HG="ResponseContentType",XG="ResponseExpires",qp="RestoreExpiryDate",k2="RequestPayer",jG="ReplicationStatus",$p="RestoreStatus",YG="Restore",Kf="StartAfter",Kp="SecretAccessKey",Ga="StorageClass",VG="SessionMode",ME="ServerSideEncryption",z2="SSECustomerAlgorithm",qG="SSECustomerKey",G2="SSECustomerKeyMD5",H2="SSEKMSEncryptionContext",DE="SSEKMSKeyId",Zp="SessionToken",Wp="Size",$G="TagCount",X2="VersionId",KG="WebsiteRedirectLocation",ZG="accept-ranges",WG="cache-control",QG="content-disposition",JG="content-encoding",eH="content-language",uR="content-length",tH="content-range",nH="content-type",iH="continuation-token",sH="delimiter",hR="expires",rH="encoding-type",aH="etag",oH="expiresstring",lH="fetch-owner",cH="if-match",uH="if-modified-since",hH="if-none-match",fH="if-unmodified-since",fR="last-modified",dH="list-type",gH="max-keys",mH="partNumber",pH="prefix",yH="range",_H="response-cache-control",EH="response-content-disposition",xH="response-content-encoding",SH="response-content-language",TH="response-content-type",bH="response-expires",vH="session",wH="start-after",RH="versionId",AH="x-amz-checksum-crc32",CH="x-amz-checksum-crc32c",MH="x-amz-checksum-crc64nvme",DH="x-amz-checksum-mode",IH="x-amz-checksum-sha1",OH="x-amz-checksum-sha256",LH="x-amz-create-session-mode",NH="x-amz-checksum-type",dR="x-amz-delete-marker",BH="x-amz-expiration",j2="x-amz-expected-bucket-owner",gR="x-amz-missing-meta",mR="x-amz-mp-parts-count",PH="x-amz-object-lock-legal-hold",FH="x-amz-object-lock-mode",pR="x-amz-object-lock-retain-until-date",UH="x-amz-optional-object-attributes",kH="x-amz-restore",Y2="x-amz-request-charged",V2="x-amz-request-payer",zH="x-amz-replication-status",GH="x-amz-storage-class",IE="x-amz-server-side-encryption",OE="x-amz-server-side-encryption-aws-kms-key-id",Nu="x-amz-server-side-encryption-bucket-key-enabled",q2="x-amz-server-side-encryption-context",$2="x-amz-server-side-encryption-customer-algorithm",HH="x-amz-server-side-encryption-customer-key",K2="x-amz-server-side-encryption-customer-key-md5",yR="x-amz-tagging-count",XH="x-amz-version-id",jH="x-amz-website-redirect-location",YH="x-id";class VH extends Qd.classBuilder().ep({...dE,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,t,i,s){return[G_(i,this.serialize,this.deserialize),sE(i,e.getEndpointParameterInstructions()),e2(i)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(Lz,Oz).ser(Pz).de(kz).build(){}const qH="3.850.0",$H={version:qH},KH=n=>new TextEncoder().encode(n);function _R(n){return typeof n=="string"?n.length===0:n.byteLength===0}var Z2={name:"SHA-1"},ER={name:"HMAC",hash:Z2},ZH=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const WH={};function Yr(){return typeof window<"u"?window:typeof self<"u"?self:WH}var QH=function(){function n(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(t,i){Yr().crypto.subtle.importKey("raw",xR(e),ER,!1,["sign"]).then(t,i)}),this.key.catch(function(){}))}return n.prototype.update=function(e){if(!_R(e)){var t=xR(e),i=new Uint8Array(this.toHash.byteLength+t.byteLength);i.set(this.toHash,0),i.set(t,this.toHash.byteLength),this.toHash=i}},n.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return Yr().crypto.subtle.sign(ER,t,e.toHash).then(function(i){return new Uint8Array(i)})}):_R(this.toHash)?Promise.resolve(ZH):Promise.resolve().then(function(){return Yr().crypto.subtle.digest(Z2,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},n.prototype.reset=function(){this.toHash=new Uint8Array(0)},n}();function xR(n){return typeof n=="string"?KH(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}var JH=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function W2(n){if(e7(n)&&typeof n.crypto.subtle=="object"){var e=n.crypto.subtle;return t7(e)}return!1}function e7(n){if(typeof n=="object"&&typeof n.crypto=="object"){var e=n.crypto.getRandomValues;return typeof e=="function"}return!1}function t7(n){return n&&JH.every(function(e){return typeof n[e]=="function"})}var n7=function(){function n(e){if(W2(Yr()))this.hash=new QH(e);else throw new Error("SHA1 not supported")}return n.prototype.update=function(e,t){this.hash.update(Qr(e))},n.prototype.digest=function(){return this.hash.digest()},n.prototype.reset=function(){this.hash.reset()},n}(),Q2={name:"SHA-256"},SR={name:"HMAC",hash:Q2},i7=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),s7=function(){function n(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return n.prototype.update=function(e){if(!Iu(e)){var t=Qr(e),i=new Uint8Array(this.toHash.byteLength+t.byteLength);i.set(this.toHash,0),i.set(t,this.toHash.byteLength),this.toHash=i}},n.prototype.digest=function(){var e=this;return this.key?this.key.then(function(t){return Yr().crypto.subtle.sign(SR,t,e.toHash).then(function(i){return new Uint8Array(i)})}):Iu(this.toHash)?Promise.resolve(i7):Promise.resolve().then(function(){return Yr().crypto.subtle.digest(Q2,e.toHash)}).then(function(t){return Promise.resolve(new Uint8Array(t))})},n.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(t,i){Yr().crypto.subtle.importKey("raw",Qr(e.secret),SR,!1,["sign"]).then(t,i)}),this.key.catch(function(){}))},n}(),Fi=64,r7=32,a7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o7=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],l7=Math.pow(2,53)-1,Zf=function(){function n(){this.state=Int32Array.from(o7),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,i=e.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>l7)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=e[t++],i--,this.bufferLength===Fi&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(t.setUint8(this.bufferLength++,128),i%Fi>=Fi-8){for(var s=this.bufferLength;s<Fi;s++)t.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<Fi-8;s++)t.setUint8(s,0);t.setUint32(Fi-8,Math.floor(e/4294967296),!0),t.setUint32(Fi-4,e),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(r7),s=0;s<8;s++)a[s*4]=this.state[s]>>>24&255,a[s*4+1]=this.state[s]>>>16&255,a[s*4+2]=this.state[s]>>>8&255,a[s*4+3]=this.state[s]>>>0&255;return a},n.prototype.hashBuffer=function(){for(var e=this,t=e.buffer,i=e.state,s=i[0],a=i[1],l=i[2],u=i[3],f=i[4],d=i[5],g=i[6],p=i[7],_=0;_<Fi;_++){if(_<16)this.temp[_]=(t[_*4]&255)<<24|(t[_*4+1]&255)<<16|(t[_*4+2]&255)<<8|t[_*4+3]&255;else{var E=this.temp[_-2],x=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=this.temp[_-15];var b=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;this.temp[_]=(x+this.temp[_-7]|0)+(b+this.temp[_-16]|0)}var S=(((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&d^~f&g)|0)+(p+(a7[_]+this.temp[_]|0)|0)|0,R=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&a^s&l^a&l)|0;p=g,g=d,d=f,f=u+S|0,u=l,l=a,a=s,s=S+R|0}i[0]+=s,i[1]+=a,i[2]+=l,i[3]+=u,i[4]+=f,i[5]+=d,i[6]+=g,i[7]+=p},n}(),c7=function(){function n(e){this.secret=e,this.hash=new Zf,this.reset()}return n.prototype.update=function(e){if(!(Iu(e)||this.error))try{this.hash.update(Qr(e))}catch(t){this.error=t}},n.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},n.prototype.digest=function(){return Q_(this,void 0,void 0,function(){return J_(this,function(e){return[2,this.digestSync()]})})},n.prototype.reset=function(){if(this.hash=new Zf,this.secret){this.outer=new Zf;var e=u7(this.secret),t=new Uint8Array(Fi);t.set(e);for(var i=0;i<Fi;i++)e[i]^=54,t[i]^=92;this.hash.update(e),this.outer.update(t);for(var i=0;i<e.byteLength;i++)e[i]=0}},n}();function u7(n){var e=Qr(n);if(e.byteLength>Fi){var t=new Zf;t.update(e),e=t.digest()}var i=new Uint8Array(Fi);return i.set(e),i}var h7=function(){function n(e){W2(Yr())?this.hash=new s7(e):this.hash=new c7(e)}return n.prototype.update=function(e,t){this.hash.update(Qr(e))},n.prototype.digest=function(){return this.hash.digest()},n.prototype.reset=function(){this.hash.reset()},n}();const f7={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},J2={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Ut={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Yn={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Br={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ae{static getFirstMatch(e,t){const i=t.match(e);return i&&i.length>0&&i[1]||""}static getSecondMatch(e,t){const i=t.match(e);return i&&i.length>1&&i[2]||""}static matchAndReturnConst(e,t,i){if(e.test(t))return i}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(i=>parseInt(i,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5)){if(t[0]===1&&t[1]<6)return"Cupcake";if(t[0]===1&&t[1]>=6)return"Donut";if(t[0]===2&&t[1]<2)return"Eclair";if(t[0]===2&&t[1]===2)return"Froyo";if(t[0]===2&&t[1]>2)return"Gingerbread";if(t[0]===3)return"Honeycomb";if(t[0]===4&&t[1]<1)return"Ice Cream Sandwich";if(t[0]===4&&t[1]<4)return"Jelly Bean";if(t[0]===4&&t[1]>=4)return"KitKat";if(t[0]===5)return"Lollipop";if(t[0]===6)return"Marshmallow";if(t[0]===7)return"Nougat";if(t[0]===8)return"Oreo";if(t[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,i=!1){const s=ae.getVersionPrecision(e),a=ae.getVersionPrecision(t);let l=Math.max(s,a),u=0;const f=ae.map([e,t],d=>{const g=l-ae.getVersionPrecision(d),p=d+new Array(g+1).join(".0");return ae.map(p.split("."),_=>new Array(20-_.length).join("0")+_).reverse()});for(i&&(u=l-Math.min(s,a)),l-=1;l>=u;){if(f[0][l]>f[1][l])return 1;if(f[0][l]===f[1][l]){if(l===u)return 0;l-=1}else if(f[0][l]<f[1][l])return-1}}static map(e,t){const i=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(s=0;s<e.length;s+=1)i.push(t(e[s]));return i}static find(e,t){let i,s;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(i=0,s=e.length;i<s;i+=1){const a=e[i];if(t(a,i))return a}}static assign(e,...t){const i=e;let s,a;if(Object.assign)return Object.assign(e,...t);for(s=0,a=t.length;s<a;s+=1){const l=t[s];typeof l=="object"&&l!==null&&Object.keys(l).forEach(f=>{i[f]=l[f]})}return e}static getBrowserAlias(e){return f7[e]}static getBrowserTypeByAlias(e){return J2[e]||""}}const gt=/version\/(\d+(\.?_?\d+)+)/i,d7=[{test:[/googlebot/i],describe(n){const e={name:"Googlebot"},t=ae.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/opera/i],describe(n){const e={name:"Opera"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(n){const e={name:"Opera"},t=ae.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(n){const e={name:"Samsung Internet for Android"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/Whale/i],describe(n){const e={name:"NAVER Whale Browser"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(n){const e={name:"MZ Browser"},t=ae.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/focus/i],describe(n){const e={name:"Focus"},t=ae.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/swing/i],describe(n){const e={name:"Swing"},t=ae.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/coast/i],describe(n){const e={name:"Opera Coast"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(n){const e={name:"Opera Touch"},t=ae.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(n){const e={name:"Yandex Browser"},t=ae.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(n){const e={name:"UC Browser"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(n){const e={name:"Maxthon"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(n){const e={name:"Epiphany"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/puffin/i],describe(n){const e={name:"Puffin"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(n){const e={name:"Sleipnir"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(n){const e={name:"K-Meleon"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(n){const e={name:"WeChat"},t=ae.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(n){const e={name:/qqbrowserlite/i.test(n)?"QQ Browser Lite":"QQ Browser"},t=ae.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(n){const e={name:"Internet Explorer"},t=ae.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(n){const e={name:"Microsoft Edge"},t=ae.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(n){const e={name:"Microsoft Edge"},t=ae.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(n){const e={name:"Vivaldi"},t=ae.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(n){const e={name:"SeaMonkey"},t=ae.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(n){const e={name:"Sailfish"},t=ae.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,n);return t&&(e.version=t),e}},{test:[/silk/i],describe(n){const e={name:"Amazon Silk"},t=ae.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/phantom/i],describe(n){const e={name:"PhantomJS"},t=ae.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(n){const e={name:"SlimerJS"},t=ae.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const e={name:"BlackBerry"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(n){const e={name:"WebOS Browser"},t=ae.getFirstMatch(gt,n)||ae.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/bada/i],describe(n){const e={name:"Bada"},t=ae.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/tizen/i],describe(n){const e={name:"Tizen"},t=ae.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(n){const e={name:"QupZilla"},t=ae.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(n){const e={name:"Firefox"},t=ae.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/electron/i],describe(n){const e={name:"Electron"},t=ae.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(n){const e={name:"Miui"},t=ae.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/chromium/i],describe(n){const e={name:"Chromium"},t=ae.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,n)||ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(n){const e={name:"Chrome"},t=ae.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/GSA/i],describe(n){const e={name:"Google Search"},t=ae.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){const e=!n.test(/like android/i),t=n.test(/android/i);return e&&t},describe(n){const e={name:"Android Browser"},t=ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(n){const e={name:"PlayStation 4"},t=ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(n){const e={name:"Safari"},t=ae.getFirstMatch(gt,n);return t&&(e.version=t),e}},{test:[/.*/i],describe(n){const e=/^(.*)\/(.*) /,t=/^(.*)\/(.*)[ \t]\((.*)/,s=n.search("\\(")!==-1?t:e;return{name:ae.getFirstMatch(s,n),version:ae.getSecondMatch(s,n)}}}],g7=[{test:[/Roku\/DVP/],describe(n){const e=ae.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,n);return{name:Yn.Roku,version:e}}},{test:[/windows phone/i],describe(n){const e=ae.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,n);return{name:Yn.WindowsPhone,version:e}}},{test:[/windows /i],describe(n){const e=ae.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,n),t=ae.getWindowsVersionName(e);return{name:Yn.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(n){const e={name:Yn.iOS},t=ae.getSecondMatch(/(Version\/)(\d[\d.]+)/,n);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(n){const e=ae.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,n).replace(/[_\s]/g,"."),t=ae.getMacOSVersionName(e),i={name:Yn.MacOS,version:e};return t&&(i.versionName=t),i}},{test:[/(ipod|iphone|ipad)/i],describe(n){const e=ae.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,n).replace(/[_\s]/g,".");return{name:Yn.iOS,version:e}}},{test(n){const e=!n.test(/like android/i),t=n.test(/android/i);return e&&t},describe(n){const e=ae.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,n),t=ae.getAndroidVersionName(e),i={name:Yn.Android,version:e};return t&&(i.versionName=t),i}},{test:[/(web|hpw)[o0]s/i],describe(n){const e=ae.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,n),t={name:Yn.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(n){const e=ae.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,n)||ae.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,n)||ae.getFirstMatch(/\bbb(\d+)/i,n);return{name:Yn.BlackBerry,version:e}}},{test:[/bada/i],describe(n){const e=ae.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,n);return{name:Yn.Bada,version:e}}},{test:[/tizen/i],describe(n){const e=ae.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,n);return{name:Yn.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:Yn.Linux}}},{test:[/CrOS/],describe(){return{name:Yn.ChromeOS}}},{test:[/PlayStation 4/],describe(n){const e=ae.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,n);return{name:Yn.PlayStation4,version:e}}}],m7=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(n){const e=ae.getFirstMatch(/(can-l01)/i,n)&&"Nova",t={type:Ut.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Ut.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Ut.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Ut.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Ut.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Ut.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Ut.tablet}}},{test(n){const e=n.test(/ipod|iphone/i),t=n.test(/like (ipod|iphone)/i);return e&&!t},describe(n){const e=ae.getFirstMatch(/(ipod|iphone)/i,n);return{type:Ut.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Ut.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Ut.mobile}}},{test(n){return n.getBrowserName(!0)==="blackberry"},describe(){return{type:Ut.mobile,vendor:"BlackBerry"}}},{test(n){return n.getBrowserName(!0)==="bada"},describe(){return{type:Ut.mobile}}},{test(n){return n.getBrowserName()==="windows phone"},describe(){return{type:Ut.mobile,vendor:"Microsoft"}}},{test(n){const e=Number(String(n.getOSVersion()).split(".")[0]);return n.getOSName(!0)==="android"&&e>=3},describe(){return{type:Ut.tablet}}},{test(n){return n.getOSName(!0)==="android"},describe(){return{type:Ut.mobile}}},{test(n){return n.getOSName(!0)==="macos"},describe(){return{type:Ut.desktop,vendor:"Apple"}}},{test(n){return n.getOSName(!0)==="windows"},describe(){return{type:Ut.desktop}}},{test(n){return n.getOSName(!0)==="linux"},describe(){return{type:Ut.desktop}}},{test(n){return n.getOSName(!0)==="playstation 4"},describe(){return{type:Ut.tv}}},{test(n){return n.getOSName(!0)==="roku"},describe(){return{type:Ut.tv}}}],p7=[{test(n){return n.getBrowserName(!0)==="microsoft edge"},describe(n){if(/\sedg\//i.test(n))return{name:Br.Blink};const t=ae.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,n);return{name:Br.EdgeHTML,version:t}}},{test:[/trident/i],describe(n){const e={name:Br.Trident},t=ae.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){return n.test(/presto/i)},describe(n){const e={name:Br.Presto},t=ae.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test(n){const e=n.test(/gecko/i),t=n.test(/like gecko/i);return e&&!t},describe(n){const e={name:Br.Gecko},t=ae.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Br.Blink}}},{test:[/(apple)?webkit/i],describe(n){const e={name:Br.WebKit},t=ae.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,n);return t&&(e.version=t),e}}];class TR{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ae.find(d7,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ae.find(g7,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=ae.find(m7,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ae.find(p7,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(i=>this.test(i));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ae.assign({},this.parsedResult)}satisfies(e){const t={};let i=0;const s={};let a=0;if(Object.keys(e).forEach(u=>{const f=e[u];typeof f=="string"?(s[u]=f,a+=1):typeof f=="object"&&(t[u]=f,i+=1)}),i>0){const u=Object.keys(t),f=ae.find(u,g=>this.isOS(g));if(f){const g=this.satisfies(t[f]);if(g!==void 0)return g}const d=ae.find(u,g=>this.isPlatform(g));if(d){const g=this.satisfies(t[d]);if(g!==void 0)return g}}if(a>0){const u=Object.keys(s),f=ae.find(u,d=>this.isBrowser(d,!0));if(f!==void 0)return this.compareVersion(s[f])}}isBrowser(e,t=!1){const i=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const a=ae.getBrowserTypeByAlias(s);return t&&a&&(s=a.toLowerCase()),s===i}compareVersion(e){let t=[0],i=e,s=!1;const a=this.getBrowserVersion();if(typeof a=="string")return e[0]===">"||e[0]==="<"?(i=e.substr(1),e[1]==="="?(s=!0,i=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?i=e.substr(1):e[0]==="~"&&(s=!0,i=e.substr(1)),t.indexOf(ae.compareVersions(a,i,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class eM{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new TR(e,t)}static parse(e){return new TR(e).getResult()}static get BROWSER_MAP(){return J2}static get ENGINE_MAP(){return Br}static get OS_MAP(){return Yn}static get PLATFORMS_MAP(){return Ut}}const y7=({serviceId:n,clientVersion:e})=>async t=>{const i=typeof window<"u"&&window?.navigator?.userAgent?eM.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",e],["ua","2.1"],[`os/${i?.os?.name||"other"}`,i?.os?.version],["lang/js"],["md/browser",`${i?.browser?.name??"unknown"}_${i?.browser?.version??"unknown"}`]];n&&s.push([`api/${n}`,e]);const a=await t?.userAgentAppId?.();return a&&s.push([`app/${a}`]),s};class cu{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let i=7,s=Math.abs(Math.round(e));i>-1&&s>0;i--,s/=256)t[i]=s;return e<0&&bR(t),new cu(t)}valueOf(){const e=this.bytes.slice(0),t=e[0]&128;return t&&bR(e),parseInt(ci(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function bR(n){for(let e=0;e<8;e++)n[e]^=255;for(let e=7;e>-1&&(n[e]++,n[e]===0);e--);}class _7{constructor(e,t){this.toUtf8=e,this.fromUtf8=t}format(e){const t=[];for(const a of Object.keys(e)){const l=this.fromUtf8(a);t.push(Uint8Array.from([l.byteLength]),l,this.formatHeaderValue(e[a]))}const i=new Uint8Array(t.reduce((a,l)=>a+l.byteLength,0));let s=0;for(const a of t)i.set(a,s),s+=a.byteLength;return i}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const i=new DataView(new ArrayBuffer(5));return i.setUint8(0,4),i.setInt32(1,e.value,!1),new Uint8Array(i.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const a=new DataView(new ArrayBuffer(3+e.value.byteLength));a.setUint8(0,6),a.setUint16(1,e.value.byteLength,!1);const l=new Uint8Array(a.buffer);return l.set(e.value,3),l;case"string":const u=this.fromUtf8(e.value),f=new DataView(new ArrayBuffer(3+u.byteLength));f.setUint8(0,7),f.setUint16(1,u.byteLength,!1);const d=new Uint8Array(f.buffer);return d.set(u,3),d;case"timestamp":const g=new Uint8Array(9);return g[0]=8,g.set(cu.fromNumber(e.value.valueOf()).bytes,1),g;case"uuid":if(!A7.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const p=new Uint8Array(17);return p[0]=9,p.set(CC(e.value.replace(/\-/g,"")),1),p}}parse(e){const t={};let i=0;for(;i<e.byteLength;){const s=e.getUint8(i++),a=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+i,s));switch(i+=s,e.getUint8(i++)){case 0:t[a]={type:wR,value:!0};break;case 1:t[a]={type:wR,value:!1};break;case 2:t[a]={type:E7,value:e.getInt8(i++)};break;case 3:t[a]={type:x7,value:e.getInt16(i,!1)},i+=2;break;case 4:t[a]={type:S7,value:e.getInt32(i,!1)},i+=4;break;case 5:t[a]={type:T7,value:new cu(new Uint8Array(e.buffer,e.byteOffset+i,8))},i+=8;break;case 6:const l=e.getUint16(i,!1);i+=2,t[a]={type:b7,value:new Uint8Array(e.buffer,e.byteOffset+i,l)},i+=l;break;case 7:const u=e.getUint16(i,!1);i+=2,t[a]={type:v7,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+i,u))},i+=u;break;case 8:t[a]={type:w7,value:new Date(new cu(new Uint8Array(e.buffer,e.byteOffset+i,8)).valueOf())},i+=8;break;case 9:const f=new Uint8Array(e.buffer,e.byteOffset+i,16);i+=16,t[a]={type:R7,value:`${ci(f.subarray(0,4))}-${ci(f.subarray(4,6))}-${ci(f.subarray(6,8))}-${ci(f.subarray(8,10))}-${ci(f.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return t}}var vR;(function(n){n[n.boolTrue=0]="boolTrue",n[n.boolFalse=1]="boolFalse",n[n.byte=2]="byte",n[n.short=3]="short",n[n.integer=4]="integer",n[n.long=5]="long",n[n.byteArray=6]="byteArray",n[n.string=7]="string",n[n.timestamp=8]="timestamp",n[n.uuid=9]="uuid"})(vR||(vR={}));const wR="boolean",E7="byte",x7="short",S7="integer",T7="long",b7="binary",v7="string",w7="timestamp",R7="uuid",A7=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,tM=4,Pr=tM*2,wa=4,C7=Pr+wa*2;function M7({byteLength:n,byteOffset:e,buffer:t}){if(n<C7)throw new Error("Provided message too short to accommodate event stream message overhead");const i=new DataView(t,e,n),s=i.getUint32(0,!1);if(n!==s)throw new Error("Reported message length does not match received message length");const a=i.getUint32(tM,!1),l=i.getUint32(Pr,!1),u=i.getUint32(n-wa,!1),f=new pd().update(new Uint8Array(t,e,Pr));if(l!==f.digest())throw new Error(`The prelude checksum specified in the message (${l}) does not match the calculated CRC32 checksum (${f.digest()})`);if(f.update(new Uint8Array(t,e+Pr,n-(Pr+wa))),u!==f.digest())throw new Error(`The message checksum (${f.digest()}) did not match the expected value of ${u}`);return{headers:new DataView(t,e+Pr+wa,a),body:new Uint8Array(t,e+Pr+wa+a,s-a-(Pr+wa+wa))}}class D7{constructor(e,t){this.headerMarshaller=new _7(e,t),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),t=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return t}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const t=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return t}}}encode({headers:e,body:t}){const i=this.headerMarshaller.format(e),s=i.byteLength+t.byteLength+16,a=new Uint8Array(s),l=new DataView(a.buffer,a.byteOffset,a.byteLength),u=new pd;return l.setUint32(0,s,!1),l.setUint32(4,i.byteLength,!1),l.setUint32(8,u.update(a.subarray(0,8)).digest(),!1),a.set(i,12),a.set(t,i.byteLength+12),l.setUint32(s-4,u.update(a.subarray(8,s-4)).digest(),!1),a}decode(e){const{headers:t,body:i}=M7(e);return{headers:this.headerMarshaller.parse(t),body:i}}formatHeaders(e){return this.headerMarshaller.format(e)}}class I7{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class O7{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class L7{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const t=await this.options.deserializer(e);t!==void 0&&(yield t)}}}class N7{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function B7(n){let e=0,t=0,i=null,s=null;const a=u=>{if(typeof u!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+u);e=u,t=4,i=new Uint8Array(u),new DataView(i.buffer).setUint32(0,u,!1)},l=async function*(){const u=n[Symbol.asyncIterator]();for(;;){const{value:f,done:d}=await u.next();if(d){if(e)if(e===t)yield i;else throw new Error("Truncated event message received.");else return;return}const g=f.length;let p=0;for(;p<g;){if(!i){const E=g-p;s||(s=new Uint8Array(4));const x=Math.min(4-t,E);if(s.set(f.slice(p,p+x),t),t+=x,p+=x,t<4)break;a(new DataView(s.buffer).getUint32(0,!1)),s=null}const _=Math.min(e-t,g-p);i.set(f.slice(p,p+_),t),t+=_,p+=_,e&&e===t&&(yield i,i=null,e=0,t=0)}}};return{[Symbol.asyncIterator]:l}}function P7(n,e){return async function(t){const{value:i}=t.headers[":message-type"];if(i==="error"){const s=new Error(t.headers[":error-message"].value||"UnknownError");throw s.name=t.headers[":error-code"].value,s}else if(i==="exception"){const s=t.headers[":exception-type"].value,a={[s]:t},l=await n(a);if(l.$unknown){const u=new Error(e(t.body));throw u.name=s,u}throw l[s]}else if(i==="event"){const s={[t.headers[":event-type"].value]:t},a=await n(s);return a.$unknown?void 0:a}else throw Error(`Unrecognizable event type: ${t.headers[":event-type"].value}`)}}let F7=class{constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new D7(e,t),this.utfEncoder=e}deserialize(e,t){const i=B7(e);return new L7({messageStream:new I7({inputStream:i,decoder:this.eventStreamCodec}),deserializer:P7(t,this.utfEncoder)})}serialize(e,t){return new O7({messageStream:new N7({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const U7=n=>({[Symbol.asyncIterator]:async function*(){const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)return;yield i}}finally{e.releaseLock()}}}),k7=n=>{const e=n[Symbol.asyncIterator]();return new ReadableStream({async pull(t){const{done:i,value:s}=await e.next();if(i)return t.close();t.enqueue(s)}})};class z7{constructor({utf8Encoder:e,utf8Decoder:t}){this.universalMarshaller=new F7({utf8Decoder:t,utf8Encoder:e})}deserialize(e,t){const i=G7(e)?U7(e):e;return this.universalMarshaller.deserialize(i,t)}serialize(e,t){const i=this.universalMarshaller.serialize(e,t);return typeof ReadableStream=="function"?k7(i):i}}const G7=n=>typeof ReadableStream=="function"&&n instanceof ReadableStream,H7=n=>new z7(n);async function X7(n,e,t=1024*1024){const i=n.size;let s=0;for(;s<i;){const a=n.slice(s,Math.min(i,s+t));e(new Uint8Array(await a.arrayBuffer())),s+=a.size}}const j7=async function(e,t){const i=new e;return await X7(t,s=>{i.update(s)}),i.digest()},Y7=n=>()=>Promise.reject(n),Or=64,V7=16,q7=[1732584193,4023233417,2562383102,271733878];class $7{constructor(){this.reset()}update(e){if(K7(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const t=Z7(e);let i=0,{byteLength:s}=t;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,t[i++]),s--,this.bufferLength===Or&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:t,bufferLength:i,bytesHashed:s}=this,a=s*8;if(t.setUint8(this.bufferLength++,128),i%Or>=Or-8){for(let l=this.bufferLength;l<Or;l++)t.setUint8(l,0);this.hashBuffer(),this.bufferLength=0}for(let l=this.bufferLength;l<Or-8;l++)t.setUint8(l,0);t.setUint32(Or-8,a>>>0,!0),t.setUint32(Or-4,Math.floor(a/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(V7));for(let t=0;t<4;t++)e.setUint32(t*4,this.state[t],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:t}=this;let i=t[0],s=t[1],a=t[2],l=t[3];i=On(i,s,a,l,e.getUint32(0,!0),7,3614090360),l=On(l,i,s,a,e.getUint32(4,!0),12,3905402710),a=On(a,l,i,s,e.getUint32(8,!0),17,606105819),s=On(s,a,l,i,e.getUint32(12,!0),22,3250441966),i=On(i,s,a,l,e.getUint32(16,!0),7,4118548399),l=On(l,i,s,a,e.getUint32(20,!0),12,1200080426),a=On(a,l,i,s,e.getUint32(24,!0),17,2821735955),s=On(s,a,l,i,e.getUint32(28,!0),22,4249261313),i=On(i,s,a,l,e.getUint32(32,!0),7,1770035416),l=On(l,i,s,a,e.getUint32(36,!0),12,2336552879),a=On(a,l,i,s,e.getUint32(40,!0),17,4294925233),s=On(s,a,l,i,e.getUint32(44,!0),22,2304563134),i=On(i,s,a,l,e.getUint32(48,!0),7,1804603682),l=On(l,i,s,a,e.getUint32(52,!0),12,4254626195),a=On(a,l,i,s,e.getUint32(56,!0),17,2792965006),s=On(s,a,l,i,e.getUint32(60,!0),22,1236535329),i=Ln(i,s,a,l,e.getUint32(4,!0),5,4129170786),l=Ln(l,i,s,a,e.getUint32(24,!0),9,3225465664),a=Ln(a,l,i,s,e.getUint32(44,!0),14,643717713),s=Ln(s,a,l,i,e.getUint32(0,!0),20,3921069994),i=Ln(i,s,a,l,e.getUint32(20,!0),5,3593408605),l=Ln(l,i,s,a,e.getUint32(40,!0),9,38016083),a=Ln(a,l,i,s,e.getUint32(60,!0),14,3634488961),s=Ln(s,a,l,i,e.getUint32(16,!0),20,3889429448),i=Ln(i,s,a,l,e.getUint32(36,!0),5,568446438),l=Ln(l,i,s,a,e.getUint32(56,!0),9,3275163606),a=Ln(a,l,i,s,e.getUint32(12,!0),14,4107603335),s=Ln(s,a,l,i,e.getUint32(32,!0),20,1163531501),i=Ln(i,s,a,l,e.getUint32(52,!0),5,2850285829),l=Ln(l,i,s,a,e.getUint32(8,!0),9,4243563512),a=Ln(a,l,i,s,e.getUint32(28,!0),14,1735328473),s=Ln(s,a,l,i,e.getUint32(48,!0),20,2368359562),i=Nn(i,s,a,l,e.getUint32(20,!0),4,4294588738),l=Nn(l,i,s,a,e.getUint32(32,!0),11,2272392833),a=Nn(a,l,i,s,e.getUint32(44,!0),16,1839030562),s=Nn(s,a,l,i,e.getUint32(56,!0),23,4259657740),i=Nn(i,s,a,l,e.getUint32(4,!0),4,2763975236),l=Nn(l,i,s,a,e.getUint32(16,!0),11,1272893353),a=Nn(a,l,i,s,e.getUint32(28,!0),16,4139469664),s=Nn(s,a,l,i,e.getUint32(40,!0),23,3200236656),i=Nn(i,s,a,l,e.getUint32(52,!0),4,681279174),l=Nn(l,i,s,a,e.getUint32(0,!0),11,3936430074),a=Nn(a,l,i,s,e.getUint32(12,!0),16,3572445317),s=Nn(s,a,l,i,e.getUint32(24,!0),23,76029189),i=Nn(i,s,a,l,e.getUint32(36,!0),4,3654602809),l=Nn(l,i,s,a,e.getUint32(48,!0),11,3873151461),a=Nn(a,l,i,s,e.getUint32(60,!0),16,530742520),s=Nn(s,a,l,i,e.getUint32(8,!0),23,3299628645),i=Bn(i,s,a,l,e.getUint32(0,!0),6,4096336452),l=Bn(l,i,s,a,e.getUint32(28,!0),10,1126891415),a=Bn(a,l,i,s,e.getUint32(56,!0),15,2878612391),s=Bn(s,a,l,i,e.getUint32(20,!0),21,4237533241),i=Bn(i,s,a,l,e.getUint32(48,!0),6,1700485571),l=Bn(l,i,s,a,e.getUint32(12,!0),10,2399980690),a=Bn(a,l,i,s,e.getUint32(40,!0),15,4293915773),s=Bn(s,a,l,i,e.getUint32(4,!0),21,2240044497),i=Bn(i,s,a,l,e.getUint32(32,!0),6,1873313359),l=Bn(l,i,s,a,e.getUint32(60,!0),10,4264355552),a=Bn(a,l,i,s,e.getUint32(24,!0),15,2734768916),s=Bn(s,a,l,i,e.getUint32(52,!0),21,1309151649),i=Bn(i,s,a,l,e.getUint32(16,!0),6,4149444226),l=Bn(l,i,s,a,e.getUint32(44,!0),10,3174756917),a=Bn(a,l,i,s,e.getUint32(8,!0),15,718787259),s=Bn(s,a,l,i,e.getUint32(36,!0),21,3951481745),t[0]=i+t[0]&4294967295,t[1]=s+t[1]&4294967295,t[2]=a+t[2]&4294967295,t[3]=l+t[3]&4294967295}reset(){this.state=Uint32Array.from(q7),this.buffer=new DataView(new ArrayBuffer(Or)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function tg(n,e,t,i,s,a){return e=(e+n&4294967295)+(i+a&4294967295)&4294967295,(e<<s|e>>>32-s)+t&4294967295}function On(n,e,t,i,s,a,l){return tg(e&t|~e&i,n,e,s,a,l)}function Ln(n,e,t,i,s,a,l){return tg(e&i|t&~i,n,e,s,a,l)}function Nn(n,e,t,i,s,a,l){return tg(e^t^i,n,e,s,a,l)}function Bn(n,e,t,i,s,a,l){return tg(t^(e|~i),n,e,s,a,l)}function K7(n){return typeof n=="string"?n.length===0:n.byteLength===0}function Z7(n){return typeof n=="string"?ja(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}const W7=n=>({apiVersion:"2006-03-01",base64Decoder:n?.base64Decoder??H_,base64Encoder:n?.base64Encoder??Zd,disableHostPrefix:n?.disableHostPrefix??!1,endpointProvider:n?.endpointProvider??N2,extensions:n?.extensions??[],getAwsChunkedEncodingStream:n?.getAwsChunkedEncodingStream??jU,httpAuthSchemeProvider:n?.httpAuthSchemeProvider??Cz,httpAuthSchemes:n?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new bC},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new xU}],logger:n?.logger??new XC,sdkStreamMixin:n?.sdkStreamMixin??QU,serviceId:n?.serviceId??"S3",signerConstructor:n?.signerConstructor??y2,signingEscapePath:n?.signingEscapePath??!1,urlParser:n?.urlParser??_d,useArnRegion:n?.useArnRegion??void 0,utf8Decoder:n?.utf8Decoder??ja,utf8Encoder:n?.utf8Encoder??X_}),Q7=["in-region","cross-region","mobile","standard","legacy"],J7=({defaultsMode:n}={})=>M4(async()=>{const e=typeof n=="function"?await n():n;switch(e?.toLowerCase()){case"auto":return Promise.resolve(e9()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Q7.join(", ")}, got ${e}`)}}),e9=()=>{const e=(typeof window<"u"&&window?.navigator?.userAgent?eM.parse(window.navigator.userAgent):void 0)?.platform?.type;return e==="tablet"||e==="mobile"},t9=n=>{const e=J7(n),t=()=>e().then(hk),i=W7(n);return{...i,...n,runtime:"browser",defaultsMode:e,bodyLengthChecker:n?.bodyLengthChecker??rk,credentialDefaultProvider:n?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:n?.defaultUserAgentProvider??y7({serviceId:i.serviceId,clientVersion:$H.version}),eventStreamSerdeProvider:n?.eventStreamSerdeProvider??H7,maxAttempts:n?.maxAttempts??Ed,md5:n?.md5??$7,region:n?.region??Y7("Region is missing"),requestHandler:j_.create(n?.requestHandler??t),retryMode:n?.retryMode??(async()=>(await t()).retryMode||O5),sha1:n?.sha1??n7,sha256:n?.sha256??h7,streamCollector:n?.streamCollector??RC,streamHasher:n?.streamHasher??j7,useDualstackEndpoint:n?.useDualstackEndpoint??(()=>Promise.resolve(g5)),useFipsEndpoint:n?.useFipsEndpoint??(()=>Promise.resolve(m5))}},n9=n=>({setRegion(e){n.region=e},region(){return n.region}}),i9=n=>({region:n.region()}),s9=n=>{const e=n.httpAuthSchemes;let t=n.httpAuthSchemeProvider,i=n.credentials;return{setHttpAuthScheme(s){const a=e.findIndex(l=>l.schemeId===s.schemeId);a===-1?e.push(s):e.splice(a,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){t=s},httpAuthSchemeProvider(){return t},setCredentials(s){i=s},credentials(){return i}}},r9=n=>({httpAuthSchemes:n.httpAuthSchemes(),httpAuthSchemeProvider:n.httpAuthSchemeProvider(),credentials:n.credentials()}),a9=(n,e)=>{const t=Object.assign(n9(n),pk(n),uU(n),s9(n));return e.forEach(i=>i.configure(t)),Object.assign(n,i9(t),yk(t),hU(t),r9(t))};class o9 extends ak{config;constructor(...[e]){const t=t9(e||{});super(t),this.initConfig=t;const i=Dz(t),s=I8(i),a=k6(s),l=tz(a),u=p5(l),f=u,d=I5(f),g=y5(d),p=Mz(g),_=y8(p,{session:[()=>this,VH]}),E=a9(_,e?.extensions||[]);this.config=E,this.middlewareStack.use(d5(this.config)),this.middlewareStack.use(lz(this.config)),this.middlewareStack.use(x5(this.config)),this.middlewareStack.use(H6(this.config)),this.middlewareStack.use(Y6(this.config)),this.middlewareStack.use(Z6(this.config)),this.middlewareStack.use(wU(this.config,{httpAuthSchemeParametersProvider:wz,identityProviderConfigProvider:async x=>new v4({"aws.auth#sigv4":x.credentials,"aws.auth#sigv4a":x.credentials})})),this.middlewareStack.use(OU(this.config)),this.middlewareStack.use(C8(this.config)),this.middlewareStack.use(mU(this.config)),this.middlewareStack.use(t8(this.config)),this.middlewareStack.use(h8(this.config)),this.middlewareStack.use(p8(this.config))}destroy(){super.destroy()}}function l9(n){return e=>async t=>{const i={...t.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const a of s){const l=i[a.target];if(l){let u;typeof l=="string"?h9(l,n)?u=n.base64Decoder(l):(u=n.utf8Decoder(l),i[a.target]=n.base64Encoder(u)):(u=ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):new Uint8Array(l),i[a.target]=n.base64Encoder(u));const f=new n.md5;f.update(u),i[a.hash]=n.base64Encoder(await f.digest())}}return e({...t,input:i})}}const c9={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},u9=n=>({applyToStack:e=>{e.add(l9(n),c9)}});function h9(n,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(n))return!1;try{return e.base64Decoder(n).length===32}catch{return!1}}class f9 extends Qd.classBuilder().ep({...dE,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,t,i,s){return[G_(i,this.serialize,this.deserialize),sE(i,e.getEndpointParameterInstructions()),U6(i,{requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC64NVME","CRC32","CRC32C","SHA256","SHA1"]}),u9(i),s8()]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(Bz,Nz).ser(Fz).de(zz).build(){}class d9 extends Qd.classBuilder().ep({...dE,Bucket:{type:"contextParams",name:"Bucket"},Prefix:{type:"contextParams",name:"Prefix"}}).m(function(e,t,i,s){return[G_(i,this.serialize,this.deserialize),sE(i,e.getEndpointParameterInstructions()),e2(i)]}).s("AmazonS3","ListObjectsV2",{}).n("S3Client","ListObjectsV2Command").f(void 0,void 0).ser(Uz).de(Gz).build(){}const g9="ap-southeast-1",nM="dinamap-les",m9="metadata/",iM=new o9({region:g9,credentials:{accessKeyId:"",secretAccessKey:""},signer:{sign:async n=>n}}),p9=async n=>{const e=new f9({Bucket:nM,Key:n}),i=await(await iM.send(e)).Body.transformToString();return JSON.parse(i)},y9=async()=>{const n=new d9({Bucket:nM,Prefix:m9}),t=(await iM.send(n)).Contents.filter(a=>a.Key.endsWith(".json"));if(t.length===0)throw new Error("No JSON configuration files found in S3.");let i=null,s=null;for(const a of t){const l=await p9(a.Key),u=new Date(l.updatedAt.replace(/'/g,""));(!s||u>s)&&(s=u,i=l)}return i},_9=async n=>{const e=`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(n)}&format=json&limit=1`;try{const i=await(await fetch(e,{method:"GET"})).json();return i&&i.length>0?{lat:parseFloat(i[0].lat),lng:parseFloat(i[0].lon)}:null}catch(t){return console.error("Error fetching coordinates:",t),null}};function E9(){const[n,e]=Vn.useState([]),[t,i]=Vn.useState(!0),[s,a]=Vn.useState(null),[l,u]=Vn.useState(null);Vn.useEffect(()=>{(async()=>{try{const _=await y9();e(_.layers)}catch(_){console.error("Error fetching layer configuration:",_)}finally{i(!1)}})()},[]);const f=p=>{a(p)},d=()=>{a(null)},g=async p=>{if(p.trim()){const _=await _9(p);u(_)}};return t?vt.jsx("div",{children:"Loading..."}):vt.jsxs("div",{className:"App",children:[vt.jsx(aU,{homeLatLng:eU,homeZoom:tU,layers:n,onCoordinateClick:f,clickCoordinates:s,searchCoordinates:l}),vt.jsx(oU,{layers:n,setLayers:e}),vt.jsx(lU,{clickCoordinates:s,onClear:d}),vt.jsx(cU,{onSearch:g})]})}TI.createRoot(document.getElementById("root")).render(vt.jsx(Vn.StrictMode,{children:vt.jsx(E9,{})}));export{T9 as L,b9 as a,RR as g};
