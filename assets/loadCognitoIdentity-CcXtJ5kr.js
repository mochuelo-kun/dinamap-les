import{c as ue,r as ye,n as Y,g as he,E as me,a as ge,b as fe,d as xe,t as Ee,f as Se,p as Pe,N as we,A as ve,e as Ce,h as Ie,i as be,s as Re,S as Ae,D as ze,F as _e,j as De,k as Fe,l as ke,m as $e,o as Oe,q as He,u as Ue,v as Le,w as Ne,x as Te,y as Me,z as Ge,B as qe,C as je,G as Be,H as Ke,I as Ve,J as Je,K as We,L as Xe,M as Ye,O as Qe,P as Ze,Q as et,R as tt,T as nt,U as ot,V as st,W as it,X as b,Y as rt,Z as at,_ as y,$ as Q,a0 as I,a1 as ct,a2 as dt,a3 as lt,a4 as Z,a5 as ee,a6 as te}from"./index-Cz9CwUed.js";class pt{async sign(t,n,o){return t}}const d=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(d);if(typeof e=="object"){const t={};for(const n of Object.keys(e))e[n]!=null&&(t[n]=d(e[n]));return t}return e},R=(e,t)=>ue(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(o){throw o?.name==="SyntaxError"&&Object.defineProperty(o,"$responseBodyText",{value:n}),o}return{}}),ut=async(e,t)=>{const n=await R(e,t);return n.message=n.message??n.Message,n},yt=(e,t)=>{const n=(l,i)=>Object.keys(l).find(x=>x.toLowerCase()===i.toLowerCase()),o=l=>{let i=l;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=n(e.headers,"x-amzn-errortype");if(s!==void 0)return o(e.headers[s]);if(t&&typeof t=="object"){const l=n(t,"code");if(l&&t[l]!==void 0)return o(t[l]);if(t.__type!==void 0)return o(t.__type)}},ht=async(e,t,n)=>({operation:he(t).operation,region:await Y(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function mt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function C(e){return{schemeId:"smithy.api#noAuth"}}const gt=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(C());break}case"GetId":{t.push(C());break}case"GetOpenIdToken":{t.push(C());break}case"UnlinkIdentity":{t.push(C());break}default:t.push(mt(e))}return t},ft=e=>{const t=ye(e);return Object.assign(t,{authSchemePreference:Y(e.authSchemePreference??[])})},xt=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),ne={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Et="3.876.0",St={version:Et},oe="required",a="fn",c="argv",f="ref",M=!0,G="isSet",w="booleanEquals",g="error",h="endpoint",m="tree",A="PartitionResult",z="getAttr",S="stringEquals",q={[oe]:!1,type:"String"},j={[oe]:!0,default:!1,type:"Boolean"},B={[f]:"Endpoint"},se={[a]:w,[c]:[{[f]:"UseFIPS"},!0]},ie={[a]:w,[c]:[{[f]:"UseDualStack"},!0]},r={},P={[f]:"Region"},K={[a]:z,[c]:[{[f]:A},"supportsFIPS"]},re={[f]:A},V={[a]:w,[c]:[!0,{[a]:z,[c]:[re,"supportsDualStack"]}]},J=[se],W=[ie],X=[P],Pt={parameters:{Region:q,UseDualStack:j,UseFIPS:j,Endpoint:q},rules:[{conditions:[{[a]:G,[c]:[B]}],rules:[{conditions:J,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:g},{conditions:W,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:g},{endpoint:{url:B,properties:r,headers:r},type:h}],type:m},{conditions:[{[a]:G,[c]:X}],rules:[{conditions:[{[a]:"aws.partition",[c]:X,assign:A}],rules:[{conditions:[se,ie],rules:[{conditions:[{[a]:w,[c]:[M,K]},V],rules:[{conditions:[{[a]:S,[c]:[P,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:r,headers:r},type:h},{conditions:[{[a]:S,[c]:[P,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:r,headers:r},type:h},{conditions:[{[a]:S,[c]:[P,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:r,headers:r},type:h},{conditions:[{[a]:S,[c]:[P,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:r,headers:r},type:h},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:r,headers:r},type:h}],type:m},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:g}],type:m},{conditions:J,rules:[{conditions:[{[a]:w,[c]:[K,M]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:r,headers:r},type:h}],type:m},{error:"FIPS is enabled but this partition does not support FIPS",type:g}],type:m},{conditions:W,rules:[{conditions:[V],rules:[{conditions:[{[a]:S,[c]:["aws",{[a]:z,[c]:[re,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:r,headers:r},type:h},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:r,headers:r},type:h}],type:m},{error:"DualStack is enabled but this partition does not support DualStack",type:g}],type:m},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:r,headers:r},type:h}],type:m}],type:m},{error:"Invalid Configuration: Missing Region",type:g}]},wt=Pt,vt=new me({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ct=(e,t={})=>vt.get(e,()=>ge(wt,{endpointParams:e,logger:t.logger}));xe.aws=fe;const It=e=>({apiVersion:"2014-06-30",base64Decoder:e?.base64Decoder??Ie,base64Encoder:e?.base64Encoder??Ce,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Ct,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??gt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ve},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new pt}],logger:e?.logger??new we,serviceId:e?.serviceId??"Cognito Identity",urlParser:e?.urlParser??Pe,utf8Decoder:e?.utf8Decoder??Se,utf8Encoder:e?.utf8Encoder??Ee}),bt=e=>{const t=be(e),n=()=>t().then(Ue),o=It(e);return{...o,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??$e,credentialDefaultProvider:e?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??ke({serviceId:o.serviceId,clientVersion:St.version}),maxAttempts:e?.maxAttempts??Fe,region:e?.region??De("Region is missing"),requestHandler:_e.create(e?.requestHandler??n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||ze),sha256:e?.sha256??Ae,streamCollector:e?.streamCollector??Re,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(He)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(Oe))}},Rt=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(s){const l=t.findIndex(i=>i.schemeId===s.schemeId);l===-1?t.push(s):t.splice(l,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){o=s},credentials(){return o}}},At=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),zt=(e,t)=>{const n=Object.assign(Le(e),Ne(e),Te(e),Rt(e));return t.forEach(o=>o.configure(n)),Object.assign(e,Me(n),Ge(n),qe(n),At(n))};class Zt extends je{config;constructor(...[t]){const n=bt(t||{});super(n),this.initConfig=n;const o=xt(n),s=Be(o),l=Ke(s),i=Ve(l),x=We(i),E=Je(x),v=ft(E),le=zt(v,t?.extensions||[]);this.config=le,this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Qe(this.config)),this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(et(this.config)),this.middlewareStack.use(tt(this.config)),this.middlewareStack.use(nt(this.config,{httpAuthSchemeParametersProvider:ht,identityProviderConfigProvider:async pe=>new ot({"aws.auth#sigv4":pe.credentials})})),this.middlewareStack.use(st(this.config))}destroy(){super.destroy()}}class p extends it{constructor(t){super(t),Object.setPrototypeOf(this,p.prototype)}}class _ extends p{name="InternalErrorException";$fault="server";constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),Object.setPrototypeOf(this,_.prototype)}}class D extends p{name="InvalidParameterException";$fault="client";constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,D.prototype)}}class F extends p{name="LimitExceededException";$fault="client";constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,F.prototype)}}class k extends p{name="NotAuthorizedException";$fault="client";constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,k.prototype)}}class $ extends p{name="ResourceConflictException";$fault="client";constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,$.prototype)}}class O extends p{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,O.prototype)}}class H extends p{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,H.prototype)}}class U extends p{name="ExternalServiceException";$fault="client";constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),Object.setPrototypeOf(this,U.prototype)}}class L extends p{name="InvalidIdentityPoolConfigurationException";$fault="client";constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),Object.setPrototypeOf(this,L.prototype)}}class N extends p{name="DeveloperUserAlreadyRegisteredException";$fault="client";constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),Object.setPrototypeOf(this,N.prototype)}}class T extends p{name="ConcurrentModificationException";$fault="client";constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),Object.setPrototypeOf(this,T.prototype)}}const _t=e=>({...e,...e.Logins&&{Logins:b}}),Dt=e=>({...e,...e.SecretKey&&{SecretKey:b}}),Ft=e=>({...e,...e.Credentials&&{Credentials:Dt(e.Credentials)}}),kt=e=>({...e,...e.Logins&&{Logins:b}}),$t=async(e,t)=>{const n=de("GetCredentialsForIdentity");let o;return o=JSON.stringify(d(e)),ce(t,n,"/",void 0,o)},Ot=async(e,t)=>{const n=de("GetId");let o;return o=JSON.stringify(d(e)),ce(t,n,"/",void 0,o)},Ht=async(e,t)=>{if(e.statusCode>=300)return ae(e,t);const n=await R(e.body,t);let o={};return o=Xt(n),{$metadata:u(e),...o}},Ut=async(e,t)=>{if(e.statusCode>=300)return ae(e,t);const n=await R(e.body,t);let o={};return o=d(n),{$metadata:u(e),...o}},ae=async(e,t)=>{const n={...e,body:await ut(e.body,t)},o=yt(e,n.body);switch(o){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Mt(n);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await qt(n);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await jt(n);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Bt(n);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Kt(n);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Jt(n);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Vt(n);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Tt(n);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Gt(n);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Nt(n);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Lt(n);default:const s=n.body;return Yt({output:e,parsedBody:s,errorCode:o})}},Lt=async(e,t)=>{const n=e.body,o=d(n),s=new T({$metadata:u(e),...o});return y(s,n)},Nt=async(e,t)=>{const n=e.body,o=d(n),s=new N({$metadata:u(e),...o});return y(s,n)},Tt=async(e,t)=>{const n=e.body,o=d(n),s=new U({$metadata:u(e),...o});return y(s,n)},Mt=async(e,t)=>{const n=e.body,o=d(n),s=new _({$metadata:u(e),...o});return y(s,n)},Gt=async(e,t)=>{const n=e.body,o=d(n),s=new L({$metadata:u(e),...o});return y(s,n)},qt=async(e,t)=>{const n=e.body,o=d(n),s=new D({$metadata:u(e),...o});return y(s,n)},jt=async(e,t)=>{const n=e.body,o=d(n),s=new F({$metadata:u(e),...o});return y(s,n)},Bt=async(e,t)=>{const n=e.body,o=d(n),s=new k({$metadata:u(e),...o});return y(s,n)},Kt=async(e,t)=>{const n=e.body,o=d(n),s=new $({$metadata:u(e),...o});return y(s,n)},Vt=async(e,t)=>{const n=e.body,o=d(n),s=new H({$metadata:u(e),...o});return y(s,n)},Jt=async(e,t)=>{const n=e.body,o=d(n),s=new O({$metadata:u(e),...o});return y(s,n)},Wt=(e,t)=>Q(e,{AccessKeyId:I,Expiration:n=>ct(dt(lt(n))),SecretKey:I,SessionToken:I}),Xt=(e,t)=>Q(e,{Credentials:n=>Wt(n),IdentityId:I}),u=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Yt=at(p),ce=async(e,t,n,o,s)=>{const{hostname:l,protocol:i="https",port:x,path:E}=await e.endpoint(),v={protocol:i,hostname:l,port:x,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+n:E+n,headers:t};return s!==void 0&&(v.body=s),new rt(v)};function de(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class en extends Z.classBuilder().ep(ne).m(function(t,n,o,s){return[ee(o,this.serialize,this.deserialize),te(o,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(_t,Ft).ser($t).de(Ht).build(){}class tn extends Z.classBuilder().ep(ne).m(function(t,n,o,s){return[ee(o,this.serialize,this.deserialize),te(o,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(kt,void 0).ser(Ot).de(Ut).build(){}export{Zt as CognitoIdentityClient,en as GetCredentialsForIdentityCommand,tn as GetIdCommand};
